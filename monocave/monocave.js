/*
 howler.js v2.1.1 | (c) 2013-2018, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(L){var q=0;return function(){return q<L.length?{done:!1,value:L[q++]}:{done:!0}}};$jscomp.arrayIterator=function(L){return{next:$jscomp.arrayIteratorImpl(L)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(L,q,v){L!=Array.prototype&&L!=Object.prototype&&(L[q]=v.value)};$jscomp.getGlobal=function(L){L=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,L];for(var q=0;q<L.length;++q){var v=L[q];if(v&&v.Math==Math)return v}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(L,q){this.$jscomp$symbol$id_=L;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:q})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function L(v){if(this instanceof L)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(v||"")+"_"+q++,v)}var q=0;return L}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var L=$jscomp.global.Symbol.iterator;L||(L=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[L]&&$jscomp.defineProperty(Array.prototype,L,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var L=$jscomp.global.Symbol.asyncIterator;L||(L=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(L){$jscomp.initSymbolIterator();L={next:L};L[$jscomp.global.Symbol.iterator]=function(){return this};return L};
$jscomp.iteratorFromArray=function(L,q){$jscomp.initSymbolIterator();L instanceof String&&(L+="");var v=0,y={next:function(){if(v<L.length){var B=v++;return{value:q(B,L[B]),done:!1}}y.next=function(){return{done:!0,value:void 0}};return y.next()}};y[Symbol.iterator]=function(){return y};return y};
$jscomp.polyfill=function(L,q,v,y){if(q){v=$jscomp.global;L=L.split(".");for(y=0;y<L.length-1;y++){var B=L[y];B in v||(v[B]={});v=v[B]}L=L[L.length-1];y=v[L];q=q(y);q!=y&&null!=q&&$jscomp.defineProperty(v,L,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Array.prototype.values",function(L){return L?L:function(){return $jscomp.iteratorFromArray(this,function(q,v){return v})}},"es8","es3");
$jscomp.checkStringArgs=function(L,q,v){if(null==L)throw new TypeError("The 'this' value for String.prototype."+v+" must not be null or undefined");if(q instanceof RegExp)throw new TypeError("First argument to String.prototype."+v+" must not be a regular expression");return L+""};
$jscomp.polyfill("String.prototype.startsWith",function(L){return L?L:function(q,v){var y=$jscomp.checkStringArgs(this,q,"startsWith");q+="";var B=y.length,E=q.length;v=Math.max(0,Math.min(v|0,y.length));for(var x=0;x<E&&v<B;)if(y[v++]!=q[x++])return!1;return x>=E}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(L){return L?L:function(){return $jscomp.iteratorFromArray(this,function(q){return q})}},"es6","es3");
$jscomp.polyfill("String.fromCodePoint",function(L){return L?L:function(q){for(var v="",y=0;y<arguments.length;y++){var B=Number(arguments[y]);if(0>B||1114111<B||B!==Math.floor(B))throw new RangeError("invalid_code_point "+B);65535>=B?v+=String.fromCharCode(B):(B-=65536,v+=String.fromCharCode(B>>>10&1023|55296),v+=String.fromCharCode(B&1023|56320))}return v}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(L){return L?L:function(q,v){var y=$jscomp.checkStringArgs(this,q,"endsWith");q+="";void 0===v&&(v=y.length);v=Math.max(0,Math.min(v|0,y.length));for(var B=q.length;0<B&&0<v;)if(y[--v]!=q[--B])return!1;return 0>=B}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(L){return L?L:function(q,v,y){var B=this.length||0;0>v&&(v=Math.max(0,B+v));if(null==y||y>B)y=B;y=Number(y);0>y&&(y=Math.max(0,B+y));for(v=Number(v||0);v<y;v++)this[v]=q;return this}},"es6","es3");
(function(L,q){L.lime=L.lime||{};L.lime.$scripts=L.lime.$scripts||{};L.lime.$scripts.monocave=function(q,y){(function(q,v){function x(a,b){a=Object.create(a);for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function y(a){return a instanceof Array?new Lc(a):a.iterator()}function u(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=v.$haxeUID++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__]=
c);return c}q.echo=q.echo||{};q.lime=q.lime||{};var l={},e=function(){return pa.__string_rec(this,"")},z=z||{},h,U=function(){};l["lime.app.IModule"]=U;U.__name__="lime.app.IModule";U.__isInterface__=!0;var fa=function(){this.onExit=new vc};l["lime.app.Module"]=fa;fa.__name__="lime.app.Module";fa.__interfaces__=[U];fa.prototype={__class__:fa};var P=function(a){this.gameDeviceCache=new eb;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;Rc.init();this.accelerometer=
Zb.registerSensor(Cf.ACCELEROMETER,0)};l["lime._internal.backend.html5.HTML5Application"]=P;P.__name__="lime._internal.backend.html5.HTML5Application";P.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 12:return 1073741980;case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 19:return 1073741896;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;
case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 41:return 1073741943;case 43:return 1073741940;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 92:return 1073742055;case 93:return 1073742055;case 95:return 1073742106;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;
case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 108:return 1073741923;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;
case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 145:return 1073741895;case 160:return 94;case 161:return 33;case 163:return 35;case 164:return 36;case 166:return 1073742094;
case 167:return 1073742095;case 168:return 1073742097;case 169:return 41;case 170:return 42;case 171:return 96;case 172:return 1073741898;case 173:return 45;case 174:return 1073741953;case 175:return 1073741952;case 176:return 1073742082;case 177:return 1073742083;case 178:return 1073742084;case 179:return 1073742085;case 180:return 1073742089;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;
case 190:return 46;case 191:return 47;case 192:return 96;case 193:return 63;case 194:return 1073741923;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 223:return 96;case 224:return 1073742051;case 226:return 92}return a},exec:function(){window.addEventListener("keydown",u(this,this.handleKeyEvent),!1);window.addEventListener("keyup",u(this,this.handleKeyEvent),!1);window.addEventListener("focus",u(this,this.handleWindowEvent),!1);window.addEventListener("blur",u(this,
this.handleWindowEvent),!1);window.addEventListener("resize",u(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",u(this,this.handleWindowEvent),!1);window.addEventListener("devicemotion",u(this,this.handleSensorEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(a,b,c){return!1});CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(a,b,c){return!1});
0=="performance"in window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-a}}for(var b=0,c=["ms","moz","webkit","o"],f=0;f<c.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[c[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[f]+"CancelAnimationFrame"]||window[c[f]+"CancelRequestAnimationFrame"];
window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var f=(new Date).getTime(),d=Math.max(0,16-(f-b));c=window.setTimeout(function(){a(f+d)},d);b=f+d;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){a=0;for(var b=this.parent.__windows;a<b.length;){var c=
b[a];++a;c.__backend.updateSize()}this.updateGameDevices();this.currentUpdate=(new Date).getTime();if(this.currentUpdate>=this.nextUpdate){this.deltaTime=this.currentUpdate-this.lastUpdate;a=0;for(b=this.parent.__windows;a<b.length;)c=b[a],++a,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=c.context&&c.onRender.dispatch(c.context);this.nextUpdate=0>this.framePeriod?this.currentUpdate:this.currentUpdate-this.currentUpdate%this.framePeriod+this.framePeriod;this.lastUpdate=this.currentUpdate}window.requestAnimationFrame(u(this,
this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__window){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__window.onKeyDown.dispatch(b,c),this.parent.__window.onKeyDown.canceled&&a.cancelable&&a.preventDefault()):(this.parent.__window.onKeyUp.dispatch(b,c),this.parent.__window.onKeyUp.canceled&&a.cancelable&&a.preventDefault())}},handleSensorEvent:function(a){this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x,
a.accelerationIncludingGravity.y,a.accelerationIncludingGravity.z)},handleWindowEvent:function(a){if(null!=this.parent.__window)switch(a.type){case "blur":this.hidden||(this.parent.__window.onFocusOut.dispatch(),this.parent.__window.onDeactivate.dispatch(),this.hidden=!0);break;case "focus":this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1);break;case "resize":this.parent.__window.__backend.handleResizeEvent(a);break;case "visibilitychange":window.document.hidden?
this.hidden||(this.parent.__window.onFocusOut.dispatch(),this.parent.__window.onDeactivate.dispatch(),this.hidden=!0):this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1)}},updateGameDevices:function(){var a=bb.__getDeviceData();if(null!=a)for(var b,c,f,d,g,m=0,k=a.length;m<k;)if(b=m++,d=a[b],null!=d){if(!this.gameDeviceCache.h.hasOwnProperty(b)){g=new re;g.id=b;g.connected=d.connected;c=0;for(f=d.buttons.length;c<f;){var O=c++;g.buttons.push(d.buttons[O].value)}c=
0;for(f=d.axes.length;c<f;)O=c++,g.axes.push(d.axes[O]);"standard"==d.mapping&&(g.isGamepad=!0);this.gameDeviceCache.h[b]=g;d.connected&&(bb.__connect(b),g.isGamepad&&ib.__connect(b))}g=this.gameDeviceCache.h[b];f=bb.devices.h[b];c=ib.devices.h[b];if(d.connected){for(var n=0,e=d.buttons.length;n<e;){var p=n++;O=d.buttons[p].value;if(O!=g.buttons[p]){if(6==p)f.onAxisMove.dispatch(d.axes.length,O),null!=c&&c.onAxisMove.dispatch(4,O);else if(7==p)f.onAxisMove.dispatch(d.axes.length+1,O),null!=c&&c.onAxisMove.dispatch(5,
O);else if(0<O?f.onButtonDown.dispatch(p):f.onButtonUp.dispatch(p),null!=c){switch(p){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<O?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}g.buttons[p]=O}}b=0;for(O=d.axes.length;b<O;)n=b++,d.axes[n]!=g.axes[n]&&(f.onAxisMove.dispatch(n,
d.axes[n]),null!=c&&c.onAxisMove.dispatch(n,d.axes[n]),g.axes[n]=d.axes[n])}else g.connected&&(g.connected=!1,bb.__disconnect(b),ib.__disconnect(b))}},__class__:P};var ha=function(){this.onCreateWindow=new se;this.onUpdate=new vc;this.onExit=new vc;null==ha.current&&(ha.current=this);this.meta=new aa;this.modules=[];this.__windowByID=new eb;this.__windows=[];this.__backend=new P(this);this.__registerLimeModule(this);this.__preloader=new te;this.__preloader.onProgress.add(u(this,this.onPreloadProgress));
this.__preloader.onComplete.add(u(this,this.onPreloadComplete))};l["lime.app.Application"]=ha;ha.__name__="lime.app.Application";ha.__super__=fa;ha.prototype=x(fa.prototype,{createWindow:function(a){a=this.__createWindow(a);this.__addWindow(a);return a},exec:function(){ha.current=this;return this.__backend.exec()},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,
b,c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,f){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onModuleExit:function(a){},onMouseDown:function(a,b,c){},onMouseMove:function(a,b){},onMouseMoveRelative:function(a,b){},onMouseUp:function(a,b,c){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,
b){},onRenderContextLost:function(){},onRenderContextRestored:function(a){},onTextEdit:function(a,b,c){},onTextInput:function(a){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(){},onWindowClose:function(){},onWindowCreate:function(){},onWindowDeactivate:function(){},onWindowDropFile:function(a){},onWindowEnter:function(){},onWindowExpose:function(){},onWindowFocusIn:function(){},onWindowFocusOut:function(){},onWindowFullscreen:function(){},
onWindowLeave:function(){},onWindowMove:function(a,b){},onWindowMinimize:function(){},onWindowResize:function(a,b){},onWindowRestore:function(){},render:function(a){},update:function(a){},__addWindow:function(a){if(null!=a){this.__windows.push(a);this.__windowByID.h[a.id]=a;var b=u(this,this.__onWindowClose);a.onClose.add(function(){b(a)},!1,-1E4);null==this.__window&&(this.__window=a,a.onActivate.add(u(this,this.onWindowActivate)),a.onRenderContextLost.add(u(this,this.onRenderContextLost)),a.onRenderContextRestored.add(u(this,
this.onRenderContextRestored)),a.onDeactivate.add(u(this,this.onWindowDeactivate)),a.onDropFile.add(u(this,this.onWindowDropFile)),a.onEnter.add(u(this,this.onWindowEnter)),a.onExpose.add(u(this,this.onWindowExpose)),a.onFocusIn.add(u(this,this.onWindowFocusIn)),a.onFocusOut.add(u(this,this.onWindowFocusOut)),a.onFullscreen.add(u(this,this.onWindowFullscreen)),a.onKeyDown.add(u(this,this.onKeyDown)),a.onKeyUp.add(u(this,this.onKeyUp)),a.onLeave.add(u(this,this.onWindowLeave)),a.onMinimize.add(u(this,
this.onWindowMinimize)),a.onMouseDown.add(u(this,this.onMouseDown)),a.onMouseMove.add(u(this,this.onMouseMove)),a.onMouseMoveRelative.add(u(this,this.onMouseMoveRelative)),a.onMouseUp.add(u(this,this.onMouseUp)),a.onMouseWheel.add(u(this,this.onMouseWheel)),a.onMove.add(u(this,this.onWindowMove)),a.onRender.add(u(this,this.render)),a.onResize.add(u(this,this.onWindowResize)),a.onRestore.add(u(this,this.onWindowRestore)),a.onTextEdit.add(u(this,this.onTextEdit)),a.onTextInput.add(u(this,this.onTextInput)),
this.onWindowCreate());this.onCreateWindow.dispatch(a)}},__createWindow:function(a){a=new ue(this,a);return-1==a.id?null:a},__registerLimeModule:function(a){a.onUpdate.add(u(this,this.update));a.onExit.add(u(this,this.onModuleExit),!1,0);a.onExit.add(u(this,this.__onModuleExit),!1,0);for(a=ib.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}ib.onConnect.add(u(this,this.__onGamepadConnect));for(a=bb.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);bb.onConnect.add(u(this,
this.__onJoystickConnect));xb.onCancel.add(u(this,this.onTouchCancel));xb.onStart.add(u(this,this.onTouchStart));xb.onMove.add(u(this,this.onTouchMove));xb.onEnd.add(u(this,this.onTouchEnd))},__removeWindow:function(a){null!=a&&this.__windowByID.h.hasOwnProperty(a.id)&&(this.__window==a&&(this.__window=null),F.remove(this.__windows,a),this.__windowByID.remove(a.id),a.close(),0==this.__windows.length&&Ob.exit(0))},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=u(this,this.onGamepadAxisMove),
c=function(c,f){b(a,c,f)};a.onAxisMove.add(c);var f=u(this,this.onGamepadButtonDown);c=function(b){f(a,b)};a.onButtonDown.add(c);var d=u(this,this.onGamepadButtonUp);c=function(b){d(a,b)};a.onButtonUp.add(c);var g=u(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){g(a)})},__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=u(this,this.onJoystickAxisMove),c=function(c,f){b(a,c,f)};a.onAxisMove.add(c);var f=u(this,this.onJoystickButtonDown);c=function(b){f(a,b)};a.onButtonDown.add(c);
var d=u(this,this.onJoystickButtonUp);c=function(b){d(a,b)};a.onButtonUp.add(c);var g=u(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){g(a)});var m=u(this,this.onJoystickHatMove);c=function(b,c){m(a,b,c)};a.onHatMove.add(c);var k=u(this,this.onJoystickTrackballMove);c=function(b,c,f){k(a,b,c,f)};a.onTrackballMove.add(c)},__onModuleExit:function(a){this.__backend.exit()},__onWindowClose:function(a){if(this.__window==a)this.onWindowClose();this.__removeWindow(a)},__class__:ha});var B=
function(){};l.ApplicationMain=B;B.__name__="ApplicationMain";B.main=function(){Ob.__registerEntryPoint("monocave",B.create)};B.create=function(a){S.init(a);var b=new Ha;b.meta.h.build="1";b.meta.h.company="ob";b.meta.h.file="monocave";b.meta.h.name="tyke";b.meta.h.packageName="tyke";b.meta.h.version="0.0.1";var c={allowHighDPI:!1,alwaysOnTop:!1,borderless:!1,element:null,frameRate:60,height:496,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,title:"tyke",width:800,x:null,y:null,context:{antialiasing:0,
background:16777215,colorDepth:32,depth:!0,hardware:!0,stencil:!1,type:null,vsync:!0}};if(null==b.__window&&null!=a)for(var f=0,d=ma.fields(a);f<d.length;){var g=d[f];++f;Object.prototype.hasOwnProperty.call(c,g)?c[g]=ma.field(a,g):Object.prototype.hasOwnProperty.call(c.context,g)&&(c.context[g]=ma.field(a,g))}b.createWindow(c);f=0;for(d=S.preloadLibraries;f<d.length;)a=d[f],++f,b.__preloader.addLibrary(a);f=0;for(d=S.preloadLibraryNames;f<d.length;)a=d[f],++f,b.__preloader.addLibraryName(a);b.__preloader.load();
B.start(b)};B.start=function(a){a.exec()};var E=function(){};l["ob.gum.ILoop"]=E;E.__name__="ob.gum.ILoop";E.__isInterface__=!0;E.prototype={__class__:E};var L=function(){};l["ob.gum.backends.PeoteViewLoop"]=L;L.__name__="ob.gum.backends.PeoteViewLoop";L.__interfaces__=[E];L.prototype={onInit:function(a){this.gum=a;this.peoteView=new ve(a.window);this.w=null==a.config.displayWidth?a.window.__width:a.config.displayWidth;this.h=null==a.config.displayHeight?a.window.__height:a.config.displayHeight;this.ratio=
this.w/this.h;this.display=new zd(0,0,a.window.__width,a.window.__height,255);this.peoteView.addDisplay(this.display);this.peoteView.start();this.setZoom()},setZoom:function(){var a=this.display,b=this.gum.window.__width/this.w|0;a.xz=a.zoom*b;if(V.isUBO){var c=a.uniformBuffer,f=a.gl;c.uniformBytes.b_UFloat32[2]=a.xz;f.bindBuffer(f.UNIFORM_BUFFER,c.uniformBuffer);f.bufferSubData(f.UNIFORM_BUFFER,8,c.xZoomBufferPointer);f.bindBuffer(f.UNIFORM_BUFFER,null);c=a.uniformBufferFB;f=a.gl;c.uniformBytes.b_UFloat32[2]=
a.xz;f.bindBuffer(f.UNIFORM_BUFFER,c.uniformBuffer);f.bufferSubData(f.UNIFORM_BUFFER,8,c.xZoomBufferPointer);f.bindBuffer(f.UNIFORM_BUFFER,null)}a.xZoom=b;a=this.display;b=this.gum.window.__height/this.h|0;a.yz=a.zoom*b;V.isUBO&&(c=a.uniformBuffer,f=a.gl,c.uniformBytes.b_UFloat32[3]=a.yz,f.bindBuffer(f.UNIFORM_BUFFER,c.uniformBuffer),f.bufferSubData(f.UNIFORM_BUFFER,12,c.yZoomBufferPointer),f.bindBuffer(f.UNIFORM_BUFFER,null),c=a.uniformBufferFB,f=a.gl,c.uniformBytes.b_UFloat32[3]=a.yz,f.bindBuffer(f.UNIFORM_BUFFER,
c.uniformBuffer),f.bufferSubData(f.UNIFORM_BUFFER,12,c.yZoomBufferPointer),f.bindBuffer(f.UNIFORM_BUFFER,null));a.yZoom=b;this.display.width=this.gum.window.__width;this.display.height=this.gum.window.__height},onUpdate:function(a){},onTick:function(a){return!1},onDraw:function(a){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onMouseMove:function(a,b){},onMouseDown:function(a,b,c){},onMouseUp:function(a,b,c){},onMouseScroll:function(a,b,c){},onWindowResize:function(a,b){this.peoteView.resize(a,
b);this.setZoom()},getFrameBufferDisplay:function(a,b,c,f,d){a=new zd(a,b,c,f);this.peoteView.addDisplay(a);this.peoteView.renderToTexture(a,0);this.peoteView.addFramebufferDisplay(a);c=new cd(c,f);c.clearOnRenderInto=!d;a.setFramebuffer(c);this.peoteView.removeDisplay(a);return new we(c,a)},__class__:L};var ra=function(a){this.alwaysDraw=!1;this.onInitComplete=function(){throw D.thrown("You must set onInitComplete function!");};this.assets=a;this.keyboard=new xe([])};l["tyke.PhysicalStageLoop"]=
ra;ra.__name__="tyke.PhysicalStageLoop";ra.__super__=L;ra.prototype=x(L.prototype,{onInit:function(a){var b=this;L.prototype.onInit.call(this,a);this.assets.Preload(function(){b.initWorldAndStage();b.onInitComplete()})},initWorldAndStage:function(){this.stage=new ye(this.display,this);this.world=da.start({width:this.display.width,height:this.display.height,gravity_y:100,iterations:2})},onTick:function(a){return this.alwaysDraw?!0:!1},onUpdate:function(a){da.step(this.world,a/1E3)},onDraw:function(a){this.stage.updateGraphicsBuffers()},
onKeyDown:function(a,b){this.keyboard.handle(a,this)},__class__:ra});var Y=function(a){ra.call(this,a);this.onInitComplete=u(this,this.begin)};l.CaveCat=Y;Y.__name__="CaveCat";Y.__super__=ra;Y.prototype=x(ra.prototype,{begin:function(){var a=new I(this.gum.window);this.caves=new la(this.stage,this.assets,this.world,a);this.alwaysDraw=!0;this.gum.toggleUpdate(!0)},onTick:function(a){this.caves.onTick();return ra.prototype.onTick.call(this,a)},__class__:Y});var la=function(a,b,c,f){this.visibleHeight=
this.camStopAfter=100;this.tilePixelSize=16;var d=this;this.stage=a;this.world=c;this.controller=f;var g=b.imageCache[1],m=a.createSpriteRendererLayer("monocave",b.imageCache[0],this.tilePixelSize,!1,!1);b=a.createShapeRenderLayer("lightshapes",!0,!0);var k=a.createShapeRenderLayer("echoDebugRender"),O=new dd,n=O.levels[0];n.load();var e=ma.field(n,"l_Platforms");n=O.levels[0];n.load();var p=ma.field(n,"l_CollisionMap");n=O.levels[0];n.load();O=ma.field(n,"l_LightingMap");rf.renderLayer(e,function(a,
b,c){for(var f=0;f<a.length;){var g=a[f];++f;m.makeSprite(b*d.tilePixelSize,c*d.tilePixelSize,d.tilePixelSize,g.tileId)}});e=0;for(p=ze.bodiesFromIntGrid(p);e<p.length;){n=p[e];++e;c.add(n);var h=n.shapes[0].get_right()-n.shapes[0].get_left()|0,r=n.shapes[0].get_bottom()-n.shapes[0].get_top()|0,t=-855703297;t=t&-256|W.DebugAlphaLevel;k.makeShape(n.transform.local_x|0,n.transform.local_y|0,h,r,ed.RECT,t)}var l=[];e=0;for(p=ze.bodiesFromIntGrid(O);e<p.length;)n=p[e],++e,h=10,r=16,t=16777215,t=t&-256|
0,n.shapes[0].solid=!1,n.data.shape=b.makeShape(n.transform.local_x|0,(n.transform.local_y|0)-5,h,r,ed.CIRCLE,t),c.add(n),l.push(n);this.camera=new Ae(function(b,c){a.setScroll(b|0,c|0)});this.initCat(g,k,b);c.add(this.camera.body);da.listen(c);da.listen(c,wc.Left(this.cat.body),wc.Right(l),{enter:function(a,b,c){null!=b.data.shape&&(a=b.data.shape,0==(a.color&255)&&(a.color=a.color&-256|100,d.cat.pause()))}});f.registerPlayer(this.cat);this.initLightingShader()};l.Caves=la;la.__name__="Caves";la.prototype=
{onTick:function(){this.cat.onTick(1);this.cat.body.transform.local_y>this.visibleHeight&&0==this.camera.body.velocity.y&&(this.visibleHeight+=120,this.camera.body.velocity.y=-45);if(-1*this.camera.body.transform.local_y>this.camStopAfter)this.camStopAfter+=this.camStopAfter,this.camera.body.velocity.y=0;else if(640<this.cat.body.transform.local_y){var a=this.camera.body,b=a.transform;b.dirty||b.set_dirty();b.local_y=0;if(null!=a.on_move)a.on_move(a.transform.local_x,a.transform.local_y);a=this.cat.body;
b=a.transform;b.dirty||b.set_dirty();b.local_x=74;if(null!=a.on_move)a.on_move(a.transform.local_x,a.transform.local_y);a=this.cat.body;b=a.transform;b.dirty||b.set_dirty();b.local_y=0;if(null!=a.on_move)a.on_move(a.transform.local_x,a.transform.local_y);this.camStopAfter=this.visibleHeight=100;this.camera.body.velocity.y=0}},initCat:function(a,b,c){a=this.stage.createSpriteRendererLayer("catsprites",a,32,!1,!0).makeSprite(74,10,32,0);a.shakeDistanceY=0;a.shakeDistanceX=2;var f=new gb({mass:1,x:a.x,
y:a.y,max_velocity_x:40,max_velocity_y:180,max_rotational_velocity:0,shape:{type:0,width:8,height:8,solid:!0}});b=b.makeShape(f.transform.local_x|0,f.transform.local_y|0,8,8,ed.RECT,-16711936|W.DebugAlphaLevel);var d=new Be(8);d.defineFrames(0,0,0,4);d.defineFrames(1,1,0,4);d.defineFrames(2,2,0,4);d.defineFrames(3,3,0,4);d.defineFrames(4,4,0,8);d.defineFrames(5,5,0,8);d.defineFrames(6,6,0,4);d.defineFrames(7,7,0,6);d.defineFrames(8,8,0,7);d.defineFrames(9,9,0,8);d.setAnimation(0);c=c.makeShape(a.x|
0,a.y|0,30,30,ed.CIRCLE,-1);this.cat=new Ka(32,8,a,f,b,c,d);f.sprite=a;this.world.add(f)},initLightingShader:function(){this.stage.program.addTexture(this.stage.getLayer("lightshapes").frameBuffer.texture,"lights");this.stage.program.addTexture(this.stage.getLayer("catsprites").frameBuffer.texture,"entities");this.stage.program.addTexture(this.stage.getLayer("monocave").frameBuffer.texture,"paintable");this.stage.globalFilter("globalCompose(globalFramebuffer_ID, entities_ID, lights_ID, paintable_ID)",
"\n\t\t\t\n\t\t\tvec3 platformDark = vec3(0.033, 0.025, 0.015);\n\t\t\tvec3 darkness = vec3(0.06);\n\t\t\tvec4 fragColor = vec4(1.0, 0.0, 0.0, 1.0);\n\n\t\t\tvec4 globalCompose(int sumID, int entitiesID, int lightsID, int paintableID )\n\t\t\t{\n\t\t\t\tvec4 catColor = getTextureColor(entitiesID, vTexCoord);\n\t\t\t\t\n\t\t\t\tif(catColor.a == 0.0){\n\t\t\t\t\t// if alpha on cat 0 is then we are drawing the background\n\n\t\t\t\t\tvec4 platformColor = getTextureColor(paintableID, vTexCoord);\n\t\t\t\t\tvec4 lightColor = getTextureColor(lightsID, vTexCoord);\n\n\t\t\t\t\t// set initial color of level tiles\n\t\t\t\t\tplatformColor.rgb = platformDark;\n\n\t\t\t\t\tif(lightColor.a > 0.0){\n\n\t\t\t\t\t\t// if the light is lit, put the color on the level tiles\n\t\t\t\t\t\tplatformColor.rgb = mix(lightColor.rgb, darkness, 0.8);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\n\t\t\t\t\t\t// else the light is off, make platforms darker\n\t\t\t\t\t\tplatformColor.rgb = mix(lightColor.rgb, platformDark, 0.8);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// set return color from platform\n\t\t\t\t\tfragColor = platformColor;\n\t\t\t\t}\n\t\t\t\telse{\n\n\t\t\t\t\t// else cat alpha was > 0 then set color from cat\n\t\t\t\t\tfragColor = catColor;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn fragColor;\n\t\t\t}\n\t\t")},
__class__:la};var Ka=function(a,b,c,f,d,g,m){this.speed=25;var k=this;this.tileSize=a;this.bodySize=b;this.sprite=c;this.echoDebugRender=d;this.light=g;this.defaultLightSize=g.w;this.body=f;this.animation=m;this.ticksPerAnimationFrame=6;this.animationCountdown=new pd(this.ticksPerAnimationFrame,function(){k.animate()},!0);this.idleCountdown=new pd(60,function(){k.setIdle()},!0);this.canWalk=!0;this.body.on_move=function(a,b){k.sprite.move(a,b-10);k.echoDebugRender.setPosition(a,b);k.light.setPosition(a,
b)}};l.Cat=Ka;Ka.__name__="Cat";Ka.prototype={onTick:function(a){this.idleCountdown.update(a);this.animationCountdown.update(a)},animate:function(){0<this.body.velocity.y&&this.animation.setAnimation(0);this.sprite.tile=this.animation.currentTile();this.animation.advance();6==this.animation.currentAnimation?this.defaultLightSize==this.light.w&&this.resizeLight(16):this.defaultLightSize!=this.light.w&&this.resizeLight(this.defaultLightSize)},resizeLight:function(a){this.light.h=a;this.light.w=a},setIdle:function(){0==
this.body.velocity.x&&0==this.body.velocity.y&&(this.animationCountdown.changeDuration(4*this.ticksPerAnimationFrame|0),this.animation.setAnimation(6),this.animate());this.canWalk=!0},pause:function(){this.idleCountdown.restart();this.animation.setAnimation(2);this.animate();this.body.velocity.x=0;this.canWalk=!1},walk:function(a){this.idleCountdown.restart();this.sprite.flipX(0>a);this.body.velocity.x+=this.speed*a;this.animationCountdown.changeDuration(this.ticksPerAnimationFrame);this.animation.setAnimation(4);
this.animate()},stopWalking:function(){0!=this.body.velocity.x&&(this.idleCountdown.restart(),this.animation.setAnimation(1),this.body.velocity.x=0)},wake:function(){this.idleCountdown.restart();this.animation.setAnimation(0);this.animate()},controlLeft:function(a){this.canWalk&&(a?this.walk(-1):this.stopWalking())},controlRight:function(a){this.canWalk&&(a?this.walk(1):this.stopWalking())},controlUp:function(a){a&&0==this.body.velocity.x&&this.wake()},controlDown:function(a){},controlAction:function(a){ka.trace("v "+
this.body.velocity.x+" a "+this.body.acceleration.x+" x "+this.sprite.x+" y "+this.sprite.y,{fileName:"CaveCat.hx",lineNumber:404,className:"Cat",methodName:"controlAction"})},__class__:Ka};var I=function(a){this.players=[];var b=this,c=dc.fromNestedArrayItem(13),f=new xc("left",null,dc.fromNestedArrayItem(1073741904),c,null);c=dc.fromNestedArrayItem(14);var d=new xc("right",null,dc.fromNestedArrayItem(1073741903),c,null);c=dc.fromNestedArrayItem(11);var g=new xc("up",null,dc.fromNestedArrayItem(1073741906),
c,null);c=dc.fromNestedArrayItem(12);var m=new xc("down",null,dc.fromNestedArrayItem(1073741905),c,null);c=dc.fromNestedArrayItem(1);this.actionConfig=[f,d,g,m,new xc("action",null,dc.fromNestedArrayItem(1073742049),c,null)];c=new aa;c.h.left={action:function(a,c){b.players[c].controlLeft(a)},up:!0};c.h.right={action:function(a,c){b.players[c].controlRight(a)},up:!0};c.h.up={action:function(a,c){b.players[c].controlUp(a)},up:!0};c.h.down={action:function(a,c){b.players[c].controlDown(a)},up:!0};c.h.action=
{action:function(a,c){b.players[c].controlAction(a)},up:!0};this.actionMap=c;var k=new sc(this.actionConfig,this.actionMap);k.setKeyboard();k.onGamepadConnect=function(a){ka.trace("player gamepad connected",{fileName:"CaveCat.hx",lineNumber:495,className:"Controller",methodName:"new"});k.setGamepad(null,a)};k.onGamepadDisconnect=function(a){ka.trace("players "+a+" gamepad disconnected",{fileName:"CaveCat.hx",lineNumber:500,className:"Controller",methodName:"new"})};k.enable(a)};l.Controller=I;I.__name__=
"Controller";I.prototype={registerPlayer:function(a){this.players.push(a)},__class__:I};var W=function(){};l.Globals=W;W.__name__="Globals";var ba=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};l.EReg=ba;ba.__name__="EReg";ba.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw D.thrown("EReg::matched");},matchedRight:function(){if(null==
this.r.m)throw D.thrown("No string matched");var a=this.r.m.index+this.r.m[0].length;return F.substr(this.r.s,a,this.r.s.length-a)},matchedPos:function(){if(null==this.r.m)throw D.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){if(this.r.lastIndex=b,this.r.m=this.r.exec(0>c?a:F.substr(a,0,b+c)),c=null!=this.r.m)this.r.s=a}else if(c=this.match(0>c?F.substr(a,b,null):F.substr(a,b,c)))this.r.s=a,this.r.m.index+=
b;return c},map:function(a,b){for(var c=0,f="";!(c>=a.length);){if(!this.matchSub(a,c)){f+=J.string(F.substr(a,c,null));break}var d=this.matchedPos();f+=J.string(F.substr(a,c,d.pos-c));f+=J.string(b(this));0==d.len?(f+=J.string(F.substr(a,d.pos,1)),c=d.pos+1):c=d.pos+d.len;if(!this.r.global)break}!this.r.global&&0<c&&c<a.length&&(f+=J.string(F.substr(a,c,null)));return f},__class__:ba};var F=function(){};l.HxOverrides=F;F.__name__="HxOverrides";F.strDate=function(a){switch(a.length){case 8:a=a.split(":");
var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw D.thrown("Invalid date format : "+a);}};F.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};F.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};F.remove=
function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};F.now=function(){return Date.now()};var H=function(a,b,c){this.errors=a;this.putils=b;this.errorType=c};l["json2object.reader.BaseParser"]=H;H.__name__="json2object.reader.BaseParser";H.prototype={fromJson:function(a,b){null==b&&(b="");this.putils=new Ce(a);this.errors=[];try{var c=(new De(a,b)).doParse();this.loadJson(c)}catch(f){if(na.lastError=f,a=D.caught(f).unwrap(),a instanceof tc)this.errors.push(Ba.ParserError(a.message,
this.putils.convertPosition(a.pos)));else throw f;}return this.value},loadJson:function(a,b){null==b&&(b="");var c=this.putils.convertPosition(a.pos);a=a.value;switch(a._hx_index){case 0:this.loadJsonString(a.s,c,b);break;case 1:this.loadJsonNumber(a.s,c,b);break;case 2:this.loadJsonObject(a.fields,c,b);break;case 3:this.loadJsonArray(a.values,c,b);break;case 4:this.loadJsonBool(a.b,c,b);break;case 5:this.loadJsonNull(c,b)}return this.value},loadJsonNull:function(a,b){this.onIncorrectType(a,b)},loadJsonString:function(a,
b,c){this.onIncorrectType(b,c)},loadJsonNumber:function(a,b,c){this.onIncorrectType(b,c)},loadJsonUInt:function(a,b,c,f){var d=0;a=ya.trim(a);"-"==a.charAt(0)&&(a=F.substr(a,1,null));var g=ya.startsWith(a,"0x");g&&(a=F.substr(a,2,null));for(var m=g?16:10,k=1,O=a.length-1;0<=O;){var n=g?J.parseInt("0x"+a.charAt(O)):J.parseInt(a.charAt(O));if(null==n)return this.onIncorrectType(b,c),f;d+=k*n;k*=m;--O}return d},loadJsonInt:function(a,b,c,f){if(null!=J.parseInt(a)&&J.parseInt(a)==parseFloat(a))return J.parseInt(a);
this.onIncorrectType(b,c);return f},loadJsonFloat:function(a,b,c,f){if(null!=J.parseInt(a))return parseFloat(a);this.onIncorrectType(b,c);return f},loadJsonBool:function(a,b,c){this.onIncorrectType(b,c)},loadJsonArray:function(a,b,c){this.onIncorrectType(b,c)},loadJsonArrayValue:function(a,b,c){for(var f=[],d=0;d<a.length;){var g=a[d];++d;try{var m=b(g,c)}catch(k){if(na.lastError=k,g=D.caught(k).unwrap(),pa.__instanceof(g,Rb)){if(g!=Rb.ParsingThrow)throw D.thrown(g);continue}else throw k;}f.push(m)}return f},
loadJsonObject:function(a,b,c){this.onIncorrectType(b,c)},loadObjectField:function(a,b,c,f,d,g){try{var m=a(b.value,b.name);this.mapSet(f,c,!0);return m}catch(k){if(na.lastError=k,a=D.caught(k).unwrap(),pa.__instanceof(a,Rb)){if(a!=Rb.ParsingThrow)throw D.thrown(a);}else this.errors.push(Ba.CustomFunctionException(a,g))}return d},objectSetupAssign:function(a,b,c){for(var f=0,d=b.length;f<d;){var g=f++;this.mapSet(a,b[g],c[g])}},objectErrors:function(a,b){b=this.putils.convertPosition(new ua(b.file,
b.max-1,b.max-1));for(var c=Object.keys(a.h),f=c.length,d=0;d<f;){var g=c[d++];a.h[g]||this.errors.push(Ba.UninitializedVariable(g,b))}},onIncorrectType:function(a,b){this.parsingThrow()},parsingThrow:function(){if(0!=this.errorType)throw D.thrown(Rb.ParsingThrow);},mapSet:function(a,b,c){a.h[b]=c},__class__:H};var jb=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_0=jb;jb.__name__="JsonParser_0";jb.__super__=H;jb.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,
"peote.text.FontConfig",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,"packed distancefield kerning width height color bgColor line tiles rangeSplitSize ranges".split(" "),[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "bgColor":this.value.bgColor=this.loadObjectField((h=new T(this.errors,this.putils,1),u(h,h.loadJson)),
d,"bgColor",c,this.value.bgColor,b);break;case "color":this.value.color=this.loadObjectField((h=new T(this.errors,this.putils,1),u(h,h.loadJson)),d,"color",c,this.value.color,b);break;case "distancefield":this.value.distancefield=this.loadObjectField((h=new Va(this.errors,this.putils,1),u(h,h.loadJson)),d,"distancefield",c,this.value.distancefield,b);break;case "height":this.value.height=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),d,"height",c,this.value.height,b);break;
case "kerning":this.value.kerning=this.loadObjectField((h=new ia(this.errors,this.putils,1),u(h,h.loadJson)),d,"kerning",c,this.value.kerning,b);break;case "line":this.value.line=this.loadObjectField((h=new K(this.errors,this.putils,1),u(h,h.loadJson)),d,"line",c,this.value.line,b);break;case "packed":this.value.packed=this.loadObjectField((h=new Va(this.errors,this.putils,1),u(h,h.loadJson)),d,"packed",c,this.value.packed,b);break;case "rangeSplitSize":this.value.rangeSplitSize=this.loadObjectField((h=
new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"rangeSplitSize",c,this.value.rangeSplitSize,b);break;case "ranges":this.value.ranges=this.loadObjectField((h=new Na(this.errors,this.putils,1),u(h,h.loadJson)),d,"ranges",c,this.value.ranges,b);break;case "tiles":this.value.tiles=this.loadObjectField((h=new G(this.errors,this.putils,1),u(h,h.loadJson)),d,"tiles",c,this.value.tiles,b);break;case "width":this.value.width=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),d,
"width",c,this.value.width,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){var a=Object.create(Ee.prototype);a.packed=!1;a.distancefield=!1;a.kerning=null;a.width=16;a.height=16;a.color=-1;a.bgColor=0;a.line=null;a.tiles=null;a.rangeSplitSize=4096;a.ranges=(new Na([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)));return a},__class__:jb});var Na=function(a,b,c){null==c&&(c=0);H.call(this,a,b,
c)};l.JsonParser_1=Na;Na.__name__="JsonParser_1";Na.__super__=H;Na.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"Array<{ ?tiles : Null<{ y : Int, x : Int }>, slot : { width : Int, height : Int }, range : peote.text.Range, ?line : Null<{ height : Float, base : Float }>, image : String, ?data : Null<String> }>",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonArray:function(a,b,c){this.value=this.loadJsonArrayValue(a,
(h=new kb(this.errors,this.putils,2),u(h,h.loadJson)),c)},__class__:Na});var mb=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c);this.value=0};l.JsonParser_10=mb;mb.__name__="JsonParser_10";mb.__super__=H;mb.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"UInt",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=this.loadJsonUInt(a,b,c,this.value)},__class__:mb});var kb=function(a,b,c){null==c&&(c=0);H.call(this,a,
b,c)};l.JsonParser_11=kb;kb.__name__="JsonParser_11";kb.__super__=H;kb.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ ?tiles : Null<{ y : Int, x : Int }>, slot : { width : Int, height : Int }, range : peote.text.Range, ?line : Null<{ height : Float, base : Float }>, image : String, ?data : Null<String> }",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,
"data image line range slot tiles".split(" "),[!0,!1,!0,!1,!1,!0]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "data":this.value.data=this.loadObjectField((h=new Oa(this.errors,this.putils,1),u(h,h.loadJson)),d,"data",c,this.value.data,b);break;case "image":this.value.image=this.loadObjectField((h=new Wa(this.errors,this.putils,1),u(h,h.loadJson)),d,"image",c,this.value.image,b);break;case "line":this.value.line=this.loadObjectField((h=new Pb(this.errors,
this.putils,1),u(h,h.loadJson)),d,"line",c,this.value.line,b);break;case "range":this.value.range=this.loadObjectField((h=new w(this.errors,this.putils,1),u(h,h.loadJson)),d,"range",c,this.value.range,b);break;case "slot":this.value.slot=this.loadObjectField((h=new Aa(this.errors,this.putils,1),u(h,h.loadJson)),d,"slot",c,this.value.slot,b);break;case "tiles":this.value.tiles=this.loadObjectField((h=new ca(this.errors,this.putils,1),u(h,h.loadJson)),d,"tiles",c,this.value.tiles,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,
this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{data:(new Oa([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),image:(new Wa([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),line:(new Pb([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),range:(new w([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),slot:(new Aa([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),tiles:(new ca([],this.putils,0)).loadJson(new Qa(za.JNull,
new ua("",0,1)))}},__class__:kb});var Oa=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_13=Oa;Oa.__name__="JsonParser_13";Oa.__super__=H;Oa.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"String",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonString:function(a,b,c){this.value=a},__class__:Oa});var Wa=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_14=Wa;Wa.__name__="JsonParser_14";
Wa.__super__=H;Wa.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"String",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonString:function(a,b,c){this.value=a},__class__:Wa});var Pb=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_16=Pb;Pb.__name__="JsonParser_16";Pb.__super__=H;Pb.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ height : Float, base : Float }",
a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["base","height"],[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "base":this.value.base=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),d,"base",c,this.value.base,b);break;case "height":this.value.height=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),
d,"height",c,this.value.height,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{base:(new Q([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),height:(new Q([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)))}},__class__:Pb});var w=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_17=w;w.__name__="JsonParser_17";w.__super__=H;w.prototype=x(H.prototype,{onIncorrectType:function(a,
b){this.errors.push(Ba.IncorrectType(b,"peote.text.Range",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["min","max"],[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "max":this.value.max=this.loadObjectField((h=new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"max",c,this.value.max,b);break;case "min":this.value.min=this.loadObjectField((h=
new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"min",c,this.value.min,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){var a=Object.create(Fe.prototype);a.min=(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)));a.max=(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)));return a},__class__:w});var Aa=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_18=
Aa;Aa.__name__="JsonParser_18";Aa.__super__=H;Aa.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ width : Int, height : Int }",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["height","width"],[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "height":this.value.height=this.loadObjectField((h=new Da(this.errors,
this.putils,1),u(h,h.loadJson)),d,"height",c,this.value.height,b);break;case "width":this.value.width=this.loadObjectField((h=new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"width",c,this.value.width,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{height:(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),width:(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",
0,1)))}},__class__:Aa});var Va=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c);this.value=!1};l.JsonParser_2=Va;Va.__name__="JsonParser_2";Va.__super__=H;Va.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"Bool",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonBool:function(a,b,c){this.value=a},__class__:Va});var ca=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_20=ca;ca.__name__="JsonParser_20";ca.__super__=H;ca.prototype=x(H.prototype,
{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ y : Int, x : Int }",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["x","y"],[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "x":this.value.x=this.loadObjectField((h=new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"x",c,this.value.x,b);break;case "y":this.value.y=this.loadObjectField((h=
new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"y",c,this.value.y,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{x:(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1))),y:(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)))}},__class__:ca});var ia=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_4=ia;ia.__name__="JsonParser_4";ia.__super__=H;
ia.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"Bool",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonBool:function(a,b,c){this.value=a},__class__:ia});var Q=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c);this.value=0};l.JsonParser_5=Q;Q.__name__="JsonParser_5";Q.__super__=H;Q.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"Float",a));H.prototype.onIncorrectType.call(this,
a,b)},loadJsonNumber:function(a,b,c){this.value=this.loadJsonFloat(a,b,c,this.value)},__class__:Q});var T=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_6=T;T.__name__="JsonParser_6";T.__super__=H;T.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"peote.view.Color",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=(new mb(this.errors,this.putils,0)).loadJson(new Qa(za.JNumber(a),new ua(b.file,b.min-
1,b.max-1)),c)},__class__:T});var K=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_7=K;K.__name__="JsonParser_7";K.__super__=H;K.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ height : Float, base : Float }",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["base","height"],[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=
a[f];++f;switch(d.name){case "base":this.value.base=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),d,"base",c,this.value.base,b);break;case "height":this.value.height=this.loadObjectField((h=new Q(this.errors,this.putils,1),u(h,h.loadJson)),d,"height",c,this.value.height,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{base:(new Q([],this.putils,0)).loadJson(new Qa(za.JNull,
new ua("",0,1))),height:(new Q([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)))}},__class__:K});var G=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c)};l.JsonParser_8=G;G.__name__="JsonParser_8";G.__super__=H;G.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"{ y : Int, x : Int }",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new aa;this.objectSetupAssign(c,["x","y"],
[!1,!1]);this.value=this.getAuto();for(var f=0;f<a.length;){var d=a[f];++f;switch(d.name){case "x":this.value.x=this.loadObjectField((h=new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"x",c,this.value.x,b);break;case "y":this.value.y=this.loadObjectField((h=new Da(this.errors,this.putils,1),u(h,h.loadJson)),d,"y",c,this.value.y,b);break;default:this.errors.push(Ba.UnknownVariable(d.name,this.putils.convertPosition(d.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{x:(new Da([],this.putils,
0)).loadJson(new Qa(za.JNull,new ua("",0,1))),y:(new Da([],this.putils,0)).loadJson(new Qa(za.JNull,new ua("",0,1)))}},__class__:G});var Da=function(a,b,c){null==c&&(c=0);H.call(this,a,b,c);this.value=0};l.JsonParser_9=Da;Da.__name__="JsonParser_9";Da.__super__=H;Da.prototype=x(H.prototype,{onIncorrectType:function(a,b){this.errors.push(Ba.IncorrectType(b,"Int",a));H.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=this.loadJsonInt(a,b,c,this.value)},__class__:Da});
var qa=function(){this.isReadyForUpdate=!1;ha.call(this)};l["ob.gum.backends.App"]=qa;qa.__name__="ob.gum.backends.App";qa.__super__=ha;qa.prototype=x(ha.prototype,{init:function(a,b){this.gum=new Ge(a,b);this.isReadyForUpdate=!0},onWindowCreate:function(){ka.trace("App onWindowCreate",{fileName:"ob/gum/backends/Lime.hx",lineNumber:22,className:"ob.gum.backends.App",methodName:"onWindowCreate"});switch(this.__window.context.type){case "opengl":case "opengles":case "webgl":try{this.init(this.__window)}catch(b){var a=
D.caught(b);ka.trace(yc.toString(yc.exceptionStack()),{fileName:"ob/gum/backends/Lime.hx",lineNumber:28,className:"ob.gum.backends.App",methodName:"onWindowCreate",customParams:[a]})}break;default:throw D.thrown("Sorry, only works with OpenGL.");}},update:function(a){if(this.isReadyForUpdate)this.gum.onUpdate(a)},onKeyDown:function(a,b){this.gum.onKeyDown(a,b)},onKeyUp:function(a,b){this.gum.onKeyUp(a,b)},onMouseMove:function(a,b){this.gum.onMouseMove(a,b)},onMouseDown:function(a,b,c){this.gum.onMouseDown(a,
b,c)},onMouseUp:function(a,b,c){this.gum.onMouseUp(a,b,c)},onMouseWheel:function(a,b,c){this.gum.onMouseScroll(a,b,c)},onWindowResize:function(a,b){ha.prototype.onWindowResize.call(this,a,b);this.gum.onWindowResize(a,b)},__class__:qa});var Ha=function(){qa.call(this)};l.Main=Ha;Ha.__name__="Main";Ha.__super__=qa;Ha.prototype=x(qa.prototype,{init:function(a,b){qa.prototype.init.call(this,a,{framesPerSecond:30,drawOnlyWhenRequested:!0,displayWidth:200,displayHeight:124,displayIsScaled:!0});a=new He({fonts:[],
images:["assets/ldtk/monocave/bw.png","assets/images/cat-sprite-sheet.png"]});this.gum.changeLoop(new Y(a))},__class__:Ha});var S=function(){};l.ManifestResources=S;S.__name__="ManifestResources";S.init=function(a){S.preloadLibraries=[];S.preloadLibraryNames=[];S.rootPath=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"rootPath")&&(S.rootPath=ma.field(a,"rootPath"));null==S.rootPath&&(S.rootPath="./");a=Eb.parse('{"name":null,"assets":"aoy4:pathy38:assets%2Fimages%2Fcat-sprite-sheet.pngy4:sizei32435y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y36:assets%2Fldtk%2Fmonocave%2Freadme.mdR2i295R3y4:TEXTR5R7R6tgoR0y39:assets%2Fldtk%2Fmonocave%2Fbw_tiles.pngR2i688R3R4R5R9R6tgoR0y40:assets%2Fldtk%2Fmonocave%2Fmonocave.ldtkR2i74322R3R8R5R10R6tgoR0y33:assets%2Fldtk%2Fmonocave%2Fbw.pngR2i18516R3R4R5R11R6tgoR0y40:assets%2Fldtk%2Fmonocave%2Fautotiles.pngR2i1972R3R4R5R12R6tgoR0y18:assets%2Freadme.mdR2i216R3R8R5R13R6tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',
S.rootPath);a=nc.fromManifest(a);Z.registerLibrary("default",a);a=Z.getLibrary("default");null!=a?S.preloadLibraries.push(a):S.preloadLibraryNames.push("default")};Math.__name__="Math";var r=z.EntityEnum={__ename__:!0,__constructs__:null};r.__constructs__=[];var La=function(a,b){this.untypedProject=a;this.json=b;this.identifier=b.__identifier;this.iid=b.iid;this.cx=b.__grid[0];this.cy=b.__grid[1];this.pixelX=b.px[0];this.pixelY=b.px[1];this.pivotX=null==b.__pivot?0:b.__pivot[0];this.pivotY=null==
b.__pivot?0:b.__pivot[1];this.width=b.width;this.height=b.height;this.tileInfos=b.__tile;a._assignFieldInstanceValues(this,b.fieldInstances)};l["ldtk.Entity"]=La;La.__name__="ldtk.Entity";La.prototype={__class__:La};var C=function(a,b){La.call(this,a,b);this.entityType=Fa.createEnum(r,a.capitalize(b.__identifier))};l.Monocave_Entity=C;C.__name__="Monocave_Entity";C.__super__=La;C.prototype=x(La.prototype,{is:function(a){return this.entityType==a},__class__:C});var t=function(a,b){this.json=b;this.untypedProject=
a;this.identifier=b.identifier;this.tileGridSize=b.tileGridSize;this.relPath=b.relPath;this.pxWid=b.pxWid;this.pxHei=b.pxHei;this.padding=b.padding;this.spacing=b.spacing;this.untypedTags=new aa;if(null!=b.enumTags){var c=0;for(b=b.enumTags;c<b.length;){var f=b[c];++c;var d=this.untypedTags,g=a.capitalize(f.enumValueId),m=new eb;d.h[g]=m;d=0;for(g=f.tileIds;d<g.length;){m=g[d];++d;var k=this.untypedTags,O=a.capitalize(f.enumValueId);k.h[O].h[m]=m}}}};l["ldtk.Tileset"]=t;t.__name__="ldtk.Tileset";
t.prototype={toString:function(){return"ldtk.Tileset[#"+this.identifier+", path="+this.relPath+"]"},__class__:t};var pb=function(a,b){t.call(this,a,b)};l.Tileset_Bw=pb;pb.__name__="Tileset_Bw";pb.__super__=t;pb.prototype=x(t.prototype,{__class__:pb});var rb=function(a,b){t.call(this,a,b)};l.Tileset_Internal_Icons=rb;rb.__name__="Tileset_Internal_Icons";rb.__super__=t;rb.prototype=x(t.prototype,{__class__:rb});var qb=function(a,b){t.call(this,a,b)};l.Tileset_Bw_tiles=qb;qb.__name__="Tileset_Bw_tiles";
qb.__super__=t;qb.prototype=x(t.prototype,{__class__:qb});var cb=function(a,b){t.call(this,a,b)};l.Tileset_Autotiles=cb;cb.__name__="Tileset_Autotiles";cb.__super__=t;cb.prototype=x(t.prototype,{__class__:cb});var Xa=function(a,b){t.call(this,a,b)};l.Tileset_Edible=Xa;Xa.__name__="Tileset_Edible";Xa.__super__=t;Xa.prototype=x(t.prototype,{__class__:Xa});var ob=function(a,b){this.json=b;this.untypedProject=a;this.identifier=b.__identifier;try{var c=Fa.createEnum(qd,b.__type,null)}catch(f){throw na.lastError=
f,D.thrown("Unknown layer type "+b.__type+" in "+this.identifier);}this.type=c;this.iid=b.iid;this.gridSize=b.__gridSize;this.cWid=b.__cWid;this.cHei=b.__cHei;this.pxTotalOffsetX=b.__pxTotalOffsetX;this.pxTotalOffsetY=b.__pxTotalOffsetY;this.opacity=b.__opacity;this.visible=1==b.visible};l["ldtk.Layer"]=ob;ob.__name__="ldtk.Layer";ob.prototype={toString:function(){return"ldtk.Layer[#"+this.identifier+", type="+J.string(this.type)+"]"},__class__:ob};var db=function(a,b){this.intGrid=new eb;this.valueInfos=
new eb;ob.call(this,a,b);if(null!=b.intGridCsv){a=0;for(var c=b.intGridCsv.length;a<c;){var f=a++;0<=b.intGridCsv[f]&&(this.intGrid.h[f]=b.intGridCsv[f])}}else for(a=0,c=b.intGrid;a<c.length;)b=c[a],++a,this.intGrid.h[b.coordId]=b.v+1};l["ldtk.Layer_IntGrid"]=db;db.__name__="ldtk.Layer_IntGrid";db.__super__=ob;db.prototype=x(ob.prototype,{__class__:db});var Fb=function(a,b){db.call(this,a,b);a=1;this.valueInfos.h[a]={value:a,identifier:null,color:J.parseInt("0x"+F.substr("#6CE9F6",1,null))};a=2;this.valueInfos.h[a]=
{value:a,identifier:null,color:J.parseInt("0x"+F.substr("#FFEE00",1,null))}};l.Layer_LightingMap=Fb;Fb.__name__="Layer_LightingMap";Fb.__super__=db;Fb.prototype=x(db.prototype,{__class__:Fb});var fd=function(a,b){db.call(this,a,b);this.valueInfos.h[1]={value:1,identifier:null,color:J.parseInt("0x"+F.substr("#8E2D2D",1,null))}};l.Layer_CollisionMap=fd;fd.__name__="Layer_CollisionMap";fd.__super__=db;fd.prototype=x(db.prototype,{__class__:fd});var oc=function(a,b){ob.call(this,a,b);this.tilesetUid=
b.__tilesetDefUid;this.tiles=new eb;a=0;for(b=b.gridTiles;a<b.length;){var c=b[a];++a;this.tiles.h.hasOwnProperty(c.d[0])?this.tiles.h[c.d[0]].push({tileId:c.t,flipBits:c.f}):this.tiles.h[c.d[0]]=[{tileId:c.t,flipBits:c.f}]}};l["ldtk.Layer_Tiles"]=oc;oc.__name__="ldtk.Layer_Tiles";oc.__super__=ob;oc.prototype=x(ob.prototype,{__class__:oc});var ic=function(a,b){oc.call(this,a,b)};l.Layer_Platforms=ic;ic.__name__="Layer_Platforms";ic.__super__=oc;ic.prototype=x(oc.prototype,{get_tileset:function(){return this.untypedProject._untypedTilesets.h[this.tilesetUid]},
__class__:ic,__properties__:{get_tileset:"get_tileset"}});var Bd=function(a,b){oc.call(this,a,b)};l.Layer_Platforms2=Bd;Bd.__name__="Layer_Platforms2";Bd.__super__=oc;Bd.prototype=x(oc.prototype,{get_tileset:function(){return this.untypedProject._untypedTilesets.h[this.tilesetUid]},__class__:Bd,__properties__:{get_tileset:"get_tileset"}});var Mc=function(a,b,c){this.untypedProject=a;this.arrayIndex=b;this.fromJson(c);a._assignFieldInstanceValues(this,c.fieldInstances)};l["ldtk.Level"]=Mc;Mc.__name__=
"ldtk.Level";Mc.prototype={toString:function(){return"ldtk.Level[#"+this.identifier+", "+this.pxWid+"x"+this.pxHei+"]"},fromJson:function(a){this.json=a;this.neighbours=[];this.allUntypedLayers=[];this.iid=a.iid;this.uid=a.uid;this.identifier=a.identifier;this.pxWid=a.pxWid;this.pxHei=a.pxHei;this.worldX=a.worldX;this.worldY=a.worldY;var b=this.bgColor_hex=a.__bgColor;this.bgColor_int=null==b?0:J.parseInt("0x"+F.substr(b,1,null));this.bgImageInfos=null==a.bgRelPath||null==a.__bgPos?null:{relFilePath:a.bgRelPath,
topLeftX:a.__bgPos.topLeftPx[0],topLeftY:a.__bgPos.topLeftPx[1],scaleX:a.__bgPos.scale[0],scaleY:a.__bgPos.scale[1],cropRect:{x:a.__bgPos.cropRect[0],y:a.__bgPos.cropRect[1],w:a.__bgPos.cropRect[2],h:a.__bgPos.cropRect[3]}};this.externalRelPath=a.externalRelPath;if(null!=a.layerInstances){b=0;for(var c=a.layerInstances;b<c.length;){var f=c[b];++b;this.allUntypedLayers.push(this._instanciateLayer(f))}}if(null!=a.__neighbours)for(b=0,c=a.__neighbours;b<c.length;){var d=c[b];++b;a=this.neighbours;f=
d.levelIid;switch(d.dir){case "e":d=zc.East;break;case "n":d=zc.North;break;case "s":d=zc.South;break;case "w":d=zc.West;break;default:ka.trace("WARNING: unknown neighbour level dir: "+d.dir,{fileName:"ldtk/Level.hx",lineNumber:127,className:"ldtk.Level",methodName:"fromJson"}),d=zc.North}a.push({levelIid:f,dir:d})}},_instanciateLayer:function(a){return null},load:function(){if(null==this.externalRelPath||null!=this.allUntypedLayers&&0<this.allUntypedLayers.length)return!0;var a=this.untypedProject.getAsset(this.externalRelPath);
try{var b=JSON.parse(a.toString());this.fromJson(b);return!0}catch(c){return na.lastError=c,a=D.caught(c).unwrap(),Sb.error("Failed to parse external level "+this.identifier+": "+this.externalRelPath+" ("+J.string(a)+")"),!1}},__class__:Mc};var Tc=function(a,b,c){Mc.call(this,a,b,c)};l.Monocave_Level=Tc;Tc.__name__="Monocave_Level";Tc.__super__=Mc;Tc.prototype=x(Mc.prototype,{fromJson:function(a){Mc.prototype.fromJson.call(this,a);a=0;for(var b=this.allUntypedLayers;a<b.length;){var c=b[a];++a;this["l_"+
c.identifier]=c}},_instanciateLayer:function(a){var b=l["Layer_"+a.__identifier];return null==b?(Sb.error("Couldn't instanciate layer "+a.__identifier),null):Fa.createInstance(b,[this.untypedProject,a])},resolveLayer:function(a){this.load();for(var b=0,c=this.allUntypedLayers;b<c.length;){var f=c[b];++b;if(f.identifier==a)return f}return null},get_l_LightingMap:function(){this.load();return ma.field(this,"l_LightingMap")},get_l_CollisionMap:function(){this.load();return ma.field(this,"l_CollisionMap")},
get_l_Platforms:function(){this.load();return ma.field(this,"l_Platforms")},get_l_Platforms2:function(){this.load();return ma.field(this,"l_Platforms2")},__class__:Tc,__properties__:{get_l_Platforms2:"get_l_Platforms2",get_l_Platforms:"get_l_Platforms",get_l_CollisionMap:"get_l_CollisionMap",get_l_LightingMap:"get_l_LightingMap"}});var Sb=function(){};l["ldtk.Project"]=Sb;Sb.__name__="ldtk.Project";Sb.error=function(a){throw D.thrown("[ldtk-api] "+a);};Sb.prototype={parseJson:function(a){this._untypedTilesets=
new eb;this.assetCache=new aa;a=JSON.parse(a);var b=this.bgColor_hex=a.bgColor;this.bgColor_int=null==b?0:J.parseInt("0x"+F.substr(b,1,null));this._untypedLevels=[];var c=0;b=0;for(var f=a.levels;b<f.length;){var d=f[b];++b;this._untypedLevels.push(this._instanciateLevel(this,c++,d))}this.all_tilesets={};b=0;for(f=a.defs.tilesets;b<f.length;){c=f[b];++b;d=this._untypedTilesets;var g=c.uid,m=this._instanciateTileset(this,c);d.h[g]=m;ma.field(this,"all_tilesets")[c.identifier]=this._instanciateTileset(this,
c)}this.worldLayout=Fa.createEnum(rd,J.string(a.worldLayout),null);this.defs=a.defs},capitalize:function(a){null==a&&(a="");var b=new ba("^(_*)([a-z])([a-zA-Z0-9_]*)","g");b.match(a)&&(a=b.matched(1)+b.matched(2).toUpperCase()+b.matched(3));return a},_resolveExternalEnumValue:function(a,b){return null},_assignFieldInstanceValues:function(a,b){for(var c=new ba("Array<(.*)>","gi"),f=0;f<b.length;){var d=b[f];++f;if(null!=d.__value){var g=c.match(d.__type),m=g?c.matched(1):d.__type;switch(m){case "Color":a["f_"+
d.__identifier+"_hex"]=d.__value;if(g){g=d.__value;d="f_"+d.__identifier+"_int";m=Array(g.length);var k=0;for(var O=g.length;k<O;){var n=k++,e=g[n];m[n]=null==e?0:J.parseInt("0x"+F.substr(e,1,null))}a[d]=m}else g=d.__value,a["f_"+d.__identifier+"_int"]=null==g?0:J.parseInt("0x"+F.substr(g,1,null));break;case "EntityRef":a["f_"+d.__identifier]=d.__value;break;case "FilePath":a["f_"+d.__identifier]=d.__value;break;case "Point":if(g){g=d.__value;d="f_"+d.__identifier;m=Array(g.length);k=0;for(O=g.length;k<
O;)n=k++,e=g[n],m[n]=new sd(e.cx,e.cy);a[d]=m}else a["f_"+d.__identifier]=new sd(d.__value.cx,d.__value.cy);break;case "Bool":case "Float":case "Int":case "String":a["f_"+d.__identifier]=d.__value;break;case "Tile":k=m.indexOf("LocalEnum.");if(0==k)if(m=this._enumTypePrefix+F.substr(m,m.indexOf(".")+1,null),m=z[m],g){g=d.__value;d="f_"+d.__identifier;k=Array(g.length);O=0;for(n=g.length;O<n;)e=O++,k[e]=Fa.createEnum(m,this.capitalize(g[e]));a[d]=k}else a["f_"+d.__identifier]=Fa.createEnum(m,this.capitalize(d.__value));
else if(k=m.indexOf("ExternEnum."),0==k)if(m=F.substr(m,m.indexOf(".")+1,null),g){g=d.__value;d="f_"+d.__identifier;k=Array(g.length);O=0;for(n=g.length;O<n;)e=O++,k[e]=this._resolveExternalEnumValue(m,g[e]);a[d]=k}else a["f_"+d.__identifier]=this._resolveExternalEnumValue(m,d.__value);else if(m=function(a){if(null!=a){var b=a.x;b=!(null!=b&&!isNaN(b)&&isFinite(b))}else b=!0;return b?null:a},g){g=d.__value;d="f_"+d.__identifier+"_infos";k=Array(g.length);O=0;for(n=g.length;O<n;)e=O++,k[e]=m(g[e]);
a[d]=k}else a["f_"+d.__identifier+"_infos"]=m(d.__value);break;default:if(k=m.indexOf("LocalEnum."),0==k)if(m=this._enumTypePrefix+F.substr(m,m.indexOf(".")+1,null),m=z[m],g){g=d.__value;d="f_"+d.__identifier;k=Array(g.length);O=0;for(n=g.length;O<n;)e=O++,k[e]=Fa.createEnum(m,this.capitalize(g[e]));a[d]=k}else a["f_"+d.__identifier]=Fa.createEnum(m,this.capitalize(d.__value));else if(k=m.indexOf("ExternEnum."),0==k)if(m=F.substr(m,m.indexOf(".")+1,null),g){g=d.__value;d="f_"+d.__identifier;k=Array(g.length);
O=0;for(n=g.length;O<n;)e=O++,k[e]=this._resolveExternalEnumValue(m,g[e]);a[d]=k}else a["f_"+d.__identifier]=this._resolveExternalEnumValue(m,d.__value);else Sb.error("Unknown field type "+m+" at runtime")}}}},toString:function(){return"ldtk.Project["+this._untypedLevels.length+" levels]"},getAsset:function(a){if(Object.prototype.hasOwnProperty.call(this.assetCache.h,a))return this.assetCache.h[a];var b=this.loadAssetBytes(a);return this.assetCache.h[a]=b},makeAssetRelativePath:function(a){var b=
ya.replace(this.projectFilePath,"\\","/");0>b.lastIndexOf("/")||F.substr(b,b.lastIndexOf("/")+1,null);b=0;for(var c=uc.listNames();b<c.length;){var f=c[b];b++;if(f==this.projectFilePath)return a=(0>f.indexOf("/")?"":F.substr(f,0,f.lastIndexOf("/")))+"/"+a,b=new ec,b.parse(a,!0),a=b,(a.isWindowsNetworkDrive&&!a._useWinNetDriveUriFormat?a.backslashes?"\\":"/":null!=a.uriScheme?null==a.uriAuthority?""+a.uriScheme+":/":""+a.uriScheme+"://"+a.uriAuthority+"/":"")+(null==a.directory?"":null==a.fileName&&
null==a.extension||a.directory==(a.backslashes?"\\":"/")?a.directory:null==a.directory?null:a.directory==(a.backslashes?"\\":"/")?a.directory:a.directory+(a.backslashes?"\\":"/"))+(null==(null==a.fileName&&null==a.extension?null:(null==a.fileName?"":a.fileName)+(null==a.extension?"":"."+a.extension))?"":null==a.fileName&&null==a.extension?null:(null==a.fileName?"":a.fileName)+(null==a.extension?"":"."+a.extension))}Sb.error('Project file is not loaded properly.\nPlease add "-r <path to project name.ldtk>" and "-r <path to each level file.ldtkl>" to your project.hxml build file and try again.');
return""},loadAssetBytes:function(a){a=this.makeAssetRelativePath(a);try{var b=uc.getBytes(a)}catch(c){na.lastError=c,b=D.caught(c).unwrap(),Sb.error("Asset not found or was not loaded properly at runtime: "+a+" ; error="+J.string(b)),b=null}return b},_instanciateLevel:function(a,b,c){return null},_instanciateTileset:function(a,b){return null},__class__:Sb};var dd=function(a){this.all_levels={Level_0:null,Level_1:null,Level_2:null};this.levels=[];this._enumTypePrefix="Enum_";this.projectDir="assets/ldtk/monocave";
this.projectFilePath="assets/ldtk/monocave/monocave.ldtk";this.parseJson(null!=a?a:'{\n\t"__header__": {\n\t\t"fileType": "LDtk Project JSON",\n\t\t"app": "LDtk",\n\t\t"doc": "https://ldtk.io/json",\n\t\t"schema": "https://ldtk.io/files/JSON_SCHEMA.json",\n\t\t"appAuthor": "Sebastien \'deepnight\' Benard",\n\t\t"appVersion": "1.1.3",\n\t\t"url": "https://ldtk.io"\n\t},\n\t"jsonVersion": "1.1.3",\n\t"appBuildId": 458364,\n\t"nextUid": 18,\n\t"identifierStyle": "Capitalize",\n\t"worldLayout": "Free",\n\t"worldGridWidth": 256,\n\t"worldGridHeight": 256,\n\t"defaultLevelWidth": 256,\n\t"defaultLevelHeight": 256,\n\t"defaultPivotX": 0,\n\t"defaultPivotY": 0,\n\t"defaultGridSize": 16,\n\t"bgColor": "#40465B",\n\t"defaultLevelBgColor": "#696A79",\n\t"minifyJson": false,\n\t"externalLevels": false,\n\t"exportTiled": false,\n\t"simplifiedExport": false,\n\t"imageExportMode": "None",\n\t"pngFilePattern": null,\n\t"backupOnSave": false,\n\t"backupLimit": 10,\n\t"levelNamePattern": "Level_%idx",\n\t"tutorialDesc": null,\n\t"flags": [],\n\t"defs": { "layers": [\n\t\t{\n\t\t\t"__type": "IntGrid",\n\t\t\t"identifier": "LightingMap",\n\t\t\t"type": "IntGrid",\n\t\t\t"uid": 8,\n\t\t\t"gridSize": 8,\n\t\t\t"guideGridWid": 0,\n\t\t\t"guideGridHei": 0,\n\t\t\t"displayOpacity": 0.81,\n\t\t\t"inactiveOpacity": 0.76,\n\t\t\t"hideInList": false,\n\t\t\t"hideFieldsWhenInactive": false,\n\t\t\t"pxOffsetX": 0,\n\t\t\t"pxOffsetY": 0,\n\t\t\t"parallaxFactorX": 0,\n\t\t\t"parallaxFactorY": 0,\n\t\t\t"parallaxScaling": true,\n\t\t\t"requiredTags": [],\n\t\t\t"excludedTags": [],\n\t\t\t"intGridValues": [ { "value": 1, "identifier": null, "color": "#6CE9F6" }, { "value": 2, "identifier": null, "color": "#FFEE00" } ],\n\t\t\t"autoTilesetDefUid": null,\n\t\t\t"autoRuleGroups": [],\n\t\t\t"autoSourceLayerDefUid": null,\n\t\t\t"tilesetDefUid": null,\n\t\t\t"tilePivotX": 0,\n\t\t\t"tilePivotY": 0\n\t\t},\n\t\t{\n\t\t\t"__type": "IntGrid",\n\t\t\t"identifier": "CollisionMap",\n\t\t\t"type": "IntGrid",\n\t\t\t"uid": 5,\n\t\t\t"gridSize": 8,\n\t\t\t"guideGridWid": 0,\n\t\t\t"guideGridHei": 0,\n\t\t\t"displayOpacity": 0.85,\n\t\t\t"inactiveOpacity": 0.57,\n\t\t\t"hideInList": false,\n\t\t\t"hideFieldsWhenInactive": false,\n\t\t\t"pxOffsetX": 0,\n\t\t\t"pxOffsetY": 0,\n\t\t\t"parallaxFactorX": 0,\n\t\t\t"parallaxFactorY": 0,\n\t\t\t"parallaxScaling": true,\n\t\t\t"requiredTags": [],\n\t\t\t"excludedTags": [],\n\t\t\t"intGridValues": [{ "value": 1, "identifier": null, "color": "#8E2D2D" }],\n\t\t\t"autoTilesetDefUid": null,\n\t\t\t"autoRuleGroups": [],\n\t\t\t"autoSourceLayerDefUid": null,\n\t\t\t"tilesetDefUid": null,\n\t\t\t"tilePivotX": 0,\n\t\t\t"tilePivotY": 0\n\t\t},\n\t\t{\n\t\t\t"__type": "Tiles",\n\t\t\t"identifier": "Platforms",\n\t\t\t"type": "Tiles",\n\t\t\t"uid": 2,\n\t\t\t"gridSize": 16,\n\t\t\t"guideGridWid": 112,\n\t\t\t"guideGridHei": 112,\n\t\t\t"displayOpacity": 1,\n\t\t\t"inactiveOpacity": 1,\n\t\t\t"hideInList": false,\n\t\t\t"hideFieldsWhenInactive": false,\n\t\t\t"pxOffsetX": 0,\n\t\t\t"pxOffsetY": 0,\n\t\t\t"parallaxFactorX": 0,\n\t\t\t"parallaxFactorY": 0,\n\t\t\t"parallaxScaling": true,\n\t\t\t"requiredTags": [],\n\t\t\t"excludedTags": [],\n\t\t\t"intGridValues": [],\n\t\t\t"autoTilesetDefUid": 1,\n\t\t\t"autoRuleGroups": [],\n\t\t\t"autoSourceLayerDefUid": null,\n\t\t\t"tilesetDefUid": 1,\n\t\t\t"tilePivotX": 0,\n\t\t\t"tilePivotY": 0\n\t\t},\n\t\t{\n\t\t\t"__type": "Tiles",\n\t\t\t"identifier": "Platforms2",\n\t\t\t"type": "Tiles",\n\t\t\t"uid": 6,\n\t\t\t"gridSize": 16,\n\t\t\t"guideGridWid": 32,\n\t\t\t"guideGridHei": 32,\n\t\t\t"displayOpacity": 1,\n\t\t\t"inactiveOpacity": 1,\n\t\t\t"hideInList": false,\n\t\t\t"hideFieldsWhenInactive": false,\n\t\t\t"pxOffsetX": 0,\n\t\t\t"pxOffsetY": 0,\n\t\t\t"parallaxFactorX": 0,\n\t\t\t"parallaxFactorY": 0,\n\t\t\t"parallaxScaling": true,\n\t\t\t"requiredTags": [],\n\t\t\t"excludedTags": [],\n\t\t\t"intGridValues": [],\n\t\t\t"autoTilesetDefUid": 17,\n\t\t\t"autoRuleGroups": [],\n\t\t\t"autoSourceLayerDefUid": null,\n\t\t\t"tilesetDefUid": 17,\n\t\t\t"tilePivotX": 0,\n\t\t\t"tilePivotY": 0\n\t\t}\n\t], "entities": [], "tilesets": [\n\t\t{\n\t\t\t"__cWid": 16,\n\t\t\t"__cHei": 16,\n\t\t\t"identifier": "Bw",\n\t\t\t"uid": 1,\n\t\t\t"relPath": "bw.png",\n\t\t\t"embedAtlas": null,\n\t\t\t"pxWid": 256,\n\t\t\t"pxHei": 256,\n\t\t\t"tileGridSize": 16,\n\t\t\t"spacing": 0,\n\t\t\t"padding": 0,\n\t\t\t"tags": [],\n\t\t\t"tagsSourceEnumUid": null,\n\t\t\t"enumTags": [],\n\t\t\t"customData": [],\n\t\t\t"savedSelections": [],\n\t\t\t"cachedPixelData": {\n\t\t\t\t"opaqueTiles": "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",\n\t\t\t\t"averageColors": "f000f000f000f000f000f000f000f000f000f000f000f666f777f999f888f666f000f000f000f000f000f000f999f888f888f777f000f777f333f777f000f444f000f000f666f444f666f444f666faaaf777f888f000f000f333f888f000f666f000f777f999faaafaaaf999f666fffffaaaf777f000f666f888f888f777f000f000f666f666f999f999f777f555f888f666f888f888f666f666f666f888f000f000f666f555f777f777f555f666f777f666f444f444f444f555f555f555f000f000f000f777f000f000f777f000f777f000f000f000f000fcccfcccf000f000f000f000f888f333f666f999f555f000f777f000f444f333f666f666f444f000f000f999f888f888f999f999f888f888f888f888f888f777f333f333f999f000f000f888f000f555f000f555f000f000f000f000f000f000f000f000f888f000f000f666f555f999f666f555f555f000f333f333f777f777f888f555f666f000f666f000f000f999f666f000f666f555f555f555f999f000f000f444f000f000f777f000f000f777f000f000f888f777f888f888f888f777faaaf999f999f000f888f555f444f888f444f444f888f000f333f000f000f000f333f333f888f555f555f000f000f888f000f333f666f555f555f555f555f555f999f777f666f000f333f000f000f777f000f000f000f000f333f000f000f555faaaf999f000f000"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t"__cWid": 16,\n\t\t\t"__cHei": 64,\n\t\t\t"identifier": "Internal_Icons",\n\t\t\t"uid": 4,\n\t\t\t"relPath": null,\n\t\t\t"embedAtlas": "LdtkIcons",\n\t\t\t"pxWid": 256,\n\t\t\t"pxHei": 1024,\n\t\t\t"tileGridSize": 16,\n\t\t\t"spacing": 0,\n\t\t\t"padding": 0,\n\t\t\t"tags": [],\n\t\t\t"tagsSourceEnumUid": null,\n\t\t\t"enumTags": [],\n\t\t\t"customData": [],\n\t\t\t"savedSelections": [],\n\t\t\t"cachedPixelData": {\n\t\t\t\t"opaqueTiles": "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",\n\t\t\t\t"averageColors": "00004b344233459b423349a959a9379c688769758ca4bc9489aab9aa58cc58bc69a969a97a99999999989a85998699767a7579667ccc7ccc7bcb7caa7ccc7ccc59764b97599868ac679a69ab4a84477756787688475347532a932a934a837a8359aa49aa59996999699969aa489949995999799a499949992999299948997889189919991999199939994778166727772889289948993aaa389949a959a959a98aaa8aaa8aaa8aaa8aaa7bbb8aaa7bbb8bcb7aaa8bcb7bcb69aa8aaa8aaa69aa6c526c426c926c91659b649c66a566a46a7b6a7b667766776aba6abb676367636ba5579a6689598658875cb66abb9aa989aa98ac7abc6678968a88877c87cba93ec63da76db79dc7554885498969b4377fa29e8289cdb9ce5ade5ade49ce49ce5d745d867da87e75448c458b86ad76ae68ac679c779b78ce3c9378867ca6adb757a668b899b8449396534493858364836853697769436667755667776c7349886bba79b87d9679ad776a7b988abc8abc4aceaace4bba4bba6b8c4c9c4cac5b7c59aaada7a9bdcdbd59aaada7a9bdcdbd8cb8a9b98ac889b8aabaacc79ea498bd57ac596b55946abb5abb8ca65d8677ac437b5a3368886934547a595897a57b23799a5c817b9b3a886abb8464676a7a967a857a857977898889882a954a956b95499977997868799579875a6465995a8957a66a735ba53a935969479a576a46775744985596659b747a659a76768a7a567675477738873566597698779445946588668a66868a9b8577666a4467846987778a7789797a87888b8676667a767ca5449374934c957c9574847a438475a3958695768565956853b9447a777493a49379547a838394689a49547a6357636975786383848997b38465587374897458847da48ca769768b554b976cba3a824a82696259526a758c986963694268478b85696559555579557458598674573353635677575579667a8758538b848a44838b385437883b95534549555a855877997598772b953b9529a939a95aa84b949a84897687898776878578998485878b789a847b8b6579998a55886998788a879b976ba97988897469646b987a876a997a987b987955766777765c958a85877786775a747b947b967866a855788928884566578879a98864a57923343334333463346a747b846a844997598669987bb8b8aabaa96ba67cba9854687669864a864b8638ab389b48ab47ac49ab48ac579b48ac49ab38ab58bc4b8659aa5c8457ac586a299b2999389a379b38893955589a79bc8c9588bc7a8c599a689a5b8558ac597a2888378936773975579b389a579b488938884b74469a465747785b75568b586a38553865285428444755566455763a64356746743779397445674c63469b585a284437643a7629641555297938874879385438664665355536775a85569a785a5789789b779b6a75668a897b64558555876576798855845694749b74a68a986a47776766678867667799798698768866976685673755387638763b74358b387a5777686569874944498846774677685568646987677778775a456a65ab66ca55355656666656455546455345634558655854aa749854775577737b64777a7a795955895598546c758c75ba76b88797749b75a98967888789978857888788a7886977897799776a748a749a747987ba97aa998ba8a78bab75a87ab89cbb74b97b59645788598858546a7569996a767a766887649c767476797a5476697766797678887a75796577777a869976987799865777667787668a53857a885a9865954687559877a96586779788b9769866888899877576777879647759a8659888a744785477887a55747b7585795b7999a9667456878889aa58997888797b5677685548545854617b644557448744537b85565899899a39994a7a58998999a555898889659744a6559555a55698889486a57aab43a96b9556a665a854a579a744a555596587556677777777778578876687778974867787668876988897779876a74467536556875448225922415851595456654587459456947b48997a8676458556a854a89989998556a7559766a7779976a975997596749a64968a9779a5559545674487549854885594558445a777a7778373579b5a32675584456975958b994477449754b674b469b964b658a766a864a777a975a566a754a677a875b777b96577557754744575567655874469737763776678533455656657785975587788762789287328772a7436793a9457795a84368a3334323364555a757b856aaa9a555888516b5a3349a95964797778987a5375696a536668796577887a847a7479757b537a53767b6769748775767a9a7988759c768a7b957a84777577647864785498999788988998889b879a869a869a8669656567696566776744685467787788678a77997ba647887a7589999ca59ba889aa9999655667bd6ba979a967bc6c736aaa6556518566775965485438985888576546854ca547775999699989997a996678526466335644769c5a7888547a785c4454a658885c946285627b6c54674a33843b33359c337c395c3b853899355653745a33558b536b585b5a755788544526551566274525664a85486546564656377756664655465545454656516a65674964696468553a86485437443645896588548856895477446a7569547a75795436678566399988993b968b955ba658995566588859645a986ca7796477887ca619562a554c665c55156a256a468c557b1a8429744a845a83196b285a496b595b1486248645a7549615782578469a5689187629764a875a861a692a694b7a5b791777277748985888155525554666555619952885488458841112211241125112"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t"__cWid": 8,\n\t\t\t"__cHei": 8,\n\t\t\t"identifier": "Bw_tiles",\n\t\t\t"uid": 7,\n\t\t\t"relPath": "bw_tiles.png",\n\t\t\t"embedAtlas": null,\n\t\t\t"pxWid": 64,\n\t\t\t"pxHei": 64,\n\t\t\t"tileGridSize": 8,\n\t\t\t"spacing": 0,\n\t\t\t"padding": 0,\n\t\t\t"tags": [],\n\t\t\t"tagsSourceEnumUid": null,\n\t\t\t"enumTags": [],\n\t\t\t"customData": [],\n\t\t\t"savedSelections": [],\n\t\t\t"cachedPixelData": {\n\t\t\t\t"opaqueTiles": "1111111111111111111111111111111111111111111111111111111110000000",\n\t\t\t\t"averageColors": "f000fbbbfbbbfcccf888f999f777f777fcccf999fffff555f999f999f777f666f999f777f555f999f888f888feeef555f888f888f555f666f777fbbbfaaaf666fbbbfbbbf888f555f999f555f888f666fcccf666faaafcccf555f999faaafbbbf999f666faaafbbbf666f666f666f666f8880000000000000000000000000000"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t"__cWid": 15,\n\t\t\t"__cHei": 15,\n\t\t\t"identifier": "Autotiles",\n\t\t\t"uid": 11,\n\t\t\t"relPath": "autotiles.png",\n\t\t\t"embedAtlas": null,\n\t\t\t"pxWid": 120,\n\t\t\t"pxHei": 120,\n\t\t\t"tileGridSize": 8,\n\t\t\t"spacing": 0,\n\t\t\t"padding": 0,\n\t\t\t"tags": [],\n\t\t\t"tagsSourceEnumUid": null,\n\t\t\t"enumTags": [],\n\t\t\t"customData": [],\n\t\t\t"savedSelections": [],\n\t\t\t"cachedPixelData": {\n\t\t\t\t"opaqueTiles": "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",\n\t\t\t\t"averageColors": "fbbbf999fbbbf311f311f311f311f311f999f666f311f311faaafcccf888fbbbf311faaaf311f311f655f311f311f999f999f777f311f311f311f311faaaf777fbbbf311f311f666f311f311f999f999f999f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311faaafbbbfaaaf311f666f666f666f311f999f999f999f311f311f311f311fbbbf311fbbbf311f666f666f666f311f999f999f999f311f311f311f888faaaf777fbbbf311f666f666f666f311f311f666f999f311faaafbbbf999f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311fbbbfcccfbbbf311ffeeffffffeef311f777faaaf777f311f311f311f311f999f311f999f311fffffffffffff311f311faaaf311f311f311f311f311f999f655f999f311ffeeffffffeef311f777faaaf777f311f655f888f988f311f311f311f311f311f311f311f311f311f311f311f311f311f311f311fbbbfbbbfbbbf311f888f999f888f311f777f311f777f311f311f311f311f999f311f999f311f999f999f999f311f655f311f655f311f311f311f311f999f655f999f311f888f999f888f311f777f311f777f311f988f888f988"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t"__cWid": 6,\n\t\t\t"__cHei": 5,\n\t\t\t"identifier": "Edible",\n\t\t\t"uid": 17,\n\t\t\t"relPath": "../../images/edible.png",\n\t\t\t"embedAtlas": null,\n\t\t\t"pxWid": 96,\n\t\t\t"pxHei": 80,\n\t\t\t"tileGridSize": 16,\n\t\t\t"spacing": 0,\n\t\t\t"padding": 0,\n\t\t\t"tags": [],\n\t\t\t"tagsSourceEnumUid": null,\n\t\t\t"enumTags": [],\n\t\t\t"customData": [],\n\t\t\t"savedSelections": [],\n\t\t\t"cachedPixelData": {\n\t\t\t\t"opaqueTiles": "000000000000000000000000000000",\n\t\t\t\t"averageColors": "8b857987aa9998457976897778777a887b8685447a85835786678ba9797779878b9887666a8776678bbb6bba7b869976abaa8baa9b858b758ba87777"\n\t\t\t}\n\t\t}\n\t], "enums": [], "externalEnums": [], "levelFields": [] },\n\t"levels": [\n\t\t{\n\t\t\t"identifier": "Level_0",\n\t\t\t"iid": "5858e970-b4d0-11ec-abf3-df00b0a916e7",\n\t\t\t"uid": 0,\n\t\t\t"worldX": 0,\n\t\t\t"worldY": 0,\n\t\t\t"worldDepth": 0,\n\t\t\t"pxWid": 256,\n\t\t\t"pxHei": 256,\n\t\t\t"__bgColor": "#696A79",\n\t\t\t"bgColor": null,\n\t\t\t"useAutoIdentifier": true,\n\t\t\t"bgRelPath": null,\n\t\t\t"bgPos": null,\n\t\t\t"bgPivotX": 0.5,\n\t\t\t"bgPivotY": 0.5,\n\t\t\t"__smartColor": "#ADADB5",\n\t\t\t"__bgPos": null,\n\t\t\t"externalRelPath": null,\n\t\t\t"fieldInstances": [],\n\t\t\t"layerInstances": [\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "LightingMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 32,\n\t\t\t\t\t"__cHei": 32,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.81,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "c6045710-b4d0-11ec-8adf-1b0b994a2d4d",\n\t\t\t\t\t"levelId": 0,\n\t\t\t\t\t"layerDefUid": 8,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 1241947,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "CollisionMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 32,\n\t\t\t\t\t"__cHei": 32,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.85,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "dfe710a0-b4d0-11ec-b8fc-35a5820bfa6d",\n\t\t\t\t\t"levelId": 0,\n\t\t\t\t\t"layerDefUid": 5,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 8257724,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 16,\n\t\t\t\t\t"__cHei": 16,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 1,\n\t\t\t\t\t"__tilesetRelPath": "bw.png",\n\t\t\t\t\t"iid": "a0a165e0-b4d0-11ec-abf3-57251cc0428c",\n\t\t\t\t\t"levelId": 0,\n\t\t\t\t\t"layerDefUid": 2,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 590391,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [\n\t\t\t\t\t\t{ "px": [0,32], "src": [96,112], "f": 0, "t": 118, "d": [32] },\n\t\t\t\t\t\t{ "px": [16,32], "src": [112,112], "f": 0, "t": 119, "d": [33] },\n\t\t\t\t\t\t{ "px": [32,32], "src": [128,112], "f": 0, "t": 120, "d": [34] },\n\t\t\t\t\t\t{ "px": [48,32], "src": [144,112], "f": 0, "t": 121, "d": [35] },\n\t\t\t\t\t\t{ "px": [64,32], "src": [144,112], "f": 0, "t": 121, "d": [36] },\n\t\t\t\t\t\t{ "px": [80,32], "src": [224,112], "f": 0, "t": 126, "d": [37] },\n\t\t\t\t\t\t{ "px": [96,32], "src": [144,112], "f": 0, "t": 121, "d": [38] },\n\t\t\t\t\t\t{ "px": [112,32], "src": [144,112], "f": 0, "t": 121, "d": [39] },\n\t\t\t\t\t\t{ "px": [128,32], "src": [144,112], "f": 0, "t": 121, "d": [40] },\n\t\t\t\t\t\t{ "px": [144,32], "src": [96,112], "f": 0, "t": 118, "d": [41] },\n\t\t\t\t\t\t{ "px": [160,32], "src": [160,112], "f": 0, "t": 122, "d": [42] },\n\t\t\t\t\t\t{ "px": [0,48], "src": [96,128], "f": 0, "t": 134, "d": [48] },\n\t\t\t\t\t\t{ "px": [16,48], "src": [112,128], "f": 0, "t": 135, "d": [49] },\n\t\t\t\t\t\t{ "px": [32,48], "src": [128,128], "f": 0, "t": 136, "d": [50] },\n\t\t\t\t\t\t{ "px": [48,48], "src": [144,128], "f": 0, "t": 137, "d": [51] },\n\t\t\t\t\t\t{ "px": [64,48], "src": [160,128], "f": 0, "t": 138, "d": [52] },\n\t\t\t\t\t\t{ "px": [80,48], "src": [176,128], "f": 0, "t": 139, "d": [53] },\n\t\t\t\t\t\t{ "px": [96,48], "src": [176,128], "f": 0, "t": 139, "d": [54] },\n\t\t\t\t\t\t{ "px": [112,48], "src": [128,128], "f": 0, "t": 136, "d": [55] },\n\t\t\t\t\t\t{ "px": [128,48], "src": [160,128], "f": 0, "t": 138, "d": [56] },\n\t\t\t\t\t\t{ "px": [144,48], "src": [176,128], "f": 0, "t": 139, "d": [57] },\n\t\t\t\t\t\t{ "px": [160,48], "src": [224,128], "f": 0, "t": 142, "d": [58] },\n\t\t\t\t\t\t{ "px": [0,64], "src": [96,208], "f": 0, "t": 214, "d": [64] },\n\t\t\t\t\t\t{ "px": [16,64], "src": [112,144], "f": 0, "t": 151, "d": [65] },\n\t\t\t\t\t\t{ "px": [32,64], "src": [128,144], "f": 0, "t": 152, "d": [66] },\n\t\t\t\t\t\t{ "px": [48,64], "src": [144,144], "f": 0, "t": 153, "d": [67] },\n\t\t\t\t\t\t{ "px": [64,64], "src": [160,144], "f": 0, "t": 154, "d": [68] },\n\t\t\t\t\t\t{ "px": [80,64], "src": [176,144], "f": 0, "t": 155, "d": [69] },\n\t\t\t\t\t\t{ "px": [96,64], "src": [192,144], "f": 0, "t": 156, "d": [70] },\n\t\t\t\t\t\t{ "px": [112,64], "src": [208,144], "f": 0, "t": 157, "d": [71] },\n\t\t\t\t\t\t{ "px": [128,64], "src": [160,144], "f": 0, "t": 154, "d": [72] },\n\t\t\t\t\t\t{ "px": [144,64], "src": [176,144], "f": 0, "t": 155, "d": [73] },\n\t\t\t\t\t\t{ "px": [160,64], "src": [224,144], "f": 0, "t": 158, "d": [74] },\n\t\t\t\t\t\t{ "px": [0,80], "src": [96,176], "f": 0, "t": 182, "d": [80] },\n\t\t\t\t\t\t{ "px": [16,80], "src": [112,176], "f": 0, "t": 183, "d": [81] },\n\t\t\t\t\t\t{ "px": [32,80], "src": [80,160], "f": 0, "t": 165, "d": [82] },\n\t\t\t\t\t\t{ "px": [48,80], "src": [80,160], "f": 0, "t": 165, "d": [83] },\n\t\t\t\t\t\t{ "px": [64,80], "src": [80,160], "f": 0, "t": 165, "d": [84] },\n\t\t\t\t\t\t{ "px": [80,80], "src": [80,160], "f": 0, "t": 165, "d": [85] },\n\t\t\t\t\t\t{ "px": [96,80], "src": [80,160], "f": 0, "t": 165, "d": [86] },\n\t\t\t\t\t\t{ "px": [112,80], "src": [80,160], "f": 0, "t": 165, "d": [87] },\n\t\t\t\t\t\t{ "px": [128,80], "src": [208,160], "f": 0, "t": 173, "d": [88] },\n\t\t\t\t\t\t{ "px": [144,80], "src": [208,160], "f": 0, "t": 173, "d": [89] },\n\t\t\t\t\t\t{ "px": [160,80], "src": [224,160], "f": 0, "t": 174, "d": [90] },\n\t\t\t\t\t\t{ "px": [224,96], "src": [208,176], "f": 0, "t": 189, "d": [110] },\n\t\t\t\t\t\t{ "px": [128,112], "src": [96,192], "f": 0, "t": 198, "d": [120] },\n\t\t\t\t\t\t{ "px": [144,112], "src": [112,192], "f": 0, "t": 199, "d": [121] },\n\t\t\t\t\t\t{ "px": [160,112], "src": [176,192], "f": 0, "t": 203, "d": [122] },\n\t\t\t\t\t\t{ "px": [176,112], "src": [176,192], "f": 0, "t": 203, "d": [123] },\n\t\t\t\t\t\t{ "px": [192,112], "src": [176,192], "f": 0, "t": 203, "d": [124] },\n\t\t\t\t\t\t{ "px": [208,112], "src": [192,192], "f": 0, "t": 204, "d": [125] },\n\t\t\t\t\t\t{ "px": [224,112], "src": [208,192], "f": 0, "t": 205, "d": [126] },\n\t\t\t\t\t\t{ "px": [240,112], "src": [224,192], "f": 0, "t": 206, "d": [127] },\n\t\t\t\t\t\t{ "px": [128,128], "src": [96,208], "f": 0, "t": 214, "d": [136] },\n\t\t\t\t\t\t{ "px": [144,128], "src": [112,208], "f": 0, "t": 215, "d": [137] },\n\t\t\t\t\t\t{ "px": [160,128], "src": [128,208], "f": 0, "t": 216, "d": [138] },\n\t\t\t\t\t\t{ "px": [176,128], "src": [144,208], "f": 0, "t": 217, "d": [139] },\n\t\t\t\t\t\t{ "px": [192,128], "src": [160,208], "f": 0, "t": 218, "d": [140] },\n\t\t\t\t\t\t{ "px": [208,128], "src": [144,240], "f": 0, "t": 249, "d": [141] },\n\t\t\t\t\t\t{ "px": [224,128], "src": [160,208], "f": 0, "t": 218, "d": [142] },\n\t\t\t\t\t\t{ "px": [240,128], "src": [224,208], "f": 0, "t": 222, "d": [143] },\n\t\t\t\t\t\t{ "px": [128,144], "src": [96,224], "f": 0, "t": 230, "d": [152] },\n\t\t\t\t\t\t{ "px": [144,144], "src": [112,224], "f": 0, "t": 231, "d": [153] },\n\t\t\t\t\t\t{ "px": [160,144], "src": [128,224], "f": 0, "t": 232, "d": [154] },\n\t\t\t\t\t\t{ "px": [176,144], "src": [144,224], "f": 0, "t": 233, "d": [155] },\n\t\t\t\t\t\t{ "px": [192,144], "src": [144,224], "f": 0, "t": 233, "d": [156] },\n\t\t\t\t\t\t{ "px": [208,144], "src": [160,224], "f": 0, "t": 234, "d": [157] },\n\t\t\t\t\t\t{ "px": [224,144], "src": [176,224], "f": 0, "t": 235, "d": [158] },\n\t\t\t\t\t\t{ "px": [240,144], "src": [224,224], "f": 0, "t": 238, "d": [159] },\n\t\t\t\t\t\t{ "px": [128,160], "src": [0,0], "f": 0, "t": 0, "d": [168] },\n\t\t\t\t\t\t{ "px": [128,176], "src": [0,0], "f": 0, "t": 0, "d": [184] },\n\t\t\t\t\t\t{ "px": [0,192], "src": [96,192], "f": 0, "t": 198, "d": [192] },\n\t\t\t\t\t\t{ "px": [144,192], "src": [208,176], "f": 0, "t": 189, "d": [201] },\n\t\t\t\t\t\t{ "px": [0,208], "src": [224,144], "f": 0, "t": 158, "d": [208] },\n\t\t\t\t\t\t{ "px": [48,208], "src": [176,192], "f": 0, "t": 203, "d": [211] },\n\t\t\t\t\t\t{ "px": [64,208], "src": [112,192], "f": 0, "t": 199, "d": [212] },\n\t\t\t\t\t\t{ "px": [80,208], "src": [176,192], "f": 0, "t": 203, "d": [213] },\n\t\t\t\t\t\t{ "px": [96,208], "src": [144,192], "f": 0, "t": 201, "d": [214] },\n\t\t\t\t\t\t{ "px": [112,208], "src": [176,192], "f": 0, "t": 203, "d": [215] },\n\t\t\t\t\t\t{ "px": [128,208], "src": [192,192], "f": 0, "t": 204, "d": [216] },\n\t\t\t\t\t\t{ "px": [144,208], "src": [208,192], "f": 0, "t": 205, "d": [217] },\n\t\t\t\t\t\t{ "px": [160,208], "src": [224,192], "f": 0, "t": 206, "d": [218] },\n\t\t\t\t\t\t{ "px": [240,208], "src": [96,192], "f": 0, "t": 198, "d": [223] },\n\t\t\t\t\t\t{ "px": [0,224], "src": [224,224], "f": 0, "t": 238, "d": [224] },\n\t\t\t\t\t\t{ "px": [16,224], "src": [32,208], "f": 0, "t": 210, "d": [225] },\n\t\t\t\t\t\t{ "px": [32,224], "src": [32,208], "f": 0, "t": 210, "d": [226] },\n\t\t\t\t\t\t{ "px": [48,224], "src": [96,208], "f": 0, "t": 214, "d": [227] },\n\t\t\t\t\t\t{ "px": [64,224], "src": [112,208], "f": 0, "t": 215, "d": [228] },\n\t\t\t\t\t\t{ "px": [80,224], "src": [128,208], "f": 0, "t": 216, "d": [229] },\n\t\t\t\t\t\t{ "px": [96,224], "src": [144,208], "f": 0, "t": 217, "d": [230] },\n\t\t\t\t\t\t{ "px": [112,224], "src": [160,208], "f": 0, "t": 218, "d": [231] },\n\t\t\t\t\t\t{ "px": [128,224], "src": [144,240], "f": 0, "t": 249, "d": [232] },\n\t\t\t\t\t\t{ "px": [144,224], "src": [160,208], "f": 0, "t": 218, "d": [233] },\n\t\t\t\t\t\t{ "px": [160,224], "src": [224,208], "f": 0, "t": 222, "d": [234] },\n\t\t\t\t\t\t{ "px": [176,224], "src": [64,208], "f": 0, "t": 212, "d": [235] },\n\t\t\t\t\t\t{ "px": [192,224], "src": [80,208], "f": 0, "t": 213, "d": [236] },\n\t\t\t\t\t\t{ "px": [208,224], "src": [64,208], "f": 0, "t": 212, "d": [237] },\n\t\t\t\t\t\t{ "px": [224,224], "src": [80,208], "f": 0, "t": 213, "d": [238] },\n\t\t\t\t\t\t{ "px": [240,224], "src": [96,208], "f": 0, "t": 214, "d": [239] },\n\t\t\t\t\t\t{ "px": [32,240], "src": [128,240], "f": 0, "t": 248, "d": [242] },\n\t\t\t\t\t\t{ "px": [48,240], "src": [96,224], "f": 0, "t": 230, "d": [243] },\n\t\t\t\t\t\t{ "px": [64,240], "src": [112,224], "f": 0, "t": 231, "d": [244] },\n\t\t\t\t\t\t{ "px": [80,240], "src": [128,224], "f": 0, "t": 232, "d": [245] },\n\t\t\t\t\t\t{ "px": [96,240], "src": [144,224], "f": 0, "t": 233, "d": [246] },\n\t\t\t\t\t\t{ "px": [112,240], "src": [144,224], "f": 0, "t": 233, "d": [247] },\n\t\t\t\t\t\t{ "px": [128,240], "src": [160,224], "f": 0, "t": 234, "d": [248] },\n\t\t\t\t\t\t{ "px": [144,240], "src": [176,224], "f": 0, "t": 235, "d": [249] },\n\t\t\t\t\t\t{ "px": [160,240], "src": [224,224], "f": 0, "t": 238, "d": [250] },\n\t\t\t\t\t\t{ "px": [208,240], "src": [128,240], "f": 0, "t": 248, "d": [253] },\n\t\t\t\t\t\t{ "px": [240,240], "src": [16,144], "f": 0, "t": 145, "d": [255] }\n\t\t\t\t\t],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms2",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 16,\n\t\t\t\t\t"__cHei": 16,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 17,\n\t\t\t\t\t"__tilesetRelPath": "../../images/edible.png",\n\t\t\t\t\t"iid": "55705430-b4d0-11ec-b8fc-17eb03f716de",\n\t\t\t\t\t"levelId": 0,\n\t\t\t\t\t"layerDefUid": 6,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 7979377,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t}\n\t\t\t],\n\t\t\t"__neighbours": []\n\t\t},\n\t\t{\n\t\t\t"identifier": "Level_1",\n\t\t\t"iid": "e54e1be0-b4d0-11ec-8d42-edfd22a98ff6",\n\t\t\t"uid": 9,\n\t\t\t"worldX": 296,\n\t\t\t"worldY": 0,\n\t\t\t"worldDepth": 0,\n\t\t\t"pxWid": 256,\n\t\t\t"pxHei": 256,\n\t\t\t"__bgColor": "#696A79",\n\t\t\t"bgColor": null,\n\t\t\t"useAutoIdentifier": true,\n\t\t\t"bgRelPath": null,\n\t\t\t"bgPos": null,\n\t\t\t"bgPivotX": 0.5,\n\t\t\t"bgPivotY": 0.5,\n\t\t\t"__smartColor": "#ADADB5",\n\t\t\t"__bgPos": null,\n\t\t\t"externalRelPath": null,\n\t\t\t"fieldInstances": [],\n\t\t\t"layerInstances": [\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "LightingMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 32,\n\t\t\t\t\t"__cHei": 32,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.81,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "e54e42f0-b4d0-11ec-8d42-23a465e97a28",\n\t\t\t\t\t"levelId": 9,\n\t\t\t\t\t"layerDefUid": 8,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 1241947,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "CollisionMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 32,\n\t\t\t\t\t"__cHei": 32,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.85,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "e54e42f1-b4d0-11ec-8d42-7d78886d1a13",\n\t\t\t\t\t"levelId": 9,\n\t\t\t\t\t"layerDefUid": 5,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,1,1\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 8257724,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 16,\n\t\t\t\t\t"__cHei": 16,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 1,\n\t\t\t\t\t"__tilesetRelPath": "bw.png",\n\t\t\t\t\t"iid": "e54e42f2-b4d0-11ec-8d42-b3e2b0108bfd",\n\t\t\t\t\t"levelId": 9,\n\t\t\t\t\t"layerDefUid": 2,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": false,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 590391,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [\n\t\t\t\t\t\t{ "px": [0,0], "src": [96,80], "f": 0, "t": 86, "d": [0] },\n\t\t\t\t\t\t{ "px": [16,0], "src": [112,80], "f": 0, "t": 87, "d": [1] },\n\t\t\t\t\t\t{ "px": [32,0], "src": [128,80], "f": 0, "t": 88, "d": [2] },\n\t\t\t\t\t\t{ "px": [48,0], "src": [144,80], "f": 0, "t": 89, "d": [3] },\n\t\t\t\t\t\t{ "px": [64,0], "src": [160,80], "f": 0, "t": 90, "d": [4] },\n\t\t\t\t\t\t{ "px": [80,0], "src": [176,80], "f": 0, "t": 91, "d": [5] },\n\t\t\t\t\t\t{ "px": [96,0], "src": [192,80], "f": 0, "t": 92, "d": [6] },\n\t\t\t\t\t\t{ "px": [112,0], "src": [208,80], "f": 0, "t": 93, "d": [7] },\n\t\t\t\t\t\t{ "px": [128,0], "src": [224,80], "f": 0, "t": 94, "d": [8] },\n\t\t\t\t\t\t{ "px": [16,16], "src": [112,96], "f": 0, "t": 103, "d": [17] },\n\t\t\t\t\t\t{ "px": [96,16], "src": [192,96], "f": 0, "t": 108, "d": [22] },\n\t\t\t\t\t\t{ "px": [112,16], "src": [208,96], "f": 0, "t": 109, "d": [23] },\n\t\t\t\t\t\t{ "px": [0,32], "src": [96,112], "f": 0, "t": 118, "d": [32] },\n\t\t\t\t\t\t{ "px": [16,32], "src": [112,112], "f": 0, "t": 119, "d": [33] },\n\t\t\t\t\t\t{ "px": [32,32], "src": [128,112], "f": 0, "t": 120, "d": [34] },\n\t\t\t\t\t\t{ "px": [48,32], "src": [144,112], "f": 0, "t": 121, "d": [35] },\n\t\t\t\t\t\t{ "px": [64,32], "src": [160,112], "f": 0, "t": 122, "d": [36] },\n\t\t\t\t\t\t{ "px": [80,32], "src": [176,112], "f": 0, "t": 123, "d": [37] },\n\t\t\t\t\t\t{ "px": [96,32], "src": [192,112], "f": 0, "t": 124, "d": [38] },\n\t\t\t\t\t\t{ "px": [112,32], "src": [208,112], "f": 0, "t": 125, "d": [39] },\n\t\t\t\t\t\t{ "px": [128,32], "src": [224,112], "f": 0, "t": 126, "d": [40] },\n\t\t\t\t\t\t{ "px": [144,32], "src": [96,112], "f": 0, "t": 118, "d": [41] },\n\t\t\t\t\t\t{ "px": [160,32], "src": [160,112], "f": 0, "t": 122, "d": [42] },\n\t\t\t\t\t\t{ "px": [0,48], "src": [96,128], "f": 0, "t": 134, "d": [48] },\n\t\t\t\t\t\t{ "px": [16,48], "src": [112,128], "f": 0, "t": 135, "d": [49] },\n\t\t\t\t\t\t{ "px": [32,48], "src": [128,128], "f": 0, "t": 136, "d": [50] },\n\t\t\t\t\t\t{ "px": [48,48], "src": [144,128], "f": 0, "t": 137, "d": [51] },\n\t\t\t\t\t\t{ "px": [64,48], "src": [160,128], "f": 0, "t": 138, "d": [52] },\n\t\t\t\t\t\t{ "px": [80,48], "src": [176,128], "f": 0, "t": 139, "d": [53] },\n\t\t\t\t\t\t{ "px": [96,48], "src": [192,128], "f": 0, "t": 140, "d": [54] },\n\t\t\t\t\t\t{ "px": [112,48], "src": [208,128], "f": 0, "t": 141, "d": [55] },\n\t\t\t\t\t\t{ "px": [128,48], "src": [160,128], "f": 0, "t": 138, "d": [56] },\n\t\t\t\t\t\t{ "px": [144,48], "src": [176,128], "f": 0, "t": 139, "d": [57] },\n\t\t\t\t\t\t{ "px": [160,48], "src": [224,128], "f": 0, "t": 142, "d": [58] },\n\t\t\t\t\t\t{ "px": [0,64], "src": [96,144], "f": 0, "t": 150, "d": [64] },\n\t\t\t\t\t\t{ "px": [16,64], "src": [112,144], "f": 0, "t": 151, "d": [65] },\n\t\t\t\t\t\t{ "px": [32,64], "src": [128,144], "f": 0, "t": 152, "d": [66] },\n\t\t\t\t\t\t{ "px": [48,64], "src": [144,144], "f": 0, "t": 153, "d": [67] },\n\t\t\t\t\t\t{ "px": [64,64], "src": [160,144], "f": 0, "t": 154, "d": [68] },\n\t\t\t\t\t\t{ "px": [80,64], "src": [176,144], "f": 0, "t": 155, "d": [69] },\n\t\t\t\t\t\t{ "px": [96,64], "src": [192,144], "f": 0, "t": 156, "d": [70] },\n\t\t\t\t\t\t{ "px": [112,64], "src": [208,144], "f": 0, "t": 157, "d": [71] },\n\t\t\t\t\t\t{ "px": [128,64], "src": [160,144], "f": 0, "t": 154, "d": [72] },\n\t\t\t\t\t\t{ "px": [144,64], "src": [176,144], "f": 0, "t": 155, "d": [73] },\n\t\t\t\t\t\t{ "px": [160,64], "src": [224,144], "f": 0, "t": 158, "d": [74] },\n\t\t\t\t\t\t{ "px": [0,80], "src": [80,160], "f": 0, "t": 165, "d": [80] },\n\t\t\t\t\t\t{ "px": [16,80], "src": [80,160], "f": 0, "t": 165, "d": [81] },\n\t\t\t\t\t\t{ "px": [32,80], "src": [80,160], "f": 0, "t": 165, "d": [82] },\n\t\t\t\t\t\t{ "px": [48,80], "src": [80,160], "f": 0, "t": 165, "d": [83] },\n\t\t\t\t\t\t{ "px": [64,80], "src": [80,160], "f": 0, "t": 165, "d": [84] },\n\t\t\t\t\t\t{ "px": [80,80], "src": [80,160], "f": 0, "t": 165, "d": [85] },\n\t\t\t\t\t\t{ "px": [96,80], "src": [80,160], "f": 0, "t": 165, "d": [86] },\n\t\t\t\t\t\t{ "px": [112,80], "src": [80,160], "f": 0, "t": 165, "d": [87] },\n\t\t\t\t\t\t{ "px": [128,80], "src": [208,160], "f": 0, "t": 173, "d": [88] },\n\t\t\t\t\t\t{ "px": [144,80], "src": [208,160], "f": 0, "t": 173, "d": [89] },\n\t\t\t\t\t\t{ "px": [160,80], "src": [224,160], "f": 0, "t": 174, "d": [90] },\n\t\t\t\t\t\t{ "px": [224,128], "src": [208,176], "f": 0, "t": 189, "d": [142] },\n\t\t\t\t\t\t{ "px": [128,144], "src": [96,192], "f": 0, "t": 198, "d": [152] },\n\t\t\t\t\t\t{ "px": [144,144], "src": [112,192], "f": 0, "t": 199, "d": [153] },\n\t\t\t\t\t\t{ "px": [160,144], "src": [128,192], "f": 0, "t": 200, "d": [154] },\n\t\t\t\t\t\t{ "px": [176,144], "src": [144,192], "f": 0, "t": 201, "d": [155] },\n\t\t\t\t\t\t{ "px": [192,144], "src": [176,192], "f": 0, "t": 203, "d": [156] },\n\t\t\t\t\t\t{ "px": [208,144], "src": [192,192], "f": 0, "t": 204, "d": [157] },\n\t\t\t\t\t\t{ "px": [224,144], "src": [208,192], "f": 0, "t": 205, "d": [158] },\n\t\t\t\t\t\t{ "px": [240,144], "src": [224,192], "f": 0, "t": 206, "d": [159] },\n\t\t\t\t\t\t{ "px": [128,160], "src": [96,208], "f": 0, "t": 214, "d": [168] },\n\t\t\t\t\t\t{ "px": [144,160], "src": [112,208], "f": 0, "t": 215, "d": [169] },\n\t\t\t\t\t\t{ "px": [160,160], "src": [128,208], "f": 0, "t": 216, "d": [170] },\n\t\t\t\t\t\t{ "px": [176,160], "src": [144,208], "f": 0, "t": 217, "d": [171] },\n\t\t\t\t\t\t{ "px": [192,160], "src": [160,208], "f": 0, "t": 218, "d": [172] },\n\t\t\t\t\t\t{ "px": [208,160], "src": [144,240], "f": 0, "t": 249, "d": [173] },\n\t\t\t\t\t\t{ "px": [224,160], "src": [160,208], "f": 0, "t": 218, "d": [174] },\n\t\t\t\t\t\t{ "px": [240,160], "src": [224,208], "f": 0, "t": 222, "d": [175] },\n\t\t\t\t\t\t{ "px": [128,176], "src": [96,224], "f": 0, "t": 230, "d": [184] },\n\t\t\t\t\t\t{ "px": [144,176], "src": [112,224], "f": 0, "t": 231, "d": [185] },\n\t\t\t\t\t\t{ "px": [160,176], "src": [128,224], "f": 0, "t": 232, "d": [186] },\n\t\t\t\t\t\t{ "px": [176,176], "src": [144,224], "f": 0, "t": 233, "d": [187] },\n\t\t\t\t\t\t{ "px": [192,176], "src": [144,224], "f": 0, "t": 233, "d": [188] },\n\t\t\t\t\t\t{ "px": [208,176], "src": [160,224], "f": 0, "t": 234, "d": [189] },\n\t\t\t\t\t\t{ "px": [224,176], "src": [176,224], "f": 0, "t": 235, "d": [190] },\n\t\t\t\t\t\t{ "px": [240,176], "src": [224,224], "f": 0, "t": 238, "d": [191] },\n\t\t\t\t\t\t{ "px": [0,192], "src": [0,176], "f": 0, "t": 176, "d": [192] },\n\t\t\t\t\t\t{ "px": [144,192], "src": [208,176], "f": 0, "t": 189, "d": [201] },\n\t\t\t\t\t\t{ "px": [0,208], "src": [0,192], "f": 0, "t": 192, "d": [208] },\n\t\t\t\t\t\t{ "px": [48,208], "src": [96,192], "f": 0, "t": 198, "d": [211] },\n\t\t\t\t\t\t{ "px": [64,208], "src": [112,192], "f": 0, "t": 199, "d": [212] },\n\t\t\t\t\t\t{ "px": [80,208], "src": [128,192], "f": 0, "t": 200, "d": [213] },\n\t\t\t\t\t\t{ "px": [96,208], "src": [144,192], "f": 0, "t": 201, "d": [214] },\n\t\t\t\t\t\t{ "px": [112,208], "src": [176,192], "f": 0, "t": 203, "d": [215] },\n\t\t\t\t\t\t{ "px": [128,208], "src": [192,192], "f": 0, "t": 204, "d": [216] },\n\t\t\t\t\t\t{ "px": [144,208], "src": [208,192], "f": 0, "t": 205, "d": [217] },\n\t\t\t\t\t\t{ "px": [160,208], "src": [224,192], "f": 0, "t": 206, "d": [218] },\n\t\t\t\t\t\t{ "px": [240,208], "src": [96,192], "f": 0, "t": 198, "d": [223] },\n\t\t\t\t\t\t{ "px": [0,224], "src": [0,208], "f": 0, "t": 208, "d": [224] },\n\t\t\t\t\t\t{ "px": [16,224], "src": [32,208], "f": 0, "t": 210, "d": [225] },\n\t\t\t\t\t\t{ "px": [32,224], "src": [32,208], "f": 0, "t": 210, "d": [226] },\n\t\t\t\t\t\t{ "px": [48,224], "src": [96,208], "f": 0, "t": 214, "d": [227] },\n\t\t\t\t\t\t{ "px": [64,224], "src": [112,208], "f": 0, "t": 215, "d": [228] },\n\t\t\t\t\t\t{ "px": [80,224], "src": [128,208], "f": 0, "t": 216, "d": [229] },\n\t\t\t\t\t\t{ "px": [96,224], "src": [144,208], "f": 0, "t": 217, "d": [230] },\n\t\t\t\t\t\t{ "px": [112,224], "src": [160,208], "f": 0, "t": 218, "d": [231] },\n\t\t\t\t\t\t{ "px": [128,224], "src": [144,240], "f": 0, "t": 249, "d": [232] },\n\t\t\t\t\t\t{ "px": [144,224], "src": [160,208], "f": 0, "t": 218, "d": [233] },\n\t\t\t\t\t\t{ "px": [160,224], "src": [224,208], "f": 0, "t": 222, "d": [234] },\n\t\t\t\t\t\t{ "px": [176,224], "src": [64,208], "f": 0, "t": 212, "d": [235] },\n\t\t\t\t\t\t{ "px": [192,224], "src": [80,208], "f": 0, "t": 213, "d": [236] },\n\t\t\t\t\t\t{ "px": [208,224], "src": [64,208], "f": 0, "t": 212, "d": [237] },\n\t\t\t\t\t\t{ "px": [224,224], "src": [80,208], "f": 0, "t": 213, "d": [238] },\n\t\t\t\t\t\t{ "px": [240,224], "src": [96,208], "f": 0, "t": 214, "d": [239] },\n\t\t\t\t\t\t{ "px": [0,240], "src": [0,224], "f": 0, "t": 224, "d": [240] },\n\t\t\t\t\t\t{ "px": [48,240], "src": [96,224], "f": 0, "t": 230, "d": [243] },\n\t\t\t\t\t\t{ "px": [64,240], "src": [112,224], "f": 0, "t": 231, "d": [244] },\n\t\t\t\t\t\t{ "px": [80,240], "src": [128,224], "f": 0, "t": 232, "d": [245] },\n\t\t\t\t\t\t{ "px": [96,240], "src": [144,224], "f": 0, "t": 233, "d": [246] },\n\t\t\t\t\t\t{ "px": [112,240], "src": [144,224], "f": 0, "t": 233, "d": [247] },\n\t\t\t\t\t\t{ "px": [128,240], "src": [160,224], "f": 0, "t": 234, "d": [248] },\n\t\t\t\t\t\t{ "px": [144,240], "src": [176,224], "f": 0, "t": 235, "d": [249] },\n\t\t\t\t\t\t{ "px": [160,240], "src": [224,224], "f": 0, "t": 238, "d": [250] },\n\t\t\t\t\t\t{ "px": [240,240], "src": [16,144], "f": 0, "t": 145, "d": [255] }\n\t\t\t\t\t],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms2",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 16,\n\t\t\t\t\t"__cHei": 16,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 17,\n\t\t\t\t\t"__tilesetRelPath": "../../images/edible.png",\n\t\t\t\t\t"iid": "e54eb820-b4d0-11ec-8d42-592e48cdb332",\n\t\t\t\t\t"levelId": 9,\n\t\t\t\t\t"layerDefUid": 6,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 7979377,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [\n\t\t\t\t\t\t{ "px": [176,224], "src": [80,112], "f": 0, "t": 47, "d": [235] },\n\t\t\t\t\t\t{ "px": [192,224], "src": [64,112], "f": 0, "t": 46, "d": [236] },\n\t\t\t\t\t\t{ "px": [208,224], "src": [80,112], "f": 0, "t": 47, "d": [237] },\n\t\t\t\t\t\t{ "px": [224,224], "src": [64,112], "f": 0, "t": 46, "d": [238] },\n\t\t\t\t\t\t{ "px": [240,224], "src": [48,112], "f": 0, "t": 45, "d": [239] },\n\t\t\t\t\t\t{ "px": [0,240], "src": [48,112], "f": 0, "t": 45, "d": [240] },\n\t\t\t\t\t\t{ "px": [16,240], "src": [48,112], "f": 0, "t": 45, "d": [241] },\n\t\t\t\t\t\t{ "px": [32,240], "src": [48,112], "f": 0, "t": 45, "d": [242] },\n\t\t\t\t\t\t{ "px": [48,240], "src": [48,112], "f": 0, "t": 45, "d": [243] },\n\t\t\t\t\t\t{ "px": [64,240], "src": [48,112], "f": 0, "t": 45, "d": [244] },\n\t\t\t\t\t\t{ "px": [80,240], "src": [80,112], "f": 0, "t": 47, "d": [245] },\n\t\t\t\t\t\t{ "px": [176,256], "src": [64,112], "f": 0, "t": 46, "d": [267] },\n\t\t\t\t\t\t{ "px": [192,256], "src": [16,144], "f": 0, "t": 55, "d": [268] },\n\t\t\t\t\t\t{ "px": [80,272], "src": [64,112], "f": 0, "t": 46, "d": [277] },\n\t\t\t\t\t\t{ "px": [176,288], "src": [80,112], "f": 0, "t": 47, "d": [299] },\n\t\t\t\t\t\t{ "px": [80,304], "src": [80,112], "f": 0, "t": 47, "d": [309] },\n\t\t\t\t\t\t{ "px": [176,320], "src": [64,112], "f": 0, "t": 46, "d": [331] },\n\t\t\t\t\t\t{ "px": [192,320], "src": [80,112], "f": 0, "t": 47, "d": [332] },\n\t\t\t\t\t\t{ "px": [208,320], "src": [64,112], "f": 0, "t": 46, "d": [333] },\n\t\t\t\t\t\t{ "px": [224,320], "src": [80,112], "f": 0, "t": 47, "d": [334] },\n\t\t\t\t\t\t{ "px": [240,320], "src": [64,112], "f": 0, "t": 46, "d": [335] },\n\t\t\t\t\t\t{ "px": [0,336], "src": [64,112], "f": 0, "t": 46, "d": [336] },\n\t\t\t\t\t\t{ "px": [16,336], "src": [64,112], "f": 0, "t": 46, "d": [337] },\n\t\t\t\t\t\t{ "px": [32,336], "src": [64,112], "f": 0, "t": 46, "d": [338] },\n\t\t\t\t\t\t{ "px": [48,336], "src": [64,112], "f": 0, "t": 46, "d": [339] },\n\t\t\t\t\t\t{ "px": [64,336], "src": [64,112], "f": 0, "t": 46, "d": [340] },\n\t\t\t\t\t\t{ "px": [80,336], "src": [80,112], "f": 0, "t": 47, "d": [341] },\n\t\t\t\t\t\t{ "px": [112,864], "src": [48,112], "f": 0, "t": 45, "d": [871] },\n\t\t\t\t\t\t{ "px": [128,864], "src": [48,112], "f": 0, "t": 45, "d": [872] },\n\t\t\t\t\t\t{ "px": [144,864], "src": [48,112], "f": 0, "t": 45, "d": [873] },\n\t\t\t\t\t\t{ "px": [160,864], "src": [48,112], "f": 0, "t": 45, "d": [874] },\n\t\t\t\t\t\t{ "px": [176,864], "src": [48,112], "f": 0, "t": 45, "d": [875] },\n\t\t\t\t\t\t{ "px": [192,864], "src": [48,112], "f": 0, "t": 45, "d": [876] },\n\t\t\t\t\t\t{ "px": [208,864], "src": [48,112], "f": 0, "t": 45, "d": [877] },\n\t\t\t\t\t\t{ "px": [224,864], "src": [48,112], "f": 0, "t": 45, "d": [878] },\n\t\t\t\t\t\t{ "px": [240,864], "src": [48,112], "f": 0, "t": 45, "d": [879] },\n\t\t\t\t\t\t{ "px": [0,880], "src": [48,112], "f": 0, "t": 45, "d": [880] },\n\t\t\t\t\t\t{ "px": [16,880], "src": [48,112], "f": 0, "t": 45, "d": [881] },\n\t\t\t\t\t\t{ "px": [32,880], "src": [48,112], "f": 0, "t": 45, "d": [882] },\n\t\t\t\t\t\t{ "px": [48,880], "src": [48,112], "f": 0, "t": 45, "d": [883] },\n\t\t\t\t\t\t{ "px": [64,880], "src": [48,112], "f": 0, "t": 45, "d": [884] },\n\t\t\t\t\t\t{ "px": [96,928], "src": [80,112], "f": 0, "t": 47, "d": [934] },\n\t\t\t\t\t\t{ "px": [80,944], "src": [80,112], "f": 0, "t": 47, "d": [949] },\n\t\t\t\t\t\t{ "px": [80,976], "src": [80,112], "f": 0, "t": 47, "d": [981] }\n\t\t\t\t\t],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t}\n\t\t\t],\n\t\t\t"__neighbours": [{ "levelIid": "b2e0e130-b4d0-11ec-a2c2-6be9aaa1a1c1", "levelUid": 10, "dir": "s" }]\n\t\t},\n\t\t{\n\t\t\t"identifier": "Level_2",\n\t\t\t"iid": "b2e0e130-b4d0-11ec-a2c2-6be9aaa1a1c1",\n\t\t\t"uid": 10,\n\t\t\t"worldX": 384,\n\t\t\t"worldY": 256,\n\t\t\t"worldDepth": 0,\n\t\t\t"pxWid": 384,\n\t\t\t"pxHei": 320,\n\t\t\t"__bgColor": "#696A79",\n\t\t\t"bgColor": null,\n\t\t\t"useAutoIdentifier": true,\n\t\t\t"bgRelPath": null,\n\t\t\t"bgPos": null,\n\t\t\t"bgPivotX": 0.5,\n\t\t\t"bgPivotY": 0.5,\n\t\t\t"__smartColor": "#ADADB5",\n\t\t\t"__bgPos": null,\n\t\t\t"externalRelPath": null,\n\t\t\t"fieldInstances": [],\n\t\t\t"layerInstances": [\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "LightingMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 48,\n\t\t\t\t\t"__cHei": 40,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.81,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "b2e10840-b4d0-11ec-a2c2-e74b08a911a0",\n\t\t\t\t\t"levelId": 10,\n\t\t\t\t\t"layerDefUid": 8,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 5169369,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "CollisionMap",\n\t\t\t\t\t"__type": "IntGrid",\n\t\t\t\t\t"__cWid": 48,\n\t\t\t\t\t"__cHei": 40,\n\t\t\t\t\t"__gridSize": 8,\n\t\t\t\t\t"__opacity": 0.85,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": null,\n\t\t\t\t\t"__tilesetRelPath": null,\n\t\t\t\t\t"iid": "b2e10841-b4d0-11ec-a2c2-7990233f73f3",\n\t\t\t\t\t"levelId": 10,\n\t\t\t\t\t"layerDefUid": 5,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,\n\t\t\t\t\t\t1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\t\t\t\t\t\t0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n\t\t\t\t\t],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 2185839,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 24,\n\t\t\t\t\t"__cHei": 20,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 1,\n\t\t\t\t\t"__tilesetRelPath": "bw.png",\n\t\t\t\t\t"iid": "b2e12f50-b4d0-11ec-a2c2-0bc99c110e8f",\n\t\t\t\t\t"levelId": 10,\n\t\t\t\t\t"layerDefUid": 2,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 1600233,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [\n\t\t\t\t\t\t{ "px": [0,32], "src": [16,128], "f": 0, "t": 129, "d": [48] },\n\t\t\t\t\t\t{ "px": [16,32], "src": [32,128], "f": 0, "t": 130, "d": [49] },\n\t\t\t\t\t\t{ "px": [32,32], "src": [32,128], "f": 0, "t": 130, "d": [50] },\n\t\t\t\t\t\t{ "px": [48,32], "src": [96,128], "f": 0, "t": 134, "d": [51] },\n\t\t\t\t\t\t{ "px": [64,32], "src": [96,128], "f": 0, "t": 134, "d": [52] },\n\t\t\t\t\t\t{ "px": [80,32], "src": [112,128], "f": 0, "t": 135, "d": [53] },\n\t\t\t\t\t\t{ "px": [96,32], "src": [128,128], "f": 0, "t": 136, "d": [54] },\n\t\t\t\t\t\t{ "px": [112,32], "src": [144,128], "f": 0, "t": 137, "d": [55] },\n\t\t\t\t\t\t{ "px": [128,32], "src": [160,128], "f": 0, "t": 138, "d": [56] },\n\t\t\t\t\t\t{ "px": [144,32], "src": [176,128], "f": 0, "t": 139, "d": [57] },\n\t\t\t\t\t\t{ "px": [160,32], "src": [224,128], "f": 0, "t": 142, "d": [58] },\n\t\t\t\t\t\t{ "px": [208,32], "src": [16,128], "f": 0, "t": 129, "d": [61] },\n\t\t\t\t\t\t{ "px": [224,32], "src": [32,128], "f": 0, "t": 130, "d": [62] },\n\t\t\t\t\t\t{ "px": [240,32], "src": [32,128], "f": 0, "t": 130, "d": [63] },\n\t\t\t\t\t\t{ "px": [256,32], "src": [96,128], "f": 0, "t": 134, "d": [64] },\n\t\t\t\t\t\t{ "px": [272,32], "src": [96,128], "f": 0, "t": 134, "d": [65] },\n\t\t\t\t\t\t{ "px": [288,32], "src": [112,128], "f": 0, "t": 135, "d": [66] },\n\t\t\t\t\t\t{ "px": [304,32], "src": [128,128], "f": 0, "t": 136, "d": [67] },\n\t\t\t\t\t\t{ "px": [320,32], "src": [144,128], "f": 0, "t": 137, "d": [68] },\n\t\t\t\t\t\t{ "px": [336,32], "src": [160,128], "f": 0, "t": 138, "d": [69] },\n\t\t\t\t\t\t{ "px": [352,32], "src": [176,128], "f": 0, "t": 139, "d": [70] },\n\t\t\t\t\t\t{ "px": [368,32], "src": [224,128], "f": 0, "t": 142, "d": [71] },\n\t\t\t\t\t\t{ "px": [0,48], "src": [16,144], "f": 0, "t": 145, "d": [72] },\n\t\t\t\t\t\t{ "px": [16,48], "src": [32,144], "f": 0, "t": 146, "d": [73] },\n\t\t\t\t\t\t{ "px": [32,48], "src": [32,144], "f": 0, "t": 146, "d": [74] },\n\t\t\t\t\t\t{ "px": [48,48], "src": [208,144], "f": 0, "t": 157, "d": [75] },\n\t\t\t\t\t\t{ "px": [64,48], "src": [208,144], "f": 0, "t": 157, "d": [76] },\n\t\t\t\t\t\t{ "px": [80,48], "src": [208,144], "f": 0, "t": 157, "d": [77] },\n\t\t\t\t\t\t{ "px": [96,48], "src": [208,144], "f": 0, "t": 157, "d": [78] },\n\t\t\t\t\t\t{ "px": [112,48], "src": [208,144], "f": 0, "t": 157, "d": [79] },\n\t\t\t\t\t\t{ "px": [128,48], "src": [208,144], "f": 0, "t": 157, "d": [80] },\n\t\t\t\t\t\t{ "px": [144,48], "src": [208,144], "f": 0, "t": 157, "d": [81] },\n\t\t\t\t\t\t{ "px": [160,48], "src": [224,144], "f": 0, "t": 158, "d": [82] },\n\t\t\t\t\t\t{ "px": [208,48], "src": [16,144], "f": 0, "t": 145, "d": [85] },\n\t\t\t\t\t\t{ "px": [224,48], "src": [32,144], "f": 0, "t": 146, "d": [86] },\n\t\t\t\t\t\t{ "px": [240,48], "src": [32,144], "f": 0, "t": 146, "d": [87] },\n\t\t\t\t\t\t{ "px": [256,48], "src": [208,144], "f": 0, "t": 157, "d": [88] },\n\t\t\t\t\t\t{ "px": [272,48], "src": [208,144], "f": 0, "t": 157, "d": [89] },\n\t\t\t\t\t\t{ "px": [288,48], "src": [208,144], "f": 0, "t": 157, "d": [90] },\n\t\t\t\t\t\t{ "px": [304,48], "src": [208,144], "f": 0, "t": 157, "d": [91] },\n\t\t\t\t\t\t{ "px": [320,48], "src": [208,144], "f": 0, "t": 157, "d": [92] },\n\t\t\t\t\t\t{ "px": [336,48], "src": [208,144], "f": 0, "t": 157, "d": [93] },\n\t\t\t\t\t\t{ "px": [352,48], "src": [208,144], "f": 0, "t": 157, "d": [94] },\n\t\t\t\t\t\t{ "px": [368,48], "src": [224,144], "f": 0, "t": 158, "d": [95] },\n\t\t\t\t\t\t{ "px": [0,64], "src": [16,160], "f": 0, "t": 161, "d": [96] },\n\t\t\t\t\t\t{ "px": [16,64], "src": [32,160], "f": 0, "t": 162, "d": [97] },\n\t\t\t\t\t\t{ "px": [32,64], "src": [32,160], "f": 0, "t": 162, "d": [98] },\n\t\t\t\t\t\t{ "px": [48,64], "src": [208,160], "f": 0, "t": 173, "d": [99] },\n\t\t\t\t\t\t{ "px": [64,64], "src": [208,160], "f": 0, "t": 173, "d": [100] },\n\t\t\t\t\t\t{ "px": [80,64], "src": [208,160], "f": 0, "t": 173, "d": [101] },\n\t\t\t\t\t\t{ "px": [96,64], "src": [208,160], "f": 0, "t": 173, "d": [102] },\n\t\t\t\t\t\t{ "px": [112,64], "src": [208,160], "f": 0, "t": 173, "d": [103] },\n\t\t\t\t\t\t{ "px": [128,64], "src": [128,224], "f": 0, "t": 232, "d": [104] },\n\t\t\t\t\t\t{ "px": [144,64], "src": [144,224], "f": 0, "t": 233, "d": [105] },\n\t\t\t\t\t\t{ "px": [160,64], "src": [224,160], "f": 0, "t": 174, "d": [106] },\n\t\t\t\t\t\t{ "px": [208,64], "src": [16,160], "f": 0, "t": 161, "d": [109] },\n\t\t\t\t\t\t{ "px": [224,64], "src": [32,160], "f": 0, "t": 162, "d": [110] },\n\t\t\t\t\t\t{ "px": [240,64], "src": [32,160], "f": 0, "t": 162, "d": [111] },\n\t\t\t\t\t\t{ "px": [256,64], "src": [208,160], "f": 0, "t": 173, "d": [112] },\n\t\t\t\t\t\t{ "px": [272,64], "src": [208,160], "f": 0, "t": 173, "d": [113] },\n\t\t\t\t\t\t{ "px": [288,64], "src": [208,160], "f": 0, "t": 173, "d": [114] },\n\t\t\t\t\t\t{ "px": [304,64], "src": [208,160], "f": 0, "t": 173, "d": [115] },\n\t\t\t\t\t\t{ "px": [320,64], "src": [208,160], "f": 0, "t": 173, "d": [116] },\n\t\t\t\t\t\t{ "px": [336,64], "src": [208,160], "f": 0, "t": 173, "d": [117] },\n\t\t\t\t\t\t{ "px": [352,64], "src": [208,160], "f": 0, "t": 173, "d": [118] },\n\t\t\t\t\t\t{ "px": [368,64], "src": [224,160], "f": 0, "t": 174, "d": [119] },\n\t\t\t\t\t\t{ "px": [144,96], "src": [16,128], "f": 0, "t": 129, "d": [153] },\n\t\t\t\t\t\t{ "px": [160,96], "src": [32,128], "f": 0, "t": 130, "d": [154] },\n\t\t\t\t\t\t{ "px": [176,96], "src": [32,128], "f": 0, "t": 130, "d": [155] },\n\t\t\t\t\t\t{ "px": [192,96], "src": [96,128], "f": 0, "t": 134, "d": [156] },\n\t\t\t\t\t\t{ "px": [208,96], "src": [96,128], "f": 0, "t": 134, "d": [157] },\n\t\t\t\t\t\t{ "px": [224,96], "src": [112,128], "f": 0, "t": 135, "d": [158] },\n\t\t\t\t\t\t{ "px": [240,96], "src": [128,128], "f": 0, "t": 136, "d": [159] },\n\t\t\t\t\t\t{ "px": [256,96], "src": [144,128], "f": 0, "t": 137, "d": [160] },\n\t\t\t\t\t\t{ "px": [272,96], "src": [160,128], "f": 0, "t": 138, "d": [161] },\n\t\t\t\t\t\t{ "px": [288,96], "src": [176,128], "f": 0, "t": 139, "d": [162] },\n\t\t\t\t\t\t{ "px": [304,96], "src": [224,128], "f": 0, "t": 142, "d": [163] },\n\t\t\t\t\t\t{ "px": [144,112], "src": [16,144], "f": 0, "t": 145, "d": [177] },\n\t\t\t\t\t\t{ "px": [160,112], "src": [32,144], "f": 0, "t": 146, "d": [178] },\n\t\t\t\t\t\t{ "px": [176,112], "src": [32,144], "f": 0, "t": 146, "d": [179] },\n\t\t\t\t\t\t{ "px": [192,112], "src": [208,144], "f": 0, "t": 157, "d": [180] },\n\t\t\t\t\t\t{ "px": [208,112], "src": [208,144], "f": 0, "t": 157, "d": [181] },\n\t\t\t\t\t\t{ "px": [224,112], "src": [208,144], "f": 0, "t": 157, "d": [182] },\n\t\t\t\t\t\t{ "px": [240,112], "src": [208,144], "f": 0, "t": 157, "d": [183] },\n\t\t\t\t\t\t{ "px": [256,112], "src": [208,144], "f": 0, "t": 157, "d": [184] },\n\t\t\t\t\t\t{ "px": [272,112], "src": [208,144], "f": 0, "t": 157, "d": [185] },\n\t\t\t\t\t\t{ "px": [288,112], "src": [208,144], "f": 0, "t": 157, "d": [186] },\n\t\t\t\t\t\t{ "px": [304,112], "src": [224,144], "f": 0, "t": 158, "d": [187] },\n\t\t\t\t\t\t{ "px": [96,128], "src": [0,0], "f": 0, "t": 0, "d": [198] },\n\t\t\t\t\t\t{ "px": [144,128], "src": [16,160], "f": 0, "t": 161, "d": [201] },\n\t\t\t\t\t\t{ "px": [160,128], "src": [32,160], "f": 0, "t": 162, "d": [202] },\n\t\t\t\t\t\t{ "px": [176,128], "src": [32,160], "f": 0, "t": 162, "d": [203] },\n\t\t\t\t\t\t{ "px": [192,128], "src": [208,160], "f": 0, "t": 173, "d": [204] },\n\t\t\t\t\t\t{ "px": [208,128], "src": [208,160], "f": 0, "t": 173, "d": [205] },\n\t\t\t\t\t\t{ "px": [224,128], "src": [208,160], "f": 0, "t": 173, "d": [206] },\n\t\t\t\t\t\t{ "px": [240,128], "src": [208,160], "f": 0, "t": 173, "d": [207] },\n\t\t\t\t\t\t{ "px": [256,128], "src": [208,160], "f": 0, "t": 173, "d": [208] },\n\t\t\t\t\t\t{ "px": [272,128], "src": [208,160], "f": 0, "t": 173, "d": [209] },\n\t\t\t\t\t\t{ "px": [288,128], "src": [208,160], "f": 0, "t": 173, "d": [210] },\n\t\t\t\t\t\t{ "px": [304,128], "src": [224,160], "f": 0, "t": 174, "d": [211] },\n\t\t\t\t\t\t{ "px": [144,160], "src": [16,128], "f": 0, "t": 129, "d": [249] },\n\t\t\t\t\t\t{ "px": [160,160], "src": [32,128], "f": 0, "t": 130, "d": [250] },\n\t\t\t\t\t\t{ "px": [176,160], "src": [32,128], "f": 0, "t": 130, "d": [251] },\n\t\t\t\t\t\t{ "px": [192,160], "src": [96,128], "f": 0, "t": 134, "d": [252] },\n\t\t\t\t\t\t{ "px": [208,160], "src": [176,128], "f": 0, "t": 139, "d": [253] },\n\t\t\t\t\t\t{ "px": [224,160], "src": [224,128], "f": 0, "t": 142, "d": [254] },\n\t\t\t\t\t\t{ "px": [144,176], "src": [16,144], "f": 0, "t": 145, "d": [273] },\n\t\t\t\t\t\t{ "px": [192,176], "src": [208,144], "f": 0, "t": 157, "d": [276] },\n\t\t\t\t\t\t{ "px": [208,176], "src": [208,144], "f": 0, "t": 157, "d": [277] },\n\t\t\t\t\t\t{ "px": [224,176], "src": [224,144], "f": 0, "t": 158, "d": [278] },\n\t\t\t\t\t\t{ "px": [144,192], "src": [16,160], "f": 0, "t": 161, "d": [297] },\n\t\t\t\t\t\t{ "px": [160,192], "src": [32,160], "f": 0, "t": 162, "d": [298] },\n\t\t\t\t\t\t{ "px": [176,192], "src": [32,160], "f": 0, "t": 162, "d": [299] },\n\t\t\t\t\t\t{ "px": [192,192], "src": [208,160], "f": 0, "t": 173, "d": [300] },\n\t\t\t\t\t\t{ "px": [208,192], "src": [208,160], "f": 0, "t": 173, "d": [301] },\n\t\t\t\t\t\t{ "px": [224,192], "src": [224,160], "f": 0, "t": 174, "d": [302] },\n\t\t\t\t\t\t{ "px": [32,208], "src": [96,192], "f": 0, "t": 198, "d": [314] },\n\t\t\t\t\t\t{ "px": [48,208], "src": [112,192], "f": 0, "t": 199, "d": [315] },\n\t\t\t\t\t\t{ "px": [64,208], "src": [128,192], "f": 0, "t": 200, "d": [316] },\n\t\t\t\t\t\t{ "px": [80,208], "src": [144,192], "f": 0, "t": 201, "d": [317] },\n\t\t\t\t\t\t{ "px": [96,208], "src": [192,192], "f": 0, "t": 204, "d": [318] },\n\t\t\t\t\t\t{ "px": [112,208], "src": [208,192], "f": 0, "t": 205, "d": [319] },\n\t\t\t\t\t\t{ "px": [128,208], "src": [224,192], "f": 0, "t": 206, "d": [320] },\n\t\t\t\t\t\t{ "px": [32,224], "src": [96,208], "f": 0, "t": 214, "d": [338] },\n\t\t\t\t\t\t{ "px": [48,224], "src": [112,208], "f": 0, "t": 215, "d": [339] },\n\t\t\t\t\t\t{ "px": [64,224], "src": [128,208], "f": 0, "t": 216, "d": [340] },\n\t\t\t\t\t\t{ "px": [80,224], "src": [144,208], "f": 0, "t": 217, "d": [341] },\n\t\t\t\t\t\t{ "px": [96,224], "src": [192,208], "f": 0, "t": 220, "d": [342] },\n\t\t\t\t\t\t{ "px": [112,224], "src": [208,208], "f": 0, "t": 221, "d": [343] },\n\t\t\t\t\t\t{ "px": [128,224], "src": [224,208], "f": 0, "t": 222, "d": [344] },\n\t\t\t\t\t\t{ "px": [208,224], "src": [16,128], "f": 0, "t": 129, "d": [349] },\n\t\t\t\t\t\t{ "px": [224,224], "src": [32,128], "f": 0, "t": 130, "d": [350] },\n\t\t\t\t\t\t{ "px": [240,224], "src": [32,128], "f": 0, "t": 130, "d": [351] },\n\t\t\t\t\t\t{ "px": [256,224], "src": [96,128], "f": 0, "t": 134, "d": [352] },\n\t\t\t\t\t\t{ "px": [272,224], "src": [96,128], "f": 0, "t": 134, "d": [353] },\n\t\t\t\t\t\t{ "px": [288,224], "src": [112,128], "f": 0, "t": 135, "d": [354] },\n\t\t\t\t\t\t{ "px": [304,224], "src": [128,128], "f": 0, "t": 136, "d": [355] },\n\t\t\t\t\t\t{ "px": [320,224], "src": [144,128], "f": 0, "t": 137, "d": [356] },\n\t\t\t\t\t\t{ "px": [336,224], "src": [160,128], "f": 0, "t": 138, "d": [357] },\n\t\t\t\t\t\t{ "px": [352,224], "src": [176,128], "f": 0, "t": 139, "d": [358] },\n\t\t\t\t\t\t{ "px": [368,224], "src": [224,128], "f": 0, "t": 142, "d": [359] },\n\t\t\t\t\t\t{ "px": [32,240], "src": [96,224], "f": 0, "t": 230, "d": [362] },\n\t\t\t\t\t\t{ "px": [48,240], "src": [112,224], "f": 0, "t": 231, "d": [363] },\n\t\t\t\t\t\t{ "px": [64,240], "src": [128,224], "f": 0, "t": 232, "d": [364] },\n\t\t\t\t\t\t{ "px": [80,240], "src": [144,224], "f": 0, "t": 233, "d": [365] },\n\t\t\t\t\t\t{ "px": [96,240], "src": [128,224], "f": 0, "t": 232, "d": [366] },\n\t\t\t\t\t\t{ "px": [112,240], "src": [144,224], "f": 0, "t": 233, "d": [367] },\n\t\t\t\t\t\t{ "px": [128,240], "src": [224,224], "f": 0, "t": 238, "d": [368] },\n\t\t\t\t\t\t{ "px": [208,240], "src": [16,144], "f": 0, "t": 145, "d": [373] },\n\t\t\t\t\t\t{ "px": [224,240], "src": [32,144], "f": 0, "t": 146, "d": [374] },\n\t\t\t\t\t\t{ "px": [240,240], "src": [32,144], "f": 0, "t": 146, "d": [375] },\n\t\t\t\t\t\t{ "px": [256,240], "src": [208,144], "f": 0, "t": 157, "d": [376] },\n\t\t\t\t\t\t{ "px": [272,240], "src": [208,144], "f": 0, "t": 157, "d": [377] },\n\t\t\t\t\t\t{ "px": [288,240], "src": [208,144], "f": 0, "t": 157, "d": [378] },\n\t\t\t\t\t\t{ "px": [304,240], "src": [208,144], "f": 0, "t": 157, "d": [379] },\n\t\t\t\t\t\t{ "px": [320,240], "src": [208,144], "f": 0, "t": 157, "d": [380] },\n\t\t\t\t\t\t{ "px": [336,240], "src": [208,144], "f": 0, "t": 157, "d": [381] },\n\t\t\t\t\t\t{ "px": [352,240], "src": [208,144], "f": 0, "t": 157, "d": [382] },\n\t\t\t\t\t\t{ "px": [368,240], "src": [224,144], "f": 0, "t": 158, "d": [383] },\n\t\t\t\t\t\t{ "px": [208,256], "src": [16,160], "f": 0, "t": 161, "d": [397] },\n\t\t\t\t\t\t{ "px": [224,256], "src": [32,160], "f": 0, "t": 162, "d": [398] },\n\t\t\t\t\t\t{ "px": [240,256], "src": [32,160], "f": 0, "t": 162, "d": [399] },\n\t\t\t\t\t\t{ "px": [256,256], "src": [208,160], "f": 0, "t": 173, "d": [400] },\n\t\t\t\t\t\t{ "px": [272,256], "src": [208,160], "f": 0, "t": 173, "d": [401] },\n\t\t\t\t\t\t{ "px": [288,256], "src": [208,160], "f": 0, "t": 173, "d": [402] },\n\t\t\t\t\t\t{ "px": [304,256], "src": [208,160], "f": 0, "t": 173, "d": [403] },\n\t\t\t\t\t\t{ "px": [320,256], "src": [208,160], "f": 0, "t": 173, "d": [404] },\n\t\t\t\t\t\t{ "px": [336,256], "src": [208,160], "f": 0, "t": 173, "d": [405] },\n\t\t\t\t\t\t{ "px": [352,256], "src": [208,160], "f": 0, "t": 173, "d": [406] },\n\t\t\t\t\t\t{ "px": [368,256], "src": [224,160], "f": 0, "t": 174, "d": [407] },\n\t\t\t\t\t\t{ "px": [112,272], "src": [96,192], "f": 0, "t": 198, "d": [415] },\n\t\t\t\t\t\t{ "px": [128,272], "src": [112,192], "f": 0, "t": 199, "d": [416] },\n\t\t\t\t\t\t{ "px": [144,272], "src": [128,192], "f": 0, "t": 200, "d": [417] },\n\t\t\t\t\t\t{ "px": [160,272], "src": [144,192], "f": 0, "t": 201, "d": [418] },\n\t\t\t\t\t\t{ "px": [176,272], "src": [192,192], "f": 0, "t": 204, "d": [419] },\n\t\t\t\t\t\t{ "px": [192,272], "src": [208,192], "f": 0, "t": 205, "d": [420] },\n\t\t\t\t\t\t{ "px": [208,272], "src": [224,192], "f": 0, "t": 206, "d": [421] },\n\t\t\t\t\t\t{ "px": [112,288], "src": [96,208], "f": 0, "t": 214, "d": [439] },\n\t\t\t\t\t\t{ "px": [128,288], "src": [112,208], "f": 0, "t": 215, "d": [440] },\n\t\t\t\t\t\t{ "px": [144,288], "src": [128,208], "f": 0, "t": 216, "d": [441] },\n\t\t\t\t\t\t{ "px": [160,288], "src": [144,208], "f": 0, "t": 217, "d": [442] },\n\t\t\t\t\t\t{ "px": [176,288], "src": [192,208], "f": 0, "t": 220, "d": [443] },\n\t\t\t\t\t\t{ "px": [192,288], "src": [208,208], "f": 0, "t": 221, "d": [444] },\n\t\t\t\t\t\t{ "px": [208,288], "src": [224,208], "f": 0, "t": 222, "d": [445] },\n\t\t\t\t\t\t{ "px": [112,304], "src": [96,224], "f": 0, "t": 230, "d": [463] },\n\t\t\t\t\t\t{ "px": [128,304], "src": [112,224], "f": 0, "t": 231, "d": [464] },\n\t\t\t\t\t\t{ "px": [144,304], "src": [128,224], "f": 0, "t": 232, "d": [465] },\n\t\t\t\t\t\t{ "px": [160,304], "src": [144,224], "f": 0, "t": 233, "d": [466] },\n\t\t\t\t\t\t{ "px": [176,304], "src": [128,224], "f": 0, "t": 232, "d": [467] },\n\t\t\t\t\t\t{ "px": [192,304], "src": [144,224], "f": 0, "t": 233, "d": [468] },\n\t\t\t\t\t\t{ "px": [208,304], "src": [224,224], "f": 0, "t": 238, "d": [469] }\n\t\t\t\t\t],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"__identifier": "Platforms2",\n\t\t\t\t\t"__type": "Tiles",\n\t\t\t\t\t"__cWid": 24,\n\t\t\t\t\t"__cHei": 20,\n\t\t\t\t\t"__gridSize": 16,\n\t\t\t\t\t"__opacity": 1,\n\t\t\t\t\t"__pxTotalOffsetX": 0,\n\t\t\t\t\t"__pxTotalOffsetY": 0,\n\t\t\t\t\t"__tilesetDefUid": 17,\n\t\t\t\t\t"__tilesetRelPath": "../../images/edible.png",\n\t\t\t\t\t"iid": "b2e15660-b4d0-11ec-a2c2-83523ae559c0",\n\t\t\t\t\t"levelId": 10,\n\t\t\t\t\t"layerDefUid": 6,\n\t\t\t\t\t"pxOffsetX": 0,\n\t\t\t\t\t"pxOffsetY": 0,\n\t\t\t\t\t"visible": true,\n\t\t\t\t\t"optionalRules": [],\n\t\t\t\t\t"intGridCsv": [],\n\t\t\t\t\t"autoLayerTiles": [],\n\t\t\t\t\t"seed": 3735814,\n\t\t\t\t\t"overrideTilesetUid": null,\n\t\t\t\t\t"gridTiles": [],\n\t\t\t\t\t"entityInstances": []\n\t\t\t\t}\n\t\t\t],\n\t\t\t"__neighbours": [{ "levelIid": "e54e1be0-b4d0-11ec-8d42-edfd22a98ff6", "levelUid": 9, "dir": "n" }]\n\t\t}\n\t],\n\t"worlds": []\n}')};
l.Monocave=dd;dd.__name__="Monocave";dd.__super__=Sb;dd.prototype=x(Sb.prototype,{parseJson:function(a){Sb.prototype.parseJson.call(this,a);this.levels=this._untypedLevels.slice();a=0;for(var b=this._untypedLevels;a<b.length;){var c=b[a];++a;this.all_levels[c.identifier]=c}},_instanciateTileset:function(a,b){var c=l["Tileset_"+b.identifier];return null==c?null:Fa.createInstance(c,[a,b])},_instanciateLevel:function(a,b,c){return new Tc(a,b,c)},_resolveExternalEnumValue:function(a,b){Sb.error("Unknown external enum name: "+
a);return null},getLevel:function(a,b){if(null==a&&null==b)return null;for(var c=0,f=this._untypedLevels;c<f.length;){var d=f[c];++c;if(null!=b&&d.identifier==b||null!=a&&d.uid==a)return d}return null},getLevelIdentifier:function(a){return this.getLevel(null,a)},getLevelUid:function(a){return this.getLevel(a)},getLevelAt:function(a,b){for(var c=0,f=this._untypedLevels;c<f.length;){var d=f[c];++c;if(a>=d.worldX&&a<d.worldX+d.pxWid&&b>=d.worldY&&b<d.worldY+d.pxHei)return d}return null},__class__:dd});
var ma=function(){};l.Reflect=ma;ma.__name__="Reflect";ma.field=function(a,b){try{return a[b]}catch(c){return na.lastError=c,null}};ma.getProperty=function(a,b){var c;if(null==a)return null;var f=a.__properties__?c=a.__properties__["get_"+b]:!1;return f?a[c]():a[b]};ma.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,f;for(f in a)"__id__"!=f&&"hx__closures__"!=f&&c.call(a,f)&&b.push(f)}return b};ma.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):
!1};ma.compareMethods=function(a,b){return a==b?!0:ma.isFunction(a)&&ma.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};ma.copy=function(a){if(null==a)return null;for(var b={},c=0,f=ma.fields(a);c<f.length;){var d=f[c];++c;b[d]=ma.field(a,d)}return b};var J=function(){};l.Std=J;J.__name__="Std";J.string=function(a){return pa.__string_rec(a,"")};J.parseInt=function(a){if(null!=a)for(var b=0,c=a.length;b<c;){var f=b++,d=a.charCodeAt(f);if(8>=d||14<=d&&32!=d&&45!=d)if(b=a.charCodeAt(f+
1),a=parseInt(a,120==b||88==b?16:10),isNaN(a))break;else return a}return null};var sf=function(){};l["_String.String_Impl_"]=sf;sf.__name__="_String.String_Impl_";sf.fromCharCode=function(a){return String.fromCodePoint(a)};var gd=function(){this.b=""};l.StringBuf=gd;gd.__name__="StringBuf";gd.prototype={__class__:gd};var ya=function(){};l.StringTools=ya;ya.__name__="StringTools";ya.startsWith=function(a,b){return a.length>=b.length?0==a.lastIndexOf(b,0):!1};ya.endsWith=function(a,b){var c=b.length,
f=a.length;return f>=c?a.indexOf(b,f-c)==f-c:!1};ya.isSpace=function(a,b){a=F.cca(a,b);return 8<a&&14>a?!0:32==a};ya.ltrim=function(a){for(var b=a.length,c=0;c<b&&ya.isSpace(a,c);)++c;return 0<c?F.substr(a,c,b-c):a};ya.rtrim=function(a){for(var b=a.length,c=0;c<b&&ya.isSpace(a,b-c-1);)++c;return 0<c?F.substr(a,0,b-c):a};ya.trim=function(a){return ya.ltrim(ya.rtrim(a))};ya.replace=function(a,b,c){return a.split(b).join(c)};var Fa=function(){};l.Type=Fa;Fa.__name__="Type";Fa.createInstance=function(a,
b){return new (Function.prototype.bind.apply(a,[null].concat(b)))};Fa.createEnum=function(a,b,c){var f=ma.field(a,b);if(null==f)throw D.thrown("No such constructor "+b);if(ma.isFunction(f)){if(null==c)throw D.thrown("Constructor "+b+" need parameters");return f.apply(a,c)}if(null!=c&&0!=c.length)throw D.thrown("Constructor "+b+" does not need parameters");return f};var Hf={toFloat:function(a){return 0>a?4294967296+a:a+0}},If=function(){};l["dn._Cooldown.CdInst"]=If;If.__name__="dn._Cooldown.CdInst";
var $b=function(a){if(null==$b.INDEXES&&null!=td.getType($b).indexes){for(var b=[],c=0,f=td.getType($b).indexes;c<f.length;){var d=f[c];++c;b.push(J.string(d))}$b.INDEXES=b}this.cdList=[];this.fastCheck=new eb;this.baseFps=a};l["dn.Cooldown"]=$b;$b.__name__="dn.Cooldown";$b.prototype={__class__:$b};var Jf=function(){};l["dn._Delayer.Task"]=Jf;Jf.__name__="dn._Delayer.Task";var Cd=function(a){this.fps=a;this.delays=[]};l["dn.Delayer"]=Cd;Cd.__name__="dn.Delayer";Cd.prototype={__class__:Cd};var Ie=
z["dn.PathSlashMode"]={__ename__:!0,__constructs__:null,Preserve:{_hx_name:"Preserve",_hx_index:0,__enum__:"dn.PathSlashMode",toString:e},OnlyBackslashes:{_hx_name:"OnlyBackslashes",_hx_index:1,__enum__:"dn.PathSlashMode",toString:e},OnlySlashes:{_hx_name:"OnlySlashes",_hx_index:2,__enum__:"dn.PathSlashMode",toString:e}};Ie.__constructs__=[Ie.Preserve,Ie.OnlyBackslashes,Ie.OnlySlashes];var ec=function(){this.isWindowsNetworkDrive=this._useWinNetDriveUriFormat=!1;this.init()};l["dn.FilePath"]=ec;ec.__name__=
"dn.FilePath";ec.prototype={init:function(){this.backslashes=!1;this.directory=null;this.set_fileName(null);this.set_extension(null)},getDriveLetter:function(a){null==a&&(a=!0);var b=null!=this.uriScheme?new ba("([^a-z]|^)([a-z])[:$][/\\\\]?","gi"):new ba("([^a-z]|^)([a-z]):[/\\\\]?","gi");return null!=this.directory&&b.match(this.directory)?a?b.matched(2).toLowerCase():b.matched(2):null},parseFileName:function(a){0>a.indexOf(".")?(this.set_fileName(a),this.set_extension(null)):0==a.indexOf(".")&&
0==a.lastIndexOf(".")?(this.set_fileName(null),this.set_extension(F.substr(a,1,null))):(this.set_fileName(F.substr(a,0,a.lastIndexOf("."))),this.set_extension(F.substr(a,a.lastIndexOf(".")+1,null)))},parse:function(a,b){this.init();if(null!=a&&0!=a.length){switch(ec.SLASH_MODE._hx_index){case 1:a=ya.replace(a,"/","\\");break;case 2:a=ya.replace(a,"\\","/")}0<=a.indexOf("\\")&&(0<=a.indexOf("/")?this.backslashes=a.indexOf("\\")<a.indexOf("/"):this.backslashes=!0);a=ya.replace(a,this.backslashes?"/":
"\\",this.backslashes?"\\":"/");if(b&&0>a.indexOf(this.backslashes?"\\":"/"))this.parseFileName(a);else{var c=new ba("^([a-z]{2,}):[/]{2}(.*?)/|^([a-z]{2,}):[/]{1}","gi");c.match(a)&&(null!=c.matched(3)?(this.uriScheme=c.matched(3),this.uriAuthority=null):(this.uriScheme=c.matched(1),this.uriAuthority=c.matched(2),""==this.uriAuthority&&(this.uriAuthority=null)),a=c.matchedRight());this.isWindowsNetworkDrive=!1;ec.WIN_NETWORK_DRIVE_REG.match(a)&&(this.isWindowsNetworkDrive=!0,this.uriScheme="file",
this.uriAuthority=ec.WIN_NETWORK_DRIVE_REG.matched(1));for(;0<=a.indexOf((this.backslashes?"\\":"/")+(this.backslashes?"\\":"/"));)a=ya.replace(a,(this.backslashes?"\\":"/")+(this.backslashes?"\\":"/"),this.backslashes?"\\":"/");!b&&1<a.length&&a.charAt(a.length-1)==(this.backslashes?"\\":"/")&&(a=F.substr(a,0,a.length-1));0>a.indexOf(this.backslashes?"\\":"/")?this.directory=b?null:a:(this.directory=b?F.substr(a,0,a.lastIndexOf(this.backslashes?"\\":"/")):a,0==this.directory.length&&b&&a.charAt(0)==
(this.backslashes?"\\":"/")?this.directory="/":0==this.directory.length&&(this.directory=null));b&&a.lastIndexOf(this.backslashes?"\\":"/")<a.length-1&&(a=F.substr(a,a.lastIndexOf(this.backslashes?"\\":"/")+1,null),this.parseFileName(a));a=this.getDirectoryArray();if(0<a.length){for(b=0;b<a.length;)".."==a[b]&&0<b&&".."!=a[b-1]&&""!=a[b-1]?(a.splice(b-1,2),--b):++b;this.directory=0==a.length?null:1==a.length&&""==a[0]?this.backslashes?"\\":"/":a.join(this.backslashes?"\\":"/")}a=this.getDirectoryArray();
if(1<a.length){for(b=1;b<a.length;)"."==a[b]?a.splice(b,1):++b;this.directory=0==a.length?null:a.join(this.backslashes?"\\":"/")}if(this.directory!=(this.backslashes?"\\":"/")&&null!=this.directory){c=0;null!=this.getDriveLetter()&&++c;a=this.getDirectoryArray();for(var f=0,d=a.length;f<d;)b=f++,a[b]=b<c?this.sanitize(a[b],!0):this.sanitize(a[b]);this.directory=a.join(this.backslashes?"\\":"/")}}}},sanitize:function(a,b){null==b&&(b=!1);return a.replace(b?/[*{}/\\<>?|]/g:/[*{}/\\<>?|:]/g,"_")},set_extension:function(a){if(null==
a)return this.extension=null;for(;"."==a.charAt(0);)a=F.substr(a,1,null);a=ya.replace(a," ","_");return 0==a.length?this.extension=null:this.extension=this.sanitize(a)},set_fileName:function(a){return null==a?this.fileName=null:this.fileName=a=this.sanitize(a)},getDirectoryArray:function(){return null==this.directory?[]:this.directory==(this.backslashes?"\\":"/")?[this.backslashes?"\\":"/"]:this.directory.split(this.backslashes?"\\":"/")},toString:function(){return(this.isWindowsNetworkDrive&&!this._useWinNetDriveUriFormat?
this.backslashes?"\\":"/":null!=this.uriScheme?null==this.uriAuthority?""+this.uriScheme+":/":""+this.uriScheme+"://"+this.uriAuthority+"/":"")+(null==this.directory?"":null==this.fileName&&null==this.extension||this.directory==(this.backslashes?"\\":"/")?this.directory:null==this.directory?null:this.directory==(this.backslashes?"\\":"/")?this.directory:this.directory+(this.backslashes?"\\":"/"))+(null==(null==this.fileName&&null==this.extension?null:(null==this.fileName?"":this.fileName)+(null==
this.extension?"":"."+this.extension))?"":null==this.fileName&&null==this.extension?null:(null==this.fileName?"":this.fileName)+(null==this.extension?"":"."+this.extension))},__class__:ec,__properties__:{set_extension:"set_extension",set_fileName:"set_fileName"}};var yb=function(a){this.baseTimeMul=1;this.init();null==a?yb.ROOTS.push(this):a.addChild(this);yb.resizeAll(!1)};l["dn.Process"]=yb;yb.__name__="dn.Process";yb._resizeProcess=function(a){if(!a.destroyed){a.onResize();for(var b=0,c=a.children;b<
c.length;)a=c[b],++b,yb._resizeProcess(a)}};yb.resizeAll=function(a){null==a&&(a=!1);if(a){a=0;for(var b=yb.ROOTS;a<b.length;){var c=b[a];++a;if(!c.destroyed){c.onResize();var f=0;for(c=c.children;f<c.length;){var d=c[f];++f;if(!d.destroyed){d.onResize();var g=0;for(d=d.children;g<d.length;){var m=d[g];++g;yb._resizeProcess(m)}}}}}}else yb.RESIZE_REQUESTED=!0};yb.prototype={init:function(){this.uniqId=yb.UNIQ_ID++;this.children=[];this.destroyed=this._manuallyPaused=!1;this.uftime=this.ftime=0;this.baseTimeMul=
this.utmod=1;this.cd=new $b(this.getDefaultFrameRate());this.delayer=new Cd(this.getDefaultFrameRate());this.tw=new Je(this.getDefaultFrameRate());this.ucd=new $b(this.getDefaultFrameRate());this.udelayer=new Cd(this.getDefaultFrameRate())},onResize:function(){},toString:function(){var a="#"+this.uniqId+" ";var b=null!=this.name?this.name:pa.getClass(this).__name__;if(this._manuallyPaused)var c=!0;else null!=this.parent?(c=this.parent,c=c._manuallyPaused?!0:null!=c.parent&&c.parent.isPaused()):c=
!1;return a+b+(c?" [PAUSED]":"")},getDefaultFrameRate:function(){return 30},isPaused:function(){return this._manuallyPaused?!0:null!=this.parent?this.parent.isPaused():!1},addChild:function(a){null==a.parent?F.remove(yb.ROOTS,a):F.remove(a.parent.children,a);a.parent=this;this.children.push(a)},__class__:yb};var Kf=function(){};l["dn.Tween"]=Kf;Kf.__name__="dn.Tween";var Je=function(a){this.baseFps=a;this.tlist=[]};l["dn.Tweenie"]=Je;Je.__name__="dn.Tweenie";Je.prototype={__class__:Je};var ud=function(){};
l["echo.util.Disposable"]=ud;ud.__name__="echo.util.Disposable";ud.__isInterface__=!0;var gb=function(a){this.transform=new vd;this.layer_mask=Lf._new();this.layers=Lf._new();var b=new A(0,0);this.drag=b;this.max_velocity=b=new A(0,0);this.torque=0;this.acceleration=b=new A(0,0);this.velocity=b=new A(0,0);this.material=pc.global;this.id=++gb.ids;this.active=!0;this.shapes=[];this.data={};this.disposed=!1;this.transform.on_dirty=u(this,this.on_dirty);this.load_options(a)};l["echo.Body"]=gb;gb.__name__=
"echo.Body";gb.__interfaces__=[ud];gb.__properties__={get_defaults:"get_defaults"};gb.get_defaults=function(){return{kinematic:!1,mass:gb.default_mass,x:0,y:0,rotation:0,scale_x:1,scale_y:1,velocity_x:0,velocity_y:0,rotational_velocity:0,max_velocity_x:0,max_velocity_y:0,max_velocity_length:0,max_rotational_velocity:1E4,drag_x:0,drag_y:0,drag_length:0,rotational_drag:0}};gb.prototype={load_options:function(a){a=Dd.copy_fields(a,gb.get_defaults());for(var b=0,c=this.shapes;b<c.length;){var f=c[b];
++b;f.put()}this.shapes.length=0;c=a.x;b=this.transform;b.dirty||b.set_dirty();b.local_x=c;if(null!=this.on_move)this.on_move(this.transform.local_x,this.transform.local_y);c=a.y;b=this.transform;b.dirty||b.set_dirty();b.local_y=c;if(null!=this.on_move)this.on_move(this.transform.local_x,this.transform.local_y);b=this.transform;c=Math.PI/180*a.rotation;b.dirty||b.set_dirty();b.local_radians=c;if(null!=this.on_rotate)this.on_rotate(180/Math.PI*this.transform.local_radians);c=a.scale_x;b=this.transform;
b.dirty||b.set_dirty();b.local_scale_x=c;c=a.scale_y;b=this.transform;b.dirty||b.set_dirty();b.local_scale_y=c;this.kinematic=a.kinematic;this.material=null!=a.material?a.material:null!=a.gravity_scale||null!=a.elasticity?new pc(a.elasticity,null,null,null,a.gravity_scale):pc.global;c=this.velocity;c.x=a.velocity_x;c.y=a.velocity_y;this.rotational_velocity=a.rotational_velocity;c=this.max_velocity;c.x=a.max_velocity_x;c.y=a.max_velocity_y;this.max_velocity_length=a.max_velocity_length;this.max_rotational_velocity=
a.max_rotational_velocity;c=this.drag;c.x=a.drag_x;c.y=a.drag_y;this.drag_length=a.drag_length;this.rotational_drag=a.rotational_drag;this.last_rotation=this.last_y=this.last_x=NaN;this.dirty=!0;if(null!=a.shape){f=Ea.get(a.shape);var d=-1;null==d&&(d=-1);-1==this.shapes.indexOf(f)&&(-1<d?this.shapes[d]=f:this.shapes.push(f),f.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)))}if(null!=a.shapes)for(b=
0,c=a.shapes;b<c.length;)f=c[b],++b,f=Ea.get(f),d=-1,null==d&&(d=-1),-1==this.shapes.indexOf(f)&&(-1<d?this.shapes[d]=f:this.shapes.push(f),f.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)));null!=a.shape_instance&&(f=a.shape_instance,-1==this.shapes.indexOf(f)&&(this.shapes.push(f),f.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))));
if(null!=a.shape_instances)for(b=0,c=a.shape_instances;b<c.length;)f=c[b],++b,-1==this.shapes.indexOf(f)&&(this.shapes.push(f),f.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)));b=a.mass;if(null==b)c=a.mass,c<gb.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&
null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass);else switch(b){case -1:b=a=0;for(c=this.shapes;b<c.length;)f=c[b],++b,a+=f.volume()*this.material.density;a<gb.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=a,this.inverse_mass=
1/this.mass);break;case 0:c=0;c<gb.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass);break;default:c=a.mass,c<gb.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):
(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass)}},bounds:function(a){if(0==this.shapes.length){var b=this.transform.local_x,c=this.transform.local_y,f=1,d=1;null==d&&(d=1);null==f&&(f=1);null==c&&(c=0);null==b&&(b=0);a=lb.pool.get();var g=b;null==d&&(d=1);null==f&&(f=1);null==c&&(c=0);null==g&&(g=0);f*=.5;d*=.5;a.min_x=g-f;a.min_y=c-d;a.max_x=g+f;a.max_y=c+d;a.pooled=!1;return a}g=this.shapes[0].bounds();if(1<this.shapes.length)for(d=
1,f=this.shapes.length;d<f;)c=d++,c=this.shapes[c].bounds(),g.min_x>c.min_x&&(g.min_x=c.min_x),g.min_y>c.min_y&&(g.min_y=c.min_y),g.max_x<c.max_x&&(g.max_x=c.max_x),g.max_y<c.max_y&&(g.max_y=c.max_y),c.put();null==a&&(a=lb.pool.get(),c=b=0,d=f=1,null==d&&(d=1),null==f&&(f=1),null==c&&(c=0),null==b&&(b=0),f*=.5,d*=.5,a.min_x=b-f,a.min_y=c-d,a.max_x=b+f,a.max_y=c+d,a.pooled=!1);a.min_x=g.min_x;a.max_x=g.max_x;a.min_y=g.min_y;a.max_y=g.max_y;g.put();return a},on_dirty:function(a){this.dirty=!0;0>=this.mass&&
null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))},__class__:gb};var ab=function(){};l["echo.Collisions"]=ab;ab.__name__="echo.Collisions";ab.update_quadtree=function(a){for(var b=0,c=a.members;b<c.length;){var f=c[b];++b;if(!f.disposed){f.collided=!1;for(var d=0,g=f.shapes;d<g.length;){var m=g[d];++d;m.collided=!1}f.active&&0<f.mass&&f.dirty&&0<f.shapes.length&&(null==f.quadtree_data.bounds?f.quadtree_data.bounds=f.bounds():f.bounds(f.quadtree_data.bounds),
a.quadtree.update(f.quadtree_data,!1),f.dirty=!1)}}a.quadtree.shake()};ab.query=function(a,b){ab.update_quadtree(a);b=null==b?a.listeners.members:b.members;for(var c=0;c<b.length;){var f=b[c];++c;f.quadtree_results.length=0;var d=f.a;switch(d._hx_index){case 0:d=d.v;var g=f.b;switch(g._hx_index){case 0:d=ab.overlap_body_and_body_bounds(d,g.v);null!=d&&f.quadtree_results.push(d);break;case 1:ab.overlap_body_and_bodies_bounds(d,g.v,a,f.quadtree_results)}break;case 1:switch(d=d.v,g=f.b,g._hx_index){case 0:ab.overlap_body_and_bodies_bounds(g.v,
d,a,f.quadtree_results);break;case 1:g=g.v,ab.overlap_bodies_and_bodies_bounds(d,g,a,f.quadtree_results),d!=g&&ab.overlap_bodies_and_bodies_bounds(g,d,a,f.quadtree_results)}}d=0;for(g=f.last_collisions;d<g.length;){var m=g[d];++d;m.put()}f.last_collisions.length=f.collisions.length;d=0;for(g=f.collisions.length;d<g;)m=d++,f.last_collisions[m]=f.collisions[m];d=f.collisions.length=0;for(g=f.quadtree_results;d<g.length;)if(m=g[d],++d,m.a.disposed||m.b.disposed)m.put();else if(m.a.id==m.b.id)m.put();
else{for(var k=!1,O=0,n=f.collisions;O<n.length;){var e=n[O];++O;if(e.a.id==m.a.id&&e.b.id==m.b.id||e.b.id==m.a.id&&e.a.id==m.b.id){k=!0;break}}if(k)m.put();else{if(1==m.a.shapes.length&&1==m.b.shapes.length)k=m.a.shapes[0].collides(m.b.shapes[0]),null!=k&&m.data.push(k);else for(k=m.a.shapes,O=0,n=k.length;O<n;){e=O++;for(var p=m.b.shapes,h=k[e].bounds(),r=0,t=p.length;r<t;){var l=r++,z=p[l].bounds();h.min_x<z.max_x&&h.max_x>=z.min_x&&h.min_y<z.max_y&&h.max_y>=z.min_y&&(l=k[e].collides(p[l]),null!=
l&&m.data.push(l));z.put()}h.put()}if(0==m.data.length)m.put();else if(null==f.condition||f.condition(m.a,m.b,m.data)&&!m.a.disposed&&!m.b.disposed){k=0;for(O=m.data;k<O.length;)n=O[k],++k,n.sa.collided=n.sb.collided=!0;m.a.collided=m.b.collided=!0;f.collisions.push(m)}else m.put()}}}};ab.notify=function(a,b){a=null==b?a.listeners.members:b.members;for(b=0;b<a.length;){var c=a[b];++b;if(null!=c.enter||null!=c.stay)for(var f=0,d=c.collisions;f<d.length;){var g=d[f];++f;if(!g.a.disposed&&!g.b.disposed){if(null!=
c.enter){var m=!1;for(var k=0,O=c.last_collisions;k<O.length;){var n=O[k];++k;if(n.a==g.a&&n.b==g.b||n.a==g.b&&n.b==g.a){m=!0;break}}m=!m}else m=!1;m?c.enter(g.a,g.b,g.data):null!=c.stay&&c.stay(g.a,g.b,g.data)}}if(null!=c.exit)for(f=0,d=c.last_collisions;f<d.length;){g=d[f];++f;if(g.a.disposed||g.b.disposed)m=!1;else{m=!1;k=0;for(O=c.collisions;k<O.length;)if(n=O[k],++k,n.a==g.a&&n.b==g.b||n.a==g.b&&n.b==g.a){m=!0;break}m=!m}m&&c.exit(g.a,g.b)}}};ab.overlap_bodies_and_bodies_bounds=function(a,b,
c,f){if(0!=a.length&&0!=b.length)for(var d=0;d<a.length;){var g=a[d];++d;ab.overlap_body_and_bodies_bounds(g,b,c,f)}};ab.overlap_body_and_bodies_bounds=function(a,b,c,f){if(!(a.disposed||0==a.shapes.length||!a.active||0>=a.mass)){var d=a.bounds();ab.qr.length=0;ab.sqr.length=0;c.quadtree.query(d,ab.qr);c.static_quadtree.query(d,ab.sqr);for(c=0;c<b.length;){var g=b[c];++c;if(!g.disposed&&0!=g.shapes.length&&g.active&&(0==a.layer_mask||0==g.layer_mask||0!=(a.layer_mask&g.layers)&&0!=(g.layer_mask&a.layers)))for(var m=
0,k=0<g.mass?ab.qr:ab.sqr;m<k.length;){var O=k[m];++m;O.id==g.id&&(O=jc.pool.get(),O.a=a,O.b=g,O.data.length=0,O.pooled=!1,f.push(O))}}d.put()}};ab.overlap_body_and_body_bounds=function(a,b){if(a.disposed||b.disposed||0==a.shapes.length||0==b.shapes.length||!a.active||!b.active||a==b||0!=a.layer_mask&&0!=b.layer_mask&&(0==(a.layer_mask&b.layers)||0==(b.layer_mask&a.layers))||0>=a.mass&&0>=b.mass)return null;var c=a.bounds(),f=b.bounds(),d=c.min_x<f.max_x&&c.max_x>=f.min_x&&c.min_y<f.max_y&&c.max_y>=
f.min_y;c.put();f.put();return d?(c=jc.pool.get(),c.a=a,c.b=b,c.data.length=0,c.pooled=!1,c):null};var wd=function(a){this.members=null==a?[]:a};l["echo.Listeners"]=wd;wd.__name__="echo.Listeners";wd.__interfaces__=[ud];wd.prototype={add:function(a,b,c){c=Dd.copy_fields(c,Uc.get_defaults());a=new Uc(a,b,c.separate,[],[],null,null,null,null,[],c.percent_correction,c.correction_threshold);null!=c.enter&&(a.enter=c.enter);null!=c.stay&&(a.stay=c.stay);null!=c.exit&&(a.exit=c.exit);null!=c.condition&&
(a.condition=c.condition);this.members.push(a);return a},clear:function(){this.members.length=0},__class__:wd};var da=q.echo.Echo=function(){};l["echo.Echo"]=da;da.__name__="echo.Echo";da.start=function(a){return new Ed(a)};da.make=function(a,b){return a.add(new gb(b))};da.listen=function(a,b,c,f){return null==b?null==c?a.listeners.add(wc.Right(a.members),wc.Right(a.members),f):a.listeners.add(c,c,f):null==c?a.listeners.add(b,b,f):a.listeners.add(b,c,f)};da.check=function(a,b,c,f){da.cached_listeners.clear();
null==b&&null==c?da.cached_listeners.add(wc.Right(a.members),wc.Right(a.members),f):null==b?da.cached_listeners.add(c,c,f):null==c?da.cached_listeners.add(b,b,f):da.cached_listeners.add(b,c,f);ab.query(a,da.cached_listeners);hd.separate(a,da.cached_listeners);ab.notify(a,da.cached_listeners)};da.step=function(a,b){if(null!=a.history){for(var c=a.history,f=[],d=0,g=a.members;d<g.length;){var m=g[d];++d;f.push(new Ke(m.id,m.transform.local_x,m.transform.local_y,180/Math.PI*m.transform.local_radians,
m.velocity.x,m.velocity.y,m.acceleration.x,m.acceleration.y,m.rotational_velocity))}c.add(f)}b/=a.iterations;f=0;for(d=a.iterations;f<d;)f++,hd.step(a,b),ab.query(a),hd.separate(a),ab.notify(a)};da.linecast_floats=function(a,b,c,f,d,g,m){null==m&&(m=!0);null==f&&(f=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var k=Qb.pool.get();null==f&&(f=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var O=k.start;O.x=a;O.y=b;O=k.end;O.x=c;O.y=f;k.pooled=!1;d=da.linecast(k,d,g,m);k.pooled||(k.pooled=!0,Qb.pool.put_unsafe(k));
return d};da.linecast_vector=function(a,b,c,f,d,g){null==g&&(g=!0);var m=Qb.pool.get();m.set_from_vector(a,b,c);m.pooled=!1;a=da.linecast(m,f,d,g);m.pooled||(m.pooled=!0,Qb.pool.put_unsafe(m));return a};da.linecast_vectors=function(a,b,c,f,d){d=a.x;var g=a.y;a=b.x;var m=b.y;null==m&&(m=1);null==a&&(a=1);null==g&&(g=0);null==d&&(d=0);b=Qb.pool.get();null==m&&(m=1);null==a&&(a=1);null==g&&(g=0);null==d&&(d=0);var k=b.start;k.x=d;k.y=g;k=b.end;k.x=a;k.y=m;b.pooled=!1;c=da.linecast(b,c,f);b.pooled||(b.pooled=
!0,Qb.pool.put_unsafe(b));return c};da.linecast=function(a,b,c,f){null==f&&(f=!0);var d=null,g=Math.min(a.start.x,a.end.x),m=Math.min(a.start.y,a.end.y),k=Math.max(a.start.x,a.end.x),O=Math.max(a.start.y,a.end.y),n=lb.pool.get();n.min_x=g;n.max_x=k;n.min_y=m;n.max_y=O;n.pooled=!1;var e=b;switch(e._hx_index){case 0:var p=e.v;if(!p.disposed&&p.active){var h=p.bounds();if(n.min_x<h.max_x&&n.max_x>=h.min_x&&n.min_y<h.max_y&&n.max_y>=h.min_y){var r=0;for(f=p.shapes.length;r<f;)m=r++,g=p.shapes[m].intersect(a),
null!=g&&(null==d&&(m=ac.pool.get(),m.line=a,m.body=p,m.data.length=0,m.pooled=!1,d=m),d.data.push(g))}h.put()}break;case 1:if(b=e.v,null==c)for(e=0;e<b.length;){if(p=b[e],++e,null!=p&&!p.disposed&&p.active){h=p.bounds();m=ac.pool.get();m.line=a;m.body=p;m.data.length=0;m.pooled=!1;c=m;if(n.min_x<h.max_x&&n.max_x>=h.min_x&&n.min_y<h.max_y&&n.max_y>=h.min_y)for(r=0,f=p.shapes.length;r<f;)m=r++,g=p.shapes[m].intersect(a),null!=g&&c.data.push(g);h.put();if(0<c.data.length)if(null!=d){if(0==d.data.length)g=
null;else if(1==d.data.length)g=d.data[0];else{h=d.data[0];p=1;for(g=d.data.length;p<g;)m=p++,null!=d.data[m]&&d.data[m].distance<h.distance&&(h=d.data[m]);g=h}h=g.distance;if(0==c.data.length)f=null;else if(1==c.data.length)f=c.data[0];else{p=c.data[0];f=1;for(g=c.data.length;f<g;)m=f++,null!=c.data[m]&&c.data[m].distance<p.distance&&(p=c.data[m]);f=p}g=h>f.distance}else g=!0;else g=!1;g?(null!=d&&d.put(),d=c):c.put()}}else{e=0;for(r=da.cached_collisions;e<r.length;)h=r[e],++e,h.put();da.cached_collisions.length=
0;h=da.cached_body;g=n.min_x;m=n.min_y;k=n.max_x;O=n.max_y;p=Tb.pool.get();e=.5*(g+k);r=.5*(m+O);g=k-g;O-=m;null==O&&(O=0);null==g&&(g=1);null==r&&(r=0);null==e&&(e=0);k=p.transform;k.dirty||k.set_dirty();k.local_x=e;k=p.transform;k.dirty||k.set_dirty();k.local_y=r;e=.5*g;k=p.transform;null==k.parent?r=k.local_scale_x:(k.sync(),r=k._scale_x);p.local_ex=e/r;if(null!=p.transformed_rect){k=p.transformed_rect;k.count=4;e=0;for(r=k.count;e<r;)if(m=e++,null==k.local_vertices[m]){var t=k.local_vertices,
l=new A(0,0);t[m]=l}e=k.local_vertices[0];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=k.local_vertices[3];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;t=k.transform;t.dirty||t.set_dirty();
t.local_x=e;e=p.transform.local_y;t=k.transform;t.dirty||t.set_dirty();t.local_y=e;t=k.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;t.dirty||t.set_dirty();t.local_radians=e;e=p.transform.local_scale_x;t=k.transform;t.dirty||t.set_dirty();t.local_scale_x=e;e=p.transform.local_scale_y;t=k.transform;t.dirty||t.set_dirty();t.local_scale_y=e;k.dirty_vertices=!0;k.dirty_bounds=!0}e=.5*(0>=O?g:O);k=p.transform;null==k.parent?r=k.local_scale_y:(k.sync(),r=k._scale_y);p.local_ey=e/r;if(null!=
p.transformed_rect){k=p.transformed_rect;k.count=4;e=0;for(r=k.count;e<r;)m=e++,null==k.local_vertices[m]&&(t=k.local_vertices,l=new A(0,0),t[m]=l);e=k.local_vertices[0];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=k.local_vertices[3];e.x=-(p.local_ex*
p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;t=k.transform;t.dirty||t.set_dirty();t.local_x=e;e=p.transform.local_y;t=k.transform;t.dirty||t.set_dirty();t.local_y=e;t=k.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;t.dirty||t.set_dirty();t.local_radians=e;e=p.transform.local_scale_x;t=k.transform;t.dirty||t.set_dirty();t.local_scale_x=e;e=p.transform.local_scale_y;t=k.transform;t.dirty||t.set_dirty();t.local_scale_y=e;k.dirty_vertices=
!0;k.dirty_bounds=!0}k=p.transform;e=Math.PI/180*0;k.dirty||k.set_dirty();k.local_radians=e;k=p.transform;k.dirty||k.set_dirty();k.local_scale_x=1;k=p.transform;k.dirty||k.set_dirty();k.local_scale_y=1;null==p.transformed_rect?(k=p.transform,null==k.parent?g=180/Math.PI*k.local_radians:(k.sync(),g=180/Math.PI*k._radians),g=0!=g):g=!1;if(g){g=oa.pool.get();g.count=4;e=0;for(r=g.count;e<r;)m=e++,null==g.local_vertices[m]&&(O=g.local_vertices,l=new A(0,0),O[m]=l);e=g.local_vertices[0];e.x=-(p.local_ex*
p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=g.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=g.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=g.local_vertices[3];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;k=g.transform;k.dirty||k.set_dirty();k.local_x=e;e=p.transform.local_y;k=g.transform;k.dirty||
k.set_dirty();k.local_y=e;k=g.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;k.dirty||k.set_dirty();k.local_radians=e;e=p.transform.local_scale_x;k=g.transform;k.dirty||k.set_dirty();k.local_scale_x=e;e=p.transform.local_scale_y;k=g.transform;k.dirty||k.set_dirty();k.local_scale_y=e;g.dirty_vertices=!0;g.dirty_bounds=!0;g.pooled=!1;p.transformed_rect=g;p.transformed_rect.set_parent(p.parent)}else null!=p.transformed_rect&&(e=p.transform.local_x,k=p.transformed_rect.transform,k.dirty||
k.set_dirty(),k.local_x=e,e=p.transform.local_y,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_y=e,k=p.transformed_rect.transform,e=Math.PI/180*(180/Math.PI)*p.transform.local_radians,k.dirty||k.set_dirty(),k.local_radians=e,e=p.transform.local_scale_x,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_scale_x=e,e=p.transform.local_scale_y,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_scale_y=e);p.pooled=!1;null!=h.shapes[0]&&h.shapes[0].put();h.shapes[0]=
p;h.shapes[0].set_parent(h);h.dirty=!0;0>=h.mass&&null!=h.world&&(h.bounds(h.quadtree_data.bounds),h.world.static_quadtree.update(h.quadtree_data));f&&ab.update_quadtree(c);ab.overlap_body_and_bodies_bounds(da.cached_body,b,c,da.cached_collisions);e=0;for(r=da.cached_collisions;e<r.length;){h=r[e];++e;p=h.b;m=ac.pool.get();m.line=a;m.body=p;m.data.length=0;m.pooled=!1;c=m;f=0;for(p=h.b.shapes.length;f<p;)m=f++,g=h.b.shapes[m].intersect(a),null!=g&&c.data.push(g);if(0<c.data.length)if(null!=d){if(0==
d.data.length)g=null;else if(1==d.data.length)g=d.data[0];else{h=d.data[0];g=1;for(f=d.data.length;g<f;)m=g++,null!=d.data[m]&&d.data[m].distance<h.distance&&(h=d.data[m]);g=h}h=g.distance;if(0==c.data.length)f=null;else if(1==c.data.length)f=c.data[0];else{p=c.data[0];g=1;for(b=c.data.length;g<b;)m=g++,null!=c.data[m]&&c.data[m].distance<p.distance&&(p=c.data[m]);f=p}g=h>f.distance}else g=!0;else g=!1;g?(null!=d&&d.put(),d=c):c.put()}da.cached_body.shapes[0].put()}}n.put();return d};da.linecast_all=
function(a,b,c,f){null==f&&(f=!0);var d=[],g=Math.min(a.start.x,a.end.x),m=Math.min(a.start.y,a.end.y),k=Math.max(a.start.x,a.end.x),O=Math.max(a.start.y,a.end.y),n=lb.pool.get();n.min_x=g;n.max_x=k;n.min_y=m;n.max_y=O;n.pooled=!1;var e=b;switch(e._hx_index){case 0:var p=e.v;m=ac.pool.get();m.line=a;m.body=p;m.data.length=0;m.pooled=!1;c=m;var h=p.bounds();if(n.min_x<h.max_x&&n.max_x>=h.min_x&&n.min_y<h.max_y&&n.max_y>=h.min_y){var r=0;for(f=p.shapes.length;r<f;)m=r++,m=p.shapes[m].intersect(a),null!=
m&&c.data.push(m)}h.put();0<c.data.length?d.push(c):c.put();break;case 1:if(b=e.v,null==c)for(e=0;e<b.length;){if(p=b[e],++e,null!=p){h=p.bounds();m=ac.pool.get();m.line=a;m.body=p;m.data.length=0;m.pooled=!1;c=m;if(n.min_x<h.max_x&&n.max_x>=h.min_x&&n.min_y<h.max_y&&n.max_y>=h.min_y)for(r=0,f=p.shapes.length;r<f;)m=r++,m=p.shapes[m].intersect(a),null!=m&&c.data.push(m);h.put();0<c.data.length?d.push(c):c.put()}}else{e=0;for(r=da.cached_collisions;e<r.length;)h=r[e],++e,h.put();da.cached_collisions.length=
0;h=da.cached_body;g=n.min_x;m=n.min_y;k=n.max_x;O=n.max_y;p=Tb.pool.get();e=.5*(g+k);r=.5*(m+O);g=k-g;O-=m;null==O&&(O=0);null==g&&(g=1);null==r&&(r=0);null==e&&(e=0);k=p.transform;k.dirty||k.set_dirty();k.local_x=e;k=p.transform;k.dirty||k.set_dirty();k.local_y=r;e=.5*g;k=p.transform;null==k.parent?r=k.local_scale_x:(k.sync(),r=k._scale_x);p.local_ex=e/r;if(null!=p.transformed_rect){k=p.transformed_rect;k.count=4;e=0;for(r=k.count;e<r;)if(m=e++,null==k.local_vertices[m]){var t=k.local_vertices,
l=new A(0,0);t[m]=l}e=k.local_vertices[0];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=k.local_vertices[3];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;t=k.transform;t.dirty||t.set_dirty();
t.local_x=e;e=p.transform.local_y;t=k.transform;t.dirty||t.set_dirty();t.local_y=e;t=k.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;t.dirty||t.set_dirty();t.local_radians=e;e=p.transform.local_scale_x;t=k.transform;t.dirty||t.set_dirty();t.local_scale_x=e;e=p.transform.local_scale_y;t=k.transform;t.dirty||t.set_dirty();t.local_scale_y=e;k.dirty_vertices=!0;k.dirty_bounds=!0}e=.5*(0>=O?g:O);k=p.transform;null==k.parent?r=k.local_scale_y:(k.sync(),r=k._scale_y);p.local_ey=e/r;if(null!=
p.transformed_rect){k=p.transformed_rect;k.count=4;e=0;for(r=k.count;e<r;)m=e++,null==k.local_vertices[m]&&(t=k.local_vertices,l=new A(0,0),t[m]=l);e=k.local_vertices[0];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=k.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=k.local_vertices[3];e.x=-(p.local_ex*
p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;t=k.transform;t.dirty||t.set_dirty();t.local_x=e;e=p.transform.local_y;t=k.transform;t.dirty||t.set_dirty();t.local_y=e;t=k.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;t.dirty||t.set_dirty();t.local_radians=e;e=p.transform.local_scale_x;t=k.transform;t.dirty||t.set_dirty();t.local_scale_x=e;e=p.transform.local_scale_y;t=k.transform;t.dirty||t.set_dirty();t.local_scale_y=e;k.dirty_vertices=
!0;k.dirty_bounds=!0}k=p.transform;e=Math.PI/180*0;k.dirty||k.set_dirty();k.local_radians=e;k=p.transform;k.dirty||k.set_dirty();k.local_scale_x=1;k=p.transform;k.dirty||k.set_dirty();k.local_scale_y=1;null==p.transformed_rect?(k=p.transform,null==k.parent?e=180/Math.PI*k.local_radians:(k.sync(),e=180/Math.PI*k._radians),e=0!=e):e=!1;if(e){g=oa.pool.get();g.count=4;e=0;for(r=g.count;e<r;)m=e++,null==g.local_vertices[m]&&(O=g.local_vertices,l=new A(0,0),O[m]=l);e=g.local_vertices[0];e.x=-(p.local_ex*
p.transform.local_scale_x);e.y=-(p.local_ey*p.transform.local_scale_y);e=g.local_vertices[1];e.x=p.local_ex*p.transform.local_scale_x;e.y=-(p.local_ey*p.transform.local_scale_y);e=g.local_vertices[2];e.x=p.local_ex*p.transform.local_scale_x;e.y=p.local_ey*p.transform.local_scale_y;e=g.local_vertices[3];e.x=-(p.local_ex*p.transform.local_scale_x);e.y=p.local_ey*p.transform.local_scale_y;e=p.transform.local_x;k=g.transform;k.dirty||k.set_dirty();k.local_x=e;e=p.transform.local_y;k=g.transform;k.dirty||
k.set_dirty();k.local_y=e;k=g.transform;e=Math.PI/180*(180/Math.PI)*p.transform.local_radians;k.dirty||k.set_dirty();k.local_radians=e;e=p.transform.local_scale_x;k=g.transform;k.dirty||k.set_dirty();k.local_scale_x=e;e=p.transform.local_scale_y;k=g.transform;k.dirty||k.set_dirty();k.local_scale_y=e;g.dirty_vertices=!0;g.dirty_bounds=!0;g.pooled=!1;p.transformed_rect=g;p.transformed_rect.set_parent(p.parent)}else null!=p.transformed_rect&&(e=p.transform.local_x,k=p.transformed_rect.transform,k.dirty||
k.set_dirty(),k.local_x=e,e=p.transform.local_y,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_y=e,k=p.transformed_rect.transform,e=Math.PI/180*(180/Math.PI)*p.transform.local_radians,k.dirty||k.set_dirty(),k.local_radians=e,e=p.transform.local_scale_x,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_scale_x=e,e=p.transform.local_scale_y,k=p.transformed_rect.transform,k.dirty||k.set_dirty(),k.local_scale_y=e);p.pooled=!1;null!=h.shapes[0]&&h.shapes[0].put();h.shapes[0]=
p;h.shapes[0].set_parent(h);h.dirty=!0;0>=h.mass&&null!=h.world&&(h.bounds(h.quadtree_data.bounds),h.world.static_quadtree.update(h.quadtree_data));f&&ab.update_quadtree(c);ab.overlap_body_and_bodies_bounds(da.cached_body,b,c,da.cached_collisions);e=0;for(r=da.cached_collisions;e<r.length;){h=r[e];++e;p=h.b;m=ac.pool.get();m.line=a;m.body=p;m.data.length=0;m.pooled=!1;c=m;f=0;for(b=h.b.shapes.length;f<b;)m=f++,m=h.b.shapes[m].intersect(a),null!=m&&c.data.push(m);0<c.data.length?d.push(c):c.put()}da.cached_body.shapes[0].put()}}n.put();
return d};da.undo=function(a){if(null!=a.history){var b=a.history.undo();if(null!=b){for(var c=0;c<b.length;){var f=b[c];++c;for(var d=0,g=a.members;d<g.length;){var m=g[d];++d;if(f.id==m.id){var k=f.x,O=m.transform;O.dirty||O.set_dirty();O.local_x=k;if(null!=m.on_move)m.on_move(m.transform.local_x,m.transform.local_y);k=f.y;O=m.transform;O.dirty||O.set_dirty();O.local_y=k;if(null!=m.on_move)m.on_move(m.transform.local_x,m.transform.local_y);k=m.transform;O=Math.PI/180*f.rotation;k.dirty||k.set_dirty();
k.local_radians=O;if(null!=m.on_rotate)m.on_rotate(180/Math.PI*m.transform.local_radians);k=m.velocity;k.x=f.velocity_x;k.y=f.velocity_y;k=m.acceleration;k.x=f.acceleration_x;k.y=f.acceleration_y;m.rotational_velocity=f.rotational_velocity}}}a.reset_quadtrees()}}return a};da.redo=function(a){if(null!=a.history){var b=a.history.redo();if(null!=b)for(var c=0;c<b.length;){var f=b[c];++c;for(var d=0,g=a.members;d<g.length;){var m=g[d];++d;if(f.id==m.id){var k=f.x,O=m.transform;O.dirty||O.set_dirty();
O.local_x=k;if(null!=m.on_move)m.on_move(m.transform.local_x,m.transform.local_y);k=f.y;O=m.transform;O.dirty||O.set_dirty();O.local_y=k;if(null!=m.on_move)m.on_move(m.transform.local_x,m.transform.local_y);k=m.transform;O=Math.PI/180*f.rotation;k.dirty||k.set_dirty();k.local_radians=O;if(null!=m.on_rotate)m.on_rotate(180/Math.PI*m.transform.local_radians);k=m.velocity;k.x=f.velocity_x;k.y=f.velocity_y;k=m.acceleration;k.x=f.acceleration_x;k.y=f.acceleration_y;m.rotational_velocity=f.rotational_velocity}}}a.reset_quadtrees()}return a};
var Xb=function(){};l["echo.util.Poolable"]=Xb;Xb.__name__="echo.util.Poolable";Xb.__isInterface__=!0;var vb=function(){};l["echo.util.Pool"]=vb;vb.__name__="echo.util.Pool";vb.__isInterface__=!0;var Fd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_Line"]=Fd;Fd.__name__="echo.util.GenericPool_echo_Line";Fd.__interfaces__=[vb];Fd.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=
a&&(this.members[this.count++]=a)},__class__:Fd};var Qb=function(a,b,c,f){null==f&&(f=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this.pooled=!1;this.start=a=new A(a,b);this.end=a=new A(c,f)};l["echo.Line"]=Qb;Qb.__name__="echo.Line";Qb.__interfaces__=[Xb];Qb.prototype={set_from_vector:function(a,b,c){var f=Math.PI/180*b;b=a.x;var d=a.y,g=a.x+c*Math.cos(f);a=a.y+c*Math.sin(f);null==a&&(a=1);null==g&&(g=1);null==d&&(d=0);null==b&&(b=0);c=this.start;c.x=b;c.y=d;c=this.end;c.x=g;c.y=a;return this},
get_x:function(){return this.start.x},get_y:function(){return this.start.y},get_dx:function(){return this.end.x},get_dy:function(){return this.end.y},__class__:Qb,__properties__:{get_dy:"get_dy",get_dx:"get_dx",get_y:"get_y",get_x:"get_x"}};var Uc=function(a,b,c,f,d,g,m,k,O,e,h,p){this.a=a;this.b=b;this.separate=c;this.collisions=f;this.last_collisions=d;this.enter=g;this.stay=m;this.exit=k;this.condition=O;this.quadtree_results=e;this.percent_correction=h;this.correction_threshold=p};l["echo.Listener"]=
Uc;Uc.__name__="echo.Listener";Uc.__properties__={get_defaults:"get_defaults"};Uc.get_defaults=function(){return{separate:!0,percent_correction:.9,correction_threshold:.013}};Uc.prototype={__class__:Uc};var pc=function(a,b,c,f,d){this.gravity_scale=1;this.friction=this.static_friction=0;this.density=1;this.elasticity=0;null!=a&&(this.elasticity=a);null!=b&&(this.density=b);null!=c&&(this.friction=c);null!=f&&(this.static_friction=f);null!=d&&(this.gravity_scale=d)};l["echo.Material"]=pc;pc.__name__=
"echo.Material";pc.prototype={__class__:pc};var hd=function(){};l["echo.Physics"]=hd;hd.__name__="echo.Physics";hd.step=function(a,b){for(var c=0,f=a.members;c<f.length;){var d=f[c];++c;if(0<d.mass&&!d.disposed&&d.active){d.last_x=d.transform.local_x;d.last_y=d.transform.local_y;d.last_rotation=180/Math.PI*d.transform.local_radians;var g=d.acceleration.x*d.inverse_mass,m=d.acceleration.y*d.inverse_mass;d.kinematic||(g+=a.gravity.x*d.material.gravity_scale,m+=a.gravity.y*d.material.gravity_scale);
var k=d.velocity.x,e=d.drag.x,n=d.max_velocity.x;1E-5>=Math.abs(g)?1E-5>=Math.abs(e)||(e*=b,k=0<k-e?k-e:0>k+e?k+e:0):k+=g*b;1E-5>=Math.abs(n)||(g=-n,k<g?k=g:k>n&&(k=n));d.velocity.x=k;k=d.velocity.y;g=d.drag.y;n=d.max_velocity.y;1E-5>=Math.abs(m)?1E-5>=Math.abs(g)||(g*=b,k=0<k-g?k-g:0>k+g?k+g:0):k+=m*b;1E-5>=Math.abs(n)||(m=-n,k<m?k=m:k>n&&(k=n));d.velocity.y=k;0<d.drag_length?(m=d.acceleration,m=0==m.x&&0==m.y):m=!1;m?(m=d.velocity,m=!(0==m.x&&0==m.y)):m=!1;m&&(m=n=d.velocity,m=Math.sqrt(m.x*m.x+
m.y*m.y)-d.drag_length*b,g=k=n,g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),e=n.y/g*m,k.x=n.x/g*m,k.y=e);0<d.max_velocity_length?(m=d.velocity,m=Math.sqrt(m.x*m.x+m.y*m.y)>d.max_velocity_length):m=!1;m&&(n=d.velocity,m=d.max_velocity_length,g=k=n,g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),e=n.y/g*m,k.x=n.x/g*m,k.y=e);m=d.transform.local_x+d.velocity.x*b;k=d.transform;k.dirty||k.set_dirty();k.local_x=m;if(null!=d.on_move)d.on_move(d.transform.local_x,d.transform.local_y);m=d.transform.local_y+d.velocity.y*
b;k=d.transform;k.dirty||k.set_dirty();k.local_y=m;if(null!=d.on_move)d.on_move(d.transform.local_x,d.transform.local_y);m=d.rotational_velocity;n=d.rotational_drag;g=d.torque*d.inverse_mass;k=d.max_rotational_velocity;1E-5>=Math.abs(n)?1E-5>=Math.abs(g)||(g*=b,m=0<m-g?m-g:0>m+g?m+g:0):m+=n*b;1E-5>=Math.abs(k)||(n=-k,m<n?m=n:m>k&&(m=k));d.rotational_velocity=m;m=d.transform;k=Math.PI/180*(180/Math.PI*d.transform.local_radians+d.rotational_velocity*b);m.dirty||m.set_dirty();m.local_radians=k;if(null!=
d.on_rotate)d.on_rotate(180/Math.PI*d.transform.local_radians)}}};hd.separate=function(a,b){a=null==b?a.listeners.members:b.members;for(b=0;b<a.length;){var c=a[b];++b;if(c.separate)for(var f=0,d=c.collisions;f<d.length;){var g=d[f];++f;for(var m=0,k=g.data.length;m<k;){var e=m++,n=g.a,h=g.b;e=g.data[e];var p=c.correction_threshold,t=c.percent_correction;null==t&&(t=.9);null==p&&(p=.013);if(e.sa.solid&&e.sb.solid&&n.active&&h.active&&!n.disposed&&!h.disposed&&!(0>=n.mass&&0>=h.mass)){var r=(n.velocity.x-
h.velocity.x)*e.normal.x+(n.velocity.y-h.velocity.y)*e.normal.y,l=n.inverse_mass+h.inverse_mass;if(0<r){var z=-(1+.5*(n.material.elasticity+h.material.elasticity))*r/l;r=-z*e.normal.x;z=-z*e.normal.y;n.kinematic||(n.velocity.x-=r*n.inverse_mass,n.velocity.y-=z*n.inverse_mass);h.kinematic||(h.velocity.x+=r*h.inverse_mass,h.velocity.y+=z*h.inverse_mass)}t*=Math.max(e.overlap-p,0)/l;p=t*e.normal.x;e=t*e.normal.y;if(!n.kinematic){t=n.transform.local_x-n.inverse_mass*p;l=n.transform;l.dirty||l.set_dirty();
l.local_x=t;if(null!=n.on_move)n.on_move(n.transform.local_x,n.transform.local_y);t=n.transform.local_y-n.inverse_mass*e;l=n.transform;l.dirty||l.set_dirty();l.local_y=t;if(null!=n.on_move)n.on_move(n.transform.local_x,n.transform.local_y)}if(!h.kinematic){n=h.transform.local_x+h.inverse_mass*p;p=h.transform;p.dirty||p.set_dirty();p.local_x=n;if(null!=h.on_move)h.on_move(h.transform.local_x,h.transform.local_y);n=h.transform.local_y+h.inverse_mass*e;e=h.transform;e.dirty||e.set_dirty();e.local_y=
n;if(null!=h.on_move)h.on_move(h.transform.local_x,h.transform.local_y)}}}}}};var Ea=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.solid=!0;var f=this.transform=new vd;f.dirty||f.set_dirty();f.local_x=a;f=this.transform;f.dirty||f.set_dirty();f.local_y=b;f=this.transform;a=Math.PI/180*c;f.dirty||f.set_dirty();f.local_radians=a};l["echo.Shape"]=Ea;Ea.__name__="echo.Shape";Ea.__properties__={get_defaults:"get_defaults"};Ea.get=function(a){a=Dd.copy_fields(a,Ea.get_defaults());switch(a.type){case 0:var b=
a.offset_x,c=a.offset_y,f=a.width,d=a.height,g=a.rotation,m=a.scale_x,k=a.scale_y;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==d&&(d=0);null==f&&(f=1);null==c&&(c=0);null==b&&(b=0);var e=Tb.pool.get();var n=b,h=c;b=d;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==b&&(b=0);null==f&&(f=1);null==h&&(h=0);null==n&&(n=0);c=e.transform;c.dirty||c.set_dirty();c.local_x=n;c=e.transform;c.dirty||c.set_dirty();c.local_y=h;n=.5*f;c=e.transform;null==c.parent?h=c.local_scale_x:(c.sync(),h=c._scale_x);
e.local_ex=n/h;if(null!=e.transformed_rect){c=e.transformed_rect;c.count=4;n=0;for(h=c.count;n<h;)if(d=n++,null==c.local_vertices[d]){var p=c.local_vertices,t=new A(0,0);p[d]=t}n=c.local_vertices[0];n.x=-(e.local_ex*e.transform.local_scale_x);n.y=-(e.local_ey*e.transform.local_scale_y);n=c.local_vertices[1];n.x=e.local_ex*e.transform.local_scale_x;n.y=-(e.local_ey*e.transform.local_scale_y);n=c.local_vertices[2];n.x=e.local_ex*e.transform.local_scale_x;n.y=e.local_ey*e.transform.local_scale_y;n=c.local_vertices[3];
n.x=-(e.local_ex*e.transform.local_scale_x);n.y=e.local_ey*e.transform.local_scale_y;n=e.transform.local_x;p=c.transform;p.dirty||p.set_dirty();p.local_x=n;n=e.transform.local_y;p=c.transform;p.dirty||p.set_dirty();p.local_y=n;p=c.transform;n=Math.PI/180*(180/Math.PI)*e.transform.local_radians;p.dirty||p.set_dirty();p.local_radians=n;n=e.transform.local_scale_x;p=c.transform;p.dirty||p.set_dirty();p.local_scale_x=n;n=e.transform.local_scale_y;p=c.transform;p.dirty||p.set_dirty();p.local_scale_y=n;
c.dirty_vertices=!0;c.dirty_bounds=!0}n=.5*(0>=b?f:b);c=e.transform;null==c.parent?h=c.local_scale_y:(c.sync(),h=c._scale_y);e.local_ey=n/h;if(null!=e.transformed_rect){c=e.transformed_rect;c.count=4;n=0;for(h=c.count;n<h;)d=n++,null==c.local_vertices[d]&&(p=c.local_vertices,t=new A(0,0),p[d]=t);n=c.local_vertices[0];n.x=-(e.local_ex*e.transform.local_scale_x);n.y=-(e.local_ey*e.transform.local_scale_y);n=c.local_vertices[1];n.x=e.local_ex*e.transform.local_scale_x;n.y=-(e.local_ey*e.transform.local_scale_y);
n=c.local_vertices[2];n.x=e.local_ex*e.transform.local_scale_x;n.y=e.local_ey*e.transform.local_scale_y;n=c.local_vertices[3];n.x=-(e.local_ex*e.transform.local_scale_x);n.y=e.local_ey*e.transform.local_scale_y;n=e.transform.local_x;p=c.transform;p.dirty||p.set_dirty();p.local_x=n;n=e.transform.local_y;p=c.transform;p.dirty||p.set_dirty();p.local_y=n;p=c.transform;n=Math.PI/180*(180/Math.PI)*e.transform.local_radians;p.dirty||p.set_dirty();p.local_radians=n;n=e.transform.local_scale_x;p=c.transform;
p.dirty||p.set_dirty();p.local_scale_x=n;n=e.transform.local_scale_y;p=c.transform;p.dirty||p.set_dirty();p.local_scale_y=n;c.dirty_vertices=!0;c.dirty_bounds=!0}c=e.transform;n=Math.PI/180*g;c.dirty||c.set_dirty();c.local_radians=n;c=e.transform;c.dirty||c.set_dirty();c.local_scale_x=m;c=e.transform;c.dirty||c.set_dirty();c.local_scale_y=k;null==e.transformed_rect?(c=e.transform,null==c.parent?k=180/Math.PI*c.local_radians:(c.sync(),k=180/Math.PI*c._radians),k=0!=k):k=!1;if(k){f=oa.pool.get();f.count=
4;n=0;for(h=f.count;n<h;)d=n++,null==f.local_vertices[d]&&(k=f.local_vertices,t=new A(0,0),k[d]=t);n=f.local_vertices[0];n.x=-(e.local_ex*e.transform.local_scale_x);n.y=-(e.local_ey*e.transform.local_scale_y);n=f.local_vertices[1];n.x=e.local_ex*e.transform.local_scale_x;n.y=-(e.local_ey*e.transform.local_scale_y);n=f.local_vertices[2];n.x=e.local_ex*e.transform.local_scale_x;n.y=e.local_ey*e.transform.local_scale_y;n=f.local_vertices[3];n.x=-(e.local_ex*e.transform.local_scale_x);n.y=e.local_ey*
e.transform.local_scale_y;n=e.transform.local_x;c=f.transform;c.dirty||c.set_dirty();c.local_x=n;n=e.transform.local_y;c=f.transform;c.dirty||c.set_dirty();c.local_y=n;c=f.transform;n=Math.PI/180*(180/Math.PI)*e.transform.local_radians;c.dirty||c.set_dirty();c.local_radians=n;n=e.transform.local_scale_x;c=f.transform;c.dirty||c.set_dirty();c.local_scale_x=n;n=e.transform.local_scale_y;c=f.transform;c.dirty||c.set_dirty();c.local_scale_y=n;f.dirty_vertices=!0;f.dirty_bounds=!0;f.pooled=!1;e.transformed_rect=
f;e.transformed_rect.set_parent(e.parent)}else null!=e.transformed_rect&&(n=e.transform.local_x,c=e.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_x=n,n=e.transform.local_y,c=e.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_y=n,c=e.transformed_rect.transform,n=Math.PI/180*(180/Math.PI)*e.transform.local_radians,c.dirty||c.set_dirty(),c.local_radians=n,n=e.transform.local_scale_x,c=e.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_scale_x=n,n=e.transform.local_scale_y,
c=e.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_scale_y=n);e.pooled=!1;break;case 1:b=a.offset_x;c=a.offset_y;p=a.radius;g=a.rotation;m=a.scale_x;k=a.scale_y;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==p&&(p=1);null==c&&(c=0);null==b&&(b=0);e=qc.pool.get();n=b;h=c;f=p;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==f&&(f=1);null==h&&(h=0);null==n&&(n=0);c=e.transform;c.dirty||c.set_dirty();c.local_x=n;c=e.transform;c.dirty||c.set_dirty();c.local_y=h;c=e.transform;n=Math.PI/
180*g;c.dirty||c.set_dirty();c.local_radians=n;c=e.transform;c.dirty||c.set_dirty();c.local_scale_x=m;c=e.transform;c.dirty||c.set_dirty();c.local_scale_y=k;c=e.transform;null==c.parent?k=c.local_scale_x:(c.sync(),k=c._scale_x);e.local_radius=f/k;e.pooled=!1;break;case 2:if(null!=a.vertices)b=a.offset_x,c=a.offset_y,g=a.rotation,e=a.vertices,m=a.scale_x,k=a.scale_y,null==k&&(k=1),null==m&&(m=1),null==g&&(g=0),null==c&&(c=0),null==b&&(b=0),f=oa.pool.get(),n=b,h=c,null==k&&(k=1),null==m&&(m=1),null==
g&&(g=0),null==h&&(h=0),null==n&&(n=0),c=f.transform,c.dirty||c.set_dirty(),c.local_x=n,c=f.transform,c.dirty||c.set_dirty(),c.local_y=h,c=f.transform,n=Math.PI/180*g,c.dirty||c.set_dirty(),c.local_radians=n,c=f.transform,c.dirty||c.set_dirty(),c.local_scale_x=m,c=f.transform,c.dirty||c.set_dirty(),c.local_scale_y=k,k=null,f.local_vertices=null==e?[]:e;else{b=a.offset_x;c=a.offset_y;h=a.sides;p=a.radius;g=a.rotation;m=a.scale_x;k=a.scale_y;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==p&&(p=
1);null==h&&(h=3);null==c&&(c=0);null==b&&(b=0);if(3>h)throw D.thrown("Polygons require 3 sides as a minimum");f=oa.pool.get();var r=2*Math.PI/h;e=[];for(n=0;n<h;)d=n++,d=d*r+.5*(Math.PI-r),t=new A(Math.cos(d)*p,Math.sin(d)*p),e.push(t);n=b;h=c;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==h&&(h=0);null==n&&(n=0);c=f.transform;c.dirty||c.set_dirty();c.local_x=n;c=f.transform;c.dirty||c.set_dirty();c.local_y=h;c=f.transform;n=Math.PI/180*g;c.dirty||c.set_dirty();c.local_radians=n;c=f.transform;
c.dirty||c.set_dirty();c.local_scale_x=m;c=f.transform;c.dirty||c.set_dirty();c.local_scale_y=k;k=null;f.local_vertices=null==e?[]:e}f.count=null!=k&&0<=k?k:f.local_vertices.length;if(k>f.local_vertices.length)for(n=f.local_vertices.length,h=k;n<h;)d=n++,k=f.local_vertices,t=new A(0,0),k[d]=t;f.dirty_vertices=!0;f.dirty_bounds=!0;f.pooled=!1;e=f}e.solid=a.solid;return e};Ea.get_defaults=function(){return{type:0,radius:1,width:1,height:0,sides:3,rotation:0,scale_x:1,scale_y:1,offset_x:0,offset_y:0,
solid:!0}};Ea.prototype={put:function(){this.transform.set_parent(null);this.parent=null;this.collided=!1},set_parent:function(a){this.parent!=a&&(this.parent=a,this.transform.set_parent(null==a?null:a.transform))},bounds:function(a){if(null==a){var b=this.transform;if(null==b.parent)var c=b.local_x;else b.sync(),c=b._x;b=this.transform;if(null==b.parent)var f=b.local_y;else b.sync(),f=b._y;var d=0;b=0;null==b&&(b=1);null==d&&(d=1);null==f&&(f=0);null==c&&(c=0);a=lb.pool.get();null==b&&(b=1);null==
d&&(d=1);null==f&&(f=0);null==c&&(c=0);d*=.5;b*=.5;a.min_x=c-d;a.min_y=f-b;a.max_x=c+d;a.max_y=f+b;a.pooled=!1;return a}b=this.transform;null==b.parent?c=b.local_x:(b.sync(),c=b._x);b=this.transform;null==b.parent?f=b.local_y:(b.sync(),f=b._y);b=d=0;null==b&&(b=1);null==d&&(d=1);null==f&&(f=0);null==c&&(c=0);d*=.5;b*=.5;a.min_x=c-d;a.min_y=f-b;a.max_x=c+d;a.max_y=f+b;return a},volume:function(){return 0},intersect:function(a){return null},collides:function(a){return null},collide_rect:function(a){return null},
collide_circle:function(a){return null},collide_polygon:function(a){return null},get_top:function(){var a=this.transform;if(null==a.parent)return a.local_y;a.sync();return a._y},get_bottom:function(){var a=this.transform;if(null==a.parent)return a.local_y;a.sync();return a._y},get_left:function(){var a=this.transform;if(null==a.parent)return a.local_x;a.sync();return a._x},get_right:function(){var a=this.transform;if(null==a.parent)return a.local_x;a.sync();return a._x},__class__:Ea,__properties__:{get_right:"get_right",
get_left:"get_left",get_bottom:"get_bottom",get_top:"get_top"}};var Ed=function(a){this.members=null==a.members?[]:a.members;this.init=!1;var b;if(1>a.width)throw D.thrown("World must have a width of at least 1");this.width=b=a.width;this.init&&this.reset_quadtrees();if(1>a.height)throw D.thrown("World must have a width of at least 1");this.height=b=a.height;this.init&&this.reset_quadtrees();this.x=null==a.x?0:a.x;this.init&&this.reset_quadtrees();this.y=null==a.y?0:a.y;this.init&&this.reset_quadtrees();
this.gravity=new A(null==a.gravity_x?0:a.gravity_x,null==a.gravity_y?0:a.gravity_y);this.reset_quadtrees();this.listeners=new wd(a.listeners);this.iterations=null==a.iterations?5:a.iterations;null!=a.history&&(this.history=new Le(a.history))};l["echo.World"]=Ed;Ed.__name__="echo.World";Ed.__interfaces__=[ud];Ed.prototype={add:function(a){if(a.world==this)return a;null!=a.world&&(null!=a.world&&a.world.remove(a),null!=a.quadtree_data&&null!=a.quadtree_data.bounds&&a.quadtree_data.bounds.put());a.world=
this;a.dirty=!0;this.members.push(a);a.quadtree_data=new Me(a.id,a.bounds(),!1);0>=a.mass?this.static_quadtree.insert(a.quadtree_data):this.quadtree.insert(a.quadtree_data);return a},remove:function(a){this.quadtree.remove(a.quadtree_data);this.static_quadtree.remove(a.quadtree_data);F.remove(this.members,a);a.world=null;return a},reset_quadtrees:function(){this.init=!0;if(null!=this.quadtree){var a=this.quadtree;if(!a.pooled){a.pooled=!0;for(var b=0,c=a.children.length;b<c;){var f=b++;if(null!=a.children[f]){a.children[f].clear_children();
var d=a.children[f];d.pooled||(d.pooled=!0,d.clear_children(),d.contents.length=0,d.contents_count=0,d.nodes_list.length=0,Ya.pool.put_unsafe(d));a.children[f]=null}}a.contents.length=0;a.contents_count=0;a.nodes_list.length=0;Ya.pool.put_unsafe(a)}}var g=Ya.pool.get();c=b=0;var m=1,k=1;null==k&&(k=1);null==m&&(m=1);null==c&&(c=0);null==b&&(b=0);m*=.5;k*=.5;g.min_x=b-m;g.min_y=c-k;g.max_x=b+m;g.max_y=c+k;b=0;for(c=g.children.length;b<c;)f=b++,null!=g.children[f]&&(g.children[f].clear_children(),a=
g.children[f],a.pooled||(a.pooled=!0,a.clear_children(),a.contents.length=0,a.contents_count=0,a.nodes_list.length=0,Ya.pool.put_unsafe(a)),g.children[f]=null);g.contents.length=0;g.contents_count=0;g.pooled=!1;this.quadtree=g;if(null!=this.static_quadtree&&(a=this.static_quadtree,!a.pooled)){a.pooled=!0;b=0;for(c=a.children.length;b<c;)f=b++,null!=a.children[f]&&(a.children[f].clear_children(),d=a.children[f],d.pooled||(d.pooled=!0,d.clear_children(),d.contents.length=0,d.contents_count=0,d.nodes_list.length=
0,Ya.pool.put_unsafe(d)),a.children[f]=null);a.contents.length=0;a.contents_count=0;a.nodes_list.length=0;Ya.pool.put_unsafe(a)}g=Ya.pool.get();c=b=0;k=m=1;null==k&&(k=1);null==m&&(m=1);null==c&&(c=0);null==b&&(b=0);m*=.5;k*=.5;g.min_x=b-m;g.min_y=c-k;g.max_x=b+m;g.max_y=c+k;b=0;for(c=g.children.length;b<c;)f=b++,null!=g.children[f]&&(g.children[f].clear_children(),a=g.children[f],a.pooled||(a.pooled=!0,a.clear_children(),a.contents.length=0,a.contents_count=0,a.nodes_list.length=0,Ya.pool.put_unsafe(a)),
g.children[f]=null);g.contents.length=0;g.contents_count=0;g.pooled=!1;this.static_quadtree=g;g=null;if(null!=g){b=this.x+.5*this.width;c=this.y+.5*this.height;m=this.width;k=this.height;null==k&&(k=0);null==m&&(m=1);null==c&&(c=0);null==b&&(b=0);a=g.transform;a.dirty||a.set_dirty();a.local_x=b;a=g.transform;a.dirty||a.set_dirty();a.local_y=c;b=.5*m;a=g.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);g.local_ex=b/a;if(null!=g.transformed_rect){a=g.transformed_rect;a.count=4;b=0;
for(c=a.count;b<c;)if(f=b++,null==a.local_vertices[f]){d=a.local_vertices;var e=new A(0,0);d[f]=e}b=a.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;b.y=g.local_ey*g.transform.local_scale_y;b=a.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*g.transform.local_scale_y;
b=g.transform.local_x;d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=g.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;d=a.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=g.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=g.transform.local_scale_y;d=a.transform;d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}b=.5*(0>=k?m:k);a=g.transform;null==a.parent?a=
a.local_scale_y:(a.sync(),a=a._scale_y);g.local_ey=b/a;if(null!=g.transformed_rect){a=g.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)f=b++,null==a.local_vertices[f]&&(d=a.local_vertices,e=new A(0,0),d[f]=e);b=a.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;b.y=g.local_ey*
g.transform.local_scale_y;b=a.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*g.transform.local_scale_y;b=g.transform.local_x;d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=g.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;d=a.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=g.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=g.transform.local_scale_y;d=a.transform;
d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}a=g.transform;b=Math.PI/180*0;a.dirty||a.set_dirty();a.local_radians=b;a=g.transform;a.dirty||a.set_dirty();a.local_scale_x=1;a=g.transform;a.dirty||a.set_dirty();a.local_scale_y=1;null==g.transformed_rect?(a=g.transform,null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians),b=0!=a):b=!1;if(b){k=oa.pool.get();k.count=4;b=0;for(c=k.count;b<c;)f=b++,null==k.local_vertices[f]&&(a=k.local_vertices,
e=new A(0,0),a[f]=e);b=k.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=k.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=k.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;b.y=g.local_ey*g.transform.local_scale_y;b=k.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*g.transform.local_scale_y;b=g.transform.local_x;a=k.transform;a.dirty||a.set_dirty();
a.local_x=b;b=g.transform.local_y;a=k.transform;a.dirty||a.set_dirty();a.local_y=b;a=k.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;a.dirty||a.set_dirty();a.local_radians=b;b=g.transform.local_scale_x;a=k.transform;a.dirty||a.set_dirty();a.local_scale_x=b;b=g.transform.local_scale_y;a=k.transform;a.dirty||a.set_dirty();a.local_scale_y=b;k.dirty_vertices=!0;k.dirty_bounds=!0;k.pooled=!1;g.transformed_rect=k;g.transformed_rect.set_parent(g.parent)}else null!=g.transformed_rect&&(b=
g.transform.local_x,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_x=b,b=g.transform.local_y,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_y=b,a=g.transformed_rect.transform,b=Math.PI/180*(180/Math.PI)*g.transform.local_radians,a.dirty||a.set_dirty(),a.local_radians=b,b=g.transform.local_scale_x,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_x=b,b=g.transform.local_scale_y,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_y=b)}else{b=
this.x+.5*this.width;c=this.y+.5*this.height;m=this.width;k=this.height;null==k&&(k=0);null==m&&(m=1);null==c&&(c=0);null==b&&(b=0);g=Tb.pool.get();var n=0,h=1,p=1;null==p&&(p=1);null==h&&(h=1);null==n&&(n=0);null==k&&(k=0);null==m&&(m=1);null==c&&(c=0);null==b&&(b=0);a=g.transform;a.dirty||a.set_dirty();a.local_x=b;a=g.transform;a.dirty||a.set_dirty();a.local_y=c;b=.5*m;a=g.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);g.local_ex=b/a;if(null!=g.transformed_rect){a=g.transformed_rect;
a.count=4;b=0;for(c=a.count;b<c;)f=b++,null==a.local_vertices[f]&&(d=a.local_vertices,e=new A(0,0),d[f]=e);b=a.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;b.y=g.local_ey*g.transform.local_scale_y;b=a.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*
g.transform.local_scale_y;b=g.transform.local_x;d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=g.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;d=a.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=g.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=g.transform.local_scale_y;d=a.transform;d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}b=.5*(0>=k?m:k);a=g.transform;
null==a.parent?a=a.local_scale_y:(a.sync(),a=a._scale_y);g.local_ey=b/a;if(null!=g.transformed_rect){a=g.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)f=b++,null==a.local_vertices[f]&&(d=a.local_vertices,e=new A(0,0),d[f]=e);b=a.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=a.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;
b.y=g.local_ey*g.transform.local_scale_y;b=a.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*g.transform.local_scale_y;b=g.transform.local_x;d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=g.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;d=a.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=g.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=g.transform.local_scale_y;
d=a.transform;d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}a=g.transform;b=Math.PI/180*n;a.dirty||a.set_dirty();a.local_radians=b;a=g.transform;a.dirty||a.set_dirty();a.local_scale_x=h;a=g.transform;a.dirty||a.set_dirty();a.local_scale_y=p;null==g.transformed_rect?(a=g.transform,null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians),b=0!=a):b=!1;if(b){k=oa.pool.get();k.count=4;b=0;for(c=k.count;b<c;)f=b++,null==k.local_vertices[f]&&(a=k.local_vertices,
e=new A(0,0),a[f]=e);b=k.local_vertices[0];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=-(g.local_ey*g.transform.local_scale_y);b=k.local_vertices[1];b.x=g.local_ex*g.transform.local_scale_x;b.y=-(g.local_ey*g.transform.local_scale_y);b=k.local_vertices[2];b.x=g.local_ex*g.transform.local_scale_x;b.y=g.local_ey*g.transform.local_scale_y;b=k.local_vertices[3];b.x=-(g.local_ex*g.transform.local_scale_x);b.y=g.local_ey*g.transform.local_scale_y;b=g.transform.local_x;a=k.transform;a.dirty||a.set_dirty();
a.local_x=b;b=g.transform.local_y;a=k.transform;a.dirty||a.set_dirty();a.local_y=b;a=k.transform;b=Math.PI/180*(180/Math.PI)*g.transform.local_radians;a.dirty||a.set_dirty();a.local_radians=b;b=g.transform.local_scale_x;a=k.transform;a.dirty||a.set_dirty();a.local_scale_x=b;b=g.transform.local_scale_y;a=k.transform;a.dirty||a.set_dirty();a.local_scale_y=b;k.dirty_vertices=!0;k.dirty_bounds=!0;k.pooled=!1;g.transformed_rect=k;g.transformed_rect.set_parent(g.parent)}else null!=g.transformed_rect&&(b=
g.transform.local_x,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_x=b,b=g.transform.local_y,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_y=b,a=g.transformed_rect.transform,b=Math.PI/180*(180/Math.PI)*g.transform.local_radians,a.dirty||a.set_dirty(),a.local_radians=b,b=g.transform.local_scale_x,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_x=b,b=g.transform.local_scale_y,a=g.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_y=b);
g.pooled=!1}b=g.to_aabb(!0);a=this.quadtree;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;a=this.static_quadtree;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;b=0;for(c=this.members;b<c.length;)g=c[b],++b,0<g.mass?g.dirty=!0:(g.bounds(g.quadtree_data.bounds),this.static_quadtree.update(g.quadtree_data))},__class__:Ed};var Ke=function(a,b,c,f,d,g,m,k,e){this.id=a;this.x=b;this.y=c;this.rotation=f;this.velocity_x=d;this.velocity_y=g;this.acceleration_x=m;this.acceleration_y=
k;this.rotational_velocity=e};l["echo.data.BodyState"]=Ke;Ke.__name__="echo.data.BodyState";Ke.prototype={__class__:Ke};var Gd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_data_Collision"]=Gd;Gd.__name__="echo.util.GenericPool_echo_data_Collision";Gd.__interfaces__=[vb];Gd.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Gd};var jc=
function(){this.pooled=!1;this.data=[]};l["echo.data.Collision"]=jc;jc.__name__="echo.data.Collision";jc.__interfaces__=[Xb];jc.prototype={put:function(){if(!this.pooled){for(var a=0,b=this.data;a<b.length;){var c=b[a];++a;c.put()}this.pooled=!0;jc.pool.put_unsafe(this)}},__class__:jc};var Hd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_data_CollisionData"]=Hd;Hd.__name__="echo.util.GenericPool_echo_data_CollisionData";Hd.__interfaces__=[vb];Hd.prototype={get:function(){return 0==
this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Hd};var Ac=function(){this.pooled=!1;var a=new A(0,0);this.normal=a;a=new A(0,0);var b=new A(0,0);this.contacts=[a,b].slice(0);this.overlap=this.contact_count=0};l["echo.data.CollisionData"]=Ac;Ac.__name__="echo.data.CollisionData";Ac.__interfaces__=[Xb];Ac.prototype={put:function(){this.pooled||(this.pooled=!0,Ac.pool.put_unsafe(this))},__class__:Ac};var Id=
function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_data_Intersection"]=Id;Id.__name__="echo.util.GenericPool_echo_data_Intersection";Id.__interfaces__=[vb];Id.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Id};var ac=function(){this.pooled=!1;this.data=[]};l["echo.data.Intersection"]=ac;ac.__name__="echo.data.Intersection";ac.__interfaces__=
[Xb];ac.prototype={put:function(){if(!this.pooled){for(var a=0,b=this.data;a<b.length;){var c=b[a];++a;c.put()}this.pooled=!0;ac.pool.put_unsafe(this)}},__class__:ac};var Jd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_data_IntersectionData"]=Jd;Jd.__name__="echo.util.GenericPool_echo_data_IntersectionData";Jd.__interfaces__=[vb];Jd.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=
a&&(this.members[this.count++]=a)},__class__:Jd};var zb=function(){this.inverse_normal=this.pooled=!1;var a=new A(0,0);this.normal=a;this.distance=this.overlap=0;this.hit=a=new A(0,0);this.hit=a=new A(0,0);this.normal=a=new A(0,0)};l["echo.data.IntersectionData"]=zb;zb.__name__="echo.data.IntersectionData";zb.__interfaces__=[Xb];zb.prototype={put:function(){this.pooled||(this.pooled=!0,zb.pool.put_unsafe(this))},__class__:zb};var Me=function(a,b,c){this.flag=!1;this.bounds=null;this.id=a;null!=b&&
(this.bounds=b);null!=c&&(this.flag=c)};l["echo.data.QuadTreeData"]=Me;Me.__name__="echo.data.QuadTreeData";Me.prototype={__class__:Me};var Ne=function(a,b,c,f,d,g,m,k,e){this.m00=a;this.m10=b;this.m20=c;this.m01=f;this.m11=d;this.m21=g;this.m02=m;this.m12=k;this.m22=e};l["echo.math.Matrix3Default"]=Ne;Ne.__name__="echo.math.Matrix3Default";Ne.prototype={__class__:Ne};var A=function(a,b){this.x=a;this.y=b};l["echo.math.Vector2Default"]=A;A.__name__="echo.math.Vector2Default";A.prototype={__class__:A};
var Kd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_shape_Circle"]=Kd;Kd.__name__="echo.util.GenericPool_echo_shape_Circle";Kd.__interfaces__=[vb];Kd.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Kd};var qc=function(){this.pooled=!1;Ea.call(this);this.type=1;var a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);
this.local_radius=0/a};l["echo.shape.Circle"]=qc;qc.__name__="echo.shape.Circle";qc.__interfaces__=[Xb];qc.get=function(a,b,c,f,d,g){null==g&&(g=1);null==d&&(d=1);null==f&&(f=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var m=qc.pool.get();null==g&&(g=1);null==d&&(d=1);null==f&&(f=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var k=m.transform;k.dirty||k.set_dirty();k.local_x=a;k=m.transform;k.dirty||k.set_dirty();k.local_y=b;k=m.transform;a=Math.PI/180*f;k.dirty||k.set_dirty();k.local_radians=
a;k=m.transform;k.dirty||k.set_dirty();k.local_scale_x=d;k=m.transform;k.dirty||k.set_dirty();k.local_scale_y=g;k=m.transform;null==k.parent?a=k.local_scale_x:(k.sync(),a=k._scale_x);m.local_radius=c/a;m.pooled=!1;return m};qc.__super__=Ea;qc.prototype=x(Ea.prototype,{put:function(){Ea.prototype.put.call(this);this.pooled||(this.pooled=!0,qc.pool.put_unsafe(this))},bounds:function(a){var b=this.local_radius,c=this.transform;null==c.parent?c=c.local_scale_x:(c.sync(),c=c._scale_x);b=b*c*2;if(null==
a){c=this.transform;if(null==c.parent)var f=c.local_x;else c.sync(),f=c._x;c=this.transform;if(null==c.parent)var d=c.local_y;else c.sync(),d=c._y;c=b;null==b&&(b=1);null==c&&(c=1);null==d&&(d=0);null==f&&(f=0);a=lb.pool.get();null==b&&(b=1);null==c&&(c=1);null==d&&(d=0);null==f&&(f=0);c*=.5;b*=.5;a.min_x=f-c;a.min_y=d-b;a.max_x=f+c;a.max_y=d+b;a.pooled=!1;return a}c=this.transform;null==c.parent?f=c.local_x:(c.sync(),f=c._x);c=this.transform;null==c.parent?d=c.local_y:(c.sync(),d=c._y);c=b;null==
b&&(b=1);null==c&&(c=1);null==d&&(d=0);null==f&&(f=0);c*=.5;b*=.5;a.min_x=f-c;a.min_y=d-b;a.max_x=f+c;a.max_y=d+b;return a},volume:function(){var a=this.local_radius,b=this.transform;null==b.parent?b=b.local_scale_x:(b.sync(),b=b._scale_x);a*=b;return Math.PI*a*a},intersect:function(a){return xa.line_intersects_circle(a,this)},collides:function(a){return a.collide_circle(this)},collide_rect:function(a){return xa.rect_and_circle(a,this,!0)},collide_circle:function(a){return xa.circle_and_circle(a,
this)},collide_polygon:function(a){return xa.circle_and_polygon(this,a,!0)},get_top:function(){var a=this.transform;if(null==a.parent)var b=a.local_y;else a.sync(),b=a._y;var c=this.local_radius;a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);return b-c*a},get_bottom:function(){var a=this.transform;if(null==a.parent)var b=a.local_y;else a.sync(),b=a._y;var c=this.local_radius;a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);return b+c*a},get_left:function(){var a=
this.transform;if(null==a.parent)var b=a.local_x;else a.sync(),b=a._x;var c=this.local_radius;a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);return b-c*a},get_right:function(){var a=this.transform;if(null==a.parent)var b=a.local_x;else a.sync(),b=a._x;var c=this.local_radius;a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);return b+c*a},__class__:qc});var Ld=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_shape_Polygon"]=
Ld;Ld.__name__="echo.util.GenericPool_echo_shape_Polygon";Ld.__interfaces__=[vb];Ld.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Ld};var oa=function(a){this.pooled=!1;Ea.call(this);this.type=2;this._vertices=[];this._normals=[];var b=lb.pool.get(),c=0,f=0,d=1,g=1;null==g&&(g=1);null==d&&(d=1);null==f&&(f=0);null==c&&(c=0);d*=.5;g*=.5;b.min_x=c-d;b.min_y=f-g;b.max_x=
c+d;b.max_y=f+g;b.pooled=!1;this._bounds=b;this.transform.on_dirty=u(this,this.on_dirty);this.local_vertices=null==a?[]:a;this.count=this.local_vertices.length;if(null>this.local_vertices.length)for(a=this.local_vertices.length;null>a;)b=a++,c=this.local_vertices,f=new A(0,0),c[b]=f;this.dirty_bounds=this.dirty_vertices=!0};l["echo.shape.Polygon"]=oa;oa.__name__="echo.shape.Polygon";oa.__interfaces__=[Xb];oa.get=function(a,b,c,f,d,g,m){null==m&&(m=1);null==g&&(g=1);null==d&&(d=0);null==f&&(f=1);null==
c&&(c=3);null==b&&(b=0);null==a&&(a=0);if(3>c)throw D.thrown("Polygons require 3 sides as a minimum");for(var k=oa.pool.get(),e=2*Math.PI/c,n,h=[],p=0;p<c;){n=p++;n=n*e+.5*(Math.PI-e);var t=new A(Math.cos(n)*f,Math.sin(n)*f);h.push(t)}p=a;null==m&&(m=1);null==g&&(g=1);null==d&&(d=0);null==b&&(b=0);null==p&&(p=0);a=k.transform;a.dirty||a.set_dirty();a.local_x=p;a=k.transform;a.dirty||a.set_dirty();a.local_y=b;a=k.transform;d*=Math.PI/180;a.dirty||a.set_dirty();a.local_radians=d;a=k.transform;a.dirty||
a.set_dirty();a.local_scale_x=g;a=k.transform;a.dirty||a.set_dirty();a.local_scale_y=m;k.local_vertices=null==h?[]:h;k.count=k.local_vertices.length;if(null>k.local_vertices.length)for(p=k.local_vertices.length,c=null;p<c;)n=p++,h=k.local_vertices,t=new A(0,0),h[n]=t;k.dirty_vertices=!0;k.dirty_bounds=!0;k.pooled=!1;return k};oa.__super__=Ea;oa.prototype=x(Ea.prototype,{put:function(){Ea.prototype.put.call(this);this.pooled||(this.pooled=!0,oa.pool.put_unsafe(this))},bounds:function(a){if(this.dirty_bounds){this.dirty_bounds=
!1;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var b=0,c=this.count;b<c;){var f=b++;if(null!=this.local_vertices[f]){if(null==this._vertices[f]){var d=this._vertices,g=new A(0,0);d[f]=g}var m=this.local_vertices[f].x,k=this.local_vertices[f].y;null==k&&(k=0);null==m&&(m=0);d=this.transform.get_local_to_world_matrix();g=m;m=d.m01*g+d.m11*k+1*d.m21;var e=this._vertices[f];e.x=d.m00*g+d.m10*k+1*d.m20;e.y=m}}b=0;for(c=this.count;b<c;)f=
b++,e=this._vertices[(f+1)%this.count],g=e.x,k=e.y,d=this._vertices[f],k-=d.y,g-=d.x,m=-k,k=g,g=m,null==this._normals[f]?(d=this._normals,g=new A(g,k),d[f]=g):(d=this._normals[f],d.x=g,d.y=k),k=f=g=this._normals[f],k=k.x*k.x+k.y*k.y,k=0==k?1:Math.sqrt(k),d=g.y/k,f.x=g.x/k,f.y=d}e=this._vertices;g=e[0].x;k=e[0].y;d=e[0].x;m=e[0].y;b=1;for(c=this.count;b<c;)f=b++,e[f].x<g&&(g=e[f].x),e[f].y<k&&(k=e[f].y),e[f].x>d&&(d=e[f].x),e[f].y>m&&(m=e[f].y);b=this._bounds;b.min_x=g;b.max_x=d;b.min_y=k;b.max_y=
m}if(null==a)return b=this._bounds,a=b.min_x,c=b.min_y,f=b.max_x,g=b.max_y,b=lb.pool.get(),b.min_x=a,b.max_x=f,b.min_y=c,b.max_y=g,b.pooled=!1,b;b=this._bounds;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;return a},volume:function(){var a=0;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var b=0,c=this.count;b<c;){var f=b++;if(null!=this.local_vertices[f]){if(null==this._vertices[f]){var d=this._vertices,g=new A(0,0);
d[f]=g}var m=this.local_vertices[f].x,k=this.local_vertices[f].y;null==k&&(k=0);null==m&&(m=0);d=this.transform.get_local_to_world_matrix();g=m;var e=d.m01*g+d.m11*k+1*d.m21;m=this._vertices[f];m.x=d.m00*g+d.m10*k+1*d.m20;m.y=e}}b=0;for(c=this.count;b<c;)f=b++,m=this._vertices[(f+1)%this.count],g=m.x,k=m.y,d=this._vertices[f],k-=d.y,g-=d.x,m=-k,k=g,g=m,null==this._normals[f]?(d=this._normals,g=new A(g,k),d[f]=g):(d=this._normals[f],d.x=g,d.y=k),k=f=g=this._normals[f],k=k.x*k.x+k.y*k.y,k=0==k?1:Math.sqrt(k),
d=g.y/k,f.x=g.x/k,f.y=d}g=this._vertices;m=g[g.length-1];b=0;for(c=this.count;b<c;)f=b++,f=g[f],a+=f.x*m.y-m.x*f.y,m=f;return.5*Math.abs(a)},intersect:function(a){return xa.line_intersects_polygon(a,this)},collides:function(a){return a.collide_polygon(this)},collide_rect:function(a){return xa.rect_and_polygon(a,this,!0)},collide_circle:function(a){return xa.circle_and_polygon(a,this)},collide_polygon:function(a){return xa.polygon_and_polygon(a,this,!0)},get_top:function(){if(0!=this.count){if(this.dirty_vertices){for(this.dirty_vertices=
!1;this._vertices.length>this.count;)this._vertices.pop();for(var a=0,b=this.count;a<b;){var c=a++;if(null!=this.local_vertices[c]){if(null==this._vertices[c]){var f=this._vertices,d=new A(0,0);f[c]=d}var g=this.local_vertices[c].x;var m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;var k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;var e=this._vertices[c];e.x=d;e.y=m}}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],
d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(f=this._normals,d=new A(d,m),f[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}m=null==this._vertices[0]}else m=!0;if(m){a=this.transform;if(null==a.parent)return a.local_y;a.sync();return a._y}if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();a=0;for(b=this.count;a<b;)if(c=a++,
null!=this.local_vertices[c]){if(null==this._vertices[c]){var n=this._vertices;d=new A(0,0);n[c]=d}g=this.local_vertices[c].x;m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;e=this._vertices[c];e.x=d;e.y=m}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(n=this._normals,d=new A(d,m),
n[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}n=this._vertices[0].y;a=1;for(b=this.count;a<b;){c=a++;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var h=0,p=this.count;h<p;)e=h++,null!=this.local_vertices[e]&&(null==this._vertices[e]&&(m=this._vertices,d=new A(0,0),m[e]=d),g=this.local_vertices[e].x,m=this.local_vertices[e].y,null==m&&(m=0),null==
g&&(g=0),f=this.transform.get_local_to_world_matrix(),d=g,k=1,g=f.m00*d+f.m10*m+f.m20*k,m=f.m01*d+f.m11*m+f.m21*k,d=g,e=this._vertices[e],e.x=d,e.y=m);h=0;for(p=this.count;h<p;)e=h++,m=this._vertices[(e+1)%this.count],d=m.x,m=m.y,f=this._vertices[e],d-=f.x,m-=f.y,f=-m,m=d,d=f,null==this._normals[e]?(f=this._normals,d=new A(d,m),f[e]=d):(f=this._normals[e],f.x=d,f.y=m),m=e=d=this._normals[e],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}if(this._vertices[c].y<n){if(this.dirty_vertices){for(this.dirty_vertices=
!1;this._vertices.length>this.count;)this._vertices.pop();n=0;for(h=this.count;n<h;)p=n++,null!=this.local_vertices[p]&&(null==this._vertices[p]&&(e=this._vertices,d=new A(0,0),e[p]=d),d=this.local_vertices[p].x,m=this.local_vertices[p].y,null==m&&(m=0),null==d&&(d=0),e=this.transform.get_local_to_world_matrix(),f=e.m01*d+e.m11*m+1*e.m21,p=this._vertices[p],p.x=e.m00*d+e.m10*m+1*e.m20,p.y=f);n=0;for(h=this.count;n<h;)p=n++,d=this._vertices[(p+1)%this.count],e=d.x,d=d.y,m=this._vertices[p],d-=m.y,
e-=m.x,m=-d,d=e,e=m,null==this._normals[p]?(m=this._normals,e=new A(e,d),m[p]=e):(m=this._normals[p],m.x=e,m.y=d),d=p=e=this._normals[p],d=d.x*d.x+d.y*d.y,d=0==d?1:Math.sqrt(d),m=e.y/d,p.x=e.x/d,p.y=m}n=this._vertices[c].y}}return n},get_bottom:function(){if(0!=this.count){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var a=0,b=this.count;a<b;){var c=a++;if(null!=this.local_vertices[c]){if(null==this._vertices[c]){var f=this._vertices,
d=new A(0,0);f[c]=d}var g=this.local_vertices[c].x;var m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;var k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;var e=this._vertices[c];e.x=d;e.y=m}}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(f=this._normals,d=new A(d,m),f[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],
m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}m=null==this._vertices[0]}else m=!0;if(m){a=this.transform;if(null==a.parent)return a.local_y;a.sync();return a._y}if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();a=0;for(b=this.count;a<b;)if(c=a++,null!=this.local_vertices[c]){if(null==this._vertices[c]){var n=this._vertices;d=new A(0,0);n[c]=d}g=this.local_vertices[c].x;m=this.local_vertices[c].y;null==m&&(m=0);null==g&&
(g=0);f=this.transform.get_local_to_world_matrix();d=g;k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;e=this._vertices[c];e.x=d;e.y=m}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(n=this._normals,d=new A(d,m),n[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}n=this._vertices[0].y;a=1;for(b=this.count;a<
b;){c=a++;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var h=0,p=this.count;h<p;)e=h++,null!=this.local_vertices[e]&&(null==this._vertices[e]&&(m=this._vertices,d=new A(0,0),m[e]=d),g=this.local_vertices[e].x,m=this.local_vertices[e].y,null==m&&(m=0),null==g&&(g=0),f=this.transform.get_local_to_world_matrix(),d=g,k=1,g=f.m00*d+f.m10*m+f.m20*k,m=f.m01*d+f.m11*m+f.m21*k,d=g,e=this._vertices[e],e.x=d,e.y=m);h=0;for(p=this.count;h<p;)e=
h++,m=this._vertices[(e+1)%this.count],d=m.x,m=m.y,f=this._vertices[e],d-=f.x,m-=f.y,f=-m,m=d,d=f,null==this._normals[e]?(f=this._normals,d=new A(d,m),f[e]=d):(f=this._normals[e],f.x=d,f.y=m),m=e=d=this._normals[e],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}if(this._vertices[c].y>n){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();n=0;for(h=this.count;n<h;)p=n++,null!=this.local_vertices[p]&&(null==this._vertices[p]&&
(e=this._vertices,d=new A(0,0),e[p]=d),d=this.local_vertices[p].x,m=this.local_vertices[p].y,null==m&&(m=0),null==d&&(d=0),e=this.transform.get_local_to_world_matrix(),f=e.m01*d+e.m11*m+1*e.m21,p=this._vertices[p],p.x=e.m00*d+e.m10*m+1*e.m20,p.y=f);n=0;for(h=this.count;n<h;)p=n++,d=this._vertices[(p+1)%this.count],e=d.x,d=d.y,m=this._vertices[p],d-=m.y,e-=m.x,m=-d,d=e,e=m,null==this._normals[p]?(m=this._normals,e=new A(e,d),m[p]=e):(m=this._normals[p],m.x=e,m.y=d),d=p=e=this._normals[p],d=d.x*d.x+
d.y*d.y,d=0==d?1:Math.sqrt(d),m=e.y/d,p.x=e.x/d,p.y=m}n=this._vertices[c].y}}return n},get_left:function(){if(0!=this.count){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var a=0,b=this.count;a<b;){var c=a++;if(null!=this.local_vertices[c]){if(null==this._vertices[c]){var f=this._vertices,d=new A(0,0);f[c]=d}var g=this.local_vertices[c].x;var m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();
d=g;var k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;var e=this._vertices[c];e.x=d;e.y=m}}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(f=this._normals,d=new A(d,m),f[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}m=null==this._vertices[0]}else m=!0;if(m){a=this.transform;if(null==a.parent)return a.local_x;
a.sync();return a._x}if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();a=0;for(b=this.count;a<b;)if(c=a++,null!=this.local_vertices[c]){if(null==this._vertices[c]){var n=this._vertices;d=new A(0,0);n[c]=d}g=this.local_vertices[c].x;m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;e=this._vertices[c];e.x=d;e.y=m}a=0;for(b=this.count;a<
b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(n=this._normals,d=new A(d,m),n[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}n=this._vertices[0].x;a=1;for(b=this.count;a<b;){c=a++;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var h=0,p=this.count;h<p;)e=h++,null!=this.local_vertices[e]&&
(null==this._vertices[e]&&(m=this._vertices,d=new A(0,0),m[e]=d),g=this.local_vertices[e].x,m=this.local_vertices[e].y,null==m&&(m=0),null==g&&(g=0),f=this.transform.get_local_to_world_matrix(),d=g,k=1,g=f.m00*d+f.m10*m+f.m20*k,m=f.m01*d+f.m11*m+f.m21*k,d=g,e=this._vertices[e],e.x=d,e.y=m);h=0;for(p=this.count;h<p;)e=h++,m=this._vertices[(e+1)%this.count],d=m.x,m=m.y,f=this._vertices[e],d-=f.x,m-=f.y,f=-m,m=d,d=f,null==this._normals[e]?(f=this._normals,d=new A(d,m),f[e]=d):(f=this._normals[e],f.x=
d,f.y=m),m=e=d=this._normals[e],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}if(this._vertices[c].x<n){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();n=0;for(h=this.count;n<h;)p=n++,null!=this.local_vertices[p]&&(null==this._vertices[p]&&(e=this._vertices,d=new A(0,0),e[p]=d),d=this.local_vertices[p].x,m=this.local_vertices[p].y,null==m&&(m=0),null==d&&(d=0),e=this.transform.get_local_to_world_matrix(),f=e.m01*d+e.m11*
m+1*e.m21,p=this._vertices[p],p.x=e.m00*d+e.m10*m+1*e.m20,p.y=f);n=0;for(h=this.count;n<h;)p=n++,d=this._vertices[(p+1)%this.count],e=d.x,d=d.y,m=this._vertices[p],d-=m.y,e-=m.x,m=-d,d=e,e=m,null==this._normals[p]?(m=this._normals,e=new A(e,d),m[p]=e):(m=this._normals[p],m.x=e,m.y=d),d=p=e=this._normals[p],d=d.x*d.x+d.y*d.y,d=0==d?1:Math.sqrt(d),m=e.y/d,p.x=e.x/d,p.y=m}n=this._vertices[c].x}}return n},get_right:function(){if(0!=this.count){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>
this.count;)this._vertices.pop();for(var a=0,b=this.count;a<b;){var c=a++;if(null!=this.local_vertices[c]){if(null==this._vertices[c]){var f=this._vertices,d=new A(0,0);f[c]=d}var g=this.local_vertices[c].x;var m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;var k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;var e=this._vertices[c];e.x=d;e.y=m}}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],
d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(f=this._normals,d=new A(d,m),f[c]=d):(f=this._normals[c],f.x=d,f.y=m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}m=null==this._vertices[0]}else m=!0;if(m){a=this.transform;if(null==a.parent)return a.local_x;a.sync();return a._x}if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();a=0;for(b=this.count;a<b;)if(c=a++,null!=this.local_vertices[c]){if(null==
this._vertices[c]){var n=this._vertices;d=new A(0,0);n[c]=d}g=this.local_vertices[c].x;m=this.local_vertices[c].y;null==m&&(m=0);null==g&&(g=0);f=this.transform.get_local_to_world_matrix();d=g;k=1;g=f.m00*d+f.m10*m+f.m20*k;m=f.m01*d+f.m11*m+f.m21*k;d=g;e=this._vertices[c];e.x=d;e.y=m}a=0;for(b=this.count;a<b;)c=a++,e=this._vertices[(c+1)%this.count],d=e.x,m=e.y,f=this._vertices[c],d-=f.x,m-=f.y,g=-m,m=d,d=g,null==this._normals[c]?(n=this._normals,d=new A(d,m),n[c]=d):(f=this._normals[c],f.x=d,f.y=
m),m=d=e=m=this._normals[c],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}n=this._vertices[0].x;a=1;for(b=this.count;a<b;){c=a++;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var h=0,p=this.count;h<p;)e=h++,null!=this.local_vertices[e]&&(null==this._vertices[e]&&(m=this._vertices,d=new A(0,0),m[e]=d),g=this.local_vertices[e].x,m=this.local_vertices[e].y,null==m&&(m=0),null==g&&(g=0),f=this.transform.get_local_to_world_matrix(),
d=g,k=1,g=f.m00*d+f.m10*m+f.m20*k,m=f.m01*d+f.m11*m+f.m21*k,d=g,e=this._vertices[e],e.x=d,e.y=m);h=0;for(p=this.count;h<p;)e=h++,m=this._vertices[(e+1)%this.count],d=m.x,m=m.y,f=this._vertices[e],d-=f.x,m-=f.y,f=-m,m=d,d=f,null==this._normals[e]?(f=this._normals,d=new A(d,m),f[e]=d):(f=this._normals[e],f.x=d,f.y=m),m=e=d=this._normals[e],m=m.x*m.x+m.y*m.y,f=0==m?1:Math.sqrt(m),m=d.x/f,d=d.y/f,e.x=m,e.y=d}if(this._vertices[c].x>n){if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>
this.count;)this._vertices.pop();n=0;for(h=this.count;n<h;)p=n++,null!=this.local_vertices[p]&&(null==this._vertices[p]&&(e=this._vertices,d=new A(0,0),e[p]=d),d=this.local_vertices[p].x,m=this.local_vertices[p].y,null==m&&(m=0),null==d&&(d=0),e=this.transform.get_local_to_world_matrix(),f=e.m01*d+e.m11*m+1*e.m21,p=this._vertices[p],p.x=e.m00*d+e.m10*m+1*e.m20,p.y=f);n=0;for(h=this.count;n<h;)p=n++,d=this._vertices[(p+1)%this.count],e=d.x,d=d.y,m=this._vertices[p],d-=m.y,e-=m.x,m=-d,d=e,e=m,null==
this._normals[p]?(m=this._normals,e=new A(e,d),m[p]=e):(m=this._normals[p],m.x=e,m.y=d),d=p=e=this._normals[p],d=d.x*d.x+d.y*d.y,d=0==d?1:Math.sqrt(d),m=e.y/d,p.x=e.x/d,p.y=m}n=this._vertices[c].x}}return n},on_dirty:function(a){this.dirty_bounds=this.dirty_vertices=!0},__class__:oa});var Md=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_shape_Rect"]=Md;Md.__name__="echo.util.GenericPool_echo_shape_Rect";Md.__interfaces__=[vb];Md.prototype={get:function(){return 0==
this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Md};var Tb=function(){this.pooled=!1;Ea.call(this);this.local_ex=0;if(null!=this.transformed_rect){var a=this.transformed_rect;a.count=4;for(var b=0,c=a.count;b<c;){var f=b++;if(null==a.local_vertices[f]){var d=a.local_vertices,g=new A(0,0);d[f]=g}}b=a.local_vertices[0];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=-(this.local_ey*this.transform.local_scale_y);
b=a.local_vertices[1];b.x=this.local_ex*this.transform.local_scale_x;b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[2];b.x=this.local_ex*this.transform.local_scale_x;b.y=this.local_ey*this.transform.local_scale_y;b=a.local_vertices[3];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=this.local_ey*this.transform.local_scale_y;b=this.transform.local_x;d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=this.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;
d=a.transform;b=Math.PI/180*(180/Math.PI)*this.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=this.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=this.transform.local_scale_y;d=a.transform;d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}this.local_ey=0;if(null!=this.transformed_rect){a=this.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)f=b++,null==a.local_vertices[f]&&(d=a.local_vertices,g=new A(0,0),d[f]=g);
b=a.local_vertices[0];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[1];b.x=this.local_ex*this.transform.local_scale_x;b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[2];b.x=this.local_ex*this.transform.local_scale_x;b.y=this.local_ey*this.transform.local_scale_y;b=a.local_vertices[3];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=this.local_ey*this.transform.local_scale_y;b=this.transform.local_x;
d=a.transform;d.dirty||d.set_dirty();d.local_x=b;b=this.transform.local_y;d=a.transform;d.dirty||d.set_dirty();d.local_y=b;d=a.transform;b=Math.PI/180*(180/Math.PI)*this.transform.local_radians;d.dirty||d.set_dirty();d.local_radians=b;b=this.transform.local_scale_x;d=a.transform;d.dirty||d.set_dirty();d.local_scale_x=b;b=this.transform.local_scale_y;d=a.transform;d.dirty||d.set_dirty();d.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}this.type=0;this.transform.on_dirty=u(this,this.on_dirty)};
l["echo.shape.Rect"]=Tb;Tb.__name__="echo.shape.Rect";Tb.__interfaces__=[Xb];Tb.get=function(a,b,c,f,d,g,m){null==m&&(m=1);null==g&&(g=1);null==d&&(d=0);null==f&&(f=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var k=Tb.pool.get(),e=b;null==m&&(m=1);null==g&&(g=1);null==d&&(d=0);null==f&&(f=0);null==c&&(c=1);null==e&&(e=0);null==a&&(a=0);b=k.transform;b.dirty||b.set_dirty();b.local_x=a;b=k.transform;b.dirty||b.set_dirty();b.local_y=e;a=.5*c;b=k.transform;null==b.parent?b=b.local_scale_x:(b.sync(),
b=b._scale_x);k.local_ex=a/b;if(null!=k.transformed_rect){b=k.transformed_rect;b.count=4;a=0;for(e=b.count;a<e;){var n=a++;if(null==b.local_vertices[n]){var h=b.local_vertices,p=new A(0,0);h[n]=p}}a=b.local_vertices[0];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=-(k.local_ey*k.transform.local_scale_y);a=b.local_vertices[1];a.x=k.local_ex*k.transform.local_scale_x;a.y=-(k.local_ey*k.transform.local_scale_y);a=b.local_vertices[2];a.x=k.local_ex*k.transform.local_scale_x;a.y=k.local_ey*k.transform.local_scale_y;
a=b.local_vertices[3];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=k.local_ey*k.transform.local_scale_y;a=k.transform.local_x;h=b.transform;h.dirty||h.set_dirty();h.local_x=a;a=k.transform.local_y;h=b.transform;h.dirty||h.set_dirty();h.local_y=a;h=b.transform;a=Math.PI/180*(180/Math.PI)*k.transform.local_radians;h.dirty||h.set_dirty();h.local_radians=a;a=k.transform.local_scale_x;h=b.transform;h.dirty||h.set_dirty();h.local_scale_x=a;a=k.transform.local_scale_y;h=b.transform;h.dirty||h.set_dirty();
h.local_scale_y=a;b.dirty_vertices=!0;b.dirty_bounds=!0}a=.5*(0>=f?c:f);b=k.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);k.local_ey=a/b;if(null!=k.transformed_rect){b=k.transformed_rect;b.count=4;a=0;for(e=b.count;a<e;)n=a++,null==b.local_vertices[n]&&(h=b.local_vertices,p=new A(0,0),h[n]=p);a=b.local_vertices[0];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=-(k.local_ey*k.transform.local_scale_y);a=b.local_vertices[1];a.x=k.local_ex*k.transform.local_scale_x;a.y=-(k.local_ey*
k.transform.local_scale_y);a=b.local_vertices[2];a.x=k.local_ex*k.transform.local_scale_x;a.y=k.local_ey*k.transform.local_scale_y;a=b.local_vertices[3];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=k.local_ey*k.transform.local_scale_y;a=k.transform.local_x;h=b.transform;h.dirty||h.set_dirty();h.local_x=a;a=k.transform.local_y;h=b.transform;h.dirty||h.set_dirty();h.local_y=a;h=b.transform;a=Math.PI/180*(180/Math.PI)*k.transform.local_radians;h.dirty||h.set_dirty();h.local_radians=a;a=k.transform.local_scale_x;
h=b.transform;h.dirty||h.set_dirty();h.local_scale_x=a;a=k.transform.local_scale_y;h=b.transform;h.dirty||h.set_dirty();h.local_scale_y=a;b.dirty_vertices=!0;b.dirty_bounds=!0}b=k.transform;a=Math.PI/180*d;b.dirty||b.set_dirty();b.local_radians=a;b=k.transform;b.dirty||b.set_dirty();b.local_scale_x=g;b=k.transform;b.dirty||b.set_dirty();b.local_scale_y=m;null==k.transformed_rect?(b=k.transform,null==b.parent?c=180/Math.PI*b.local_radians:(b.sync(),c=180/Math.PI*b._radians),c=0!=c):c=!1;if(c){c=oa.pool.get();
c.count=4;a=0;for(e=c.count;a<e;)n=a++,null==c.local_vertices[n]&&(f=c.local_vertices,p=new A(0,0),f[n]=p);a=c.local_vertices[0];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=-(k.local_ey*k.transform.local_scale_y);a=c.local_vertices[1];a.x=k.local_ex*k.transform.local_scale_x;a.y=-(k.local_ey*k.transform.local_scale_y);a=c.local_vertices[2];a.x=k.local_ex*k.transform.local_scale_x;a.y=k.local_ey*k.transform.local_scale_y;a=c.local_vertices[3];a.x=-(k.local_ex*k.transform.local_scale_x);a.y=k.local_ey*
k.transform.local_scale_y;a=k.transform.local_x;b=c.transform;b.dirty||b.set_dirty();b.local_x=a;a=k.transform.local_y;b=c.transform;b.dirty||b.set_dirty();b.local_y=a;b=c.transform;a=Math.PI/180*(180/Math.PI)*k.transform.local_radians;b.dirty||b.set_dirty();b.local_radians=a;a=k.transform.local_scale_x;b=c.transform;b.dirty||b.set_dirty();b.local_scale_x=a;a=k.transform.local_scale_y;b=c.transform;b.dirty||b.set_dirty();b.local_scale_y=a;c.dirty_vertices=!0;c.dirty_bounds=!0;c.pooled=!1;k.transformed_rect=
c;k.transformed_rect.set_parent(k.parent)}else null!=k.transformed_rect&&(a=k.transform.local_x,b=k.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_x=a,a=k.transform.local_y,b=k.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_y=a,b=k.transformed_rect.transform,a=Math.PI/180*(180/Math.PI)*k.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=a,a=k.transform.local_scale_x,b=k.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=a,a=k.transform.local_scale_y,
b=k.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_y=a);k.pooled=!1;return k};Tb.__super__=Ea;Tb.prototype=x(Ea.prototype,{put:function(){Ea.prototype.put.call(this);null!=this.transformed_rect&&(this.transformed_rect.put(),this.transformed_rect=null);this.pooled||(this.pooled=!0,Tb.pool.put_unsafe(this))},to_aabb:function(a){null==a&&(a=!1);if(a){a=null;if(null!=this.transformed_rect){var b=this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),c=180/Math.PI*
b._radians;b=0!=c}else b=!1;if(b)a=this.transformed_rect.bounds(a);else if(null==a){b=this.transform;if(null==b.parent)var f=b.local_x;else b.sync(),f=b._x;b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);var d=2*this.local_ex;b=this.transform;if(null==b.parent)var g=b.local_scale_x;else b.sync(),g=b._scale_x;d*=g;g=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);g*=b;null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);b=lb.pool.get();
null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);d*=.5;g*=.5;b.min_x=f-d;b.min_y=c-g;b.max_x=f+d;b.max_y=c+g;b.pooled=!1;a=b}else b=this.transform,null==b.parent?f=b.local_x:(b.sync(),f=b._x),b=this.transform,null==b.parent?c=b.local_y:(b.sync(),c=b._y),d=2*this.local_ex,b=this.transform,null==b.parent?g=b.local_scale_x:(b.sync(),g=b._scale_x),d*=g,g=2*this.local_ey,b=this.transform,null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y),g*=b,null==g&&(g=1),null==d&&(d=1),null==c&&(c=
0),null==f&&(f=0),d*=.5,g*=.5,a.min_x=f-d,a.min_y=c-g,a.max_x=f+d,a.max_y=c+g;this.put();return a}a=null;null!=this.transformed_rect?(b=this.transform,null==b.parent?c=180/Math.PI*b.local_radians:(b.sync(),c=180/Math.PI*b._radians),c=0!=c):c=!1;if(c)return this.transformed_rect.bounds(a);if(null==a)return b=this.transform,null==b.parent?f=b.local_x:(b.sync(),f=b._x),b=this.transform,null==b.parent?c=b.local_y:(b.sync(),c=b._y),d=2*this.local_ex,b=this.transform,null==b.parent?g=b.local_scale_x:(b.sync(),
g=b._scale_x),d*=g,g=2*this.local_ey,b=this.transform,null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y),g*=b,null==g&&(g=1),null==d&&(d=1),null==c&&(c=0),null==f&&(f=0),a=lb.pool.get(),null==g&&(g=1),null==d&&(d=1),null==c&&(c=0),null==f&&(f=0),d*=.5,g*=.5,a.min_x=f-d,a.min_y=c-g,a.max_x=f+d,a.max_y=c+g,a.pooled=!1,a;b=this.transform;null==b.parent?f=b.local_x:(b.sync(),f=b._x);b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);d=2*this.local_ex;b=this.transform;null==b.parent?g=
b.local_scale_x:(b.sync(),g=b._scale_x);d*=g;g=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);g*=b;null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);d*=.5;g*=.5;a.min_x=f-d;a.min_y=c-g;a.max_x=f+d;a.max_y=c+g;return a},bounds:function(a){if(null!=this.transformed_rect){var b=this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),c=180/Math.PI*b._radians;c=0!=c}else c=!1;if(c)return this.transformed_rect.bounds(a);if(null==
a){b=this.transform;if(null==b.parent)var f=b.local_x;else b.sync(),f=b._x;b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);var d=2*this.local_ex;b=this.transform;if(null==b.parent)var g=b.local_scale_x;else b.sync(),g=b._scale_x;d*=g;g=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);g*=b;null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);a=lb.pool.get();null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);d*=.5;g*=.5;a.min_x=
f-d;a.min_y=c-g;a.max_x=f+d;a.max_y=c+g;a.pooled=!1;return a}b=this.transform;null==b.parent?f=b.local_x:(b.sync(),f=b._x);b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);d=2*this.local_ex;b=this.transform;null==b.parent?g=b.local_scale_x:(b.sync(),g=b._scale_x);d*=g;g=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);g*=b;null==g&&(g=1);null==d&&(d=1);null==c&&(c=0);null==f&&(f=0);d*=.5;g*=.5;a.min_x=f-d;a.min_y=c-g;a.max_x=f+d;a.max_y=c+g;return a},
volume:function(){var a=2*this.local_ex,b=this.transform;if(null==b.parent)var c=b.local_scale_x;else b.sync(),c=b._scale_x;var f=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);return a*c*f*b},intersect:function(a){return xa.line_intersects_rect(a,this)},collides:function(a){return a.collide_rect(this)},collide_rect:function(a){return xa.rect_and_rect(a,this)},collide_circle:function(a){return xa.rect_and_circle(this,a)},collide_polygon:function(a){return xa.rect_and_polygon(this,
a)},set_parent:function(a){Ea.prototype.set_parent.call(this,a);if(null==this.transformed_rect){var b=this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),c=180/Math.PI*b._radians;c=0!=c}else c=!1;if(c){c=oa.pool.get();c.count=4;b=0;for(var f=c.count;b<f;){var d=b++;if(null==c.local_vertices[d]){var g=c.local_vertices,m=new A(0,0);g[d]=m}}f=c.local_vertices[0];f.x=-(this.local_ex*this.transform.local_scale_x);f.y=-(this.local_ey*this.transform.local_scale_y);f=c.local_vertices[1];
f.x=this.local_ex*this.transform.local_scale_x;f.y=-(this.local_ey*this.transform.local_scale_y);f=c.local_vertices[2];f.x=this.local_ex*this.transform.local_scale_x;f.y=this.local_ey*this.transform.local_scale_y;f=c.local_vertices[3];f.x=-(this.local_ex*this.transform.local_scale_x);f.y=this.local_ey*this.transform.local_scale_y;f=this.transform.local_x;b=c.transform;b.dirty||b.set_dirty();b.local_x=f;f=this.transform.local_y;b=c.transform;b.dirty||b.set_dirty();b.local_y=f;b=c.transform;f=Math.PI/
180*(180/Math.PI)*this.transform.local_radians;b.dirty||b.set_dirty();b.local_radians=f;f=this.transform.local_scale_x;b=c.transform;b.dirty||b.set_dirty();b.local_scale_x=f;f=this.transform.local_scale_y;b=c.transform;b.dirty||b.set_dirty();b.local_scale_y=f;c.dirty_vertices=!0;c.dirty_bounds=!0;c.pooled=!1;this.transformed_rect=c;this.transformed_rect.set_parent(this.parent)}else null!=this.transformed_rect&&(f=this.transform.local_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_x=
f,f=this.transform.local_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_y=f,b=this.transformed_rect.transform,f=Math.PI/180*(180/Math.PI)*this.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=f,f=this.transform.local_scale_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=f,f=this.transform.local_scale_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_y=f);null!=this.transformed_rect&&this.transformed_rect.set_parent(a)},
on_dirty:function(a){if(null==this.transformed_rect){var b=this.transform;null==b.parent?a=180/Math.PI*b.local_radians:(b.sync(),a=180/Math.PI*b._radians);a=0!=a}else a=!1;if(a){a=oa.pool.get();a.count=4;b=0;for(var c=a.count;b<c;){var f=b++;if(null==a.local_vertices[f]){var d=a.local_vertices,g=new A(0,0);d[f]=g}}c=a.local_vertices[0];c.x=-(this.local_ex*this.transform.local_scale_x);c.y=-(this.local_ey*this.transform.local_scale_y);c=a.local_vertices[1];c.x=this.local_ex*this.transform.local_scale_x;
c.y=-(this.local_ey*this.transform.local_scale_y);c=a.local_vertices[2];c.x=this.local_ex*this.transform.local_scale_x;c.y=this.local_ey*this.transform.local_scale_y;c=a.local_vertices[3];c.x=-(this.local_ex*this.transform.local_scale_x);c.y=this.local_ey*this.transform.local_scale_y;c=this.transform.local_x;b=a.transform;b.dirty||b.set_dirty();b.local_x=c;c=this.transform.local_y;b=a.transform;b.dirty||b.set_dirty();b.local_y=c;b=a.transform;c=Math.PI/180*(180/Math.PI)*this.transform.local_radians;
b.dirty||b.set_dirty();b.local_radians=c;c=this.transform.local_scale_x;b=a.transform;b.dirty||b.set_dirty();b.local_scale_x=c;c=this.transform.local_scale_y;b=a.transform;b.dirty||b.set_dirty();b.local_scale_y=c;a.dirty_vertices=!0;a.dirty_bounds=!0;a.pooled=!1;this.transformed_rect=a;this.transformed_rect.set_parent(this.parent)}else null!=this.transformed_rect&&(c=this.transform.local_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_x=c,c=this.transform.local_y,b=this.transformed_rect.transform,
b.dirty||b.set_dirty(),b.local_y=c,b=this.transformed_rect.transform,c=Math.PI/180*(180/Math.PI)*this.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=c,c=this.transform.local_scale_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=c,c=this.transform.local_scale_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_y=c)},get_top:function(){if(null!=this.transformed_rect){var a=this.transform;null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),
a=180/Math.PI*a._radians);var b=0==a}else b=!0;if(b)return a=this.transform,null==a.parent?b=a.local_y:(a.sync(),b=a._y),b-this.local_ey*this.transform.local_scale_y;a=this.transformed_rect;if(0!=a.count){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(var c=a.count;b<c;){var f=b++;if(null!=a.local_vertices[f]){if(null==a._vertices[f]){var d=a._vertices,g=new A(0,0);d[f]=g}var m=a.local_vertices[f].x,k=a.local_vertices[f].y;null==k&&(k=0);null==m&&
(m=0);d=a.transform.get_local_to_world_matrix();g=m;var e=1;m=d.m00*g+d.m10*k+d.m20*e;k=d.m01*g+d.m11*k+d.m21*e;g=m;var n=a._vertices[f];n.x=g;n.y=k}}b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}b=null==a._vertices[0]}else b=!0;if(b){d=a.transform;if(null==
d.parent)return d.local_y;d.sync();return d._y}if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(c=a.count;b<c;)f=b++,null!=a.local_vertices[f]&&(null==a._vertices[f]&&(d=a._vertices,g=new A(0,0),d[f]=g),m=a.local_vertices[f].x,k=a.local_vertices[f].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[f],n.x=g,n.y=k);b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+
1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}var h=a._vertices[0].y;b=1;for(c=a.count;b<c;){f=b++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var p=0,t=a.count;p<t;)n=p++,null!=a.local_vertices[n]&&(null==a._vertices[n]&&(d=a._vertices,g=new A(0,0),d[n]=
g),m=a.local_vertices[n].x,k=a.local_vertices[n].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[n],n.x=g,n.y=k);p=0;for(t=a.count;p<t;)n=p++,k=a._vertices[(n+1)%a.count],g=k.x,k=k.y,d=a._vertices[n],g-=d.x,k-=d.y,d=-k,k=g,g=d,null==a._normals[n]?(d=a._normals,g=new A(g,k),d[n]=g):(d=a._normals[n],d.x=g,d.y=k),k=n=g=a._normals[n],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=
g}if(a._vertices[f].y<h){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();h=0;for(p=a.count;h<p;)t=h++,null!=a.local_vertices[t]&&(null==a._vertices[t]&&(n=a._vertices,g=new A(0,0),n[t]=g),g=a.local_vertices[t].x,k=a.local_vertices[t].y,null==k&&(k=0),null==g&&(g=0),n=a.transform.get_local_to_world_matrix(),d=n.m01*g+n.m11*k+1*n.m21,t=a._vertices[t],t.x=n.m00*g+n.m10*k+1*n.m20,t.y=d);h=0;for(p=a.count;h<p;)t=h++,g=a._vertices[(t+1)%a.count],n=g.x,g=g.y,k=
a._vertices[t],g-=k.y,n-=k.x,k=-g,g=n,n=k,null==a._normals[t]?(k=a._normals,n=new A(n,g),k[t]=n):(k=a._normals[t],k.x=n,k.y=g),g=t=n=a._normals[t],g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),k=n.y/g,t.x=n.x/g,t.y=k}h=a._vertices[f].y}}return h},get_bottom:function(){if(null!=this.transformed_rect){var a=this.transform;null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians);var b=0==a}else b=!0;if(b)return a=this.transform,null==a.parent?b=a.local_y:(a.sync(),b=a._y),b+this.local_ey*
this.transform.local_scale_y;a=this.transformed_rect;if(0!=a.count){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(var c=a.count;b<c;){var f=b++;if(null!=a.local_vertices[f]){if(null==a._vertices[f]){var d=a._vertices,g=new A(0,0);d[f]=g}var m=a.local_vertices[f].x,k=a.local_vertices[f].y;null==k&&(k=0);null==m&&(m=0);d=a.transform.get_local_to_world_matrix();g=m;var e=1;m=d.m00*g+d.m10*k+d.m20*e;k=d.m01*g+d.m11*k+d.m21*e;g=m;var n=a._vertices[f];
n.x=g;n.y=k}}b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}b=null==a._vertices[0]}else b=!0;if(b){d=a.transform;if(null==d.parent)return d.local_y;d.sync();return d._y}if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();
b=0;for(c=a.count;b<c;)f=b++,null!=a.local_vertices[f]&&(null==a._vertices[f]&&(d=a._vertices,g=new A(0,0),d[f]=g),m=a.local_vertices[f].x,k=a.local_vertices[f].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[f],n.x=g,n.y=k);b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=
a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}var h=a._vertices[0].y;b=1;for(c=a.count;b<c;){f=b++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var p=0,t=a.count;p<t;)n=p++,null!=a.local_vertices[n]&&(null==a._vertices[n]&&(d=a._vertices,g=new A(0,0),d[n]=g),m=a.local_vertices[n].x,k=a.local_vertices[n].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=
m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[n],n.x=g,n.y=k);p=0;for(t=a.count;p<t;)n=p++,k=a._vertices[(n+1)%a.count],g=k.x,k=k.y,d=a._vertices[n],g-=d.x,k-=d.y,d=-k,k=g,g=d,null==a._normals[n]?(d=a._normals,g=new A(g,k),d[n]=g):(d=a._normals[n],d.x=g,d.y=k),k=n=g=a._normals[n],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}if(a._vertices[f].y>h){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();h=0;for(p=
a.count;h<p;)t=h++,null!=a.local_vertices[t]&&(null==a._vertices[t]&&(n=a._vertices,g=new A(0,0),n[t]=g),g=a.local_vertices[t].x,k=a.local_vertices[t].y,null==k&&(k=0),null==g&&(g=0),n=a.transform.get_local_to_world_matrix(),d=n.m01*g+n.m11*k+1*n.m21,t=a._vertices[t],t.x=n.m00*g+n.m10*k+1*n.m20,t.y=d);h=0;for(p=a.count;h<p;)t=h++,g=a._vertices[(t+1)%a.count],n=g.x,g=g.y,k=a._vertices[t],g-=k.y,n-=k.x,k=-g,g=n,n=k,null==a._normals[t]?(k=a._normals,n=new A(n,g),k[t]=n):(k=a._normals[t],k.x=n,k.y=g),
g=t=n=a._normals[t],g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),k=n.y/g,t.x=n.x/g,t.y=k}h=a._vertices[f].y}}return h},get_left:function(){if(null!=this.transformed_rect){var a=this.transform;null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians);var b=0==a}else b=!0;if(b)return a=this.transform,null==a.parent?b=a.local_x:(a.sync(),b=a._x),b-this.local_ex*this.transform.local_scale_x;a=this.transformed_rect;if(0!=a.count){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>
a.count;)a._vertices.pop();b=0;for(var c=a.count;b<c;){var f=b++;if(null!=a.local_vertices[f]){if(null==a._vertices[f]){var d=a._vertices,g=new A(0,0);d[f]=g}var m=a.local_vertices[f].x,k=a.local_vertices[f].y;null==k&&(k=0);null==m&&(m=0);d=a.transform.get_local_to_world_matrix();g=m;var e=1;m=d.m00*g+d.m10*k+d.m20*e;k=d.m01*g+d.m11*k+d.m21*e;g=m;var n=a._vertices[f];n.x=g;n.y=k}}b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==
a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}b=null==a._vertices[0]}else b=!0;if(b){d=a.transform;if(null==d.parent)return d.local_x;d.sync();return d._x}if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(c=a.count;b<c;)f=b++,null!=a.local_vertices[f]&&(null==a._vertices[f]&&(d=a._vertices,g=new A(0,0),d[f]=g),m=a.local_vertices[f].x,
k=a.local_vertices[f].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[f],n.x=g,n.y=k);b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}var h=a._vertices[0].x;
b=1;for(c=a.count;b<c;){f=b++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var p=0,t=a.count;p<t;)n=p++,null!=a.local_vertices[n]&&(null==a._vertices[n]&&(d=a._vertices,g=new A(0,0),d[n]=g),m=a.local_vertices[n].x,k=a.local_vertices[n].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[n],n.x=g,n.y=k);p=0;for(t=a.count;p<t;)n=p++,k=a._vertices[(n+1)%
a.count],g=k.x,k=k.y,d=a._vertices[n],g-=d.x,k-=d.y,d=-k,k=g,g=d,null==a._normals[n]?(d=a._normals,g=new A(g,k),d[n]=g):(d=a._normals[n],d.x=g,d.y=k),k=n=g=a._normals[n],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}if(a._vertices[f].x<h){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();h=0;for(p=a.count;h<p;)t=h++,null!=a.local_vertices[t]&&(null==a._vertices[t]&&(n=a._vertices,g=new A(0,0),n[t]=g),g=a.local_vertices[t].x,k=a.local_vertices[t].y,
null==k&&(k=0),null==g&&(g=0),n=a.transform.get_local_to_world_matrix(),d=n.m01*g+n.m11*k+1*n.m21,t=a._vertices[t],t.x=n.m00*g+n.m10*k+1*n.m20,t.y=d);h=0;for(p=a.count;h<p;)t=h++,g=a._vertices[(t+1)%a.count],n=g.x,g=g.y,k=a._vertices[t],g-=k.y,n-=k.x,k=-g,g=n,n=k,null==a._normals[t]?(k=a._normals,n=new A(n,g),k[t]=n):(k=a._normals[t],k.x=n,k.y=g),g=t=n=a._normals[t],g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),k=n.y/g,t.x=n.x/g,t.y=k}h=a._vertices[f].x}}return h},get_right:function(){if(null!=this.transformed_rect){var a=
this.transform;null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians);var b=0==a}else b=!0;if(b)return a=this.transform,null==a.parent?b=a.local_x:(a.sync(),b=a._x),b+this.local_ex*this.transform.local_scale_x;a=this.transformed_rect;if(0!=a.count){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(var c=a.count;b<c;){var f=b++;if(null!=a.local_vertices[f]){if(null==a._vertices[f]){var d=a._vertices,g=new A(0,0);d[f]=g}var m=
a.local_vertices[f].x,k=a.local_vertices[f].y;null==k&&(k=0);null==m&&(m=0);d=a.transform.get_local_to_world_matrix();g=m;var e=1;m=d.m00*g+d.m10*k+d.m20*e;k=d.m01*g+d.m11*k+d.m21*e;g=m;var n=a._vertices[f];n.x=g;n.y=k}}b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=
k,n.y=g}b=null==a._vertices[0]}else b=!0;if(b){d=a.transform;if(null==d.parent)return d.local_x;d.sync();return d._x}if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();b=0;for(c=a.count;b<c;)f=b++,null!=a.local_vertices[f]&&(null==a._vertices[f]&&(d=a._vertices,g=new A(0,0),d[f]=g),m=a.local_vertices[f].x,k=a.local_vertices[f].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*
e,g=m,n=a._vertices[f],n.x=g,n.y=k);b=0;for(c=a.count;b<c;)f=b++,n=a._vertices[(f+1)%a.count],g=n.x,k=n.y,d=a._vertices[f],g-=d.x,k-=d.y,m=-k,k=g,g=m,null==a._normals[f]?(d=a._normals,g=new A(g,k),d[f]=g):(d=a._normals[f],d.x=g,d.y=k),k=g=n=k=a._normals[f],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}var h=a._vertices[0].x;b=1;for(c=a.count;b<c;){f=b++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var p=0,t=a.count;p<t;)n=p++,
null!=a.local_vertices[n]&&(null==a._vertices[n]&&(d=a._vertices,g=new A(0,0),d[n]=g),m=a.local_vertices[n].x,k=a.local_vertices[n].y,null==k&&(k=0),null==m&&(m=0),d=a.transform.get_local_to_world_matrix(),g=m,e=1,m=d.m00*g+d.m10*k+d.m20*e,k=d.m01*g+d.m11*k+d.m21*e,g=m,n=a._vertices[n],n.x=g,n.y=k);p=0;for(t=a.count;p<t;)n=p++,k=a._vertices[(n+1)%a.count],g=k.x,k=k.y,d=a._vertices[n],g-=d.x,k-=d.y,d=-k,k=g,g=d,null==a._normals[n]?(d=a._normals,g=new A(g,k),d[n]=g):(d=a._normals[n],d.x=g,d.y=k),k=
n=g=a._normals[n],k=k.x*k.x+k.y*k.y,d=0==k?1:Math.sqrt(k),k=g.x/d,g=g.y/d,n.x=k,n.y=g}if(a._vertices[f].x>h){if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();h=0;for(p=a.count;h<p;)t=h++,null!=a.local_vertices[t]&&(null==a._vertices[t]&&(n=a._vertices,g=new A(0,0),n[t]=g),g=a.local_vertices[t].x,k=a.local_vertices[t].y,null==k&&(k=0),null==g&&(g=0),n=a.transform.get_local_to_world_matrix(),d=n.m01*g+n.m11*k+1*n.m21,t=a._vertices[t],t.x=n.m00*g+n.m10*k+1*n.m20,
t.y=d);h=0;for(p=a.count;h<p;)t=h++,g=a._vertices[(t+1)%a.count],n=g.x,g=g.y,k=a._vertices[t],g-=k.y,n-=k.x,k=-g,g=n,n=k,null==a._normals[t]?(k=a._normals,n=new A(n,g),k[t]=n):(k=a._normals[t],k.x=n,k.y=g),g=t=n=a._normals[t],g=g.x*g.x+g.y*g.y,g=0==g?1:Math.sqrt(g),k=n.y/g,t.x=n.x/g,t.y=k}h=a._vertices[f].x}}return h},__class__:Tb});var Nd=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_util_AABB"]=Nd;Nd.__name__="echo.util.GenericPool_echo_util_AABB";Nd.__interfaces__=
[vb];Nd.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Nd};var lb=function(){this.pooled=!1;this.min_x=0;this.max_x=1;this.min_y=0;this.max_y=1};l["echo.util.AABB"]=lb;lb.__name__="echo.util.AABB";lb.__interfaces__=[Xb];lb.prototype={put:function(){this.pooled||(this.pooled=!0,lb.pool.put_unsafe(this))},__class__:lb};var Lf={_new:function(a){null==a&&(a=0);return a}},
Od=function(a){this.type=a;this.members=[];this.count=0};l["echo.util.GenericPool_echo_util_QuadTree"]=Od;Od.__name__="echo.util.GenericPool_echo_util_QuadTree";Od.__interfaces__=[vb];Od.prototype={get:function(){return 0==this.count?Fa.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Od};var Le=function(a){this.re=new Pd(a);this.un=new Pd(a)};l["echo.util.History_Array_echo_data_BodyState"]=Le;Le.__name__="echo.util.History_Array_echo_data_BodyState";
Le.prototype={redo:function(){var a=this.re.pop();null!=a&&this.un.push(a);return a},undo:function(){var a=this.un.pop();null!=a&&this.re.push(a);return a},add:function(a){this.un.push(a);this.re.reset()},__class__:Le};var Dd=function(){};l["echo.util.JSON"]=Dd;Dd.__name__="echo.util.JSON";Dd.copy_fields=function(a,b){if(null==a)return b;if(null==b)b=ma.copy(a);else for(var c=0,f=ma.fields(a);c<f.length;){var d=f[c];++c;b[d]=ma.field(a,d)}return b};var Ya=function(a,b){null==b&&(b=0);this.nodes_list=
[];this.max_contents=10;this.max_depth=5;lb.call(this);null!=a&&(this.min_x=a.min_x,this.max_x=a.max_x,this.min_y=a.min_y,this.max_y=a.max_y);this.depth=b;this.children=Array(4);this.contents=[];this.contents_count=0};l["echo.util.QuadTree"]=Ya;Ya.__name__="echo.util.QuadTree";Ya.__super__=lb;Ya.prototype=x(lb.prototype,{put:function(){if(!this.pooled){this.pooled=!0;for(var a=0,b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){this.children[c].clear_children();var f=this.children[c];
f.pooled||(f.pooled=!0,f.clear_children(),f.contents.length=0,f.contents_count=0,f.nodes_list.length=0,Ya.pool.put_unsafe(f));this.children[c]=null}}this.contents_count=this.contents.length=0;this.nodes_list.length=0;Ya.pool.put_unsafe(this)}},insert:function(a){if(null!=a.bounds){var b=a.bounds;if(b.min_x<this.max_x&&b.max_x>=this.min_x&&b.min_y<this.max_y&&b.max_y>=this.min_y)if(null==this.children[0]&&this.contents_count+1>this.max_contents&&this.split(),null==this.children[0])b=this.get_first_null(this.contents),
-1==b?this.contents.push(a):this.contents[b]=a,this.contents_count++;else{b=0;for(var c=this.children;b<c.length;){var f=c[b];++b;f.insert(a)}}}},remove:function(a,b){null==b&&(b=!0);if(null==this.children[0]){for(b=0;b<this.contents.length;){if(null!=this.contents[b]&&this.contents[b].id==a.id)return this.contents[b]=null,this.contents_count--,!0;++b}return!1}for(var c=!1,f=0,d=this.children;f<d.length;){var g=d[f];++f;null!=g&&g.remove(a)&&(c=!0)}b&&c&&this.shake();return c},update:function(a,b){null==
b&&(b=!0);this.remove(a,b);this.insert(a)},query:function(a,b){if(this.min_x<a.max_x&&this.max_x>=a.min_x&&this.min_y<a.max_y&&this.max_y>=a.min_y)if(null==this.children[0])for(var c=0,f=this.contents;c<f.length;){var d=f[c];++c;if(null!=d){var g=d.bounds;g=g.min_x<a.max_x&&g.max_x>=a.min_x&&g.min_y<a.max_y&&g.max_y>=a.min_y}else g=!1;g&&b.push(d)}else for(c=0,f=this.children;c<f.length;)d=f[c],++c,d.query(a,b)},shake:function(){if(null==this.children[0])return!1;var a=this.get_count();if(0==a){a=
0;for(var b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){for(var f=this.children[c],d=0,g=f.children.length;d<g;){var m=d++;if(null!=f.children[m]){f.children[m].clear_children();var k=f.children[m];k.pooled||(k.pooled=!0,k.clear_children(),k.contents.length=0,k.contents_count=0,k.nodes_list.length=0,Ya.pool.put_unsafe(k));f.children[m]=null}}d=this.children[c];if(!d.pooled){d.pooled=!0;g=0;for(f=d.children.length;g<f;)m=g++,null!=d.children[m]&&(d.children[m].clear_children(),
k=d.children[m],k.pooled||(k.pooled=!0,k.clear_children(),k.contents.length=0,k.contents_count=0,k.nodes_list.length=0,Ya.pool.put_unsafe(k)),d.children[m]=null);d.contents.length=0;d.contents_count=0;d.nodes_list.length=0;Ya.pool.put_unsafe(d)}this.children[c]=null}}}else if(a<this.max_contents){this.nodes_list.length=0;for(this.nodes_list.push(this);0<this.nodes_list.length;)if(b=this.nodes_list.shift(),b!=this&&null==b.children[0])for(a=0,b=b.contents;a<b.length;)c=b[a],++a,-1==this.contents.indexOf(c)&&
(d=this.get_first_null(this.contents),-1==d?this.contents.push(c):this.contents[d]=c,this.contents_count++);else for(d=0,g=b.children;d<g.length;)a=g[d],++d,this.nodes_list.push(a);a=0;for(b=this.children.length;a<b;)if(c=a++,null!=this.children[c]){f=this.children[c];d=0;for(g=f.children.length;d<g;)m=d++,null!=f.children[m]&&(f.children[m].clear_children(),k=f.children[m],k.pooled||(k.pooled=!0,k.clear_children(),k.contents.length=0,k.contents_count=0,k.nodes_list.length=0,Ya.pool.put_unsafe(k)),
f.children[m]=null);d=this.children[c];if(!d.pooled){d.pooled=!0;g=0;for(f=d.children.length;g<f;)m=g++,null!=d.children[m]&&(d.children[m].clear_children(),k=d.children[m],k.pooled||(k.pooled=!0,k.clear_children(),k.contents.length=0,k.contents_count=0,k.nodes_list.length=0,Ya.pool.put_unsafe(k)),d.children[m]=null);d.contents.length=0;d.contents_count=0;d.nodes_list.length=0;Ya.pool.put_unsafe(d)}this.children[c]=null}return!0}return!1},split:function(){if(!(this.depth+1>=this.max_depth)){for(var a=
.5*(this.max_x-this.min_x),b=.5*(this.max_y-this.min_y),c=0;4>c;){var f=c++,d=Ya.pool.get(),g=0,m=0,k=1,e=1;null==e&&(e=1);null==k&&(k=1);null==m&&(m=0);null==g&&(g=0);k*=.5;e*=.5;d.min_x=g-k;d.min_y=m-e;d.max_x=g+k;d.max_y=m+e;g=0;for(m=d.children.length;g<m;)k=g++,null!=d.children[k]&&(d.children[k].clear_children(),e=d.children[k],e.pooled||(e.pooled=!0,e.clear_children(),e.contents.length=0,e.contents_count=0,e.nodes_list.length=0,Ya.pool.put_unsafe(e)),d.children[k]=null);d.contents.length=0;
d.contents_count=0;d.pooled=!1;switch(f){case 0:g=this.min_x+a;m=this.min_y+b;d.min_x=this.min_x;d.max_x=g;d.min_y=this.min_y;d.max_y=m;break;case 1:g=this.min_y+b;d.min_x=this.min_x+a;d.max_x=this.max_x;d.min_y=this.min_y;d.max_y=g;break;case 2:g=this.min_x+a;d.min_x=this.min_x;d.max_x=g;d.min_y=this.min_y+b;d.max_y=this.max_y;break;case 3:d.min_x=this.min_x+a,d.max_x=this.max_x,d.min_y=this.min_y+b,d.max_y=this.max_y}d.depth=this.depth+1;g=this.max_depth;m=0;for(k=d.children.length;m<k;)if(e=m++,
null!=d.children[e]){e=d.children[e];for(var n=0,h=e.children.length;n<h;){var p=n++;null!=e.children[p]&&e.children[p].set_max_depth(g)}e.max_depth=g}d.max_depth=g;g=this.max_contents;m=0;for(k=d.children.length;m<k;)if(e=m++,null!=d.children[e]){e=d.children[e];n=0;for(h=e.children.length;n<h;)if(p=n++,null!=e.children[p]){p=e.children[p];for(var t=0,r=p.children.length;t<r;){var l=t++;null!=p.children[l]&&p.children[l].set_max_depth(g)}p.max_depth=g}e.max_depth=g}d.max_contents=g;d.shake();g=0;
for(m=this.contents.length;g<m;)k=g++,null!=this.contents[k]&&d.insert(this.contents[k]);this.children[f]=d}this.contents_count=this.contents.length=0}},clear_children:function(){for(var a=0,b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){this.children[c].clear_children();var f=this.children[c];f.pooled||(f.pooled=!0,f.clear_children(),f.contents.length=0,f.contents_count=0,f.nodes_list.length=0,Ya.pool.put_unsafe(f));this.children[c]=null}}},reset_data_flags:function(){for(var a=
0,b=this.contents.length;a<b;){var c=a++;null!=this.contents[c]&&(this.contents[c].flag=!1)}a=0;for(b=this.children.length;a<b;)c=a++,null!=this.children[c]&&this.children[c].reset_data_flags()},get_count:function(){this.reset_data_flags();for(var a=0,b=0,c=this.contents.length;b<c;){var f=b++;null!=this.contents[f]&&(this.contents[f].flag=!0,++a)}this.nodes_list.length=0;for(this.nodes_list.push(this);0<this.nodes_list.length;){var d=this.nodes_list.shift();if(null==d.children[0])for(b=0,c=d.contents.length;b<
c;)f=b++,null==d.contents[f]||d.contents[f].flag||(++a,d.contents[f].flag=!0);else for(b=0,c=d.children.length;b<c;)f=b++,this.nodes_list.push(d.children[f])}return a},get_first_null:function(a){for(var b=0,c=a.length;b<c;){var f=b++;if(null==a[f])return f}return-1},set_max_depth:function(a){for(var b=0,c=this.children.length;b<c;){var f=b++;null!=this.children[f]&&this.children[f].set_max_depth(a)}return this.max_depth=a},__class__:Ya,__properties__:{get_count:"get_count",set_max_depth:"set_max_depth"}});
var Pd=function(a){this.a=Array(a);this.reset()};l["echo.util.Ring_Array_echo_data_BodyState"]=Pd;Pd.__name__="echo.util.Ring_Array_echo_data_BodyState";Pd.prototype={pop:function(){if(0>=this.i+this.left-this.start)return null;0==this.i&&(this.i=this.a.length,this.left=0);return this.a[--this.i]},push:function(a){this.i==this.a.length&&(0<this.left&&this.start==this.i&&(this.start=0),this.i=0,this.left=this.a.length);this.i+this.left-this.start==this.a.length&&this.start++;this.a[this.i++]=a},reset:function(){this.left=
this.start=this.i=0},__class__:Pd};var xa=function(){};l["echo.util.SAT"]=xa;xa.__name__="echo.util.SAT";xa.line_intersects_rect=function(a,b){if(null!=b.transformed_rect){var c=b.transform;if(null==c.parent)var f=180/Math.PI*c.local_radians;else c.sync(),f=180/Math.PI*c._radians;var d=0!=f}else d=!1;if(d)return b.transformed_rect.intersect(a);var g=null;if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var m=180/Math.PI*c.local_radians;else c.sync(),m=180/Math.PI*c._radians;var k=0==m}else k=
!0;if(k){c=b.transform;null==c.parent?k=c.local_x:(c.sync(),k=c._x);var e=k-b.local_ex*b.transform.local_scale_x}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var n=0,h=c.count;n<h;){var p=n++;if(null!=c.local_vertices[p]){if(null==c._vertices[p]){var t=c._vertices,r=new A(0,0);t[p]=r}var l=c.local_vertices[p].x,z=c.local_vertices[p].y;null==z&&(z=0);null==l&&(l=0);var C=c.transform.get_local_to_world_matrix(),
q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p];M.x=D;M.y=Ra}}n=0;for(h=c.count;n<h;){p=n++;M=c._vertices[(p+1)%c.count];q=M.x;w=M.y;var ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y;q=Sa;w=Ta;l=-w;w=q;q=l;null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w);var fa=c._normals[p],ta=fa,x=fa,I=x,v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F;ta.x=y;ta.y=H}}k=null==c._vertices[0]}else k=!0;if(k)t=c.transform,null==t.parent?
e=t.local_x:(t.sync(),e=t._x);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+
1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}k=c._vertices[0].x;n=1;for(h=c.count;n<h;){p=n++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var pb=0,ba=c.count;pb<ba;){var G=pb++;null!=c.local_vertices[G]&&(null==c._vertices[G]&&
(t=c._vertices,r=new A(0,0),t[G]=r),l=c.local_vertices[G].x,z=c.local_vertices[G].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[G],M.x=D,M.y=Ra)}for(var K=0,rb=c.count;K<rb;){var E=K++;fa=c._vertices[(E+1)%c.count];var cb=fa.x,J=fa.y;ja=c._vertices[E];Sa=cb-ja.x;Ta=J-ja.y;cb=Sa;J=Ta;var La=-J;J=cb;cb=La;if(null==c._normals[E]){var N=c._normals,L=new A(cb,J);N[E]=L}else{var Ga=c._normals[E];
Ga.x=cb;Ga.y=J}var W=c._normals[E];I=x=ta=W;v=I.x*I.x+I.y*I.y;B=0==v?1:Math.sqrt(v);ha=x.x/B;F=x.y/B;y=ha;H=F;ta.x=y;ta.y=H}}if(c._vertices[p].x<k){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var qb=0,T=c.count;qb<T;){var ea=qb++;if(null!=c.local_vertices[ea]){if(null==c._vertices[ea]){var ob=c._vertices,R=new A(0,0);ob[ea]=R}var V=c.local_vertices[ea].x,Y=c.local_vertices[ea].y;null==Y&&(Y=0);null==V&&(V=0);var Q=c.transform.get_local_to_world_matrix(),
ca=V,Z=Y,nb=1,aa=Q.m00*ca+Q.m10*Z+Q.m20*nb,la=Q.m01*ca+Q.m11*Z+Q.m21*nb,ma=aa,ia=la,ka=c._vertices[ea];ka.x=ma;ka.y=ia}}for(var ra=0,jb=c.count;ra<jb;){var S=ra++,na=c._vertices[(S+1)%c.count],Xa=na.x,da=na.y,qa=c._vertices[S],mb=Xa-qa.x,Oa=da-qa.y;Xa=mb;da=Oa;var Wa=-da;da=Xa;Xa=Wa;if(null==c._normals[S]){var oa=c._normals,ya=new A(Xa,da);oa[S]=ya}else{var va=c._normals[S];va.x=Xa;va.y=da}var wa=c._normals[S],pa=wa,ua=wa,db=ua,Ka=db.x*db.x+db.y*db.y,Ba=0==Ka?1:Math.sqrt(Ka),Da=ua.x/Ba,Aa=ua.y/Ba,
Fa=Da,Ca=Aa;pa.x=Fa;pa.y=Ca}}k=c._vertices[p].x}}e=k}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var za=180/Math.PI*c.local_radians;else c.sync(),za=180/Math.PI*c._radians;var Fb=0==za}else Fb=!0;if(Fb){c=b.transform;null==c.parent?Fb=c.local_x:(c.sync(),Fb=c._x);var Qa=Fb+b.local_ex*b.transform.local_scale_x}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&
(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=
x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Fb=null==c._vertices[0]}else Fb=!0;if(Fb)t=c.transform,null==t.parent?Qa=t.local_x:(t.sync(),Qa=t._x);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),
q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Fb=c._vertices[0].x;n=1;for(h=c.count;n<h;){p=n++;if(c.dirty_vertices){for(c.dirty_vertices=
!1;c._vertices.length>c.count;)c._vertices.pop();pb=0;for(ba=c.count;pb<ba;)G=pb++,null!=c.local_vertices[G]&&(null==c._vertices[G]&&(t=c._vertices,r=new A(0,0),t[G]=r),l=c.local_vertices[G].x,z=c.local_vertices[G].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[G],M.x=D,M.y=Ra);K=0;for(rb=c.count;K<rb;)E=K++,fa=c._vertices[(E+1)%c.count],cb=fa.x,J=fa.y,ja=c._vertices[E],Sa=cb-ja.x,Ta=
J-ja.y,cb=Sa,J=Ta,La=-J,J=cb,cb=La,null==c._normals[E]?(N=c._normals,L=new A(cb,J),N[E]=L):(Ga=c._normals[E],Ga.x=cb,Ga.y=J),I=x=ta=W=c._normals[E],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}if(c._vertices[p].x>Fb){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();qb=0;for(T=c.count;qb<T;)ea=qb++,null!=c.local_vertices[ea]&&(null==c._vertices[ea]&&(ob=c._vertices,R=new A(0,0),ob[ea]=R),V=c.local_vertices[ea].x,Y=c.local_vertices[ea].y,
null==Y&&(Y=0),null==V&&(V=0),Q=c.transform.get_local_to_world_matrix(),ca=V,Z=Y,nb=1,aa=Q.m00*ca+Q.m10*Z+Q.m20*nb,la=Q.m01*ca+Q.m11*Z+Q.m21*nb,ma=aa,ia=la,ka=c._vertices[ea],ka.x=ma,ka.y=ia);ra=0;for(jb=c.count;ra<jb;)S=ra++,na=c._vertices[(S+1)%c.count],Xa=na.x,da=na.y,qa=c._vertices[S],mb=Xa-qa.x,Oa=da-qa.y,Xa=mb,da=Oa,Wa=-da,da=Xa,Xa=Wa,null==c._normals[S]?(oa=c._normals,ya=new A(Xa,da),oa[S]=ya):(va=c._normals[S],va.x=Xa,va.y=da),db=ua=pa=wa=c._normals[S],Ka=db.x*db.x+db.y*db.y,Ba=0==Ka?1:Math.sqrt(Ka),
Da=ua.x/Ba,Aa=ua.y/Ba,Fa=Da,Ca=Aa,pa.x=Fa,pa.y=Ca}Fb=c._vertices[p].x}}Qa=Fb}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var ab=180/Math.PI*c.local_radians;else c.sync(),ab=180/Math.PI*c._radians;var Ia=0==ab}else Ia=!0;if(Ia){c=b.transform;null==c.parent?Ia=c.local_y:(c.sync(),Ia=c._y);var Ua=Ia-b.local_ey*b.transform.local_scale_y}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<
h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=
r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Ia=null==c._vertices[0]}else Ia=!0;if(Ia)t=c.transform,null==t.parent?Ua=t.local_y:(t.sync(),Ua=t._y);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==
z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Ia=c._vertices[0].y;
n=1;for(h=c.count;n<h;){p=n++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();pb=0;for(ba=c.count;pb<ba;)G=pb++,null!=c.local_vertices[G]&&(null==c._vertices[G]&&(t=c._vertices,r=new A(0,0),t[G]=r),l=c.local_vertices[G].x,z=c.local_vertices[G].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[G],M.x=D,M.y=Ra);K=0;for(rb=c.count;K<rb;)E=K++,fa=c._vertices[(E+
1)%c.count],cb=fa.x,J=fa.y,ja=c._vertices[E],Sa=cb-ja.x,Ta=J-ja.y,cb=Sa,J=Ta,La=-J,J=cb,cb=La,null==c._normals[E]?(N=c._normals,L=new A(cb,J),N[E]=L):(Ga=c._normals[E],Ga.x=cb,Ga.y=J),I=x=ta=W=c._normals[E],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}if(c._vertices[p].y<Ia){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();qb=0;for(T=c.count;qb<T;)ea=qb++,null!=c.local_vertices[ea]&&(null==c._vertices[ea]&&(ob=c._vertices,
R=new A(0,0),ob[ea]=R),V=c.local_vertices[ea].x,Y=c.local_vertices[ea].y,null==Y&&(Y=0),null==V&&(V=0),Q=c.transform.get_local_to_world_matrix(),ca=V,Z=Y,nb=1,aa=Q.m00*ca+Q.m10*Z+Q.m20*nb,la=Q.m01*ca+Q.m11*Z+Q.m21*nb,ma=aa,ia=la,ka=c._vertices[ea],ka.x=ma,ka.y=ia);ra=0;for(jb=c.count;ra<jb;)S=ra++,na=c._vertices[(S+1)%c.count],Xa=na.x,da=na.y,qa=c._vertices[S],mb=Xa-qa.x,Oa=da-qa.y,Xa=mb,da=Oa,Wa=-da,da=Xa,Xa=Wa,null==c._normals[S]?(oa=c._normals,ya=new A(Xa,da),oa[S]=ya):(va=c._normals[S],va.x=Xa,
va.y=da),db=ua=pa=wa=c._normals[S],Ka=db.x*db.x+db.y*db.y,Ba=0==Ka?1:Math.sqrt(Ka),Da=ua.x/Ba,Aa=ua.y/Ba,Fa=Da,Ca=Aa,pa.x=Fa,pa.y=Ca}Ia=c._vertices[p].y}}Ua=Ia}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var bb=180/Math.PI*c.local_radians;else c.sync(),bb=180/Math.PI*c._radians;var Ma=0==bb}else Ma=!0;if(Ma){c=b.transform;null==c.parent?Ma=c.local_y:(c.sync(),Ma=c._y);var Ha=Ma+b.local_ey*b.transform.local_scale_y}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=
!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,
w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Ma=null==c._vertices[0]}else Ma=!0;if(Ma)t=c.transform,null==t.parent?Ha=t.local_y:(t.sync(),Ha=t._y);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();n=0;for(h=c.count;n<h;)p=n++,null!=c.local_vertices[p]&&(null==c._vertices[p]&&(t=c._vertices,r=
new A(0,0),t[p]=r),l=c.local_vertices[p].x,z=c.local_vertices[p].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*u,D=U,Ra=P,M=c._vertices[p],M.x=D,M.y=Ra);n=0;for(h=c.count;n<h;)p=n++,M=c._vertices[(p+1)%c.count],q=M.x,w=M.y,ja=c._vertices[p],Sa=q-ja.x,Ta=w-ja.y,q=Sa,w=Ta,l=-w,w=q,q=l,null==c._normals[p]?(t=c._normals,r=new A(q,w),t[p]=r):(C=c._normals[p],C.x=q,C.y=w),I=x=ta=fa=c._normals[p],v=I.x*I.x+I.y*I.y,
B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}Ma=c._vertices[0].y;n=1;for(h=c.count;n<h;){p=n++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();pb=0;for(ba=c.count;pb<ba;)G=pb++,null!=c.local_vertices[G]&&(null==c._vertices[G]&&(t=c._vertices,r=new A(0,0),t[G]=r),l=c.local_vertices[G].x,z=c.local_vertices[G].y,null==z&&(z=0),null==l&&(l=0),C=c.transform.get_local_to_world_matrix(),q=l,w=z,u=1,U=C.m00*q+C.m10*w+C.m20*u,P=C.m01*q+C.m11*w+C.m21*
u,D=U,Ra=P,M=c._vertices[G],M.x=D,M.y=Ra);K=0;for(rb=c.count;K<rb;)E=K++,fa=c._vertices[(E+1)%c.count],cb=fa.x,J=fa.y,ja=c._vertices[E],Sa=cb-ja.x,Ta=J-ja.y,cb=Sa,J=Ta,La=-J,J=cb,cb=La,null==c._normals[E]?(N=c._normals,L=new A(cb,J),N[E]=L):(Ga=c._normals[E],Ga.x=cb,Ga.y=J),I=x=ta=W=c._normals[E],v=I.x*I.x+I.y*I.y,B=0==v?1:Math.sqrt(v),ha=x.x/B,F=x.y/B,y=ha,H=F,ta.x=y,ta.y=H}if(c._vertices[p].y>Ma){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();qb=0;for(T=
c.count;qb<T;)ea=qb++,null!=c.local_vertices[ea]&&(null==c._vertices[ea]&&(ob=c._vertices,R=new A(0,0),ob[ea]=R),V=c.local_vertices[ea].x,Y=c.local_vertices[ea].y,null==Y&&(Y=0),null==V&&(V=0),Q=c.transform.get_local_to_world_matrix(),ca=V,Z=Y,nb=1,aa=Q.m00*ca+Q.m10*Z+Q.m20*nb,la=Q.m01*ca+Q.m11*Z+Q.m21*nb,ma=aa,ia=la,ka=c._vertices[ea],ka.x=ma,ka.y=ia);ra=0;for(jb=c.count;ra<jb;)S=ra++,na=c._vertices[(S+1)%c.count],Xa=na.x,da=na.y,qa=c._vertices[S],mb=Xa-qa.x,Oa=da-qa.y,Xa=mb,da=Oa,Wa=-da,da=Xa,Xa=
Wa,null==c._normals[S]?(oa=c._normals,ya=new A(Xa,da),oa[S]=ya):(va=c._normals[S],va.x=Xa,va.y=da),db=ua=pa=wa=c._normals[S],Ka=db.x*db.x+db.y*db.y,Ba=0==Ka?1:Math.sqrt(Ka),Da=ua.x/Ba,Aa=ua.y/Ba,Fa=Da,Ca=Aa,pa.x=Fa,pa.y=Ca}Ma=c._vertices[p].y}}Ha=Ma}}l=e;z=Ua;var Bc=Qa,Na=Ua;null==Na&&(Na=1);null==Bc&&(Bc=1);null==z&&(z=0);null==l&&(l=0);var X=Qb.pool.get();La=l;Y=z;var kb=Bc,$a=Na;null==$a&&($a=1);null==kb&&(kb=1);null==Y&&(Y=0);null==La&&(La=0);M=X.start;M.x=La;M.y=Y;M=X.end;M.x=kb;M.y=$a;X.pooled=
!1;var bc=(X.get_dy()-X.get_y())*(a.get_dx()-a.get_x())-(X.get_dx()-X.get_x())*(a.get_dy()-a.get_y());if(1E-5>=Math.abs(bc))var Yb=null;else{var sa=((X.get_dx()-X.get_x())*(a.get_y()-X.get_y())-(X.get_dy()-X.get_y())*(a.get_x()-X.get_x()))/bc,Va=((a.get_dx()-a.get_x())*(a.get_y()-X.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-X.get_x()))/bc;if(0>sa||1<sa||0>Va||1<Va)Yb=null;else{C=a.start;var Ya=sa;Ga=a.end;ja=a.start;var eb=Ga.x-ja.x,fb=Ga.y-ja.y;Sa=eb*Ya;Ta=fb*Ya;var Ja=C.x+Sa,Ea=C.y+Ta;C=a.start;
var Za=Ja-C.x,hb=Ea-C.y,Lb=Math.sqrt(Za*Za+hb*hb);C=a.start;ja=a.end;Za=ja.x-C.x;hb=ja.y-C.y;var ib=Math.sqrt(Za*Za+hb*hb)-Lb,sb=0<=bc;C=X.start;ja=X.end;Za=ja.x-C.x;hb=ja.y-C.y;var Mb=Math.sqrt(Za*Za+hb*hb)*(sb?-1:1);M=xa.norm;l=(X.get_dy()-X.get_y())/Mb;z=-(X.get_dx()-X.get_x())/Mb;M.x=l;M.y=z;var gb=xa.norm.x,lb=xa.norm.y,kc=sb;null==kc&&(kc=!1);p=zb.pool.get();p.line=null;p.shape=null;p.line2=null;var Ib=kc;null==Ib&&(Ib=!1);p.distance=Lb;p.overlap=ib;p.inverse_normal=Ib;M=p.hit;M.x=Ja;M.y=Ea;
M=p.normal;M.x=gb;M.y=lb;p.pooled=!1;var Pa=p;Pa.line=a;Pa.line2=X;Yb=Pa}}null!=Yb&&(g=Yb);l=Qa;z=Ua;Bc=Qa;Na=Ha;null==Na&&(Na=1);null==Bc&&(Bc=1);null==z&&(z=0);null==l&&(l=0);M=X.start;M.x=l;M.y=z;M=X.end;M.x=Bc;M.y=Na;bc=(X.get_dy()-X.get_y())*(a.get_dx()-a.get_x())-(X.get_dx()-X.get_x())*(a.get_dy()-a.get_y());1E-5>=Math.abs(bc)?Yb=null:(sa=((X.get_dx()-X.get_x())*(a.get_y()-X.get_y())-(X.get_dy()-X.get_y())*(a.get_x()-X.get_x()))/bc,Va=((a.get_dx()-a.get_x())*(a.get_y()-X.get_y())-(a.get_dy()-
a.get_y())*(a.get_x()-X.get_x()))/bc,0>sa||1<sa||0>Va||1<Va?Yb=null:(C=a.start,Ya=sa,Ga=a.end,ja=a.start,eb=Ga.x-ja.x,fb=Ga.y-ja.y,Sa=eb*Ya,Ta=fb*Ya,Ja=C.x+Sa,Ea=C.y+Ta,C=a.start,Za=Ja-C.x,hb=Ea-C.y,Lb=Math.sqrt(Za*Za+hb*hb),C=a.start,ja=a.end,Za=ja.x-C.x,hb=ja.y-C.y,ib=Math.sqrt(Za*Za+hb*hb)-Lb,sb=0<=bc,C=X.start,ja=X.end,Za=ja.x-C.x,hb=ja.y-C.y,Mb=Math.sqrt(Za*Za+hb*hb)*(sb?-1:1),M=xa.norm,l=(X.get_dy()-X.get_y())/Mb,z=-(X.get_dx()-X.get_x())/Mb,M.x=l,M.y=z,gb=xa.norm.x,lb=xa.norm.y,kc=sb,null==
kc&&(kc=!1),p=zb.pool.get(),p.line=null,p.shape=null,p.line2=null,Ib=kc,null==Ib&&(Ib=!1),p.distance=Lb,p.overlap=ib,p.inverse_normal=Ib,M=p.hit,M.x=Ja,M.y=Ea,M=p.normal,M.x=gb,M.y=lb,p.pooled=!1,Pa=p,Pa.line=a,Pa.line2=X,Yb=Pa));null!=Yb&&(null==g||g.distance>Yb.distance)&&(g=Yb);l=Qa;z=Ha;Bc=e;Na=Ha;null==Na&&(Na=1);null==Bc&&(Bc=1);null==z&&(z=0);null==l&&(l=0);M=X.start;M.x=l;M.y=z;M=X.end;M.x=Bc;M.y=Na;bc=(X.get_dy()-X.get_y())*(a.get_dx()-a.get_x())-(X.get_dx()-X.get_x())*(a.get_dy()-a.get_y());
1E-5>=Math.abs(bc)?Yb=null:(sa=((X.get_dx()-X.get_x())*(a.get_y()-X.get_y())-(X.get_dy()-X.get_y())*(a.get_x()-X.get_x()))/bc,Va=((a.get_dx()-a.get_x())*(a.get_y()-X.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-X.get_x()))/bc,0>sa||1<sa||0>Va||1<Va?Yb=null:(C=a.start,Ya=sa,Ga=a.end,ja=a.start,eb=Ga.x-ja.x,fb=Ga.y-ja.y,Sa=eb*Ya,Ta=fb*Ya,Ja=C.x+Sa,Ea=C.y+Ta,C=a.start,Za=Ja-C.x,hb=Ea-C.y,Lb=Math.sqrt(Za*Za+hb*hb),C=a.start,ja=a.end,Za=ja.x-C.x,hb=ja.y-C.y,ib=Math.sqrt(Za*Za+hb*hb)-Lb,sb=0<=bc,C=X.start,
ja=X.end,Za=ja.x-C.x,hb=ja.y-C.y,Mb=Math.sqrt(Za*Za+hb*hb)*(sb?-1:1),M=xa.norm,l=(X.get_dy()-X.get_y())/Mb,z=-(X.get_dx()-X.get_x())/Mb,M.x=l,M.y=z,gb=xa.norm.x,lb=xa.norm.y,kc=sb,null==kc&&(kc=!1),p=zb.pool.get(),p.line=null,p.shape=null,p.line2=null,Ib=kc,null==Ib&&(Ib=!1),p.distance=Lb,p.overlap=ib,p.inverse_normal=Ib,M=p.hit,M.x=Ja,M.y=Ea,M=p.normal,M.x=gb,M.y=lb,p.pooled=!1,Pa=p,Pa.line=a,Pa.line2=X,Yb=Pa));null!=Yb&&(null==g||g.distance>Yb.distance)&&(g=Yb);l=e;z=Ha;Bc=e;Na=Ua;null==Na&&(Na=
1);null==Bc&&(Bc=1);null==z&&(z=0);null==l&&(l=0);M=X.start;M.x=l;M.y=z;M=X.end;M.x=Bc;M.y=Na;bc=(X.get_dy()-X.get_y())*(a.get_dx()-a.get_x())-(X.get_dx()-X.get_x())*(a.get_dy()-a.get_y());1E-5>=Math.abs(bc)?Yb=null:(sa=((X.get_dx()-X.get_x())*(a.get_y()-X.get_y())-(X.get_dy()-X.get_y())*(a.get_x()-X.get_x()))/bc,Va=((a.get_dx()-a.get_x())*(a.get_y()-X.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-X.get_x()))/bc,0>sa||1<sa||0>Va||1<Va?Yb=null:(C=a.start,Ya=sa,Ga=a.end,ja=a.start,eb=Ga.x-ja.x,fb=Ga.y-
ja.y,Sa=eb*Ya,Ta=fb*Ya,Ja=C.x+Sa,Ea=C.y+Ta,C=a.start,Za=Ja-C.x,hb=Ea-C.y,Lb=Math.sqrt(Za*Za+hb*hb),C=a.start,ja=a.end,Za=ja.x-C.x,hb=ja.y-C.y,ib=Math.sqrt(Za*Za+hb*hb)-Lb,sb=0<=bc,C=X.start,ja=X.end,Za=ja.x-C.x,hb=ja.y-C.y,Mb=Math.sqrt(Za*Za+hb*hb)*(sb?-1:1),M=xa.norm,l=(X.get_dy()-X.get_y())/Mb,z=-(X.get_dx()-X.get_x())/Mb,M.x=l,M.y=z,gb=xa.norm.x,lb=xa.norm.y,kc=sb,null==kc&&(kc=!1),p=zb.pool.get(),p.line=null,p.shape=null,p.line2=null,Ib=kc,null==Ib&&(Ib=!1),p.distance=Lb,p.overlap=ib,p.inverse_normal=
Ib,M=p.hit,M.x=Ja,M.y=Ea,M=p.normal,M.x=gb,M.y=lb,p.pooled=!1,Pa=p,Pa.line=a,Pa.line2=X,Yb=Pa));null!=Yb&&(null==g||g.distance>Yb.distance)&&(g=Yb);null!=g&&(g.line=a,g.shape=b);return g};xa.line_intersects_circle=function(a,b){var c=a.end,f=a.start,d=c.x-f.x,g=c.y-f.y;c=a.start;var m=b.transform;m.sync();var k=m._x,e=m._y,h=c.x-k;k=c.y-e;e=b.local_radius;m=b.transform;null==m.parent?c=m.local_scale_x:(m.sync(),c=m._scale_x);e*=c;c=d*d+g*g;f=2*(h*d+k*g);g=f*f-4*c*(h*h+k*k-e*e);if(0>g)return null;
g=Math.sqrt(g);d=(-f-g)/(2*c);g=(-f+g)/(2*c);return 0<=d&&1>=d?(c=a.start,g=d,m=a.end,f=a.start,d=m.x-f.x,h=m.y-f.y,d=c.x+d*g,g=c.y+h*g,c=a.start,m=d-c.x,c=g-c.y,h=Math.sqrt(m*m+c*c),c=a.start,f=a.end,m=f.x-c.x,c=f.y-c.y,f=Math.sqrt(m*m+c*c)-h,c=xa.norm,m=b.transform,null==m.parent?k=m.local_x:(m.sync(),k=m._x),m=b.transform,null==m.parent?m=m.local_y:(m.sync(),m=m._y),c.x=d-k,c.y=g-m,c=xa.norm,k=c.x/e,e=c.y/e,c.x=k,c.y=e,e=xa.norm.x,m=xa.norm.y,k=zb.pool.get(),k.line=null,k.shape=null,k.line2=null,
c=!1,null==c&&(c=!1),k.distance=h,k.overlap=f,k.inverse_normal=c,c=k.hit,c.x=d,c.y=g,c=k.normal,c.x=e,c.y=m,k.pooled=!1,e=k,e.line=a,e.shape=b,e):0<=g&&1>=g?(c=a.start,m=a.end,f=a.start,d=m.x-f.x,h=m.y-f.y,d=c.x+d*g,g=c.y+h*g,c=a.start,m=d-c.x,c=g-c.y,h=Math.sqrt(m*m+c*c),c=a.start,f=a.end,m=f.x-c.x,c=f.y-c.y,f=Math.sqrt(m*m+c*c)-h,c=xa.norm,m=b.transform,null==m.parent?k=m.local_x:(m.sync(),k=m._x),m=b.transform,null==m.parent?m=m.local_y:(m.sync(),m=m._y),c.x=d-k,c.y=g-m,m=c=xa.norm,k=-m.y,c.x=
-m.x/e,c.y=k/e,e=xa.norm.x,m=xa.norm.y,c=!0,null==c&&(c=!1),k=zb.pool.get(),k.line=null,k.shape=null,k.line2=null,null==c&&(c=!1),k.distance=h,k.overlap=f,k.inverse_normal=c,c=k.hit,c.x=d,c.y=g,c=k.normal,c.x=e,c.y=m,k.pooled=!1,e=k,e.line=a,e.shape=b,e):null};xa.line_intersects_polygon=function(a,b){var c=null,f=Qb.pool.get(),d=0,g=0,m=1,k=1;null==k&&(k=1);null==m&&(m=1);null==g&&(g=0);null==d&&(d=0);var e=f.start;e.x=d;e.y=g;e=f.end;e.x=m;e.y=k;f.pooled=!1;for(var h=0,t=b.count;h<t;){var p=h++;
if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var r=0,l=b.count;r<l;){var C=r++;if(null!=b.local_vertices[C]){if(null==b._vertices[C]){var z=b._vertices,q=new A(0,0);z[C]=q}d=b.local_vertices[C].x;g=b.local_vertices[C].y;null==g&&(g=0);null==d&&(d=0);var w=b.transform.get_local_to_world_matrix(),u=d,I=g,U=w.m00*u+w.m10*I+1*w.m20,x=w.m01*u+w.m11*I+1*w.m21;e=b._vertices[C];e.x=U;e.y=x}}for(var P=0,Ra=b.count;P<Ra;){var M=P++,ja=b._vertices[(M+1)%b.count],
Sa=ja.x,Ta=ja.y,D=b._vertices[M],ta=Ta-D.y;Sa-=D.x;Ta=ta;var fa=-Ta;Ta=Sa;Sa=fa;if(null==b._normals[M]){var v=b._normals,B=new A(Sa,Ta);v[M]=B}else{var ha=b._normals[M];ha.x=Sa;ha.y=Ta}var F=b._normals[M],y=F,H=F,pb=H,G=pb.x*pb.x+pb.y*pb.y,E=0==G?1:Math.sqrt(G),ba=H.y/E;y.x=H.x/E;y.y=ba}}var cb=b._vertices[p];if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var J=0,K=b.count;J<K;){var Ga=J++;if(null!=b.local_vertices[Ga]){if(null==b._vertices[Ga]){var rb=
b._vertices,La=new A(0,0);rb[Ga]=La}var N=b.local_vertices[Ga].x,L=b.local_vertices[Ga].y;null==L&&(L=0);null==N&&(N=0);var qb=b.transform.get_local_to_world_matrix(),W=N,ea=L,Q=qb.m01*W+qb.m11*ea+1*qb.m21,T=b._vertices[Ga];T.x=qb.m00*W+qb.m10*ea+1*qb.m20;T.y=Q}}for(var Y=0,V=b.count;Y<V;){var ob=Y++,R=b._vertices[(ob+1)%b.count],S=R.x,Xa=R.y,ca=b._vertices[ob],Z=Xa-ca.y;S-=ca.x;Xa=Z;var nb=-Xa;Xa=S;S=nb;if(null==b._normals[ob]){var da=b._normals,aa=new A(S,Xa);da[ob]=aa}else{var ka=b._normals[ob];
ka.x=S;ka.y=Xa}var la=b._normals[ob],ma=la,ra=la,ia=ra,na=ia.x*ia.x+ia.y*ia.y,jb=0==na?1:Math.sqrt(na),qa=ra.y/jb;ma.x=ra.x/jb;ma.y=qa}}var db=b._vertices[(p+1)%b.count],va=cb.x,pa=cb.y;m=db.x;k=db.y;null==k&&(k=1);null==m&&(m=1);null==pa&&(pa=0);null==va&&(va=0);var ua=f.start;ua.x=va;ua.y=pa;var mb=f.end;mb.x=m;mb.y=k;var Oa=(f.get_dy()-f.get_y())*(a.get_dx()-a.get_x())-(f.get_dx()-f.get_x())*(a.get_dy()-a.get_y());if(1E-5>=Math.abs(Oa))var Wa=null;else{var oa=((f.get_dx()-f.get_x())*(a.get_y()-
f.get_y())-(f.get_dy()-f.get_y())*(a.get_x()-f.get_x()))/Oa,ya=((a.get_dx()-a.get_x())*(a.get_y()-f.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-f.get_x()))/Oa;if(0>oa||1<oa||0>ya||1<ya)Wa=null;else{var Ka=a.start,Ba=oa,Fb=a.end,wa=a.start,Da=Ka.x+(Fb.x-wa.x)*Ba,Na=Ka.y+(Fb.y-wa.y)*Ba,Aa=a.start,sa=Da-Aa.x,Fa=Na-Aa.y,Ia=Math.sqrt(sa*sa+Fa*Fa),Ca=a.start,Ma=a.end,Qa=Ma.x-Ca.x,Va=Ma.y-Ca.y,Ya=Math.sqrt(Qa*Qa+Va*Va)-Ia,Pa=0<=Oa,Ua=f.start,za=f.end,Ja=za.x-Ua.x,X=za.y-Ua.y,Ha=Math.sqrt(Ja*Ja+X*X)*(Pa?-1:
1),Ea=xa.norm,bc=(f.get_dy()-f.get_y())/Ha,ab=-(f.get_dx()-f.get_x())/Ha;Ea.x=bc;Ea.y=ab;var eb=xa.norm.x,fb=xa.norm.y,bb=Pa;null==bb&&(bb=!1);var kb=zb.pool.get();kb.line=null;kb.shape=null;kb.line2=null;var $a=bb;null==$a&&($a=!1);kb.distance=Ia;kb.overlap=Ya;kb.inverse_normal=$a;var ib=kb.hit;ib.x=Da;ib.y=Na;var gb=kb.normal;gb.x=eb;gb.y=fb;kb.pooled=!1;var Za=kb;Za.line=a;Za.line2=f;Wa=Za}}null!=Wa&&(null==c||c.distance>Wa.distance)&&(c=Wa)}null!=c&&(c.line=a,c.shape=b);return c};xa.rect_and_rect=
function(a,b,c){null==c&&(c=!1);var f=null,d=a.transform;if(null==d.parent)var g=180/Math.PI*d.local_radians;else d.sync(),g=180/Math.PI*d._radians;0==g?(d=b.transform,null==d.parent?g=180/Math.PI*d.local_radians:(d.sync(),g=180/Math.PI*d._radians),g=0!=g):g=!0;if(g){if(null!=a.transformed_rect){f=xa.rect_and_polygon(b,a.transformed_rect,c);if(null==f)return null;c?f.sa=a:f.sb=a;return f}if(null!=b.transformed_rect){f=xa.rect_and_polygon(a,b.transformed_rect,!c);if(null==f)return null;c?f.sa=b:f.sb=
b;return f}}g=c?b:a;a=c?a:b;d=a.transform;null==d.parent?b=d.local_x:(d.sync(),b=d._x);d=g.transform;null==d.parent?d=d.local_x:(d.sync(),d=d._x);b-=d;d=a.transform;null==d.parent?c=d.local_y:(d.sync(),c=d._y);d=g.transform;null==d.parent?d=d.local_y:(d.sync(),d=d._y);d=c-d;c=g.local_ex*g.transform.local_scale_x+a.local_ex*a.transform.local_scale_x-Math.abs(b);if(0<c){var m=g.local_ey*g.transform.local_scale_y+a.local_ey*a.transform.local_scale_y-Math.abs(d);if(0<m){if(c<m){f=Ac.pool.get();f.sa=null;
f.sb=null;for(var k=f.contact_count=0,e=f.contacts;k<e.length;){var h=e[k];++k;h.x=0;h.y=0}f.overlap=c;c=f.normal;c.x=0>b?-1:1;c.y=0}else{f=Ac.pool.get();f.sa=null;f.sb=null;k=f.contact_count=0;for(e=f.contacts;k<e.length;)h=e[k],++k,h.x=0,h.y=0;f.overlap=m;c=f.normal;c.x=0;c.y=0>d?-1:1}f.pooled=!1;f.sa=g;f.sb=a}}return f};xa.circle_and_circle=function(a,b,c){null==c&&(c=!1);var f=c?b:a;a=c?a:b;var d=a.transform;null==d.parent?b=d.local_x:(d.sync(),b=d._x);d=f.transform;null==d.parent?c=d.local_x:
(d.sync(),c=d._x);b-=c;d=a.transform;null==d.parent?c=d.local_y:(d.sync(),c=d._y);d=f.transform;null==d.parent?d=d.local_y:(d.sync(),d=d._y);c-=d;var g=f.local_radius;d=f.transform;if(null==d.parent)var m=d.local_scale_x;else d.sync(),m=d._scale_x;var k=a.local_radius;d=a.transform;null==d.parent?d=d.local_scale_x:(d.sync(),d=d._scale_x);g=g*m+k*d;m=b*b+c*c;d=null;if(m>=g*g)return d;if(1E-5>=Math.abs(m)){g=f.local_radius;d=f.transform;null==d.parent?b=d.local_scale_x:(d.sync(),b=d._scale_x);b*=g;
d=Ac.pool.get();d.sa=null;d.sb=null;k=d.contact_count=0;for(var e=d.contacts;k<e.length;){var h=e[k];++k;h.x=0;h.y=0}d.overlap=b;g=d.normal;g.x=1;g.y=0}else{m=Math.sqrt(m);b/=m;c/=m;d=Ac.pool.get();d.sa=null;d.sb=null;k=d.contact_count=0;for(e=d.contacts;k<e.length;)h=e[k],++k,h.x=0,h.y=0;d.overlap=g-m;g=d.normal;g.x=b;g.y=c}d.pooled=!1;d.sa=f;d.sb=a;return d};xa.polygon_and_polygon=function(a,b,c){null==c&&(c=!1);var f=xa.check_polygons(a,b,c);if(null==f)return null;a=xa.check_polygons(b,a,!c);if(null==
a)return null;0>f.overlap&&(f.overlap=Math.abs(f.overlap));0>a.overlap&&(a.overlap=Math.abs(a.overlap));if(f.overlap<a.overlap)return a.put(),f;f.put();return a};xa.rect_and_circle=function(a,b,c){null==c&&(c=!1);if(null!=a.transformed_rect){var f=a.transform;if(null==f.parent)var d=180/Math.PI*f.local_radians;else f.sync(),d=180/Math.PI*f._radians;d=0!=d}else d=!1;if(d){d=xa.circle_and_polygon(b,a.transformed_rect,c);if(null==d)return null;c?d.sa=a:d.sb=a;return d}c?(f=b.transform,null==f.parent?
d=f.local_x:(f.sync(),d=f._x),f=a.transform):(f=a.transform,null==f.parent?d=f.local_x:(f.sync(),d=f._x),f=b.transform);if(null==f.parent)var g=f.local_x;else f.sync(),g=f._x;d-=g;c?(f=b.transform,null==f.parent?g=f.local_y:(f.sync(),g=f._y),f=a.transform):(f=a.transform,null==f.parent?g=f.local_y:(f.sync(),g=f._y),f=b.transform);if(null==f.parent)var m=f.local_y;else f.sync(),m=f._y;g-=m;var k=d,e=g;m=-(a.local_ex*a.transform.local_scale_x);var h=a.local_ex*a.transform.local_scale_x;k<m?k=m:k>h&&
(k=h);m=-(a.local_ey*a.transform.local_scale_y);h=a.local_ey*a.transform.local_scale_y;e<m?e=m:e>h&&(e=h);h=!1;m=b.local_radius;f=b.transform;null==f.parent?f=f.local_scale_x:(f.sync(),f=f._scale_x);m*=f;1E-5>=Math.abs(d-k)&&1E-5>=Math.abs(g-e)&&(h=!0,Math.abs(d)>Math.abs(g)?k=0<k?a.local_ex*a.transform.local_scale_x+m+.1:-(a.local_ex*a.transform.local_scale_x)-m-.1:e=0<e?a.local_ey*a.transform.local_scale_y+m+.1:-(a.local_ey*a.transform.local_scale_y)-m-.1);d-=k;g-=e;k=d*d+g*g;if(k>m*m&&!h)return null;
k=Math.sqrt(k);d/=k;g/=k;h&&(d*=-1,g*=-1);k=Math.abs(m-k);m=Ac.pool.get();m.sa=null;m.sb=null;e=m.contact_count=0;for(h=m.contacts;e<h.length;)f=h[e],++e,f.x=0,f.y=0;m.overlap=k;k=m.normal;k.x=d;k.y=g;m.pooled=!1;d=m;d.sa=c?b:a;d.sb=c?a:b;return d};xa.rect_and_polygon=function(a,b,c){null==c&&(c=!1);if(null!=a.transformed_rect)b=xa.polygon_and_polygon(a.transformed_rect,b,c);else{var f=oa.pool.get();f.count=4;for(var d=0,g=f.count;d<g;){var m=d++;if(null==f.local_vertices[m]){var k=f.local_vertices,
e=new A(0,0);k[m]=e}}d=f.local_vertices[0];d.x=-(a.local_ex*a.transform.local_scale_x);d.y=-(a.local_ey*a.transform.local_scale_y);d=f.local_vertices[1];d.x=a.local_ex*a.transform.local_scale_x;d.y=-(a.local_ey*a.transform.local_scale_y);d=f.local_vertices[2];d.x=a.local_ex*a.transform.local_scale_x;d.y=a.local_ey*a.transform.local_scale_y;d=f.local_vertices[3];d.x=-(a.local_ex*a.transform.local_scale_x);d.y=a.local_ey*a.transform.local_scale_y;d=a.transform.local_x;g=f.transform;g.dirty||g.set_dirty();
g.local_x=d;d=a.transform.local_y;g=f.transform;g.dirty||g.set_dirty();g.local_y=d;g=f.transform;d=Math.PI/180*(180/Math.PI)*a.transform.local_radians;g.dirty||g.set_dirty();g.local_radians=d;d=a.transform.local_scale_x;g=f.transform;g.dirty||g.set_dirty();g.local_scale_x=d;d=a.transform.local_scale_y;g=f.transform;g.dirty||g.set_dirty();g.local_scale_y=d;f.dirty_vertices=!0;f.dirty_bounds=!0;f.pooled=!1;f.set_parent(a.parent);b=xa.polygon_and_polygon(f,b,c);f.put()}if(null==b)return null;c?b.sb=
a:b.sa=a;return b};xa.circle_and_polygon=function(a,b,c){null==c&&(c=!1);var f=0,d=1073741823,g=a.transform;g.sync();var m=g._x,k=g._y,e=a.local_radius;g=a.transform;if(null==g.parent)var h=g.local_scale_x;else g.sync(),h=g._scale_x;for(var t=e*h,p=0,r=b.count;p<r;){var l=p++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var C=0,z=b.count;C<z;){var w=C++;if(null!=b.local_vertices[w]){if(null==b._vertices[w]){var q=b._vertices,u=new A(0,0);q[w]=u}var I=
b.local_vertices[w].x,U=b.local_vertices[w].y;null==U&&(U=0);null==I&&(I=0);var P=b.transform.get_local_to_world_matrix(),x=I,Ra=U,M=1,ja=P.m00*x+P.m10*Ra+P.m20*M,Sa=P.m01*x+P.m11*Ra+P.m21*M,Ta=ja,D=Sa,ta=b._vertices[w];ta.x=Ta;ta.y=D}}for(var fa=0,v=b.count;fa<v;){var B=fa++,ha=b._vertices[(B+1)%b.count],F=ha.x,y=ha.y,H=b._vertices[B],pb=F-H.x,G=y-H.y;F=pb;y=G;var E=-y;y=F;F=E;if(null==b._normals[B]){var ba=b._normals,cb=new A(F,y);ba[B]=cb}else{var J=b._normals[B];J.x=F;J.y=y}var Ga=b._normals[B],
K=Ga,rb=Ga,La=rb,N=La.x*La.x+La.y*La.y,L=0==N?1:Math.sqrt(N),qb=rb.x/L,W=rb.y/L,ea=qb,Q=W;K.x=ea;K.y=Q}}var ob=b._vertices[l],T=m-ob.x,Y=k-ob.y;f=T*T+Y*Y;if(f<d){d=f;var R=xa.closest;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var V=0,Xa=b.count;V<Xa;){var S=V++;if(null!=b.local_vertices[S]){if(null==b._vertices[S]){var ca=b._vertices,Z=new A(0,0);ca[S]=Z}var nb=b.local_vertices[S].x,da=b.local_vertices[S].y;null==da&&(da=0);null==nb&&(nb=0);var aa=
b.transform.get_local_to_world_matrix(),ka=nb,ia=da,ra=1,la=aa.m00*ka+aa.m10*ia+aa.m20*ra,ma=aa.m01*ka+aa.m11*ia+aa.m21*ra,na=la,jb=ma,db=b._vertices[S];db.x=na;db.y=jb}}for(var qa=0,Wa=b.count;qa<Wa;){var Oa=qa++,va=b._vertices[(Oa+1)%b.count],pa=va.x,oa=va.y,ua=b._vertices[Oa],mb=pa-ua.x,ya=oa-ua.y;pa=mb;oa=ya;var Ka=-oa;oa=pa;pa=Ka;if(null==b._normals[Oa]){var Ba=b._normals,Fb=new A(pa,oa);Ba[Oa]=Fb}else{var wa=b._normals[Oa];wa.x=pa;wa.y=oa}var Da=b._normals[Oa],Na=Da,Aa=Da,sa=Aa,Fa=sa.x*sa.x+
sa.y*sa.y,Ia=0==Fa?1:Math.sqrt(Fa),Ca=Aa.x/Ia,Ma=Aa.y/Ia,kb=Ca,Qa=Ma;Na.x=kb;Na.y=Qa}}var Va=b._vertices[l].x;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var Pa=0,Ua=b.count;Pa<Ua;){var za=Pa++;if(null!=b.local_vertices[za]){if(null==b._vertices[za]){var Ya=b._vertices,X=new A(0,0);Ya[za]=X}var Ja=b.local_vertices[za].x,Ha=b.local_vertices[za].y;null==Ha&&(Ha=0);null==Ja&&(Ja=0);var Ea=b.transform.get_local_to_world_matrix(),bb=Ja,ab=Ha,$a=1,eb=Ea.m00*
bb+Ea.m10*ab+Ea.m20*$a,fb=Ea.m01*bb+Ea.m11*ab+Ea.m21*$a,ib=eb,gb=fb,lb=b._vertices[za];lb.x=ib;lb.y=gb}}for(var Za=0,hb=b.count;Za<hb;){var Lb=Za++,wb=b._vertices[(Lb+1)%b.count],sb=wb.x,Mb=wb.y,Ab=b._vertices[Lb],Db=sb-Ab.x,kc=Mb-Ab.y;sb=Db;Mb=kc;var Ib=-Mb;Mb=sb;sb=Ib;if(null==b._normals[Lb]){var Pb=b._normals,Kb=new A(sb,Mb);Pb[Lb]=Kb}else{var tb=b._normals[Lb];tb.x=sb;tb.y=Mb}var Gb=b._normals[Lb],xb=Gb,Eb=Gb,yb=Eb,Jb=yb.x*yb.x+yb.y*yb.y,Nb=0==Jb?1:Math.sqrt(Jb),oc=Eb.x/Nb,Wb=Eb.y/Nb,Rb=oc,Qb=
Wb;xb.x=Rb;xb.y=Qb}}var Tb=b._vertices[l].y;R.x=Va;R.y=Tb}}P=xa.closest;T=P.x-m;Y=P.y-k;N=T*T+Y*Y;L=0==N?1:Math.sqrt(N);var zb=T/L,Bb=Y/L,Cb=0;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();p=0;for(r=b.count;p<r;)l=p++,null!=b.local_vertices[l]&&(null==b._vertices[l]&&(q=b._vertices,u=new A(0,0),q[l]=u),I=b.local_vertices[l].x,U=b.local_vertices[l].y,null==U&&(U=0),null==I&&(I=0),P=b.transform.get_local_to_world_matrix(),x=I,Ra=U,M=1,ja=P.m00*x+P.m10*Ra+
P.m20*M,Sa=P.m01*x+P.m11*Ra+P.m21*M,Ta=ja,D=Sa,ta=b._vertices[l],ta.x=Ta,ta.y=D);p=0;for(r=b.count;p<r;)l=p++,ta=b._vertices[(l+1)%b.count],x=ta.x,Ra=ta.y,H=b._vertices[l],pb=x-H.x,G=Ra-H.y,x=pb,Ra=G,I=-Ra,Ra=x,x=I,null==b._normals[l]?(q=b._normals,u=new A(x,Ra),q[l]=u):(P=b._normals[l],P.x=x,P.y=Ra),La=rb=K=ha=b._normals[l],N=La.x*La.x+La.y*La.y,L=0==N?1:Math.sqrt(N),qb=rb.x/L,W=rb.y/L,ea=qb,Q=W,K.x=ea,K.y=Q}H=b._vertices[0];var ub=zb*H.x+Bb*H.y,Hb=ub;p=1;for(r=b.count;p<r;){var Mc=p++;if(b.dirty_vertices){for(b.dirty_vertices=
!1;b._vertices.length>b.count;)b._vertices.pop();C=0;for(z=b.count;C<z;)l=C++,null!=b.local_vertices[l]&&(null==b._vertices[l]&&(q=b._vertices,u=new A(0,0),q[l]=u),I=b.local_vertices[l].x,U=b.local_vertices[l].y,null==U&&(U=0),null==I&&(I=0),P=b.transform.get_local_to_world_matrix(),x=I,Ra=U,M=1,ja=P.m00*x+P.m10*Ra+P.m20*M,Sa=P.m01*x+P.m11*Ra+P.m21*M,Ta=ja,D=Sa,ta=b._vertices[l],ta.x=Ta,ta.y=D);fa=0;for(v=b.count;fa<v;)w=fa++,ha=b._vertices[(w+1)%b.count],F=ha.x,y=ha.y,H=b._vertices[w],pb=F-H.x,G=
y-H.y,F=pb,y=G,E=-y,y=F,F=E,null==b._normals[w]?(ba=b._normals,cb=new A(F,y),ba[w]=cb):(J=b._normals[w],J.x=F,J.y=y),La=rb=K=Ga=b._normals[w],N=La.x*La.x+La.y*La.y,L=0==N?1:Math.sqrt(N),qb=rb.x/L,W=rb.y/L,ea=qb,Q=W,K.x=ea,K.y=Q}ob=b._vertices[Mc];Cb=zb*ob.x+Bb*ob.y;Cb<ub&&(ub=Cb);Cb>Hb&&(Hb=Cb)}var Sb=t,ac=-t;pb=-m;G=-k;var Ub=zb*pb+Bb*G;ub+=Ub;Hb+=Ub;var cc=ub-Sb,hc=ac-Hb;if(0<cc||0<hc)return null;var Ob=-(Sb-ub);c&&(Ob*=-1);I=zb;U=Bb;e=Ac.pool.get();e.sa=null;e.sb=null;p=e.contact_count=0;for(r=
e.contacts;p<r.length;){var fd=r[p];++p;fd.x=0;fd.y=0}e.overlap=Ob;ta=e.normal;ta.x=I;ta.y=U;e.pooled=!1;var vb=e,fc=Math.abs(Ob);p=0;for(r=b.count;p<r;){l=p++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();C=0;for(z=b.count;C<z;)w=C++,null!=b.local_vertices[w]&&(null==b._vertices[w]&&(q=b._vertices,u=new A(0,0),q[w]=u),I=b.local_vertices[w].x,U=b.local_vertices[w].y,null==U&&(U=0),null==I&&(I=0),P=b.transform.get_local_to_world_matrix(),x=I,Ra=U,M=1,ja=
P.m00*x+P.m10*Ra+P.m20*M,Sa=P.m01*x+P.m11*Ra+P.m21*M,Ta=ja,D=Sa,ta=b._vertices[w],ta.x=Ta,ta.y=D);fa=0;for(v=b.count;fa<v;)B=fa++,ha=b._vertices[(B+1)%b.count],F=ha.x,y=ha.y,H=b._vertices[B],pb=F-H.x,G=y-H.y,F=pb,y=G,E=-y,y=F,F=E,null==b._normals[B]?(ba=b._normals,cb=new A(F,y),ba[B]=cb):(J=b._normals[B],J.x=F,J.y=y),La=rb=K=Ga=b._normals[B],N=La.x*La.x+La.y*La.y,L=0==N?1:Math.sqrt(N),qb=rb.x/L,W=rb.y/L,ea=qb,Q=W,K.x=ea,K.y=Q}nb=b._normals[l].x;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>
b.count;)b._vertices.pop();V=0;for(Xa=b.count;V<Xa;)S=V++,null!=b.local_vertices[S]&&(null==b._vertices[S]&&(ca=b._vertices,Z=new A(0,0),ca[S]=Z),Ka=b.local_vertices[S].x,da=b.local_vertices[S].y,null==da&&(da=0),null==Ka&&(Ka=0),aa=b.transform.get_local_to_world_matrix(),ka=Ka,ia=da,ra=1,la=aa.m00*ka+aa.m10*ia+aa.m20*ra,ma=aa.m01*ka+aa.m11*ia+aa.m21*ra,na=la,jb=ma,R=b._vertices[S],R.x=na,R.y=jb);qa=0;for(Wa=b.count;qa<Wa;)Oa=qa++,db=b._vertices[(Oa+1)%b.count],pa=db.x,oa=db.y,ob=b._vertices[Oa],
mb=pa-ob.x,ya=oa-ob.y,pa=mb,oa=ya,Va=-oa,oa=pa,pa=Va,null==b._normals[Oa]?(Ba=b._normals,Fb=new A(pa,oa),Ba[Oa]=Fb):(wa=b._normals[Oa],wa.x=pa,wa.y=oa),sa=Aa=Na=va=b._normals[Oa],Fa=sa.x*sa.x+sa.y*sa.y,Ia=0==Fa?1:Math.sqrt(Fa),Ca=Aa.x/Ia,Ma=Aa.y/Ia,kb=Ca,Qa=Ma,Na.x=kb,Na.y=Qa}zb=nb;Bb=b._normals[l].y;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();Pa=0;for(Ua=b.count;Pa<Ua;)za=Pa++,null!=b.local_vertices[za]&&(null==b._vertices[za]&&(Ya=b._vertices,X=new A(0,
0),Ya[za]=X),Ja=b.local_vertices[za].x,Ha=b.local_vertices[za].y,null==Ha&&(Ha=0),null==Ja&&(Ja=0),Ea=b.transform.get_local_to_world_matrix(),bb=Ja,ab=Ha,$a=1,eb=Ea.m00*bb+Ea.m10*ab+Ea.m20*$a,fb=Ea.m01*bb+Ea.m11*ab+Ea.m21*$a,ib=eb,gb=fb,Da=b._vertices[za],Da.x=ib,Da.y=gb);Za=0;for(hb=b.count;Za<hb;)Lb=Za++,lb=b._vertices[(Lb+1)%b.count],sb=lb.x,Mb=lb.y,ua=b._vertices[Lb],Db=sb-ua.x,kc=Mb-ua.y,sb=Db,Mb=kc,Ib=-Mb,Mb=sb,sb=Ib,null==b._normals[Lb]?(Pb=b._normals,Kb=new A(sb,Mb),Pb[Lb]=Kb):(tb=b._normals[Lb],
tb.x=sb,tb.y=Mb),yb=Eb=xb=wb=b._normals[Lb],Jb=yb.x*yb.x+yb.y*yb.y,Nb=0==Jb?1:Math.sqrt(Jb),oc=Eb.x/Nb,Wb=Eb.y/Nb,Rb=oc,Qb=Wb,xb.x=Rb,xb.y=Qb}Ab=b._vertices[0];Hb=ub=zb*Ab.x+Bb*Ab.y;for(var Vb=1,rc=b.count;Vb<rc;){Mc=Vb++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var mc=0,nc=b.count;mc<nc;){var Xb=mc++;if(null!=b.local_vertices[Xb]){if(null==b._vertices[Xb]){var qc=b._vertices,gc=new A(0,0);qc[Xb]=gc}var lc=b.local_vertices[Xb].x;Tb=b.local_vertices[Xb].y;
null==Tb&&(Tb=0);null==lc&&(lc=0);var Zb=b.transform.get_local_to_world_matrix(),Tc=lc,$b=Tb,Fc=Zb.m00*Tc+Zb.m10*$b+1*Zb.m20,Ic=Zb.m01*Tc+Zb.m11*$b+1*Zb.m21;Gb=b._vertices[Xb];Gb.x=Fc;Gb.y=Ic}}for(var dc=0,tc=b.count;dc<tc;){var ic=dc++,zc=b._vertices[(ic+1)%b.count],ec=zc.x,jc=zc.y,Hc=b._vertices[ic],Oc=jc-Hc.y;ec-=Hc.x;jc=Oc;var Jc=-jc;jc=ec;ec=Jc;if(null==b._normals[ic]){var Kc=b._normals,Pc=new A(ec,jc);Kc[ic]=Pc}else{var vc=b._normals[ic];vc.x=ec;vc.y=jc}var wc=b._normals[ic],xc=wc,sc=wc,uc=
sc,pc=uc.x*uc.x+uc.y*uc.y,Dc=0==pc?1:Math.sqrt(pc),Nc=sc.y/Dc;xc.x=sc.x/Dc;xc.y=Nc}}var Ec=b._vertices[Mc];Cb=zb*Ec.x+Bb*Ec.y;Cb<ub&&(ub=Cb);Cb>Hb&&(Hb=Cb)}Sb=t;ac=-t;Ub=zb*-m+Bb*-k;ub+=Ub;Hb+=Ub;cc=ub-Sb;hc=ac-Hb;if(0<cc||0<hc)return vb.put(),null;Ob=-(Sb-ub);c&&(Ob*=-1);if(Math.abs(Ob)<fc){var Rc=vb.normal;Rc.x=zb;Rc.y=Bb;vb.overlap=Ob;fc=Math.abs(Ob)}}vb.sa=c?b:a;vb.sb=c?a:b;vb.overlap=Math.abs(vb.overlap);c&&(ta=vb.normal,ta.x=-ta.x,ta.y=-ta.y);return vb};xa.check_polygons=function(a,b,c){null==
c&&(c=!1);for(var f=0,d=0,g=0,m=0,k=0,e=0,h=0,t=1073741823,p=null,r=0,l=0,C=0,z=a.count;C<z;){var w=C++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var q=0,u=a.count;q<u;){var I=q++;if(null!=a.local_vertices[I]){if(null==a._vertices[I]){var P=a._vertices,U=new A(0,0);P[I]=U}var x=a.local_vertices[I].x,Ra=a.local_vertices[I].y;null==Ra&&(Ra=0);null==x&&(x=0);var M=a.transform.get_local_to_world_matrix(),D=x,Sa=Ra,Ta=M.m01*D+M.m11*Sa+1*M.m21,fa=a._vertices[I];
fa.x=M.m00*D+M.m10*Sa+1*M.m20;fa.y=Ta}}for(var ta=0,B=a.count;ta<B;){var v=ta++,F=a._vertices[(v+1)%a.count],y=F.x,ha=F.y,H=a._vertices[v],pb=ha-H.y;y-=H.x;ha=pb;var G=-ha;ha=y;y=G;if(null==a._normals[v]){var E=a._normals,ba=new A(y,ha);E[v]=ba}else{var J=a._normals[v];J.x=y;J.y=ha}var cb=a._normals[v],K=cb,La=cb,rb=La,Ga=rb.x*rb.x+rb.y*rb.y,N=0==Ga?1:Math.sqrt(Ga),L=La.y/N;K.x=La.x/N;K.y=L}}var qb=a._normals[w].x;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();
for(var W=0,ea=a.count;W<ea;){var Q=W++;if(null!=a.local_vertices[Q]){if(null==a._vertices[Q]){var ob=a._vertices,T=new A(0,0);ob[Q]=T}var Y=a.local_vertices[Q].x,S=a.local_vertices[Q].y;null==S&&(S=0);null==Y&&(Y=0);var R=a.transform.get_local_to_world_matrix(),V=Y,Xa=S,aa=R.m01*V+R.m11*Xa+1*R.m21,ca=a._vertices[Q];ca.x=R.m00*V+R.m10*Xa+1*R.m20;ca.y=aa}}for(var da=0,nb=a.count;da<nb;){var Z=da++,ka=a._vertices[(Z+1)%a.count],ia=ka.x,ra=ka.y,la=a._vertices[Z],ma=ra-la.y;ia-=la.x;ra=ma;var na=-ra;
ra=ia;ia=na;if(null==a._normals[Z]){var Oa=a._normals,pa=new A(ia,ra);Oa[Z]=pa}else{var oa=a._normals[Z];oa.x=ia;oa.y=ra}var jb=a._normals[Z],db=jb,qa=jb,Wa=qa,ua=Wa.x*Wa.x+Wa.y*Wa.y,va=0==ua?1:Math.sqrt(ua),xa=qa.y/va;db.x=qa.x/va;db.y=xa}}r=qb;l=a._normals[w].y;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var Ka=0,mb=a.count;Ka<mb;){var sa=Ka++;if(null!=a.local_vertices[sa]){if(null==a._vertices[sa]){var ya=a._vertices,Ba=new A(0,0);ya[sa]=Ba}var za=
a.local_vertices[sa].x,Aa=a.local_vertices[sa].y;null==Aa&&(Aa=0);null==za&&(za=0);var wa=a.transform.get_local_to_world_matrix(),Da=za,Na=Aa,Fb=wa.m01*Da+wa.m11*Na+1*wa.m21,Ea=a._vertices[sa];Ea.x=wa.m00*Da+wa.m10*Na+1*wa.m20;Ea.y=Fb}}for(var Fa=0,Ia=a.count;Fa<Ia;){var Ca=Fa++,Ma=a._vertices[(Ca+1)%a.count],Ja=Ma.x,Ha=Ma.y,kb=a._vertices[Ca],Pa=Ha-kb.y;Ja-=kb.x;Ha=Pa;var Qa=-Ha;Ha=Ja;Ja=Qa;if(null==a._normals[Ca]){var X=a._normals,Va=new A(Ja,Ha);X[Ca]=Va}else{var Ua=a._normals[Ca];Ua.x=Ja;Ua.y=
Ha}var Ya=a._normals[Ca],bb=Ya,ab=Ya,$a=ab,eb=$a.x*$a.x+$a.y*$a.y,fb=0==eb?1:Math.sqrt(eb),ib=ab.y/fb;bb.x=ab.x/fb;bb.y=ib}}var gb=a._vertices[0];k=m=r*gb.x+l*gb.y;for(var lb=1,Za=a.count;lb<Za;){var hb=lb++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var ub=0,yb=a.count;ub<yb;){var sb=ub++;if(null!=a.local_vertices[sb]){if(null==a._vertices[sb]){var Ab=a._vertices,Cb=new A(0,0);Ab[sb]=Cb}var wb=a.local_vertices[sb].x,zb=a.local_vertices[sb].y;null==
zb&&(zb=0);null==wb&&(wb=0);var Ib=a.transform.get_local_to_world_matrix(),Bb=wb,Db=zb,Hb=Ib.m01*Bb+Ib.m11*Db+1*Ib.m21,Pb=a._vertices[sb];Pb.x=Ib.m00*Bb+Ib.m10*Db+1*Ib.m20;Pb.y=Hb}}for(var Eb=0,Kb=a.count;Eb<Kb;){var tb=Eb++,Gb=a._vertices[(tb+1)%a.count],xb=Gb.x,vb=Gb.y,Jb=a._vertices[tb],Nb=vb-Jb.y;xb-=Jb.x;vb=Nb;var Ob=-vb;vb=xb;xb=Ob;if(null==a._normals[tb]){var Tb=a._normals,oc=new A(xb,vb);Tb[tb]=oc}else{var Sb=a._normals[tb];Sb.x=xb;Sb.y=vb}var Ub=a._normals[tb],Wb=Ub,Rb=Ub,Qb=Rb,Xb=Qb.x*Qb.x+
Qb.y*Qb.y,Zb=0==Xb?1:Math.sqrt(Xb),Mc=Rb.y/Zb;Wb.x=Rb.x/Zb;Wb.y=Mc}}var ac=a._vertices[hb];g=r*ac.x+l*ac.y;g<m&&(m=g);g>k&&(k=g)}if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var cc=0,hc=b.count;cc<hc;){var ic=cc++;if(null!=b.local_vertices[ic]){if(null==b._vertices[ic]){var jc=b._vertices,fd=new A(0,0);jc[ic]=fd}var ec=b.local_vertices[ic].x,fc=b.local_vertices[ic].y;null==fc&&(fc=0);null==ec&&(ec=0);var Vb=b.transform.get_local_to_world_matrix(),
lc=ec,mc=fc,rc=Vb.m01*lc+Vb.m11*mc+1*Vb.m21,nc=b._vertices[ic];nc.x=Vb.m00*lc+Vb.m10*mc+1*Vb.m20;nc.y=rc}}for(var Tc=0,uc=b.count;Tc<uc;){var $b=Tc++,qc=b._vertices[($b+1)%b.count],gc=qc.x,dc=qc.y,sc=b._vertices[$b],zc=dc-sc.y;gc-=sc.x;dc=zc;var Fc=-dc;dc=gc;gc=Fc;if(null==b._normals[$b]){var Hc=b._normals,Ic=new A(gc,dc);Hc[$b]=Ic}else{var vc=b._normals[$b];vc.x=gc;vc.y=dc}var wc=b._normals[$b],xc=wc,tc=wc,pc=tc,Dc=pc.x*pc.x+pc.y*pc.y,Ec=0==Dc?1:Math.sqrt(Dc),Oc=tc.y/Ec;xc.x=tc.x/Ec;xc.y=Oc}}var Jc=
b._vertices[0];h=e=r*Jc.x+l*Jc.y;for(var Kc=1,Pc=b.count;Kc<Pc;){var Rc=Kc++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var Nc=0,ed=b.count;Nc<ed;){var yc=Nc++;if(null!=b.local_vertices[yc]){if(null==b._vertices[yc]){var Bd=b._vertices,gd=new A(0,0);Bd[yc]=gd}var Uc=b.local_vertices[yc].x,Vc=b.local_vertices[yc].y;null==Vc&&(Vc=0);null==Uc&&(Uc=0);var Cc=b.transform.get_local_to_world_matrix(),Xc=Uc,Yc=Vc,kd=Cc.m01*Xc+Cc.m11*Yc+1*Cc.m21,$c=b._vertices[yc];
$c.x=Cc.m00*Xc+Cc.m10*Yc+1*Cc.m20;$c.y=kd}}for(var ad=0,ld=b.count;ad<ld;){var Gc=ad++,bd=b._vertices[(Gc+1)%b.count],Qc=bd.x,Lc=bd.y,cd=b._vertices[Gc],td=Lc-cd.y;Qc-=cd.x;Lc=td;var ud=-Lc;Lc=Qc;Qc=ud;if(null==b._normals[Gc]){var vd=b._normals,wd=new A(Qc,Lc);vd[Gc]=wd}else{var hd=b._normals[Gc];hd.x=Qc;hd.y=Lc}var id=b._normals[Gc],jd=id,Zc=id,Wc=Zc,md=Wc.x*Wc.x+Wc.y*Wc.y,nd=0==md?1:Math.sqrt(md),xd=Zc.y/nd;jd.x=Zc.x/nd;jd.y=xd}}var od=b._vertices[Rc];g=r*od.x+l*od.y;g<e&&(e=g);g>h&&(h=g)}f=m-h;
d=e-k;if(0<f||0<d)return null;var Sc=-(h-m);c&&(Sc*=-1);if(Math.abs(Sc)<t){if(null==p){var yd=r,zd=l,Ad=Ac.pool.get();Ad.sa=null;Ad.sb=null;for(var dd=Ad.contact_count=0,pd=Ad.contacts;dd<pd.length;){var qd=pd[dd];++dd;qd.x=0;qd.y=0}Ad.overlap=Sc;var rd=Ad.normal;rd.x=yd;rd.y=zd;Ad.pooled=!1;p=Ad}else{p.overlap=Sc;var sd=p.normal;sd.x=r;sd.y=l}t=Math.abs(Sc)}}if(null==p)return null;p.sa=c?b:a;p.sb=c?a:b;c&&(fa=p.normal,fa.x=-fa.x,fa.y=-fa.y);return p};var Oe=z["echo.util.SlopeDirection"]={__ename__:!0,
__constructs__:null,TopLeft:{_hx_name:"TopLeft",_hx_index:0,__enum__:"echo.util.SlopeDirection",toString:e},TopRight:{_hx_name:"TopRight",_hx_index:1,__enum__:"echo.util.SlopeDirection",toString:e},BottomLeft:{_hx_name:"BottomLeft",_hx_index:2,__enum__:"echo.util.SlopeDirection",toString:e},BottomRight:{_hx_name:"BottomRight",_hx_index:3,__enum__:"echo.util.SlopeDirection",toString:e}};Oe.__constructs__=[Oe.TopLeft,Oe.TopRight,Oe.BottomLeft,Oe.BottomRight];var Df=z["echo.util.SlopeAngle"]={__ename__:!0,
__constructs__:null,Gentle:{_hx_name:"Gentle",_hx_index:0,__enum__:"echo.util.SlopeAngle",toString:e},Sharp:{_hx_name:"Sharp",_hx_index:1,__enum__:"echo.util.SlopeAngle",toString:e}};Df.__constructs__=[Df.Gentle,Df.Sharp];var Ef=z["echo.util.SlopeSize"]={__ename__:!0,__constructs__:null,Thick:{_hx_name:"Thick",_hx_index:0,__enum__:"echo.util.SlopeSize",toString:e},Thin:{_hx_name:"Thin",_hx_index:1,__enum__:"echo.util.SlopeSize",toString:e}};Ef.__constructs__=[Ef.Thick,Ef.Thin];var tf=function(){};
l["echo.util.TileMap"]=tf;tf.__name__="echo.util.TileMap";tf.generate=function(a,b,c,f,d,g,m,k,e,h,t){null==k&&(k=1);null==m&&(m=0);null==g&&(g=0);var n=function(a){if(null==e||0==e.length)return null;for(var b=0;b<e.length;){var c=e[b];++b;if(c.index==a)return c}return null};d=function(a,f,d,k){k[f][a]=-1;k=null;if(null!=d.custom_shape)k=Ea.get(d.custom_shape);else if(null!=d.slope_direction)switch(d.slope_direction._hx_index){case 0:if(null!=d.slope_shape)switch(d.slope_shape.angle._hx_index){case 0:switch(d.slope_shape.size._hx_index){case 0:var e=
0,h=0,n=0;k=new A(0,.5*c);d=new A(b,0);var p=new A(b,c),r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();var l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=
p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(b,.5*c);d=new A(b,c);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();
r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 1:switch(d.slope_shape.size._hx_index){case 0:n=
h=e=0;k=new A(.5*b,0);d=new A(b,0);p=new A(b,c);r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;
d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(b,0);d=new A(b,c);p=new A(.5*b,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=
e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}}else{n=h=e=0;k=new A(b,
0);d=new A(b,c);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;
d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 1:if(null!=d.slope_shape)switch(d.slope_shape.angle._hx_index){case 0:switch(d.slope_shape.size._hx_index){case 0:n=h=e=0;k=new A(0,0);d=new A(b,.5*c);p=new A(b,c);r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==
n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,
k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(0,.5*c);d=new A(b,c);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=
n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 1:switch(d.slope_shape.size._hx_index){case 0:n=h=e=0;k=new A(0,0);d=new A(.5*b,0);p=new A(b,c);r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;
p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<
h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(0,0);d=new A(.5*b,c);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;
r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}}else{n=h=e=0;k=new A(0,0);d=new A(b,c);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&
(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,
k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 2:if(null!=d.slope_shape)switch(d.slope_shape.angle._hx_index){case 0:switch(d.slope_shape.size._hx_index){case 0:n=h=e=0;k=new A(0,0);d=new A(b,0);p=new A(b,c);r=new A(0,.5*c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();
r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(0,0);d=new A(b,0);p=new A(b,.5*
c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;
if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 1:switch(d.slope_shape.size._hx_index){case 0:n=h=e=0;k=new A(0,0);d=new A(b,0);p=new A(b,c);r=new A(.5*b,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;
r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(.5*b,0);
d=new A(b,0);p=new A(b,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=
null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}}else{n=h=e=0;k=new A(0,0);d=new A(b,0);p=new A(b,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=
h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 3:if(null!=d.slope_shape)switch(d.slope_shape.angle._hx_index){case 0:switch(d.slope_shape.size._hx_index){case 0:n=
h=e=0;k=new A(0,0);d=new A(b,0);p=new A(b,.5*c);r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;
d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(0,0);d=new A(b,0);p=new A(0,.5*c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=
e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}break;case 1:switch(d.slope_shape.size._hx_index){case 0:n=
h=e=0;k=new A(0,0);d=new A(b,0);p=new A(.5*b,c);r=new A(0,c);k=[k,d,p,r];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;
d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d;break;case 1:n=h=e=0;k=new A(0,0);d=new A(.5*b,0);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=
e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}}else{n=h=e=0;k=new A(0,
0);d=new A(b,0);p=new A(0,c);k=[k,d,p];null==n&&(n=0);null==h&&(h=0);null==e&&(e=0);d=oa.pool.get();l=n;p=n=1;null==p&&(p=1);null==n&&(n=1);null==l&&(l=0);null==h&&(h=0);null==e&&(e=0);r=d.transform;r.dirty||r.set_dirty();r.local_x=e;r=d.transform;r.dirty||r.set_dirty();r.local_y=h;r=d.transform;h=Math.PI/180*l;r.dirty||r.set_dirty();r.local_radians=h;r=d.transform;r.dirty||r.set_dirty();r.local_scale_x=n;r=d.transform;r.dirty||r.set_dirty();r.local_scale_y=p;h=null;d.local_vertices=null==k?[]:k;
d.count=null!=h&&0<=h?h:d.local_vertices.length;if(h>d.local_vertices.length)for(n=d.local_vertices.length;n<h;)e=n++,p=d.local_vertices,k=new A(0,0),p[e]=k;d.dirty_vertices=!0;d.dirty_bounds=!0;d.pooled=!1;k=d}}return new gb({x:a*b+g,y:f*c+m,mass:0,material:t,shape_instance:k})};for(var r=function(a,d,f){f[d][a]=-1;for(var e=1,r=a+1,p=f[d].length;r<p;){var t=r++,l=f[d][t];if(l>=k&&null==n(l)&&!(null!=h&&-1<h.indexOf(l)))++e,f[d][t]=-1;else break}t=d+1;l=1;for(var C=!1;t<f.length-1;)if(C)t=f.length;
else{r=0;for(p=e;r<p;){var z=r++;z=f[t][z+a];if(null!=n(z)||z<k||null!=h&&-1<h.indexOf(z))C=!0}if(!C){r=0;for(p=e;r<p;)z=r++,f[t][z+a]=-1;++l}++t}return new gb({x:a*b+b*e*.5+g,y:d*c+c*l*.5+m,mass:0,shape:{type:0,width:b*e,height:c*l}})},l=[],C=[],z=0,w=a.length;z<w;){var q=z++,O=q%f,u=Math.floor(q/f);null==C[u]&&(C[u]=[]);C[u][O]=a[q]}z=0;for(w=C.length;z<w;)for(u=z++,a=0,f=C[u].length;a<f;)if(O=a++,q=C[u][O],q>=k&&!(null!=h&&-1<h.indexOf(q))){var I=n(q);O=null==I?r(O,u,C):d(O,u,I,C);O.data.tile_index=
null==I?k:q;l.push(O)}return l};var vd=function(a,b,c,f,d){null==d&&(d=1);null==f&&(f=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.dirty=this.inverse_dirty=this.coordinates_dirty=!1;this.local_to_world_matrix=new Ne(1,0,0,0,1,0,0,0,1);this.children=[];this._scale_x=this._scale_y=1;this._x=this._y=this._radians=0;this.on_dirty=null;this.dirty||this.set_dirty();this.local_x=a;this.dirty||this.set_dirty();this.local_y=b;a=Math.PI/180*c;this.dirty||this.set_dirty();this.local_radians=a;this.dirty||
this.set_dirty();this.local_scale_x=f;this.dirty||this.set_dirty();this.local_scale_y=d};l["echo.util.Transform"]=vd;vd.__name__="echo.util.Transform";vd.__interfaces__=[ud];vd.prototype={set_parent:function(a,b){null!=this.parent&&F.remove(this.parent.children,this);this.parent=a;null!=a&&this.parent.children.push(this);this.set_dirty()},get_local_to_world_matrix:function(){if(this.dirty){if(null==this.parent){var a=this.local_to_world_matrix,b=Math.sin(this.local_radians),c=Math.cos(this.local_radians),
f=c*this.local_scale_x,d=-b*this.local_scale_y,g=this.local_x;b*=this.local_scale_x;var e=c*this.local_scale_y,k=this.local_y;a.m00=f;a.m10=d;a.m20=g;a.m01=b;a.m11=e;a.m21=k;a.m02=0;a.m12=0;a.m22=1}else{a=this.local_to_world_matrix;var h=this.parent.get_local_to_world_matrix();b=Math.sin(this.local_radians);c=Math.cos(this.local_radians);f=c*this.local_scale_x;d=-b*this.local_scale_y;g=this.local_x;b*=this.local_scale_x;e=c*this.local_scale_y;k=this.local_y;c=h.m00*d+h.m10*e+0*h.m20;var n=h.m00*g+
h.m10*k+1*h.m20,r=h.m01*f+h.m11*b+0*h.m21,p=h.m01*d+h.m11*e+0*h.m21,t=h.m01*g+h.m11*k+1*h.m21,l=h.m02*f+h.m12*b+0*h.m22;d=h.m02*d+h.m12*e+0*h.m22;g=h.m02*g+h.m12*k+1*h.m22;a.m00=h.m00*f+h.m10*b+0*h.m20;a.m10=c;a.m20=n;a.m01=r;a.m11=p;a.m21=t;a.m02=l;a.m12=d;a.m22=g}this.dirty=!1}return this.local_to_world_matrix},sync:function(){if(this.coordinates_dirty){var a=this.get_local_to_world_matrix();if(null==this.parent)this._x=this.local_x,this._y=this.local_y,this._scale_x=this.local_scale_x,this._scale_y=
this.local_scale_y,this._radians=this.local_radians;else{var b=a.m00,c=a.m01,f=a.m10,d=a.m11;this._x=a.m20;this._y=a.m21;this._scale_x=Math.sqrt(b*b+c*c);this._scale_y=Math.sqrt(f*f+d*d);this._radians=180/Math.PI*Math.atan2(-f/this._scale_y,b/this._scale_x)}this.coordinates_dirty=!1}},set_dirty:function(){this.dirty=this.inverse_dirty=this.coordinates_dirty=!0;for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.set_dirty()}if(null!=this.on_dirty)this.on_dirty(this)},__class__:vd};var fc=z["haxe.StackItem"]=
{__ename__:!0,__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:e},Module:(h=function(a){return{_hx_index:1,m:a,__enum__:"haxe.StackItem",toString:e}},h._hx_name="Module",h.__params__=["m"],h),FilePos:(h=function(a,b,c,f){return{_hx_index:2,s:a,file:b,line:c,column:f,__enum__:"haxe.StackItem",toString:e}},h._hx_name="FilePos",h.__params__=["s","file","line","column"],h),Method:(h=function(a,b){return{_hx_index:3,classname:a,method:b,__enum__:"haxe.StackItem",
toString:e}},h._hx_name="Method",h.__params__=["classname","method"],h),LocalFunction:(h=function(a){return{_hx_index:4,v:a,__enum__:"haxe.StackItem",toString:e}},h._hx_name="LocalFunction",h.__params__=["v"],h)};fc.__constructs__=[fc.CFunction,fc.Module,fc.FilePos,fc.Method,fc.LocalFunction];var yc={callStack:function(){return na.toHaxe(na.callStack())},exceptionStack:function(a){null==a&&(a=!1);var b=na.toHaxe(na.exceptionStack());return a?b:yc.subtract(b,yc.callStack())},toString:function(a){for(var b=
new gd,c=0;c<a.length;){var f=a[c];++c;b.b+="\nCalled from ";yc.itemToString(b,f)}return b.b},subtract:function(a,b){for(var c=-1,f=-1;++f<a.length;){for(var d=0,g=b.length;d<g;){var e=d++;if(yc.equalItems(a[f],b[e])){if(0>c&&(c=f),++f,f>=a.length)break}else c=-1}if(0<=c)break}return 0<=c?a.slice(0,c):a},equalItems:function(a,b){if(null==a)return null==b?!0:!1;switch(a._hx_index){case 0:return null==b?!1:0==b._hx_index?!0:!1;case 1:return null==b?!1:1==b._hx_index?a.m==b.m:!1;case 2:if(null==b)return!1;
if(2==b._hx_index){var c=b.s,f=b.line,d=b.column,g=a.column,e=a.line,k=a.s;return a.file==b.file&&e==f&&g==d?yc.equalItems(k,c):!1}return!1;case 3:return null==b?!1:3==b._hx_index?(c=b.method,f=a.method,a.classname==b.classname?f==c:!1):!1;case 4:return null==b?!1:4==b._hx_index?a.v==b.v:!1}},itemToString:function(a,b){switch(b._hx_index){case 0:a.b+="a C function";break;case 1:b=b.m;a.b+="module ";a.b+=null==b?"null":""+b;break;case 2:var c=b.s,f=b.file,d=b.line;b=b.column;null!=c&&(yc.itemToString(a,
c),a.b+=" (");a.b+=null==f?"null":""+f;a.b+=" line ";a.b+=null==d?"null":""+d;null!=b&&(a.b+=" column ",a.b+=null==b?"null":""+b);null!=c&&(a.b+=")");break;case 3:c=b.classname;b=b.method;a.b+=J.string(null==c?"<unknown>":c);a.b+=".";a.b+=null==b?"null":""+b;break;case 4:b=b.v,a.b+="local function #",a.b+=null==b?"null":""+b}}},Vc=function(){};l["haxe.IMap"]=Vc;Vc.__name__="haxe.IMap";Vc.__isInterface__=!0;Vc.prototype={__class__:Vc};var D=function(a,b,c){Error.call(this,a);this.message=a;this.__previousException=
b;this.__nativeException=null!=c?c:this;this.__skipStack=0;a=Error.prepareStackTrace;Error.prepareStackTrace=function(a){return a.stack};if(c instanceof Error)this.stack=c.stack;else{c=null;if(Error.captureStackTrace)Error.captureStackTrace(this,D),c=this;else if(c=Error(),"undefined"==typeof c.stack){try{throw c;}catch(f){}this.__skipStack++}this.stack=c.stack}Error.prepareStackTrace=a};l["haxe.Exception"]=D;D.__name__="haxe.Exception";D.caught=function(a){return a instanceof D?a:a instanceof Error?
new D(a.message,null,a):new id(a,null,a)};D.thrown=function(a){if(a instanceof D)return a.get_native();if(a instanceof Error)return a;a=new id(a);a.__skipStack++;return a};D.__super__=Error;D.prototype=x(Error.prototype,{unwrap:function(){return this.__nativeException},toString:function(){return this.get_message()},__shiftStack:function(){this.__skipStack++},get_message:function(){return this.message},get_native:function(){return this.__nativeException},get_stack:function(){var a=this.__exceptionStack;
null==a&&(a=na.toHaxe(na.normalize(this.stack),this.__skipStack),this.setProperty("__exceptionStack",a));return a},setProperty:function(a,b){try{Object.defineProperty(this,a,{value:b})}catch(c){this[a]=b}},__class__:D,__properties__:{get_native:"get_native",get_stack:"get_stack",get_message:"get_message"}});var ka=function(){};l["haxe.Log"]=ka;ka.__name__="haxe.Log";ka.formatOutput=function(a,b){var c=J.string(a);if(null==b)return c;var f=b.fileName+":"+b.lineNumber;if(null!=b.customParams){var d=
0;for(b=b.customParams;d<b.length;)a=b[d],++d,c+=", "+J.string(a)}return f+": "+c};ka.trace=function(a,b){a=ka.formatOutput(a,b);"undefined"!=typeof console&&null!=console.log&&console.log(a)};var na=function(){};l["haxe.NativeStackTrace"]=na;na.__name__="haxe.NativeStackTrace";na.saveStack=function(a){na.lastError=a};na.callStack=function(){var a=Error(""),b=na.tryHaxeStack(a);if("undefined"==typeof b){try{throw a;}catch(c){}b=a.stack}return na.normalize(b,2)};na.exceptionStack=function(){return na.normalize(na.tryHaxeStack(na.lastError))};
na.toHaxe=function(a,b){null==b&&(b=0);if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var c=[],f=0,d=a.length;f<d;){var g=f++;if(!(b>g)){var e=a[g];g=e.match(/^    at ([A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);if(null!=g){e=g[1].split(".");"$hxClasses"==e[0]&&e.shift();var k=e.pop(),h=g[2],n=J.parseInt(g[3]);g=J.parseInt(g[4]);c.push(fc.FilePos("Anonymous function"==k?fc.LocalFunction():"Global code"==k?null:fc.Method(e.join("."),k),h,n,g))}else c.push(fc.Module(ya.trim(e)))}}return c}return 0<
b&&Array.isArray(a)?a.slice(b):a};na.tryHaxeStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=na.prepareHxStackTrace;a=a.stack;Error.prepareStackTrace=b;return a};na.prepareHxStackTrace=function(a,b){a=[];for(var c=0;c<b.length;){var f=b[c];++c;null!=na.wrapCallSite&&(f=na.wrapCallSite(f));var d=null,g=f.getFunctionName();if(null!=g){var e=g.lastIndexOf(".");0<=e?(d=g.substring(0,e),g=g.substring(e+1),d=fc.Method(d,g)):d=fc.Method(null,g)}g=f.getFileName();
e=null==g?-1:g.indexOf("file:");null!=na.wrapCallSite&&0<e&&(g=g.substring(e+6));a.push(fc.FilePos(d,g,f.getLineNumber(),f.getColumnNumber()))}return a};na.normalize=function(a,b){null==b&&(b=0);if(Array.isArray(a)&&0<b)return a.slice(b);if("string"==typeof a){switch(a.substring(0,6)){case "Error\n":case "Error:":++b}return na.skipLines(a,b)}return a};na.skipLines=function(a,b,c){null==c&&(c=0);return 0<b?(c=a.indexOf("\n",c),0>c?"":na.skipLines(a,--b,c+1)):a.substring(c)};var uc=function(){};l["haxe.Resource"]=
uc;uc.__name__="haxe.Resource";uc.listNames=function(){for(var a=[],b=0,c=uc.content;b<c.length;){var f=c[b];++b;a.push(f.name)}return a};uc.getBytes=function(a){for(var b=0,c=uc.content;b<c.length;){var f=c[b];++b;if(f.name==a)return null!=f.str?Ia.ofString(f.str):Cc.decode(f.data)}return null};var Qd=function(){};l["haxe._Unserializer.DefaultResolver"]=Qd;Qd.__name__="haxe._Unserializer.DefaultResolver";Qd.prototype={resolveClass:function(a){return l[a]},resolveEnum:function(a){return z[a]},__class__:Qd};
var Jb=function(a){this.buf=a;this.length=this.buf.length;this.pos=0;this.scache=[];this.cache=[];a=Jb.DEFAULT_RESOLVER;null==a&&(a=new Qd,Jb.DEFAULT_RESOLVER=a);this.resolver=a};l["haxe.Unserializer"]=Jb;Jb.__name__="haxe.Unserializer";Jb.initCodes=function(){for(var a=[],b=0,c=Jb.BASE64.length;b<c;){var f=b++;a[Jb.BASE64.charCodeAt(f)]=f}return a};Jb.run=function(a){return(new Jb(a)).unserialize()};Jb.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var f=this.buf.charCodeAt(this.pos);
if(f!=f)break;if(45==f){if(this.pos!=c)break;b=!0}else{if(48>f||57<f)break;a=10*a+(f-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(F.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw D.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw D.thrown("Invalid object key");
var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw D.thrown("Invalid enum format");var c=this.readDigits();if(0==c)return Fa.createEnum(a,b);for(var f=[];0<c--;)f.push(this.unserialize());return Fa.createEnum(a,b,f)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw D.thrown("Class not found "+a);return b;case 66:a=this.unserialize();b=
this.resolver.resolveEnum(a);if(null==b)throw D.thrown("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw D.thrown("Class not found "+a);b=Object.create(b.prototype);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw D.thrown("Invalid custom data");return b;case 77:a=new Bb;this.cache.push(a);for(var c;104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;
case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw D.thrown("Invalid string reference");return this.scache[a];case 97:b=[];for(this.cache.push(b);;){c=this.buf.charCodeAt(this.pos);if(104==c){this.pos++;break}117==c?(this.pos++,a=this.readDigits(),b[b.length+a-1]=null):b.push(this.unserialize())}return b;case 98:a=new aa;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),c=this.unserialize(),a.h[b]=c;this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);
if(null==b)throw D.thrown("Class not found "+a);b=Object.create(b.prototype);this.cache.push(b);this.unserializeObject(b);return b;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();c=this.resolver.resolveEnum(a);if(null==c)throw D.thrown("Enum not found "+a);this.pos++;for(var f=this.readDigits(),d=c.__constructs__,g=Array(d.length),e=0,k=d.length;e<k;)b=e++,g[b]=d[b]._hx_name;b=g[f];if(null==b)throw D.thrown("Unknown enum index "+a+
"@"+f);b=this.unserializeEnum(c,b);this.cache.push(b);return b;case 107:return NaN;case 108:b=new Ub;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 109:return-Infinity;case 110:return null;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 112:return Infinity;case 113:a=new eb;this.cache.push(a);for(c=this.buf.charCodeAt(this.pos++);58==c;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,c=this.buf.charCodeAt(this.pos++);
if(104!=c)throw D.thrown("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw D.thrown("Invalid reference");return this.cache[a];case 115:a=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw D.thrown("Invalid bytes length");f=Jb.CODES;null==f&&(f=Jb.initCodes(),Jb.CODES=f);b=this.pos;d=a&3;g=b+(a-d);e=new Ia(new ArrayBuffer(3*(a>>2)+(2<=d?d-1:0)));for(k=0;b<g;){var h=f[c.charCodeAt(b++)],n=f[c.charCodeAt(b++)];
e.b[k++]=(h<<2|n>>4)&255;h=f[c.charCodeAt(b++)];e.b[k++]=(n<<4|h>>2)&255;n=f[c.charCodeAt(b++)];e.b[k++]=(h<<6|n)&255}2<=d&&(h=f[c.charCodeAt(b++)],n=f[c.charCodeAt(b++)],e.b[k++]=(h<<2|n>>4)&255,3==d&&(h=f[c.charCodeAt(b++)],e.b[k++]=(n<<4|h>>2)&255));this.pos+=a;this.cache.push(e);return e;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+
2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(b=F.strDate(F.substr(this.buf,this.pos,19)),this.pos+=19):b=new Date(this.readFloat()),this.cache.push(b),b;case 119:a=this.unserialize();c=this.resolver.resolveEnum(a);if(null==c)throw D.thrown("Enum not found "+a);b=this.unserializeEnum(c,this.unserialize());this.cache.push(b);return b;case 120:throw D.thrown(this.unserialize());case 121:a=this.readDigits();
if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw D.thrown("Invalid string length");b=F.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw D.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:Jb};var id=function(a,b,c){D.call(this,String(a),b,c);this.value=a;this.__skipStack++};l["haxe.ValueException"]=id;id.__name__="haxe.ValueException";id.__super__=
D;id.prototype=x(D.prototype,{unwrap:function(){return this.value},__class__:id});var Xc=function(){this.a1=1;this.a2=0};l["haxe.crypto.Adler32"]=Xc;Xc.__name__="haxe.crypto.Adler32";Xc.read=function(a){var b=new Xc,c=a.readByte(),f=a.readByte(),d=a.readByte();a=a.readByte();b.a1=d<<8|a;b.a2=c<<8|f;return b};Xc.prototype={update:function(a,b,c){var f=this.a1,d=this.a2,g=b;for(b+=c;g<b;)c=g++,f=(f+a.b[c])%65521,d=(d+f)%65521;this.a1=f;this.a2=d},equals:function(a){return a.a1==this.a1?a.a2==this.a2:
!1},__class__:Xc};var Ia=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};l["haxe.io.Bytes"]=Ia;Ia.__name__="haxe.io.Bytes";Ia.ofString=function(a,b){b=[];for(var c=0;c<a.length;){var f=a.charCodeAt(c++);55296<=f&&56319>=f&&(f=f-55232<<10|a.charCodeAt(c++)&1023);127>=f?b.push(f):(2047>=f?b.push(192|f>>6):(65535>=f?b.push(224|f>>12):(b.push(240|f>>18),b.push(128|f>>12&63)),b.push(128|f>>6&63)),b.push(128|f&63))}return new Ia((new Uint8Array(b)).buffer)};
Ia.ofData=function(a){var b=a.hxBytes;return null!=b?b:new Ia(a)};Ia.prototype={blit:function(a,b,c,f){if(0>a||0>c||0>f||a+f>this.length||c+f>b.length)throw D.thrown(Vb.OutsideBounds);0==c&&f==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+f),a)},getString:function(a,b,c){if(0>a||0>b||a+b>this.length)throw D.thrown(Vb.OutsideBounds);c="";var f=this.b,d=sf.fromCharCode,g=a;for(a+=b;g<a;)if(b=f[g++],128>b){if(0==b)break;c+=d(b)}else if(224>b)c+=d((b&63)<<6|f[g++]&127);else if(240>b){var e=
f[g++];c+=d((b&31)<<12|(e&127)<<6|f[g++]&127)}else{e=f[g++];var k=f[g++];b=(b&15)<<18|(e&127)<<12|(k&127)<<6|f[g++]&127;c+=d((b>>10)+55232);c+=d(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:Ia};var Cc=function(){};l["haxe.crypto.Base64"]=Cc;Cc.__name__="haxe.crypto.Base64";Cc.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==F.cca(a,a.length-1);)a=F.substr(a,0,-1);return(new Pe(Cc.BYTES)).decodeBytes(Ia.ofString(a))};var Pe=function(a){for(var b=a.length,
c=1;b>1<<c;)++c;if(8<c||b!=1<<c)throw D.thrown("BaseCode : base length must be a power of two.");this.base=a;this.nbits=c};l["haxe.crypto.BaseCode"]=Pe;Pe.__name__="haxe.crypto.BaseCode";Pe.prototype={initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(var f=this.base.length;b<f;)c=b++,a[this.base.b[c]]=c;this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,f=a.length*b>>3,d=new Ia(new ArrayBuffer(f)),g=0,e=0,k=0,h=0;h<f;){for(;8>
e;){e+=b;g<<=b;var n=c[a.b[k++]];if(-1==n)throw D.thrown("BaseCode : invalid encoded char");g|=n}e-=8;d.b[h++]=g>>e&255}return d},__class__:Pe};var wc=z["haxe.ds.Either"]={__ename__:!0,__constructs__:null,Left:(h=function(a){return{_hx_index:0,v:a,__enum__:"haxe.ds.Either",toString:e}},h._hx_name="Left",h.__params__=["v"],h),Right:(h=function(a){return{_hx_index:1,v:a,__enum__:"haxe.ds.Either",toString:e}},h._hx_name="Right",h.__params__=["v"],h)};wc.__constructs__=[wc.Left,wc.Right];var eb=function(){this.h=
{}};l["haxe.ds.IntMap"]=eb;eb.__name__="haxe.ds.IntMap";eb.__interfaces__=[Vc];eb.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(+b);return new Lc(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=
this.it.next();return this.ref[a]}}},toString:function(){var a="{";for(var b=this.keys();b.hasNext();){var c=b.next();a+=null==c?"null":""+c;a+=" => ";a+=J.string(J.string(this.h[c]));b.hasNext()&&(a+=", ")}return a+"}"},__class__:eb};var Ub=function(){this.length=0};l["haxe.ds.List"]=Ub;Ub.__name__="haxe.ds.List";Ub.prototype={add:function(a){a=new Rd(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},push:function(a){this.h=a=new Rd(a,this.h);null==this.q&&(this.q=a);this.length++},
first:function(){return null==this.h?null:this.h.item},pop:function(){if(null==this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},isEmpty:function(){return null==this.h},toString:function(){var a,b=!0,c=this.h;for(a="{";null!=c;)b?b=!1:a+=", ",a+=J.string(J.string(c.item)),c=c.next;return a+"}"},__class__:Ub};var Rd=function(a,b){this.item=a;this.next=b};l["haxe.ds._List.ListNode"]=Rd;Rd.__name__="haxe.ds._List.ListNode";Rd.prototype={__class__:Rd};
var Bb=function(){this.h={__keys__:{}}};l["haxe.ds.ObjectMap"]=Bb;Bb.__name__="haxe.ds.ObjectMap";Bb.__interfaces__=[Vc];Bb.prototype={set:function(a,b){var c=a.__id__;null==c&&(c=a.__id__=v.$haxeUID++);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&
a.push(this.h.__keys__[b]);return new Lc(a)},toString:function(){var a="{";for(var b=this.keys();b.hasNext();){var c=b.next();a+=J.string(J.string(c));a+=" => ";a+=J.string(J.string(this.h[c.__id__]));b.hasNext()&&(a+=", ")}return a+"}"},__class__:Bb};var aa=function(){this.h=Object.create(null)};l["haxe.ds.StringMap"]=aa;aa.__name__="haxe.ds.StringMap";aa.__interfaces__=[Vc];aa.stringify=function(a){var b="{",c=!0,f;for(f in a)c?c=!1:b+=",",b+=f+" => "+J.string(a[f]);return b+"}"};aa.prototype={exists:function(a){return Object.prototype.hasOwnProperty.call(this.h,
a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},remove:function(a){return Object.prototype.hasOwnProperty.call(this.h,a)?(delete this.h[a],!0):!1},toString:function(){return aa.stringify(this.h)},__class__:aa};var Yc=function(a,b,c){D.call(this,a,b);this.posInfos=null==c?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:c;this.__skipStack++};l["haxe.exceptions.PosException"]=Yc;Yc.__name__="haxe.exceptions.PosException";Yc.__super__=D;Yc.prototype=
x(D.prototype,{toString:function(){return""+D.prototype.toString.call(this)+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber},__class__:Yc});var Sd=function(a,b,c){null==a&&(a="Not implemented");Yc.call(this,a,b,c);this.__skipStack++};l["haxe.exceptions.NotImplementedException"]=Sd;Sd.__name__="haxe.exceptions.NotImplementedException";Sd.__super__=Yc;Sd.prototype=x(Yc.prototype,{__class__:Sd});var Td=function(){this.size=this.pos=
0};l["haxe.io.BytesBuffer"]=Td;Td.__name__="haxe.io.BytesBuffer";Td.prototype={addByte:function(a){this.pos==this.size&&this.grow(1);this.view.setUint8(this.pos++,a)},add:function(a){this.pos+a.length>this.size&&this.grow(a.length);if(0!=this.size){var b=new Uint8Array(a.b.buffer,a.b.byteOffset,a.length);this.u8.set(b,this.pos);this.pos+=a.length}},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw D.thrown(Vb.OutsideBounds);this.pos+c>this.size&&this.grow(c);0!=this.size&&(a=new Uint8Array(a.b.buffer,
a.b.byteOffset+b,c),this.u8.set(a,this.pos),this.pos+=c)},grow:function(a){var b=this.pos+a;for(a=0==this.size?16:this.size;a<b;)a=3*a>>1;b=new ArrayBuffer(a);var c=new Uint8Array(b);0<this.size&&c.set(this.u8);this.size=a;this.buffer=b;this.u8=c;this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new Ia(new ArrayBuffer(0));var a=new Ia(this.buffer);a.length=this.pos;return a},__class__:Td};var Ud=function(){};l["haxe.io.Input"]=Ud;Ud.__name__="haxe.io.Input";Ud.prototype=
{readByte:function(){throw new Sd(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"});},readBytes:function(a,b,c){var f=c,d=a.b;if(0>b||0>c||b+c>a.length)throw D.thrown(Vb.OutsideBounds);try{for(;0<f;)d[b]=this.readByte(),++b,--f}catch(g){if(na.lastError=g,!(D.caught(g).unwrap()instanceof jd))throw g;}return c-f},readFullBytes:function(a,b,c){for(;0<c;){var f=this.readBytes(a,b,c);if(0==f)throw D.thrown(Vb.Blocked);b+=f;c-=f}},read:function(a){for(var b=
new Ia(new ArrayBuffer(a)),c=0;0<a;){var f=this.readBytes(b,c,a);if(0==f)throw D.thrown(Vb.Blocked);c+=f;a-=f}return b},readInt16:function(){var a=this.readByte(),b=this.readByte();a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),f=this.readByte();return this.bigEndian?f|c<<8|b<<16|a<<24:a|b<<8|c<<16|f<<24},readString:function(a,
b){var c=new Ia(new ArrayBuffer(a));this.readFullBytes(c,0,a);return c.getString(0,a,b)},__class__:Ud};var Vd=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw D.thrown(Vb.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=c};l["haxe.io.BytesInput"]=Vd;Vd.__name__="haxe.io.BytesInput";Vd.__super__=Ud;Vd.prototype=x(Ud.prototype,{readByte:function(){if(0==this.len)throw D.thrown(new jd);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>
b||0>c||b+c>a.length)throw D.thrown(Vb.OutsideBounds);if(0==this.len&&0<c)throw D.thrown(new jd);this.len<c&&(c=this.len);var f=this.b;a=a.b;for(var d=0,g=c;d<g;){var e=d++;a[b+e]=f[this.pos+e]}this.pos+=c;this.len-=c;return c},__class__:Vd});var Ff=z["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:e},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:e}};Ff.__constructs__=[Ff.UTF8,Ff.RawNative];
var jd=function(){};l["haxe.io.Eof"]=jd;jd.__name__="haxe.io.Eof";jd.prototype={toString:function(){return"Eof"},__class__:jd};var Vb=z["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:e},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:e},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:e},Custom:(h=function(a){return{_hx_index:3,e:a,__enum__:"haxe.io.Error",
toString:e}},h._hx_name="Custom",h.__params__=["e"],h)};Vb.__constructs__=[Vb.Blocked,Vb.Overflow,Vb.OutsideBounds,Vb.Custom];var Dc=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=F.substr(a,0,c),a=F.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=F.substr(a,0,b),a=F.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=F.substr(a,b+1,null),this.file=F.substr(a,0,b)):(this.ext=null,this.file=
a)};l["haxe.io.Path"]=Dc;Dc.__name__="haxe.io.Path";Dc.directory=function(a){a=new Dc(a);return null==a.dir?"":a.dir};Dc.prototype={__class__:Dc};var Lc=function(a){this.current=0;this.array=a};l["haxe.iterators.ArrayIterator"]=Lc;Lc.__name__="haxe.iterators.ArrayIterator";Lc.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Lc};var td=function(){};l["haxe.rtti.Meta"]=td;td.__name__="haxe.rtti.Meta";td.getType=function(a){a=
td.getMeta(a);return null==a||null==a.obj?{}:a.obj};td.getMeta=function(a){return a.__meta__};var kd=z["haxe.zip.ExtraField"]={__ename__:!0,__constructs__:null,FUnknown:(h=function(a,b){return{_hx_index:0,tag:a,bytes:b,__enum__:"haxe.zip.ExtraField",toString:e}},h._hx_name="FUnknown",h.__params__=["tag","bytes"],h),FInfoZipUnicodePath:(h=function(a,b){return{_hx_index:1,name:a,crc:b,__enum__:"haxe.zip.ExtraField",toString:e}},h._hx_name="FInfoZipUnicodePath",h.__params__=["name","crc"],h),FUtf8:{_hx_name:"FUtf8",
_hx_index:2,__enum__:"haxe.zip.ExtraField",toString:e}};kd.__constructs__=[kd.FUnknown,kd.FInfoZipUnicodePath,kd.FUtf8];var rc=z["haxe.zip.Huffman"]={__ename__:!0,__constructs__:null,Found:(h=function(a){return{_hx_index:0,i:a,__enum__:"haxe.zip.Huffman",toString:e}},h._hx_name="Found",h.__params__=["i"],h),NeedBit:(h=function(a,b){return{_hx_index:1,left:a,right:b,__enum__:"haxe.zip.Huffman",toString:e}},h._hx_name="NeedBit",h.__params__=["left","right"],h),NeedBits:(h=function(a,b){return{_hx_index:2,
n:a,table:b,__enum__:"haxe.zip.Huffman",toString:e}},h._hx_name="NeedBits",h.__params__=["n","table"],h)};rc.__constructs__=[rc.Found,rc.NeedBit,rc.NeedBits];var Qe=function(){};l["haxe.zip.HuffTools"]=Qe;Qe.__name__="haxe.zip.HuffTools";Qe.prototype={treeDepth:function(a){switch(a._hx_index){case 0:return 0;case 1:var b=a.right;a=this.treeDepth(a.left);b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw D.thrown("assert");}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==
b){if(1==a._hx_index)return b=a.right,rc.NeedBit(this.treeCompress(a.left),this.treeCompress(b));throw D.thrown("assert");}for(var c=[],f=0,d=1<<b;f<d;)f++,c.push(rc.Found(-1));this.treeWalk(c,0,0,b,a);return rc.NeedBits(b,c)},treeWalk:function(a,b,c,f,d){if(1==d._hx_index){var g=d.left,e=d.right;0<f?(this.treeWalk(a,b,c+1,f-1,g),this.treeWalk(a,b|1<<c,c+1,f-1,e)):a[b]=this.treeCompress(d)}else a[b]=this.treeCompress(d)},treeMake:function(a,b,c,f){if(f>b)throw D.thrown("Invalid huffman");var d=c<<
5|f;if(a.h.hasOwnProperty(d))return rc.Found(a.h[d]);c<<=1;++f;return rc.NeedBit(this.treeMake(a,b,c,f),this.treeMake(a,b,c|1,f))},make:function(a,b,c,f){if(1==c)return rc.NeedBit(rc.Found(0),rc.Found(0));var d=[],g=[];if(32<f)throw D.thrown("Invalid huffman");for(var e=0,k=f;e<k;)e++,d.push(0),g.push(0);e=0;for(k=c;e<k;){var h=e++;h=a[h+b];if(h>=f)throw D.thrown("Invalid huffman");d[h]++}var n=0;e=1;for(k=f-1;e<k;)h=e++,n=n+d[h]<<1,g[h]=n;d=new eb;e=0;for(k=c;e<k;)h=e++,c=a[h+b],0!=c&&(n=g[c-1],
g[c-1]=n+1,d.h[n<<5|c]=h);return this.treeCompress(rc.NeedBit(this.treeMake(d,f,0,1),this.treeMake(d,f,1,1)))},__class__:Qe};var Re=function(a){this.buffer=new Ia(new ArrayBuffer(65536));this.pos=0;a&&(this.crc=new Xc)};l["haxe.zip._InflateImpl.Window"]=Re;Re.__name__="haxe.zip._InflateImpl.Window";Re.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new Ia(new ArrayBuffer(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},addBytes:function(a,
b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:Re};var fb=z["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:null,Head:{_hx_name:"Head",_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",
toString:e},Block:{_hx_name:"Block",_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:e},CData:{_hx_name:"CData",_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:e},Flat:{_hx_name:"Flat",_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:e},Crc:{_hx_name:"Crc",_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:e},Dist:{_hx_name:"Dist",_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:e},DistOne:{_hx_name:"DistOne",_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",
toString:e},Done:{_hx_name:"Done",_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:e}};fb.__constructs__=[fb.Head,fb.Block,fb.CData,fb.Flat,fb.Crc,fb.Dist,fb.DistOne,fb.Done];var Kb=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this.isFinal=!1;this.htools=new Qe;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?fb.Head:fb.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];this.lengths.push(-1);
this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.window=new Re(c)};l["haxe.zip.InflateImpl"]=Kb;Kb.__name__="haxe.zip.InflateImpl";Kb.prototype={buildFixedHuffman:function(){if(null!=
Kb.FIXED_HUFFMAN)return Kb.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}Kb.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return Kb.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&
(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=
this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a._hx_index){case 0:var b=a.i;return b;case 1:return b=a.left,a=a.right,this.applyHuffman(this.getBit()?a:b);case 2:return b=a.n,this.applyHuffman(a.table[this.getBits(b)])}},inflateLengths:function(a,b){for(var c=0,f=0;c<b;){var d=this.applyHuffman(this.huffman);switch(d){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:f=
d;a[c]=d;++c;break;case 16:d=c+3+this.getBits(2);if(d>b)throw D.thrown("Invalid data");for(;c<d;)a[c]=f,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw D.thrown("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw D.thrown("Invalid data");break;default:throw D.thrown("Invalid data");}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var a=this.input.readByte();if(8!=(a&15))throw D.thrown("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw D.thrown("Invalid data");
if(c)throw D.thrown("Unsupported dictionary");this.state=fb.Block;return!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw D.thrown("Invalid data");this.state=fb.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=fb.CData,!0;case 2:a=this.getBits(5)+257;b=this.getBits(5)+1;var f=this.getBits(4)+4;c=0;for(var d=f;c<d;){var g=
c++;this.lengths[Kb.CODE_LENGTHS_POS[g]]=this.getBits(3)}c=f;for(d=19;c<d;)g=c++,this.lengths[Kb.CODE_LENGTHS_POS[g]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);f=[];c=0;for(d=a+b;c<d;)c++,f.push(0);this.inflateLengths(f,a+b);this.huffdist=this.htools.make(f,a,b,16);this.huffman=this.htools.make(f,0,a,16);this.state=fb.CData;return!0;default:throw D.thrown("Invalid data");}case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this.isFinal?
fb.Crc:fb.Block;else{b-=257;a=Kb.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw D.thrown("Invalid data");this.len=Kb.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=Kb.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw D.thrown("Invalid data");this.dist=Kb.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw D.thrown("Invalid data");this.state=1==this.dist?fb.DistOne:fb.Dist}return!0;case 3:return a=this.len<this.needed?this.len:
this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this.isFinal?fb.Crc:fb.Block),0<this.needed;case 4:a=this.window.checksum();if(null==a)return this.state=fb.Done,!0;b=Xc.read(this.input);if(!a.equals(b))throw D.thrown("Invalid CRC");this.state=fb.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=fb.CData);return 0<this.needed;
case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=fb.CData),0<this.needed;case 7:return!1}},__class__:Kb};var Zc=function(a){this.i=a};l["haxe.zip.Reader"]=Zc;Zc.__name__="haxe.zip.Reader";Zc.readZip=function(a){return(new Zc(a)).read()};Zc.prototype={readZipDate:function(){var a=this.i.readUInt16(),b=a>>11&31,c=a>>5&63;a&=31;var f=this.i.readUInt16();return new Date((f>>9)+1980,(f>>5&15)-1,f&31,b,c,a<<1)},readExtraFields:function(a){for(var b=
new Ub;0<a;){if(4>a)throw D.thrown("Invalid extra fields data");var c=this.i.readUInt16(),f=this.i.readUInt16();if(a<f)throw D.thrown("Invalid extra fields data");if(28789==c){var d=this.i.readByte();if(1!=d){var g=new Td;g.addByte(d);g.add(this.i.read(f-1));b.add(kd.FUnknown(c,g.getBytes()))}else c=this.i.readInt32(),d=this.i.read(f-5).toString(),b.add(kd.FInfoZipUnicodePath(d,c))}else b.add(kd.FUnknown(c,this.i.read(f)));a-=4+f}return b},readEntryHeader:function(){var a=this.i,b=a.readInt32();if(33639248==
b||101010256==b)return null;if(67324752!=b)throw D.thrown("Invalid Zip Data");a.readUInt16();b=a.readUInt16();var c=0!=(b&2048),f=a.readUInt16(),d=0!=f;if(d&&8!=f)throw D.thrown("Unsupported compression "+f);f=this.readZipDate();var g=a.readInt32(),e=a.readInt32(),k=a.readInt32(),h=a.readInt16(),n=a.readInt16();a=a.readString(h);n=this.readExtraFields(n);c&&n.push(kd.FUtf8);0!=(b&8)&&(e=-1);return{fileName:a,fileSize:k,fileTime:f,compressed:d,dataSize:e,data:null,crc32:g,extraFields:n}},read:function(){for(var a=
new Ub,b=null;;){var c=this.readEntryHeader();if(null==c)break;if(0>c.dataSize){null==b&&(b=new Ia(new ArrayBuffer(65536)));for(var f=new Td,d=new Kb(this.i,!1,!1);;){var g=d.readBytes(b,0,65536);f.addBytes(b,0,g);if(65536>g)break}c.data=f.getBytes();c.crc32=this.i.readInt32();134695760==c.crc32&&(c.crc32=this.i.readInt32());c.dataSize=this.i.readInt32();c.fileSize=this.i.readInt32();c.dataSize=c.fileSize;c.compressed=!1}else c.data=this.i.read(c.dataSize);a.add(c)}return a},__class__:Zc};var tc=
function(a,b){this.message=a;this.pos=b};l["hxjsonast.Error"]=tc;tc.__name__="hxjsonast.Error";tc.prototype={__class__:tc};var Qa=function(a,b){this.value=a;this.pos=b};l["hxjsonast.Json"]=Qa;Qa.__name__="hxjsonast.Json";Qa.prototype={__class__:Qa};var za=z["hxjsonast.JsonValue"]={__ename__:!0,__constructs__:null,JString:(h=function(a){return{_hx_index:0,s:a,__enum__:"hxjsonast.JsonValue",toString:e}},h._hx_name="JString",h.__params__=["s"],h),JNumber:(h=function(a){return{_hx_index:1,s:a,__enum__:"hxjsonast.JsonValue",
toString:e}},h._hx_name="JNumber",h.__params__=["s"],h),JObject:(h=function(a){return{_hx_index:2,fields:a,__enum__:"hxjsonast.JsonValue",toString:e}},h._hx_name="JObject",h.__params__=["fields"],h),JArray:(h=function(a){return{_hx_index:3,values:a,__enum__:"hxjsonast.JsonValue",toString:e}},h._hx_name="JArray",h.__params__=["values"],h),JBool:(h=function(a){return{_hx_index:4,b:a,__enum__:"hxjsonast.JsonValue",toString:e}},h._hx_name="JBool",h.__params__=["b"],h),JNull:{_hx_name:"JNull",_hx_index:5,
__enum__:"hxjsonast.JsonValue",toString:e}};za.__constructs__=[za.JString,za.JNumber,za.JObject,za.JArray,za.JBool,za.JNull];var Se=function(a,b,c){this.name=a;this.namePos=b;this.value=c};l["hxjsonast.JObjectField"]=Se;Se.__name__="hxjsonast.JObjectField";Se.prototype={__class__:Se};var De=function(a,b){this.source=a;this.filename=b;this.pos=0};l["hxjsonast.Parser"]=De;De.__name__="hxjsonast.Parser";De.prototype={doParse:function(){for(var a=this.parseRec(),b;;){var c=b=this.source.charCodeAt(this.pos++);
if(c!=c)break;switch(b){case 9:case 10:case 13:case 32:break;default:this.invalidChar()}}return a},parseRec:function(){for(;;){var a=this.source.charCodeAt(this.pos++);switch(a){case 9:case 10:case 13:case 32:break;case 34:var b=this.pos,c=this.parseString();return new Qa(za.JString(c),new ua(this.filename,b-1,this.pos));case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=this.pos-1;c=45==a;var f=!c;a=48==a;for(var d=!1,g=!1,e=!1,k=!1;;){switch(this.source.charCodeAt(this.pos++)){case 43:case 45:g&&
!e||this.invalidNumber(b);f=!1;e=!0;break;case 46:(c||d||g)&&this.invalidNumber(b);f=!1;d=!0;break;case 48:a&&!d&&this.invalidNumber(b);c&&(c=!1,a=!0);f=!0;break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a&&!d&&this.invalidNumber(b);c&&(c=!1);f=!0;a=!1;break;case 69:case 101:(c||a||g)&&this.invalidNumber(b);f=!1;g=!0;break;default:f||this.invalidNumber(b),this.pos--,k=!0}if(k)break}c=F.substr(this.source,b,this.pos-b);return new Qa(za.JNumber(c),new ua(this.filename,
b,this.pos));case 91:for(b=[],c=null,f=this.pos-1;;)switch(this.source.charCodeAt(this.pos++)){case 9:case 10:case 13:case 32:break;case 44:c?c=!1:this.invalidChar();break;case 93:return 0==c&&this.invalidChar(),new Qa(za.JArray(b),new ua(this.filename,f,this.pos));default:c&&this.invalidChar(),this.pos--,b.push(this.parseRec()),c=!0}case 102:b=this.pos;if(97!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++)||115!=this.source.charCodeAt(this.pos++)||101!=this.source.charCodeAt(this.pos++))this.pos=
b,this.invalidChar();return new Qa(za.JBool(!1),new ua(this.filename,b-1,this.pos));case 110:b=this.pos;if(117!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++))this.pos=b,this.invalidChar();return new Qa(za.JNull,new ua(this.filename,b-1,this.pos));case 116:b=this.pos;if(114!=this.source.charCodeAt(this.pos++)||117!=this.source.charCodeAt(this.pos++)||101!=this.source.charCodeAt(this.pos++))this.pos=b,this.invalidChar();return new Qa(za.JBool(!0),
new ua(this.filename,b-1,this.pos));case 123:for(b=[],c=Object.create(null),a=g=f=null,d=this.pos-1;;)switch(this.source.charCodeAt(this.pos++)){case 9:case 10:case 13:case 32:break;case 34:(null!=f||a)&&this.invalidChar();g=this.pos-1;f=this.parseString();g=new ua(this.filename,g,this.pos);if(Object.prototype.hasOwnProperty.call(c,f))throw D.thrown(new tc('Duplicate field name "'+f+'"',g));c[f]=!0;break;case 44:a?a=!1:this.invalidChar();break;case 58:null==f&&this.invalidChar();b.push(new Se(f,g,
this.parseRec()));g=f=null;a=!0;break;case 125:return null==f&&0!=a||this.invalidChar(),new Qa(za.JObject(b),new ua(this.filename,d,this.pos));default:this.invalidChar()}default:this.invalidChar()}}},parseString:function(){for(var a=this.pos,b=null;;){var c=this.source.charCodeAt(this.pos++);if(34==c)break;if(92==c){null==b&&(b=new gd);c=this.source;var f=this.pos-a-1;b.b+=null==f?F.substr(c,a,null):F.substr(c,a,f);c=this.source.charCodeAt(this.pos++);switch(c){case 34:case 47:case 92:b.b+=String.fromCodePoint(c);
break;case 98:b.b+=String.fromCodePoint(8);break;case 102:b.b+=String.fromCodePoint(12);break;case 110:b.b+=String.fromCodePoint(10);break;case 114:b.b+=String.fromCodePoint(13);break;case 116:b.b+=String.fromCodePoint(9);break;case 117:a=J.parseInt("0x"+F.substr(this.source,this.pos,4));this.pos+=4;b.b+=String.fromCodePoint(a);break;default:throw D.thrown(new tc("Invalid escape sequence \\"+String.fromCodePoint(c),new ua(this.filename,this.pos-2,this.pos)));}a=this.pos}else if(c!=c)throw this.pos--,
D.thrown(new tc("Unclosed string",new ua(this.filename,a-1,this.pos)));}if(null==b)return F.substr(this.source,a,this.pos-a-1);c=this.source;f=this.pos-a-1;b.b+=null==f?F.substr(c,a,null):F.substr(c,a,f);return b.b},invalidChar:function(){this.pos--;throw D.thrown(new tc("Invalid character: "+this.source.charAt(this.pos),new ua(this.filename,this.pos,this.pos+1)));},invalidNumber:function(a){throw D.thrown(new tc("Invalid number: "+this.source.substring(a,this.pos),new ua(this.filename,a,this.pos)));
},__class__:De};var ua=function(a,b,c){this.file=a;this.min=b;this.max=c};l["hxjsonast.Position"]=ua;ua.__name__="hxjsonast.Position";ua.prototype={__class__:ua};var xc=function(a,b,c,f,d){this.keyboard=this.gamepad=this.joystick=null;this.single=!1;this.action=a;null!=b&&(this.single=b);null!=c&&(this.keyboard=c);null!=f&&(this.gamepad=f);null!=d&&(this.joystick=d)};l["input2action.ActionConfigItem"]=xc;xc.__name__="input2action.ActionConfigItem";xc.prototype={__class__:xc};var sc=function(a,b){this.onGamepadConnect=
this.onGamepadDisconnect=null;this.gamepadStates=new Bb;this.gamepadPlayer=new eb;this.actionStatePlayers=Array(8);this.actionMap=b;this.actionConfigDefault=a};l["input2action.Input2Action"]=sc;sc.__name__="input2action.Input2Action";sc.prototype={enable:function(a){a.onKeyDown.add(u(this,this.keyDown));a.onKeyUp.add(u(this,this.keyUp));for(a=ib.devices.iterator();a.hasNext();){var b=a.next(),c="Gamepad connected: "+b.id+", ",f=bb.__getDeviceData();c=c+f[b.id].id+", ";f=bb.__getDeviceData();ka.trace(c+
f[b.id].id,{fileName:"input2action/Input2Action.hx",lineNumber:308,className:"input2action.Input2Action",methodName:"gamepadConnect"});if(null!=this.onGamepadConnect)this.onGamepadConnect(b)}ib.onConnect.add(u(this,this.gamepadConnect))},getOrCreateActionState:function(a,b,c){var f=this.actionStatePlayers[c];null==f&&(f=new aa,this.actionStatePlayers[c]=f);var d=f.h[b.action];null==d&&(d=new Te(a.up,a.each,b.single,a.action,c),f.h[b.action]=d);return d},setKeyboard:function(a,b){null==a&&(a=0);null==
b&&(b=this.actionConfigDefault);if(null==this.keyboardState){var c=Array(354);this.keyboardState=c}for(var f=0;f<b.length;){var d=b[f];++f;if(null!=d.keyboard&&0!=d.keyboard.length){var g=this.actionMap.h[d.action];if(null!=g&&null!=g.action){g=this.getOrCreateActionState(g,d,a);var e=0;for(d=d.keyboard;e<d.length;){var k=d[e];++e;switch(k.length){case 1:k=k[0];var h=1073741881>k?k:k-1073741881+128;k=-1;break;case 2:var n=k[1];h=1073741881>n?n:n-1073741881+128;k=k[0];k=1073741881>k?k:k-1073741881+
128;break;default:throw D.thrown("ERROR, only one modifier key is allowed!");}c=this.keyboardState;null==k&&(k=-1);n=c[h];null==n&&(n=new $c,c[h]=n);if(null==n.keyCombo)n.keyCombo=[];else for(var r=0,p=n.keyCombo;r<p.length;){var t=p[r];++r;if(t.keyCode==k)throw D.thrown("Error, "+(-1<k?Wd.keyCodeName(c,k)+" + ":"")+Wd.keyCodeName(c,h)+"  is defined for more then one action");}-1<k&&null==c[k]&&(c[k]=new $c);if(-1<k){c=h=0;for(r=n.keyCombo;c<r.length;){p=r[c];++c;if(!g.single&&p.actionState.single||
-1==p.keyCode&&(p.actionState.single||g.single))break;++h}n=n.keyCombo;k=new ad(k,g);n.splice(h,0,k)}else n.keyCombo.push(new ad(k,g))}}}}},keyDown:function(a,b){b=this.keyboardState;var c=b[1073741881>a?a:a-1073741881+128];if(null!=c&&!c.isDown&&(c.isDown=!0,null!=c.keyCombo)){a=!1;for(var f=0,d=c.keyCombo;f<d.length;){var g=d[f];++f;-1!=g.keyCode?(c=b[g.keyCode],c=null==c?!1:c.isDown):c=!0;if(c&&(c=g.actionState,!c.single||!a)&&(a=!0,g.downBy=!0,c.each?c.action(!0,c.player):(c.pressed++,1==c.pressed&&
c.action(!0,c.player)),c.single))break}}},keyUp:function(a,b){Wd.callUpActions(this.keyboardState,1073741881>a?a:a-1073741881+128)},setGamepad:function(a,b,c){null==a&&(a=0);null==c&&(c=this.actionConfigDefault);this.gamepadPlayer.h[a]=b;var f=this.gamepadStates.h[b.__id__];null==f&&(f=Array(15),this.gamepadStates.set(b,f));for(b=0;b<c.length;){var d=c[b];++b;if(null!=d.gamepad&&0!=d.gamepad.length){var g=this.actionMap.h[d.action];if(null!=g.action){g=this.getOrCreateActionState(g,d,a);var e=0;for(d=
d.gamepad;e<d.length;){var k=d[e];++e;switch(k.length){case 1:var h=k[0];k=-1;break;case 2:h=k[1];k=k[0];break;default:throw D.thrown("ERROR$name, only one modifier key is allowed!");}null==k&&(k=-1);var n=f[h];null==n&&(n=new $c,f[h]=n);if(null==n.keyCombo)n.keyCombo=[];else for(var r=0,p=n.keyCombo;r<p.length;){var t=p[r];++r;if(t.keyCode==k)throw D.thrown("Error, "+(-1<k?Wd.keyCodeName(f,k)+" + ":"")+Wd.keyCodeName(f,h)+"  is defined for more then one action");}-1<k&&null==f[k]&&(f[k]=new $c);
if(-1<k){r=h=0;for(p=n.keyCombo;r<p.length;){t=p[r];++r;if(!g.single&&t.actionState.single||-1==t.keyCode&&(t.actionState.single||g.single))break;++h}n=n.keyCombo;k=new ad(k,g);n.splice(h,0,k)}else n.keyCombo.push(new ad(k,g))}}}}this.enableGamepad(a)},removeGamepad:function(a,b){null==b&&(b=this.gamepadPlayer.h[a],null!=b&&this.gamepadPlayer.remove(a));if(null!=b){var c=this.gamepadStates.h[b.__id__];if(null!=c){this.gamepadStates.remove(b);var f=u(this,this.gamepadDisconnect),d=b;b.onDisconnect.remove(function(){f(d,
a)});var g=u(this,this.gamepadButtonDown);var e=function(a){g(c,a)};b.onButtonDown.remove(e);var k=u(this,this.gamepadButtonUp);e=function(a){k(c,a)};b.onButtonUp.remove(e);var h=u(this,this.gamepadAxisMove);e=function(a,b){h(c,a,b)};b.onAxisMove.remove(e)}}},enableGamepad:function(a){var b=this.gamepadPlayer.h[a],c=this.gamepadStates.h[b.__id__];if(null!=b){var f=u(this,this.gamepadDisconnect);b.onDisconnect.add(function(){f(b,a)});var d=u(this,this.gamepadButtonDown);var g=function(a){d(c,a)};b.onButtonDown.add(g);
var e=u(this,this.gamepadButtonUp);g=function(a){e(c,a)};b.onButtonUp.add(g);var k=u(this,this.gamepadAxisMove);g=function(a,b){k(c,a,b)};b.onAxisMove.add(g)}},gamepadConnect:function(a){var b="Gamepad connected: "+a.id+", ",c=bb.__getDeviceData();b=b+c[a.id].id+", ";c=bb.__getDeviceData();ka.trace(b+c[a.id].id,{fileName:"input2action/Input2Action.hx",lineNumber:308,className:"input2action.Input2Action",methodName:"gamepadConnect"});if(null!=this.onGamepadConnect)this.onGamepadConnect(a)},gamepadDisconnect:function(a,
b){var c="Gamepad disconnected: "+a.id+", ",f=bb.__getDeviceData();c=c+f[a.id].id+", ";f=bb.__getDeviceData();ka.trace(c+f[a.id].id,{fileName:"input2action/Input2Action.hx",lineNumber:315,className:"input2action.Input2Action",methodName:"gamepadDisconnect"});this.removeGamepad(b,a);if(null!=this.onGamepadDisconnect)this.onGamepadDisconnect(b)},gamepadButtonDown:function(a,b){var c=a[b];if(null!=c&&!c.isDown&&(c.isDown=!0,null!=c.keyCombo)){b=!1;for(var f=0,d=c.keyCombo;f<d.length;){var g=d[f];++f;
-1!=g.keyCode?(c=a[g.keyCode],c=null==c?!1:c.isDown):c=!0;if(c&&(c=g.actionState,!c.single||!b)&&(b=!0,g.downBy=!0,c.each?c.action(!0,c.player):(c.pressed++,1==c.pressed&&c.action(!0,c.player)),c.single))break}}},gamepadButtonUp:function(a,b){Wd.callUpActions(a,b)},gamepadAxisMove:function(a,b,c){},__class__:sc};var Wd={callUpActions:function(a,b){b=a[b];if(null!=b&&b.isDown&&(b.isDown=!1,null!=b.keyCombo))for(a=0,b=b.keyCombo;a<b.length;){var c=b[a];++a;c.downBy&&(c.downBy=!1,c=c.actionState,c.each?
c.up&&c.action(!1,c.player):(c.pressed--,c.up&&0==c.pressed&&c.action(!1,c.player)))}},keyCodeName:function(a,b){return 354==a.length?sc.keyCodeName.h[128>b?b:b+1073741881-128]:sc.gamepadButtonName.h[b]}},$c=function(){this.keyCombo=null;this.isDown=!1};l["input2action._InputState.KeyState"]=$c;$c.__name__="input2action._InputState.KeyState";$c.prototype={__class__:$c};var ad=function(a,b,c){null==c&&(c=0);this.downBy=!1;this.keyCode=a;this.actionState=b;this.deviceID=c};l["input2action._InputState.KeyCombo"]=
ad;ad.__name__="input2action._InputState.KeyCombo";ad.prototype={__class__:ad};var Te=function(a,b,c,f,d){this.action=null;this.pressed=0;this.up=a;this.each=b;this.single=c;this.action=f;this.player=d};l["input2action.ActionState"]=Te;Te.__name__="input2action.ActionState";Te.prototype={__class__:Te};var Of={fromOther:function(a){return[a]}},dc={fromNestedArrayItem:function(a){return[Of.fromOther(a)]}},pa=function(){};l["js.Boot"]=pa;pa.__name__="js.Boot";pa.getClass=function(a){if(null==a)return null;
if(a instanceof Array)return Array;var b=a.__class__;if(null!=b)return b;a=pa.__nativeClassName(a);return null!=a?pa.__resolveNativeClass(a):null};pa.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a.__enum__){var f=z[a.__enum__].__constructs__[a._hx_index];c=f._hx_name;if(f.__params__){b+="\t";var d=[],g=0;for(f=f.__params__;g<f.length;){var e=
f[g];g+=1;d.push(pa.__string_rec(a[e],b))}return c+"("+d.join(",")+")"}return c}if(a instanceof Array){c="[";b+="\t";d=0;for(g=a.length;d<g;)f=d++,c+=(0<f?",":"")+pa.__string_rec(a[f],b);return c+"]"}try{d=a.toString}catch(k){return na.lastError=k,"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c="{\n";b+="\t";d=null!=a.hasOwnProperty;g=null;for(g in a)d&&!a.hasOwnProperty(g)||"prototype"==g||"__class__"==g||"__super__"==g||"__interfaces__"==
g||"__properties__"==g||(2!=c.length&&(c+=", \n"),c+=b+g+" : "+pa.__string_rec(a[g],b));b=b.substring(1);return c+("\n"+b+"}");case "string":return a;default:return String(a)}};pa.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var f=0,d=c.length;f<d;){var g=f++;g=c[g];if(g==b||pa.__interfLoop(g,b))return!0}return pa.__interfLoop(a.__super__,b)};pa.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array;case Pf:return"boolean"==
typeof a;case Qf:return null!=a;case Rf:return"number"==typeof a;case Sf:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(pa.__downcastCheck(a,b))return!0}else{if("object"==typeof b&&pa.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==Tf&&null!=a.__name__||b==Uf&&null!=a.__ename__?!0:null!=a.__enum__?z[a.__enum__]==b:!1}};pa.__downcastCheck=function(a,b){return a instanceof b?!0:b.__isInterface__?pa.__interfLoop(pa.getClass(a),
b):!1};pa.__cast=function(a,b){if(null==a||pa.__instanceof(a,b))return a;throw D.thrown("Cannot cast "+J.string(a)+" to "+J.string(b));};pa.__nativeClassName=function(a){a=pa.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};pa.__isNativeObj=function(a){return null!=pa.__nativeClassName(a)};pa.__resolveNativeClass=function(a){return v[a]};var Ba=z["json2object.Error"]={__ename__:!0,__constructs__:null,IncorrectType:(h=function(a,b,c){return{_hx_index:0,variable:a,
expected:b,pos:c,__enum__:"json2object.Error",toString:e}},h._hx_name="IncorrectType",h.__params__=["variable","expected","pos"],h),IncorrectEnumValue:(h=function(a,b,c){return{_hx_index:1,value:a,expected:b,pos:c,__enum__:"json2object.Error",toString:e}},h._hx_name="IncorrectEnumValue",h.__params__=["value","expected","pos"],h),InvalidEnumConstructor:(h=function(a,b,c){return{_hx_index:2,value:a,expected:b,pos:c,__enum__:"json2object.Error",toString:e}},h._hx_name="InvalidEnumConstructor",h.__params__=
["value","expected","pos"],h),UninitializedVariable:(h=function(a,b){return{_hx_index:3,variable:a,pos:b,__enum__:"json2object.Error",toString:e}},h._hx_name="UninitializedVariable",h.__params__=["variable","pos"],h),UnknownVariable:(h=function(a,b){return{_hx_index:4,variable:a,pos:b,__enum__:"json2object.Error",toString:e}},h._hx_name="UnknownVariable",h.__params__=["variable","pos"],h),ParserError:(h=function(a,b){return{_hx_index:5,message:a,pos:b,__enum__:"json2object.Error",toString:e}},h._hx_name=
"ParserError",h.__params__=["message","pos"],h),CustomFunctionException:(h=function(a,b){return{_hx_index:6,e:a,pos:b,__enum__:"json2object.Error",toString:e}},h._hx_name="CustomFunctionException",h.__params__=["e","pos"],h)};Ba.__constructs__=[Ba.IncorrectType,Ba.IncorrectEnumValue,Ba.InvalidEnumConstructor,Ba.UninitializedVariable,Ba.UnknownVariable,Ba.ParserError,Ba.CustomFunctionException];var Rb=z["json2object.InternalError"]={__ename__:!0,__constructs__:null,AbstractNoJsonRepresentation:(h=
function(a){return{_hx_index:0,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="AbstractNoJsonRepresentation",h.__params__=["name"],h),CannotGenerateSchema:(h=function(a){return{_hx_index:1,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="CannotGenerateSchema",h.__params__=["name"],h),HandleExpr:{_hx_name:"HandleExpr",_hx_index:2,__enum__:"json2object.InternalError",toString:e},ParsingThrow:{_hx_name:"ParsingThrow",_hx_index:3,__enum__:"json2object.InternalError",
toString:e},UnsupportedAbstractEnumType:(h=function(a){return{_hx_index:4,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="UnsupportedAbstractEnumType",h.__params__=["name"],h),UnsupportedEnumAbstractValue:(h=function(a){return{_hx_index:5,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="UnsupportedEnumAbstractValue",h.__params__=["name"],h),UnsupportedMapKeyType:(h=function(a){return{_hx_index:6,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name=
"UnsupportedMapKeyType",h.__params__=["name"],h),UnsupportedSchemaObjectType:(h=function(a){return{_hx_index:7,name:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="UnsupportedSchemaObjectType",h.__params__=["name"],h),UnsupportedSchemaType:(h=function(a){return{_hx_index:8,type:a,__enum__:"json2object.InternalError",toString:e}},h._hx_name="UnsupportedSchemaType",h.__params__=["type"],h)};Rb.__constructs__=[Rb.AbstractNoJsonRepresentation,Rb.CannotGenerateSchema,Rb.HandleExpr,Rb.ParsingThrow,
Rb.UnsupportedAbstractEnumType,Rb.UnsupportedEnumAbstractValue,Rb.UnsupportedMapKeyType,Rb.UnsupportedSchemaObjectType,Rb.UnsupportedSchemaType];var uf=function(){};l["json2object.ErrorUtils"]=uf;uf.__name__="json2object.ErrorUtils";uf.convertError=function(a){switch(a._hx_index){case 0:var b=a.pos;var c=b;break;case 1:c=b=a.pos;break;case 2:c=b=a.pos;break;case 3:c=b=a.pos;break;case 4:c=b=a.pos;break;case 5:c=b=a.pos;break;case 6:c=b=a.pos}b="";if(null!=c){var f=""==c.file?"line":""+c.file+":";
1==c.lines.length?b=""+f+c.lines[0].number+": characters "+c.lines[0].start+"-"+c.lines[0].end+" : ":1<c.lines.length&&(b=""+f+c.lines[0].number+": lines "+c.lines[0].number+"-"+c.lines[c.lines.length-1].number+" : ")}switch(a._hx_index){case 0:return c=a.variable,a=a.expected,b+("Variable '"+c+"' should be of type '"+a+"'");case 1:return c=a.value,a=a.expected,b+("Identifier '"+c+"' isn't part of '"+a+"'");case 2:return c=a.value,a=a.expected,b+("Enum argument '"+c+"' should be of type '"+a+"'");
case 3:return c=a.variable,b+("Variable '"+c+"' should be in the json");case 4:return c=a.variable,b+("Variable '"+c+"' isn't part of the schema");case 5:return b+("Parser error: "+a.message);case 6:return a=a.e,b+("Custom function exception: "+(null==a?"null":J.string(a)))}};var Ce=function(a){this.linesInfo=[];for(var b=0,c,f=0,d=0;f<a.length;)switch(a.charAt(f)){case "\n":c=f;this.linesInfo.push({number:d,start:b,end:c});++d;++f;b=f;break;case "\r":c=f;"\n"==a.charAt(f+1)&&++c;this.linesInfo.push({number:d,
start:b,end:c});++d;b=f=c+1;break;default:++f}this.linesInfo.push({number:d,start:b,end:f})};l["json2object.PositionUtils"]=Ce;Ce.__name__="json2object.PositionUtils";Ce.prototype={convertPosition:function(a){var b=a.min,c=a.max;a={file:a.file,min:b+1,max:c+1,lines:[]};var f=0,d=this.linesInfo.length-1;if(b>this.linesInfo[0].end)for(;d>f;){var g=(f+d)/2|0,e=this.linesInfo[g];e.start==b&&(d=f=g);e.end<b&&(f=g+1);if(e.start>b||e.end>=b&&e.start<b)d=g}for(d=this.linesInfo.length;f<d;){g=f++;e=this.linesInfo[g];
if(e.start<=b&&e.end>=c){a.lines.push({number:e.number+1,start:b-e.start+1,end:c-e.start+1});break}e.start<=b&&b<=e.end&&a.lines.push({number:e.number+1,start:b-e.start+1,end:e.end+1});e.start<=c&&c<=e.end&&a.lines.push({number:e.number+1,start:e.start+1,end:c-e.start+1});if(e.start>=c||e.end>=c)break}return a},__class__:Ce};var rd=z["ldtk.WorldLayout"]={__ename__:!0,__constructs__:null,Free:{_hx_name:"Free",_hx_index:0,__enum__:"ldtk.WorldLayout",toString:e},GridVania:{_hx_name:"GridVania",_hx_index:1,
__enum__:"ldtk.WorldLayout",toString:e},LinearHorizontal:{_hx_name:"LinearHorizontal",_hx_index:2,__enum__:"ldtk.WorldLayout",toString:e},LinearVertical:{_hx_name:"LinearVertical",_hx_index:3,__enum__:"ldtk.WorldLayout",toString:e}};rd.__constructs__=[rd.Free,rd.GridVania,rd.LinearHorizontal,rd.LinearVertical];var qd=z["ldtk.LayerType"]={__ename__:!0,__constructs__:null,IntGrid:{_hx_name:"IntGrid",_hx_index:0,__enum__:"ldtk.LayerType",toString:e},Entities:{_hx_name:"Entities",_hx_index:1,__enum__:"ldtk.LayerType",
toString:e},Tiles:{_hx_name:"Tiles",_hx_index:2,__enum__:"ldtk.LayerType",toString:e},AutoLayer:{_hx_name:"AutoLayer",_hx_index:3,__enum__:"ldtk.LayerType",toString:e}};qd.__constructs__=[qd.IntGrid,qd.Entities,qd.Tiles,qd.AutoLayer];var zc=z["ldtk.NeighbourDir"]={__ename__:!0,__constructs__:null,North:{_hx_name:"North",_hx_index:0,__enum__:"ldtk.NeighbourDir",toString:e},South:{_hx_name:"South",_hx_index:1,__enum__:"ldtk.NeighbourDir",toString:e},West:{_hx_name:"West",_hx_index:2,__enum__:"ldtk.NeighbourDir",
toString:e},East:{_hx_name:"East",_hx_index:3,__enum__:"ldtk.NeighbourDir",toString:e}};zc.__constructs__=[zc.North,zc.South,zc.West,zc.East];var sd=function(a,b){this.cx=a;this.cy=b};l["ldtk.Point"]=sd;sd.__name__="ldtk.Point";sd.prototype={__class__:sd};var re=function(){this.connected=!0;this.buttons=[];this.axes=[]};l["lime._internal.backend.html5.GameDeviceData"]=re;re.__name__="lime._internal.backend.html5.GameDeviceData";re.prototype={__class__:re};var R=function(){this.validStatus0=(new ba("Tizen",
"gi")).match(window.navigator.userAgent)};l["lime._internal.backend.html5.HTML5HTTPRequest"]=R;R.__name__="lime._internal.backend.html5.HTML5HTTPRequest";R.loadImage=function(a){var b=new Nb;R.activeRequests<R.requestLimit?(R.activeRequests++,R.__loadImage(a,b,0)):R.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE",options:0});return b.future};R.loadImageFromBytes=function(a,b){var c=URL.createObjectURL(new Blob([a.b.bufferValue],{type:b}));return null!=c?(a=new Nb,R.activeRequests<R.requestLimit?
(R.activeRequests++,R.__loadImage(c,a,1)):R.requestQueue.add({instance:null,uri:c,promise:a,type:"IMAGE",options:1}),a.future):R.loadImage("data:"+b+";base64,"+gc.encode(a))};R.processQueue=function(){if(R.activeRequests<R.requestLimit&&0<R.requestQueue.length){R.activeRequests++;var a=R.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,a.promise);break;case "IMAGE":R.__loadImage(a.uri,a.promise,a.options);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;default:R.activeRequests--}}};
R.__fixHostname=function(a){return null==a?"":a};R.__fixPort=function(a,b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";case "https:":return"443";case "ws:":return"80";case "wss:":return"443";default:return""}return a};R.__fixProtocol=function(a){return null==a||""==a?"http:":a};R.__isInMemoryURI=function(a){return ya.startsWith(a,"data:")?!0:ya.startsWith(a,"blob:")};R.__isSameOrigin=function(a){if(null==a||""==a||R.__isInMemoryURI(a))return!0;
null==R.originElement&&(R.originElement=window.document.createElement("a"),R.originHostname=R.__fixHostname(v.location.hostname),R.originProtocol=R.__fixProtocol(v.location.protocol),R.originPort=R.__fixPort(v.location.port,R.originProtocol));var b=R.originElement;b.href=a;""==b.hostname&&(b.href=b.href);var c=R.__fixHostname(b.hostname);a=R.__fixProtocol(b.protocol);b=R.__fixPort(b.port,a);c=""==c||c==R.originHostname;b=""==b||b==R.originPort;return"file:"!=a&&c?b:!1};R.__loadImage=function(a,b,
c){var f=new Image;R.__isSameOrigin(a)||(f.crossOrigin="Anonymous");null==R.supportsImageProgress&&(R.supportsImageProgress="onprogress"in f);if(R.supportsImageProgress||R.__isInMemoryURI(a))f.addEventListener("load",function(d){R.__revokeBlobURI(a,c);d=new Nc(null,f.width,f.height);d.__srcImage=f;R.activeRequests--;R.processQueue();b.complete(new $a(d))},!1),f.addEventListener("progress",function(a){b.progress(a.loaded,a.total)},!1),f.addEventListener("error",function(d){R.__revokeBlobURI(a,c);R.activeRequests--;
R.processQueue();b.error(d.detail)},!1),f.src=a;else{var d=new XMLHttpRequest;d.onload=function(a){R.activeRequests--;R.processQueue();(new $a).__fromBytes(Ia.ofData(d.response),function(a){b.complete(a)})};d.onerror=function(a){b.error(a.message)};d.onprogress=function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};d.open("GET",a,!0);d.responseType="arraybuffer";d.overrideMimeType("text/plain; charset=x-user-defined");d.send(null)}};R.__revokeBlobURI=function(a,b){0!=(b&1)&&URL.revokeObjectURL(a)};
R.prototype={init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=c;b="";if(null==this.parent.data){c=Object.keys(this.parent.formData.h);for(var f=c.length,d=0;d<f;){var g=c[d++];0<b.length&&(b+="&");var e=this.parent.formData.h[g];if(-1<g.indexOf("[]")&&e instanceof Array){var k=[];for(e=y(e);e.hasNext();){var h=
e.next();k.push(encodeURIComponent(h))}k=k.join("&amp;"+g+"=");b+=encodeURIComponent(g)+"="+k}else k=encodeURIComponent(g)+"=",g=J.string(e),b+=k+encodeURIComponent(g)}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(J.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");a=null;k=0;for(c=this.parent.headers;k<c.length;)f=c[k],++k,"Content-Type"==f.name?
a=f.value:this.request.setRequestHeader(f.name,f.value);null!=this.parent.contentType&&(a=this.parent.contentType);null==a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.b.bufferValue):this.request.send(b)},loadData:function(a){var b=new Nb;R.activeRequests<R.requestLimit?
(R.activeRequests++,this.__loadData(a,b)):R.requestQueue.add({instance:this,uri:a,promise:b,type:"BINARY",options:0});return b.future},loadText:function(a){var b=new Nb;R.activeRequests<R.requestLimit?(R.activeRequests++,this.__loadText(a,b)):R.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT",options:0});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];for(var a,b,c=0,f=this.request.getAllResponseHeaders().split("\n");c<f.length;)b=
f[c],++c,a=ya.trim(F.substr(b,0,b.indexOf(":"))),b=ya.trim(F.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new Ue(a,b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||c.validStatus0&&0==c.request.status)?(a=null,""==c.request.responseType?null!=c.request.responseText&&
(a=Ia.ofString(c.request.responseText)):null!=c.request.response&&(a=Ia.ofData(c.request.response)),c.processResponse(),b.complete(a)):(c.processResponse(),b.error(c.request.status)),c.request=null,R.activeRequests--,R.processQueue())})},__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>=c.request.status||c.validStatus0&&0==c.request.status)?(c.processResponse(),
b.complete(c.request.responseText)):(c.processResponse(),b.error(c.request.status)),c.request=null,R.activeRequests--,R.processQueue())})},__class__:R};var Wc=function(a){this.unusedTouchesPool=new Ub;this.scale=1;this.currentTouches=new eb;this.parent=a;this.cursor=Cb.DEFAULT;this.cacheMouseY=this.cacheMouseX=0;var b=a.__attributes;Object.prototype.hasOwnProperty.call(b,"context")||(b.context={});this.renderType=b.context.type;Object.prototype.hasOwnProperty.call(b,"element")&&(a.element=b.element);
var c=a.element;Object.prototype.hasOwnProperty.call(b,"allowHighDPI")&&b.allowHighDPI&&"dom"!=this.renderType&&(this.scale=window.devicePixelRatio);a.__scale=this.scale;this.setWidth=Object.prototype.hasOwnProperty.call(b,"width")?b.width:0;this.setHeight=Object.prototype.hasOwnProperty.call(b,"height")?b.height:0;a.__width=this.setWidth;a.__height=this.setHeight;a.id=Wc.windowID++;c instanceof HTMLCanvasElement?this.canvas=c:"dom"==this.renderType?this.div=window.document.createElement("div"):this.canvas=
window.document.createElement("canvas");if(null!=this.canvas){var f=this.canvas.style;f.setProperty("-webkit-transform","translateZ(0)",null);f.setProperty("transform","translateZ(0)",null)}else null!=this.div&&(f=this.div.style,f.setProperty("-webkit-transform","translate3D(0,0,0)",null),f.setProperty("transform","translate3D(0,0,0)",null),f.position="relative",f.overflow="hidden",f.setProperty("-webkit-user-select","none",null),f.setProperty("-moz-user-select","none",null),f.setProperty("-ms-user-select",
"none",null),f.setProperty("-o-user-select","none",null));0==a.__width&&0==a.__height&&(null!=c?(a.__width=c.clientWidth,a.__height=c.clientHeight):(a.__width=window.innerWidth,a.__height=window.innerHeight),this.cacheElementWidth=a.__width,this.cacheElementHeight=a.__height,this.resizeElement=!0);null!=this.canvas?(this.canvas.width=Math.round(a.__width*this.scale),this.canvas.height=Math.round(a.__height*this.scale),this.canvas.style.width=a.__width+"px",this.canvas.style.height=a.__height+"px"):
(this.div.style.width=a.__width+"px",this.div.style.height=a.__height+"px");if(Object.prototype.hasOwnProperty.call(b,"resizable")&&b.resizable||!Object.prototype.hasOwnProperty.call(b,"width")&&0==this.setWidth&&0==this.setHeight)a.__resizable=!0;this.updateSize();if(null!=c){null!=this.canvas?c!=this.canvas&&c.appendChild(this.canvas):c.appendChild(this.div);b="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(f=0;f<b.length;){var d=b[f];++f;c.addEventListener(d,u(this,this.handleMouseEvent),
!0)}c.addEventListener("contextmenu",u(this,this.handleContextMenuEvent),!0);c.addEventListener("dragstart",u(this,this.handleDragEvent),!0);c.addEventListener("dragover",u(this,this.handleDragEvent),!0);c.addEventListener("drop",u(this,this.handleDragEvent),!0);c.addEventListener("touchstart",u(this,this.handleTouchEvent),!0);c.addEventListener("touchmove",u(this,this.handleTouchEvent),!0);c.addEventListener("touchend",u(this,this.handleTouchEvent),!0);c.addEventListener("touchcancel",u(this,this.handleTouchEvent),
!0);c.addEventListener("gamepadconnected",u(this,this.handleGamepadEvent),!0);c.addEventListener("gamepaddisconnected",u(this,this.handleGamepadEvent),!0)}this.createContext();"webgl"==a.context.type&&(this.canvas.addEventListener("webglcontextlost",u(this,this.handleContextEvent),!1),this.canvas.addEventListener("webglcontextrestored",u(this,this.handleContextEvent),!1))};l["lime._internal.backend.html5.HTML5Window"]=Wc;Wc.__name__="lime._internal.backend.html5.HTML5Window";Wc.prototype={close:function(){this.parent.application.__removeWindow(this.parent)},
createContext:function(){var a=new Ve,b=this.parent.__attributes.context;a.window=this.parent;a.attributes=b;if(null!=this.div)a.dom=this.div,a.type="dom",a.version="";else if(null!=this.canvas){var c=null,f="canvas"==this.renderType,d="opengl"==this.renderType||"opengles"==this.renderType||"webgl"==this.renderType,g=!Object.prototype.hasOwnProperty.call(b,"version")||"1"!=b.version,e=!1;if(d||!f&&(!Object.prototype.hasOwnProperty.call(b,"hardware")||b.hardware)){f=Object.prototype.hasOwnProperty.call(b,
"background")&&null==b.background;d=Object.prototype.hasOwnProperty.call(b,"colorDepth")?b.colorDepth:16;var k=Object.prototype.hasOwnProperty.call(b,"antialiasing")&&0<b.antialiasing,h=Object.prototype.hasOwnProperty.call(b,"depth")?b.depth:!0;b=Object.prototype.hasOwnProperty.call(b,"stencil")&&b.stencil;b={alpha:f||16<d,antialias:k,depth:h,premultipliedAlpha:!0,stencil:b,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!1};f=["webgl","experimental-webgl"];g&&f.unshift("webgl2");for(g=0;g<
f.length&&(d=f[g],++g,c=this.canvas.getContext(d,b),null!=c&&"webgl2"==d&&(e=!0),null==c););}null==c?(a.canvas2D=this.canvas.getContext("2d"),a.type="canvas",a.version=""):(a.webgl=Vf.fromWebGL2RenderContext(c),e&&(a.webgl2=c),null==Xd.context&&(Xd.context=c,Xd.type="webgl",Xd.version=e?2:1),a.type="webgl",a.version=e?"2":"1")}this.parent.context=a},handleContextEvent:function(a){switch(a.type){case "webglcontextlost":a.cancelable&&a.preventDefault();this.parent.context=null;this.parent.onRenderContextLost.dispatch();
break;case "webglcontextrestored":this.createContext(),this.parent.onRenderContextRestored.dispatch(this.parent.context)}},handleContextMenuEvent:function(a){(this.parent.onMouseUp.canceled||this.parent.onMouseDown.canceled)&&a.cancelable&&a.preventDefault()},handleDragEvent:function(a){switch(a.type){case "dragover":return a.preventDefault(),!1;case "dragstart":if("img"==pa.__cast(a.target,HTMLElement).nodeName.toLowerCase()&&a.cancelable)return a.preventDefault(),!1;break;case "drop":if(null!=a.dataTransfer&&
0<a.dataTransfer.files.length)return this.parent.onDropFile.dispatch(a.dataTransfer.files),a.preventDefault(),!1}return!0},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":bb.__connect(a.gamepad.index);"standard"==a.gamepad.mapping&&ib.__connect(a.gamepad.index);break;case "gamepaddisconnected":bb.__disconnect(a.gamepad.index),ib.__disconnect(a.gamepad.index)}},handleMouseEvent:function(a){if("wheel"!=a.type){if(null!=this.parent.element)if(null!=this.canvas){var b=this.canvas.getBoundingClientRect();
var c=this.parent.__width/b.width*(a.clientX-b.left);b=this.parent.__height/b.height*(a.clientY-b.top)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.parent.element.getBoundingClientRect(),c=this.parent.__width/b.width*(a.clientX-b.left),b=this.parent.__height/b.height*(a.clientY-b.top));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":a.currentTarget==this.parent.element&&window.addEventListener("mouseup",u(this,this.handleMouseEvent));
this.parent.onMouseDown.dispatch(c,b,a.button);this.parent.onMouseDown.canceled&&a.cancelable&&a.preventDefault();break;case "mouseenter":a.target==this.parent.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&a.cancelable&&a.preventDefault());break;case "mouseleave":a.target==this.parent.element&&(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.cancelable&&a.preventDefault());break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,
b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.cancelable&&a.preventDefault();break;case "mouseup":window.removeEventListener("mouseup",u(this,this.handleMouseEvent)),a.currentTarget==this.parent.element&&a.stopPropagation(),this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&a.cancelable&&a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else{switch(a.deltaMode){case 0:c=
Ec.PIXELS;break;case 1:c=Ec.LINES;break;case 2:c=Ec.PAGES;break;default:c=Ec.UNKNOWN}this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY,c);this.parent.onMouseWheel.canceled&&a.cancelable&&a.preventDefault()}},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.cancelable&&a.preventDefault();var b=null;null!=this.parent.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.parent.element.getBoundingClientRect());
var c=this.setWidth,f=this.setHeight;if(0==c||0==f)null!=b?(c=b.width,f=b.height):f=c=1;for(var d,g,e,k,h,n=0,r=a.changedTouches;n<r.length;){var p=r[n];++n;null!=b?(g=c/b.width*(p.clientX-b.left),e=f/b.height*(p.clientY-b.top)):(g=p.clientX,e=p.clientY);if("touchstart"==a.type)d=this.unusedTouchesPool.pop(),null==d?d=new xb(g/c,e/f,p.identifier,0,0,p.force,this.parent.id):(d.x=g/c,d.y=e/f,d.id=p.identifier,d.dx=0,d.dy=0,d.pressure=p.force,d.device=this.parent.id),this.currentTouches.h[p.identifier]=
d,xb.onStart.dispatch(d),null==this.primaryTouch&&(this.primaryTouch=d),d==this.primaryTouch&&this.parent.onMouseDown.dispatch(g,e,0);else if(d=this.currentTouches.h[p.identifier],null!=d)switch(k=d.x,h=d.y,d.x=g/c,d.y=e/f,d.dx=d.x-k,d.dy=d.y-h,d.pressure=p.force,a.type){case "touchcancel":xb.onCancel.dispatch(d);this.currentTouches.remove(p.identifier);this.unusedTouchesPool.add(d);d==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":xb.onEnd.dispatch(d);this.currentTouches.remove(p.identifier);
this.unusedTouchesPool.add(d);d==this.primaryTouch&&(this.parent.onMouseUp.dispatch(g,e,0),this.primaryTouch=null);break;case "touchmove":xb.onMove.dispatch(d),d==this.primaryTouch&&this.parent.onMouseMove.dispatch(g,e)}}},updateSize:function(){if(this.parent.__resizable){if(null!=this.parent.element){var a=this.parent.element.clientWidth;var b=this.parent.element.clientHeight}else a=window.innerWidth,b=window.innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=
a;this.cacheElementHeight=b;var c=this.resizeElement||0==this.setWidth&&0==this.setHeight;if(null!=this.parent.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.__width!=a||this.parent.__height!=b)this.parent.__width=a,this.parent.__height=b,null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),this.canvas.height=Math.round(b*this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=
b+"px"),this.parent.onResize.dispatch(a,b)}else{c=0!=this.setWidth?a/this.setWidth:1;var f=0!=this.setHeight?b/this.setHeight:1,d=a,g=b,e=0,k=0;c<f?(g=Math.floor(this.setHeight*c),k=Math.floor((b-g)/2)):(d=Math.floor(this.setWidth*f),e=Math.floor((a-d)/2));null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.style.width=d+"px",this.canvas.style.height=g+"px",this.canvas.style.marginLeft=e+"px",this.canvas.style.marginTop=k+"px"):(this.div.style.width=d+"px",this.div.style.height=g+"px",
this.div.style.marginLeft=e+"px",this.div.style.marginTop=k+"px")}}}},__class__:Wc};var gc=function(){};l["lime._internal.format.Base64"]=gc;gc.__name__="lime._internal.format.Base64";gc.encode=function(a){var b=[],c=gc.DICTIONARY,f=gc.EXTENDED_DICTIONARY,d=a.length,g=Math.floor(d/3),e=2*g;b.length=2*Math.ceil(d/3);for(var k=0,h=0,n;h<e;)n=a.b[k]<<16|a.b[k+1]<<8|a.b[k+2],b[h]=f[n>>12&4095],b[h+1]=f[n&4095],k+=3,h+=2;switch(d-3*g){case 1:n=a.b[k]<<16;b[h]=f[n>>12&4095];b[h+1]="==";break;case 2:n=a.b[k]<<
16|a.b[k+1]<<8,b[h]=f[n>>12&4095],b[h+1]=c[n>>6&63]+"="}return b.join("")};var vf=function(){};l["lime._internal.format.Deflate"]=vf;vf.__name__="lime._internal.format.Deflate";vf.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return Ia.ofData(a)};var wf=function(){};l["lime._internal.format.GZip"]=wf;wf.__name__="lime._internal.format.GZip";wf.decompress=function(a){a=pako.ungzip(a.b.bufferValue);return Ia.ofData(a)};var xf=function(){};l["lime._internal.format.LZMA"]=xf;xf.__name__="lime._internal.format.LZMA";
xf.decompress=function(a){return null};var yf=function(){};l["lime._internal.format.Zlib"]=yf;yf.__name__="lime._internal.format.Zlib";yf.decompress=function(a){a=pako.inflate(a.b.bufferValue);return Ia.ofData(a)};var tb=function(){};l["lime._internal.graphics.ImageCanvasUtil"]=tb;tb.__name__="lime._internal.graphics.ImageCanvasUtil";tb.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(tb.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,
0,0)),c.__srcImage=null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),tb.createCanvas(a,c.width,c.height),tb.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==Fc.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=Fc.CANVAS};tb.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&
tb.convertToCanvas(a);if(null!=c.__srcCanvas&&null==c.data)tb.createImageData(a),a.type==Fc.CANVAS&&(a.dirty=!1);else if(a.type==Fc.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)tb.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var f=c.__srcImageData.data.buffer;f=null!=f?new Uint8Array(f):null;c.data=f}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=Fc.DATA};tb.createCanvas=function(a,b,c){var f=a.buffer;null==
f.__srcCanvas&&(f.__srcCanvas=window.document.createElement("canvas"),f.__srcCanvas.width=b,f.__srcCanvas.height=c,a.get_transparent()?f.__srcContext=f.__srcCanvas.getContext("2d"):(a.get_transparent()||f.__srcCanvas.setAttribute("moz-opaque","true"),f.__srcContext=f.__srcCanvas.getContext("2d",{alpha:!1})))};tb.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,
a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer;b=null!=b?new Uint8Array(b):null;a.data=b}};tb.fillRect=function(a,b,c,f){tb.convertToCanvas(a);if(1==f){f=c>>16&255;var d=c>>8&255;var g=c&255;c=a.get_transparent()?c>>24&255:255}else f=c>>24&255,d=c>>16&255,g=c>>8&255,c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,
b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle="rgba("+f+", "+d+", "+g+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};var zf=function(){};l["lime._internal.graphics.ImageDataUtil"]=zf;zf.__name__="lime._internal.graphics.ImageDataUtil";zf.fillRect=function(a,b,c,f){switch(f){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<
24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<24|(c>>>16&255)<<16|(c>>>8&255)<<8|255);var d=a.buffer.data;if(null!=d){f=a.buffer.format;var g=a.buffer.premultiplied;g&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(ub.a16=ub.__alpha16[c&255],c=((c>>>24&255)*ub.a16>>16&255)<<24|((c>>>16&255)*ub.a16>>16&255)<<16|((c>>>8&255)*ub.a16>>16&255)<<8|c&255));b=new We(a,b);for(var e,k=0,h=b.height;k<h;){g=k++;e=b.byteOffset+b.stride*g;for(var n=0,r=b.width;n<r;){g=n++;var p=e+4*g,
t=f;g=!1;null==g&&(g=!1);null==t&&(t=0);g&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(ub.a16=ub.__alpha16[c&255],c=((c>>>24&255)*ub.a16>>16&255)<<24|((c>>>16&255)*ub.a16>>16&255)<<16|((c>>>8&255)*ub.a16>>16&255)<<8|c&255));switch(t){case 0:d[p]=c>>>24&255;d[p+1]=c>>>16&255;d[p+2]=c>>>8&255;d[p+3]=c&255;break;case 1:d[p]=c&255;d[p+1]=c>>>24&255;d[p+2]=c>>>16&255;d[p+3]=c>>>8&255;break;case 2:d[p]=c>>>8&255,d[p+1]=c>>>16&255,d[p+2]=c>>>24&255,d[p+3]=c&255}}}a.dirty=!0;a.version++}};var We=function(a,b){this.image=
a;null==b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.__update()};l["lime._internal.graphics._ImageDataUtil.ImageDataView"]=We;We.__name__="lime._internal.graphics._ImageDataUtil.ImageDataView";We.prototype={__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);
this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+this.image.offsetX)},__class__:We};var Ja=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new Nb,b.future=this,Gb.queue({promise:b,work:a});else try{this.value=a(),this.isComplete=!0}catch(c){na.lastError=c,this.error=D.caught(c).unwrap(),this.isError=!0}};l["lime.app.Future"]=Ja;Ja.__name__="lime.app.Future";Ja.withValue=function(a){var b=new Ja;b.isComplete=!0;b.value=a;return b};Ja.prototype=
{onComplete:function(a){null!=a&&(this.isComplete?a(this.value):this.isError||(null==this.__completeListeners&&(this.__completeListeners=[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},onProgress:function(a){null!=a&&(null==this.__progressListeners&&(this.__progressListeners=[]),this.__progressListeners.push(a));return this},
then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=new Ja;b.isError=!0;b.error=this.error;return b}var c=new Nb;this.onError(u(c,c.error));this.onProgress(u(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(u(c,c.error));b.onComplete(u(c,c.complete))});return c.future},__class__:Ja};var Gb=function(){};l["lime.app._Future.FutureWork"]=Gb;Gb.__name__="lime.app._Future.FutureWork";Gb.queue=function(a){null==Gb.threadPool&&(Gb.threadPool=new Xe,Gb.threadPool.doWork.add(Gb.threadPool_doWork),
Gb.threadPool.onComplete.add(Gb.threadPool_onComplete),Gb.threadPool.onError.add(Gb.threadPool_onError));Gb.threadPool.queue(a)};Gb.threadPool_doWork=function(a){try{var b=a.work();Gb.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){na.lastError=c,b=D.caught(c).unwrap(),Gb.threadPool.sendError({promise:a.promise,error:b})}};Gb.threadPool_onComplete=function(a){a.promise.complete(a.result)};Gb.threadPool_onError=function(a){a.promise.error(a.error)};var Nb=function(){this.future=new Ja};
l["lime.app.Promise"]=Nb;Nb.__name__="lime.app.Promise";Nb.prototype={complete:function(a){if(!this.future.isError&&(this.future.isComplete=!0,this.future.value=a,null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var f=c[b];++b;f(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(u(this,this.complete));a.onError(u(this,this.error));a.onProgress(u(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&
(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<c.length;){var f=c[b];++b;f(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,f=this.future.__progressListeners;c<f.length;){var d=f[c];++c;d(a,b)}return this},__class__:Nb};var ld=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};l["lime.app._Event_Dynamic_Void"]=ld;ld.__name__="lime.app._Event_Dynamic_Void";ld.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:ld};var Ye=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Float_Float_Float_Void"]=Ye;Ye.__name__="lime.app._Event_Float_Float_Float_Void";Ye.prototype={remove:function(a){for(var b=this.__listeners.length;0<=
--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var f=this.__listeners,d=this.__repeat,g=0;g<f.length&&(f[g](a,b,c),d[g]?++g:this.remove(f[g]),!this.canceled););},__class__:Ye};var Ze=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Float_Float_Int_Void"]=Ze;Ze.__name__="lime.app._Event_Float_Float_Int_Void";Ze.prototype=
{add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,
b,c){this.canceled=!1;for(var f=this.__listeners,d=this.__repeat,g=0;g<f.length&&(f[g](a,b,c),d[g]?++g:this.remove(f[g]),!this.canceled););},__class__:Ze};var md=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Float_Float_Void"]=md;md.__name__="lime.app._Event_Float_Float_Void";md.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,f=this.__repeat,d=0;d<c.length&&(c[d](a,b),f[d]?++d:this.remove(c[d]),!this.canceled););},__class__:md};
var $e=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"]=$e;$e.__name__="lime.app._Event_Float_Float_lime_ui_MouseButton_Void";$e.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var f=this.__listeners,d=this.__repeat,g=0;g<f.length&&(f[g](a,b,c),d[g]?++g:this.remove(f[g]),!this.canceled););},__class__:$e};var af=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"]=
af;af.__name__="lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";af.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var f=this.__listeners,d=this.__repeat,g=0;g<f.length&&(f[g](a,b,c),d[g]?++g:this.remove(f[g]),!this.canceled););},__class__:af};var bf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Int_Float_Float_Void"]=bf;bf.__name__="lime.app._Event_Int_Float_Float_Void";bf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=
0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:bf};var cf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Int_Float_Void"]=cf;cf.__name__="lime.app._Event_Int_Float_Void";cf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);
for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,
f=this.__repeat,d=0;d<c.length&&(c[d](a,b),f[d]?++d:this.remove(c[d]),!this.canceled););},__class__:cf};var Yd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Int_Int_Void"]=Yd;Yd.__name__="lime.app._Event_Int_Int_Void";Yd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,f=this.__repeat,d=0;d<c.length&&(c[d](a,b),f[d]?++d:this.remove(c[d]),!this.canceled););},__class__:Yd};var vc=function(){this.canceled=!1;this.__listeners=
[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Int_Void"]=vc;vc.__name__="lime.app._Event_Int_Void";vc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:vc};var df=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=df;df.__name__="lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";df.prototype={add:function(a,
b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:df};var ef=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_String_Int_Int_Void"]=ef;ef.__name__="lime.app._Event_String_Int_Int_Void";ef.prototype=
{add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:ef};var Zd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_String_Void"]=Zd;Zd.__name__="lime.app._Event_String_Void";Zd.prototype=
{add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=
!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:Zd};var Ab=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_Void_Void"]=Ab;Ab.__name__="lime.app._Event_Void_Void";Ab.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,
0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?++c:this.remove(a[c]),!this.canceled););},__class__:Ab};var $d=function(){this.canceled=
!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_graphics_RenderContext_Void"]=$d;$d.__name__="lime.app._Event_lime_graphics_RenderContext_Void";$d.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:$d};var ff=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=
ff;ff.__name__="lime.app._Event_lime_ui_GamepadAxis_Float_Void";ff.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,f=this.__repeat,d=0;d<c.length&&(c[d](a,b),f[d]?++d:this.remove(c[d]),!this.canceled););},__class__:ff};var ae=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_GamepadButton_Void"]=ae;ae.__name__="lime.app._Event_lime_ui_GamepadButton_Void";ae.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=
0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,
c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:ae};var gf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_Gamepad_Void"]=gf;gf.__name__="lime.app._Event_lime_ui_Gamepad_Void";gf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);
this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:gf};var hf=function(){this.canceled=
!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_Joystick_Void"]=hf;hf.__name__="lime.app._Event_lime_ui_Joystick_Void";hf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:hf};var be=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=be;be.__name__="lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
be.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,
1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,f=this.__repeat,d=0;d<c.length&&(c[d](a,b),f[d]?++d:this.remove(c[d]),!this.canceled););},__class__:be};var Gc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_Touch_Void"]=Gc;Gc.__name__="lime.app._Event_lime_ui_Touch_Void";Gc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var f=0,d=this.__priorities.length;f<d;){var g=f++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?++f:this.remove(b[f]),!this.canceled););},__class__:Gc};
var se=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};l["lime.app._Event_lime_ui_Window_Void"]=se;se.__name__="lime.app._Event_lime_ui_Window_Void";se.prototype={remove:function(a){for(var b=this.__listeners.length;0<=--b;)ma.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,f=0;f<b.length&&(b[f](a),c[f]?
++f:this.remove(b[f]),!this.canceled););},__class__:se};var $a=function(a,b,c,f,d,g,e){null==d&&(d=-1);null==f&&(f=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=f;this.height=d;this.version=0;null==e&&(e=Fc.CANVAS);this.type=e;if(null==a){if(0<f&&0<d)switch(this.type._hx_index){case 0:this.buffer=new Nc(null,f,d);tb.createCanvas(this,f,d);null!=g&&0!=g&&this.fillRect(new nd(0,0,f,d),g);break;case 1:a=f*d*4,a=null!=a?new Uint8Array(a):null,this.buffer=new Nc(a,f,d),null!=
g&&0!=g&&this.fillRect(new nd(0,0,f,d),g)}}else this.__fromImageBuffer(a)};l["lime.graphics.Image"]=$a;$a.__name__="lime.graphics.Image";$a.fromFile=function(a){if(null==a)return null;var b=new $a;return b.__fromFile(a)?b:null};$a.loadFromBytes=function(a){if(null==a)return Ja.withValue(null);if($a.__isPNG(a))var b="image/png";else if($a.__isJPG(a))b="image/jpeg";else if($a.__isGIF(a))b="image/gif";else if($a.__isWebP(a))b="image/webp";else return Ja.withValue(null);return R.loadImageFromBytes(a,
b)};$a.loadFromFile=function(a){return null==a?Ja.withValue(null):R.loadImage(a)};$a.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};$a.__isJPG=function(a){return null==a||4>a.length?!1:255==a.b[0]&&216==a.b[1]&&255==a.b[a.length-2]?217==a.b[a.length-1]:!1};$a.__isPNG=function(a){return null==a||8>a.length?!1:137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]?10==a.b[7]:!1};$a.__isWebP=function(a){return null==
a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};$a.prototype={fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type._hx_index){case 0:tb.fillRect(this,a,b,c);break;case 1:tb.convertToData(this);if(0==this.buffer.data.length)break;zf.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>
16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),b)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var f=this,d=new Image;d.addEventListener("load",
function(a){f.buffer=new Nc(null,d.width,d.height);f.buffer.__srcImage=d;f.offsetX=0;f.offsetY=0;f.width=f.buffer.width;f.height=f.buffer.height;null!=c&&c(f)},!1);d.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if($a.__isPNG(a))var c="image/png";else if($a.__isJPG(a))c="image/jpeg";else if($a.__isGIF(a))c="image/gif";else return!1;this.__fromBase64(gc.encode(a),c,b);return!0},__fromFile:function(a,b,c){var f=this,d=new Image;R.__isSameOrigin(a)||(d.crossOrigin="Anonymous");d.onload=function(a){f.buffer=
new Nc(null,d.width,d.height);f.buffer.__srcImage=d;f.width=d.width;f.height=d.height;null!=b&&b(f)};d.onerror=function(a){null!=c&&c()};d.src=a;return!0},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&tb.convertToData(this);return this.buffer.data},get_rect:function(){return new nd(0,0,this.width,this.height)},get_transparent:function(){return null==
this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:$a,__properties__:{set_transparent:"set_transparent",get_transparent:"get_transparent",get_rect:"get_rect",get_data:"get_data"}};var Nc=function(a,b,c,f,d){null==f&&(f=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=f;this.format=null==d?0:d;this.premultiplied=!1;this.transparent=!0};l["lime.graphics.ImageBuffer"]=Nc;Nc.__name__=
"lime.graphics.ImageBuffer";Nc.prototype={get_stride:function(){return this.width*(this.bitsPerPixel/8|0)},__class__:Nc,__properties__:{get_stride:"get_stride"}};var Fc=z["lime.graphics.ImageType"]={__ename__:!0,__constructs__:null,CANVAS:{_hx_name:"CANVAS",_hx_index:0,__enum__:"lime.graphics.ImageType",toString:e},DATA:{_hx_name:"DATA",_hx_index:1,__enum__:"lime.graphics.ImageType",toString:e},FLASH:{_hx_name:"FLASH",_hx_index:2,__enum__:"lime.graphics.ImageType",toString:e},CUSTOM:{_hx_name:"CUSTOM",
_hx_index:3,__enum__:"lime.graphics.ImageType",toString:e}};Fc.__constructs__=[Fc.CANVAS,Fc.DATA,Fc.FLASH,Fc.CUSTOM];var Ve=function(){};l["lime.graphics.RenderContext"]=Ve;Ve.__name__="lime.graphics.RenderContext";Ve.prototype={__class__:Ve};var Vf={fromWebGL2RenderContext:function(a){return a}},Xd=function(){};l["lime.graphics.opengl.GL"]=Xd;Xd.__name__="lime.graphics.opengl.GL";var ub={},nd=function(a,b,c,f){null==f&&(f=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=
c;this.height=f};l["lime.math.Rectangle"]=nd;nd.__name__="lime.math.Rectangle";nd.prototype={offset:function(a,b){this.x+=a;this.y+=b},__toFlashRectangle:function(){return null},__class__:nd};var Pa=function(){};l["lime.media.AudioBuffer"]=Pa;Pa.__name__="lime.media.AudioBuffer";Pa.fromBytes=function(a){if(null==a)return null;var b=new Pa;b.set_src(new Howl({src:["data:"+Pa.__getCodec(a)+";base64,"+gc.encode(a)],html5:!0,preload:!1}));return b};Pa.fromFile=function(a){if(null==a)return null;var b=
new Pa;b.__srcHowl=new Howl({src:[a],preload:!1});return b};Pa.fromFiles=function(a){var b=new Pa;b.__srcHowl=new Howl({src:a,preload:!1});return b};Pa.loadFromFile=function(a){var b=new Nb,c=Pa.fromFile(a);null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};Pa.loadFromFiles=function(a){var b=new Nb,c=Pa.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",
function(){b.error(null)}),c.__srcHowl.load()):b.error(null);return b.future};Pa.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";case "RIFF":if("WAVE"==a.getString(8,4))return"audio/wav";var b=a.b[1],c=a.b[2];switch(a.b[0]){case 73:if(68==b&&51==c)return"audio/mp3";break;case 255:switch(b){case 243:case 250:case 251:return"audio/mp3"}}break;case "fLaC":return"audio/flac";default:switch(b=a.b[1],c=a.b[2],a.b[0]){case 73:if(68==b&&51==c)return"audio/mp3";break;case 255:switch(b){case 243:case 250:case 251:return"audio/mp3"}}}Ua.error("Unsupported sound format",
{fileName:"lime/media/AudioBuffer.hx",lineNumber:362,className:"lime.media.AudioBuffer",methodName:"__getCodec"});return null};Pa.prototype={set_src:function(a){return this.__srcHowl=a},__class__:Pa,__properties__:{set_src:"set_src"}};var kf=function(a){if("custom"!=a){if(null==a||"web"==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.web=new window.AudioContext,this.type="web"}catch(b){na.lastError=b}null==this.web&&"web"!=a&&(this.html5=new jf,this.type="html5")}else this.type=
"custom"};l["lime.media.AudioContext"]=kf;kf.__name__="lime.media.AudioContext";kf.prototype={__class__:kf};var Rc=function(){};l["lime.media.AudioManager"]=Rc;Rc.__name__="lime.media.AudioManager";Rc.init=function(a){if(null==Rc.context){if(null==a&&(Rc.context=new kf,a=Rc.context,"openal"==a.type)){var b=a.openal,c=b.openDevice();c=b.createContext(c);b.makeContextCurrent(c);b.processContext(c)}Rc.context=a}};var jf=function(){};l["lime.media.HTML5AudioContext"]=jf;jf.__name__="lime.media.HTML5AudioContext";
jf.prototype={__class__:jf};var Af=function(){};l["lime.media.OpenALAudioContext"]=Af;Af.__name__="lime.media.OpenALAudioContext";Af.prototype={createContext:function(a,b){return Hc.createContext(a,b)},makeContextCurrent:function(a){return Hc.makeContextCurrent(a)},openDevice:function(a){return Hc.openDevice(a)},processContext:function(a){Hc.processContext(a)},__class__:Af};var Hc=function(){};l["lime.media.openal.ALC"]=Hc;Hc.__name__="lime.media.openal.ALC";Hc.createContext=function(a,b){return null};
Hc.makeContextCurrent=function(a){return!1};Hc.openDevice=function(a){return null};Hc.processContext=function(a){};var ce=function(){};l["lime.net._IHTTPRequest"]=ce;ce.__name__="lime.net._IHTTPRequest";ce.__isInterface__=!0;ce.prototype={__class__:ce};var lc=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new aa;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.__backend=
new R;this.__backend.init(this)};l["lime.net._HTTPRequest.AbstractHTTPRequest"]=lc;lc.__name__="lime.net._HTTPRequest.AbstractHTTPRequest";lc.__interfaces__=[ce];lc.prototype={__class__:lc};var xd=function(a){lc.call(this,a)};l["lime.net._HTTPRequest_Bytes"]=xd;xd.__name__="lime.net._HTTPRequest_Bytes";xd.__super__=lc;xd.prototype=x(lc.prototype,{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Nb;a=this.__backend.loadData(this.uri);a.onProgress(u(c,c.progress));
a.onError(u(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});return c.future},__class__:xd});var de=function(a){lc.call(this,a)};l["lime.net._HTTPRequest_String"]=de;de.__name__="lime.net._HTTPRequest_String";de.__super__=lc;de.prototype=x(lc.prototype,{load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Nb;a=this.__backend.loadText(this.uri);a.onProgress(u(c,c.progress));a.onError(u(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});
return c.future},__class__:de});var Ue=function(a,b){null==b&&(b="");this.name=a;this.value=b};l["lime.net.HTTPRequestHeader"]=Ue;Ue.__name__="lime.net.HTTPRequestHeader";Ue.prototype={__class__:Ue};var ee=function(a){lc.call(this,a)};l["lime.net._HTTPRequest_lime_utils_Bytes"]=ee;ee.__name__="lime.net._HTTPRequest_lime_utils_Bytes";ee.__super__=xd;ee.prototype=x(xd.prototype,{fromBytes:function(a){return Oc.fromBytes(a)},__class__:ee});var Zb=function(a,b){this.onUpdate=new Ye;this.type=a;this.id=
b};l["lime.system.Sensor"]=Zb;Zb.__name__="lime.system.Sensor";Zb.registerSensor=function(a,b){a=new Zb(a,b);Zb.sensors.push(a);return Zb.sensorByID.h[b]=a};Zb.prototype={__class__:Zb};var Cf=z["lime.system.SensorType"]={__ename__:!0,__constructs__:null,ACCELEROMETER:{_hx_name:"ACCELEROMETER",_hx_index:0,__enum__:"lime.system.SensorType",toString:e}};Cf.__constructs__=[Cf.ACCELEROMETER];var Ob=function(){};l["lime.system.System"]=Ob;Ob.__name__="lime.system.System";Ob.embed=q.lime.embed=function(a,
b,c,f,d){if(null!=Ob.__applicationEntryPoint&&Object.prototype.hasOwnProperty.call(Ob.__applicationEntryPoint.h,a)){var g="string"==typeof b?window.document.getElementById(b):null==b?window.document.createElement("div"):b;null==g?window.console.log("[lime.embed] ERROR: Cannot find target element: "+J.string(b)):(null==c&&(c=0),null==f&&(f=0),null==d&&(d={}),Object.prototype.hasOwnProperty.call(d,"background")&&"string"==typeof d.background&&(b=ya.replace(J.string(d.background),"#",""),-1<b.indexOf("0x")?
d.background=J.parseInt(b):d.background=J.parseInt("0x"+b)),d.element=g,d.width=c,d.height=f,Ob.__applicationEntryPoint.h[a](d))}};Ob.exit=function(a){};Ob.__registerEntryPoint=function(a,b){null==Ob.__applicationEntryPoint&&(Ob.__applicationEntryPoint=new aa);Ob.__applicationEntryPoint.h[a]=b};var Xe=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onRun=new ld;this.onError=new ld;this.onComplete=new ld;this.doWork=new ld;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};l["lime.system.ThreadPool"]=
Xe;Xe.__name__="lime.system.ThreadPool";Xe.prototype={queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},runWork:function(a){this.onRun.dispatch(a);this.doWork.dispatch(a)},__class__:Xe};var cc=function(a){null!=a&&(this.name=a);this.__init||(void 0==this.ascender&&(this.ascender=0),void 0==this.descender&&(this.descender=0),void 0==this.height&&(this.height=0),void 0==this.numGlyphs&&(this.numGlyphs=0),void 0==
this.underlinePosition&&(this.underlinePosition=0),void 0==this.underlineThickness&&(this.underlineThickness=0),void 0==this.unitsPerEM&&(this.unitsPerEM=0),null!=this.__fontID?Z.isLocal(this.__fontID)&&this.__fromBytes(Z.getBytes(this.__fontID)):null!=this.__fontPath&&this.__fromFile(this.__fontPath))};l["lime.text.Font"]=cc;cc.__name__="lime.text.Font";cc.fromFile=function(a){if(null==a)return null;var b=new cc;b.__fromFile(a);return b};cc.loadFromName=function(a){return(new cc).__loadFromName(a)};
cc.__measureFontNode=function(a){var b=window.document.createElement("span");b.setAttribute("aria-hidden","true");var c=window.document.createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;window.document.body.appendChild(b);return b};cc.prototype={__fromBytes:function(a){this.__fontPath=
null},__fromFile:function(a){this.__fontPath=a},__loadFromName:function(a){var b=this,c=new Nb;this.name=a;var f=v.navigator.userAgent.toLowerCase(),d=0<=f.indexOf(" safari/")&&0>f.indexOf(" chrome/");f=(new ba("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)","i")).match(f);if(!d&&!f&&window.document.fonts&&(h=window.document.fonts,u(h,h.load)))window.document.fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(d){Ua.warn('Could not load web font "'+a+'"',{fileName:"lime/text/Font.hx",
lineNumber:513,className:"lime.text.Font",methodName:"__loadFromName"});c.complete(b)});else{var g=cc.__measureFontNode("'"+a+"', sans-serif"),e=cc.__measureFontNode("'"+a+"', serif"),k=g.offsetWidth,r=e.offsetWidth,n=-1,t=0,p,l;n=window.setInterval(function(){t+=1;p=g.offsetWidth!=k||e.offsetWidth!=r;l=3E3<=50*t;if(p||l)window.clearInterval(n),g.parentNode.removeChild(g),e.parentNode.removeChild(e),e=g=null,l&&Ua.warn('Could not load web font "'+a+'"',{fileName:"lime/text/Font.hx",lineNumber:548,
className:"lime.text.Font",methodName:"__loadFromName"}),c.complete(b)},50)}return c.future},__class__:cc};var ib=function(a){this.onDisconnect=new Ab;this.onButtonUp=new ae;this.onButtonDown=new ae;this.onAxisMove=new ff;this.id=a;this.connected=!0};l["lime.ui.Gamepad"]=ib;ib.__name__="lime.ui.Gamepad";ib.__connect=function(a){if(!ib.devices.h.hasOwnProperty(a)){var b=new ib(a);ib.devices.h[a]=b;ib.onConnect.dispatch(b)}};ib.__disconnect=function(a){var b=ib.devices.h[a];null!=b&&(b.connected=!1);
ib.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};ib.prototype={__class__:ib};var bb=function(a){this.onTrackballMove=new bf;this.onHatMove=new df;this.onDisconnect=new Ab;this.onButtonUp=new vc;this.onButtonDown=new vc;this.onAxisMove=new cf;this.id=a;this.connected=!0};l["lime.ui.Joystick"]=bb;bb.__name__="lime.ui.Joystick";bb.__connect=function(a){if(!bb.devices.h.hasOwnProperty(a)){var b=new bb(a);bb.devices.h[a]=b;bb.onConnect.dispatch(b)}};bb.__disconnect=function(a){var b=bb.devices.h[a];
null!=b&&(b.connected=!1);bb.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};bb.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};bb.prototype={__class__:bb};var Cb=z["lime.ui.MouseCursor"]={__ename__:!0,__constructs__:null,ARROW:{_hx_name:"ARROW",_hx_index:0,__enum__:"lime.ui.MouseCursor",toString:e},CROSSHAIR:{_hx_name:"CROSSHAIR",_hx_index:1,__enum__:"lime.ui.MouseCursor",toString:e},DEFAULT:{_hx_name:"DEFAULT",
_hx_index:2,__enum__:"lime.ui.MouseCursor",toString:e},MOVE:{_hx_name:"MOVE",_hx_index:3,__enum__:"lime.ui.MouseCursor",toString:e},POINTER:{_hx_name:"POINTER",_hx_index:4,__enum__:"lime.ui.MouseCursor",toString:e},RESIZE_NESW:{_hx_name:"RESIZE_NESW",_hx_index:5,__enum__:"lime.ui.MouseCursor",toString:e},RESIZE_NS:{_hx_name:"RESIZE_NS",_hx_index:6,__enum__:"lime.ui.MouseCursor",toString:e},RESIZE_NWSE:{_hx_name:"RESIZE_NWSE",_hx_index:7,__enum__:"lime.ui.MouseCursor",toString:e},RESIZE_WE:{_hx_name:"RESIZE_WE",
_hx_index:8,__enum__:"lime.ui.MouseCursor",toString:e},TEXT:{_hx_name:"TEXT",_hx_index:9,__enum__:"lime.ui.MouseCursor",toString:e},WAIT:{_hx_name:"WAIT",_hx_index:10,__enum__:"lime.ui.MouseCursor",toString:e},WAIT_ARROW:{_hx_name:"WAIT_ARROW",_hx_index:11,__enum__:"lime.ui.MouseCursor",toString:e},CUSTOM:{_hx_name:"CUSTOM",_hx_index:12,__enum__:"lime.ui.MouseCursor",toString:e}};Cb.__constructs__=[Cb.ARROW,Cb.CROSSHAIR,Cb.DEFAULT,Cb.MOVE,Cb.POINTER,Cb.RESIZE_NESW,Cb.RESIZE_NS,Cb.RESIZE_NWSE,Cb.RESIZE_WE,
Cb.TEXT,Cb.WAIT,Cb.WAIT_ARROW,Cb.CUSTOM];var Ec=z["lime.ui.MouseWheelMode"]={__ename__:!0,__constructs__:null,PIXELS:{_hx_name:"PIXELS",_hx_index:0,__enum__:"lime.ui.MouseWheelMode",toString:e},LINES:{_hx_name:"LINES",_hx_index:1,__enum__:"lime.ui.MouseWheelMode",toString:e},PAGES:{_hx_name:"PAGES",_hx_index:2,__enum__:"lime.ui.MouseWheelMode",toString:e},UNKNOWN:{_hx_name:"UNKNOWN",_hx_index:3,__enum__:"lime.ui.MouseWheelMode",toString:e}};Ec.__constructs__=[Ec.PIXELS,Ec.LINES,Ec.PAGES,Ec.UNKNOWN];
var xb=function(a,b,c,f,d,g,e){this.x=a;this.y=b;this.id=c;this.dx=f;this.dy=d;this.pressure=g;this.device=e};l["lime.ui.Touch"]=xb;xb.__name__="lime.ui.Touch";xb.prototype={__class__:xb};var ue=function(a,b){this.onTextInput=new Zd;this.onTextEdit=new ef;this.onRestore=new Ab;this.onResize=new Yd;this.onRenderContextRestored=new $d;this.onRenderContextLost=new Ab;this.onRender=new $d;this.onMove=new md;this.onMouseWheel=new af;this.onMouseUp=new Ze;this.onMouseMoveRelative=new md;this.onMouseMove=
new md;this.onMouseDown=new $e;this.onMinimize=new Ab;this.onLeave=new Ab;this.onKeyUp=new be;this.onKeyDown=new be;this.onFullscreen=new Ab;this.onFocusOut=new Ab;this.onFocusIn=new Ab;this.onExpose=new Ab;this.onEnter=new Ab;this.onDropFile=new Zd;this.onDeactivate=new Ab;this.onClose=new Ab;this.onActivate=new Ab;this.application=a;this.__attributes=null!=b?b:{};Object.prototype.hasOwnProperty.call(this.__attributes,"parameters")&&(this.parameters=this.__attributes.parameters);this.__height=this.__width=
0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;this.__backend=new Wc(this)};l["lime.ui.Window"]=ue;ue.__name__="lime.ui.Window";ue.prototype={close:function(){this.__backend.close()},__class__:ue};var mc=function(){this.data=new aa;this.paths=[]};l["lime.utils.AssetBundle"]=mc;mc.__name__="lime.utils.AssetBundle";mc.fromBytes=function(a){a=new Vd(a);return mc.__extractBundle(a)};mc.loadFromBytes=function(a){return Ja.withValue(mc.fromBytes(a))};mc.loadFromFile=
function(a){return Oc.loadFromFile(a).then(mc.loadFromBytes)};mc.__extractBundle=function(a){var b=Zc.readZip(a);a=new mc;for(b=b.h;null!=b;){var c=b.item;b=b.next;if(c.compressed){var f=a.data,d=c.fileName,g=Oc.decompress(c.data,fe.DEFLATE);f.h[d]=g}else a.data.h[c.fileName]=c.data;a.paths.push(c.fileName)}return a};mc.prototype={__class__:mc};var lf=function(){this.enabled=!0;this.audio=new aa;this.font=new aa;this.image=new aa;this.version=580413};l["lime.utils.AssetCache"]=lf;lf.__name__="lime.utils.AssetCache";
lf.prototype={exists:function(a,b){return("IMAGE"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.image.h,a)||("FONT"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.font.h,a)||("SOUND"==b||"MUSIC"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.audio.h,a)?!0:!1},set:function(a,b,c){switch(b){case "FONT":this.font.h[a]=c;break;case "IMAGE":if(!(c instanceof $a))throw D.thrown("Cannot cache non-Image asset: "+J.string(c)+" as Image");this.image.h[a]=c;break;case "MUSIC":case "SOUND":if(!(c instanceof
Pa))throw D.thrown("Cannot cache non-AudioBuffer asset: "+J.string(c)+" as AudioBuffer");this.audio.h[a]=c;break;default:throw D.thrown(b+" assets are not cachable");}},clear:function(a){if(null==a)this.audio=new aa,this.font=new aa,this.image=new aa;else{var b=this.audio.h;b=Object.keys(b);for(var c=b.length,f=0;f<c;){var d=b[f++];if(ya.startsWith(d,a)){var g=this.audio;Object.prototype.hasOwnProperty.call(g.h,d)&&delete g.h[d]}}b=this.font.h;b=Object.keys(b);c=b.length;for(f=0;f<c;)d=b[f++],ya.startsWith(d,
a)&&(g=this.font,Object.prototype.hasOwnProperty.call(g.h,d)&&delete g.h[d]);b=this.image.h;b=Object.keys(b);c=b.length;for(f=0;f<c;)d=b[f++],ya.startsWith(d,a)&&(g=this.image,Object.prototype.hasOwnProperty.call(g.h,d)&&delete g.h[d])}},__class__:lf};var nc=function(){this.types=new aa;this.sizes=new aa;this.preload=new aa;this.paths=new aa;this.pathGroups=new aa;this.classTypes=new aa;this.cachedText=new aa;this.cachedImages=new aa;this.cachedFonts=new aa;this.cachedBytes=new aa;this.cachedAudioBuffers=
new aa;this.onChange=new Ab;this.bytesTotal=this.bytesLoaded=0};l["lime.utils.AssetLibrary"]=nc;nc.__name__="lime.utils.AssetLibrary";nc.fromBundle=function(a){if(Object.prototype.hasOwnProperty.call(a.data.h,"library.json")){var b=Eb.fromBytes(a.data.h["library.json"]);if(null!=b){if(null==b.libraryType)var c=new nc;else if(c=l[b.libraryType],null!=c)c=Fa.createInstance(c,b.libraryArgs);else return Ua.warn("Could not find library type: "+b.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:122,
className:"lime.utils.AssetLibrary",methodName:"fromBundle"}),null;c.__fromBundle(a,b);return c}}else return c=new nc,c.__fromBundle(a),c;return null};nc.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new nc;else if(b=l[a.libraryType],null!=b)b=Fa.createInstance(b,a.libraryArgs);else return Ua.warn("Could not find library type: "+a.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:160,className:"lime.utils.AssetLibrary",methodName:"fromManifest"}),null;b.__fromManifest(a);
return b};nc.prototype={exists:function(a,b){b=null!=b?pa.__cast(b,String):null;a=this.types.h[a];return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);case "TEMPLATE":throw D.thrown("Not sure how to get template: "+a);case "TEXT":return this.getText(a);
default:throw D.thrown("Unknown asset type: "+b);}},getAudioBuffer:function(a){return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,a)?this.cachedAudioBuffers.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Pa.fromBytes(pa.__cast(Fa.createInstance(this.classTypes.h[a],[]),Ia)):Pa.fromFile(this.paths.h[a])},getBytes:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a))return this.cachedBytes.h[a];if(Object.prototype.hasOwnProperty.call(this.cachedText.h,
a)){var b=Oc.ofString(this.cachedText.h[a]);return this.cachedBytes.h[a]=b}return Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?pa.__cast(Fa.createInstance(this.classTypes.h[a],[]),Ia):Oc.fromFile(this.paths.h[a])},getFont:function(a){return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a)?this.cachedFonts.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?pa.__cast(Fa.createInstance(this.classTypes.h[a],[]),cc):cc.fromFile(this.paths.h[a])},getImage:function(a){return Object.prototype.hasOwnProperty.call(this.cachedImages.h,
a)?this.cachedImages.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?pa.__cast(Fa.createInstance(this.classTypes.h[a],[]),$a):$a.fromFile(this.paths.h[a])},getText:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedText.h,a))return this.cachedText.h[a];a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){if(Object.prototype.hasOwnProperty.call(this.classTypes.h,a))return!0;b=null!=b?pa.__cast(b,String):null;if(null==b)return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,
a)?!0:Object.prototype.hasOwnProperty.call(this.cachedText.h,a);switch(b){case "FONT":return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a);case "IMAGE":return Object.prototype.hasOwnProperty.call(this.cachedImages.h,a);case "MUSIC":case "SOUND":return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,a);default:return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?!0:Object.prototype.hasOwnProperty.call(this.cachedText.h,a)}},load:function(){if(this.loaded)return Ja.withValue(this);
if(null==this.promise){this.promise=new Nb;this.bytesLoadedCache=new aa;this.assetsLoaded=0;this.assetsTotal=1;for(var a=Object.keys(this.preload.h),b=a.length,c=0;c<b;){var f=a[c++];if(this.preload.h[f]){Ua.verbose("Preloading asset: "+f+" ["+this.types.h[f]+"]",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:405,className:"lime.utils.AssetLibrary",methodName:"load"});var d=this.types.h[f];if(null!=d)switch(d){case "BINARY":this.assetsTotal++;d=this.loadBytes(f);d.onProgress(function(a,b){return function(c,
d){b[0](a[0],c,d)}}([f],[u(this,this.load_onProgress)]));d.onError(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.load_onError)]));d.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;d=this.loadFont(f);d.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([f],[u(this,this.load_onProgress)]));d.onError(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.load_onError)]));
d.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;d=this.loadImage(f);d.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([f],[u(this,this.load_onProgress)]));d.onError(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.load_onError)]));d.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;
d=this.loadAudioBuffer(f);d.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([f],[u(this,this.load_onProgress)]));d.onError(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadAudioBuffer_onError)]));d.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,d=this.loadText(f),d.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([f],[u(this,this.load_onProgress)])),d.onError(function(a,
b){return function(c){b[0](a[0],c)}}([f],[u(this,this.load_onError)])),d.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([f],[u(this,this.loadText_onComplete)]))}}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,a)?Ja.withValue(this.cachedAudioBuffers.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ja.withValue(Fa.createInstance(this.classTypes.h[a],[])):Object.prototype.hasOwnProperty.call(this.pathGroups.h,
a)?Pa.loadFromFiles(this.pathGroups.h[a]):Pa.loadFromFile(this.paths.h[a])},loadBytes:function(a){return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?Ja.withValue(this.cachedBytes.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ja.withValue(Fa.createInstance(this.classTypes.h[a],[])):Oc.loadFromFile(this.paths.h[a])},loadFont:function(a){return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a)?Ja.withValue(this.cachedFonts.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,
a)?(a=Fa.createInstance(this.classTypes.h[a],[]),a.__loadFromName(a.name)):cc.loadFromName(this.paths.h[a])},loadImage:function(a){var b=this;return Object.prototype.hasOwnProperty.call(this.cachedImages.h,a)?Ja.withValue(this.cachedImages.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ja.withValue(Fa.createInstance(this.classTypes.h[a],[])):Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?$a.loadFromBytes(this.cachedBytes.h[a]).then(function(c){var f=b.cachedBytes;Object.prototype.hasOwnProperty.call(f.h,
a)&&delete f.h[a];b.cachedImages.h[a]=c;return Ja.withValue(c)}):$a.loadFromFile(this.paths.h[a])},loadText:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedText.h,a))return Ja.withValue(this.cachedText.h[a]);if(Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)||Object.prototype.hasOwnProperty.call(this.classTypes.h,a)){var b=this.getBytes(a);if(null==b)return Ja.withValue(null);b=b.getString(0,b.length);this.cachedText.h[a]=b;return Ja.withValue(b)}return(new de).load(this.paths.h[a])},
unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;null!=a&&Ua.verbose("Loaded asset: "+a+" ["+this.types.h[a]+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:619,className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"});if(null!=a){var b=Object.prototype.hasOwnProperty.call(this.sizes.h,a)?this.sizes.h[a]:0;if(Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h,a)){var c=this.bytesLoadedCache.h[a];c<b&&(this.bytesLoaded+=
b-c)}else this.bytesLoaded+=b;this.bytesLoadedCache.h[a]=b}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,this.bytesTotal),this.promise.complete(this))},__cacheBreak:function(a){return Z.__cacheBreak(a)},__fromBundle:function(a,b){if(null!=b){var c=0;for(b=b.assets;c<b.length;){var f=b[c];++c;var d=Object.prototype.hasOwnProperty.call(f,"id")?f.id:f.path;var g=a.data.h[f.path];if(Object.prototype.hasOwnProperty.call(f,
"type")){var e=f.type;"TEXT"==e?this.cachedText.h[d]=null!=g?J.string(g):null:this.cachedBytes.h[d]=g;this.types.h[d]=f.type}else this.cachedBytes.h[d]=g,this.types.h[d]="BINARY"}}else for(c=0,b=a.paths;c<b.length;)d=b[c],++c,this.cachedBytes.h[d]=a.data.h[d],this.types.h[d]="BINARY"},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var f=0,d=a.assets;f<d.length;){var g=d[f];++f;var e=b&&Object.prototype.hasOwnProperty.call(g,"size")?g.size:100;var k=
Object.prototype.hasOwnProperty.call(g,"id")?g.id:g.path;if(Object.prototype.hasOwnProperty.call(g,"path")){var h=this.paths;var n=this.__cacheBreak(this.__resolvePath(c+J.string(ma.field(g,"path"))));h.h[k]=n}if(Object.prototype.hasOwnProperty.call(g,"pathGroup")){h=ma.field(g,"pathGroup");n=0;for(var r=h.length;n<r;){var p=n++;h[p]=this.__cacheBreak(this.__resolvePath(c+h[p]))}this.pathGroups.h[k]=h}this.sizes.h[k]=e;this.types.h[k]=g.type;Object.prototype.hasOwnProperty.call(g,"preload")&&(this.preload.h[k]=
ma.field(g,"preload"));Object.prototype.hasOwnProperty.call(g,"className")&&(e=ma.field(g,"className"),e=l[e],this.classTypes.h[k]=e)}f=this.bytesTotal=0;for(d=a.assets;f<d.length;)g=d[f],++f,k=Object.prototype.hasOwnProperty.call(g,"id")?g.id:g.path,Object.prototype.hasOwnProperty.call(this.preload.h,k)&&this.preload.h[k]&&Object.prototype.hasOwnProperty.call(this.sizes.h,k)&&(this.bytesTotal+=this.sizes.h[k])},__resolvePath:function(a){a=ya.replace(a,"\\","/");var b=a.indexOf(":");ya.startsWith(a,
"http")&&0<b?(b+=3,a=F.substr(a,0,b)+ya.replace(F.substr(a,b,null),"//","/")):a=ya.replace(a,"//","/");if(-1<a.indexOf("./")){a=a.split("/");b=[];for(var c=0,f=a.length;c<f;){var d=c++;".."==a[d]?0==d||".."==b[d-1]?b.push(".."):b.pop():"."==a[d]?0==d&&b.push("."):b.push(a[d])}a=b.join("/")}return a},loadAudioBuffer_onComplete:function(a,b){this.cachedAudioBuffers.h[a]=b;if(Object.prototype.hasOwnProperty.call(this.pathGroups.h,a))for(var c=this.pathGroups.h[a],f=Object.keys(this.pathGroups.h),d=f.length,
g=0;g<d;){var e=f[g++];if(e!=a)for(var k=0;k<c.length;){var h=c[k];++k;if(-1<this.pathGroups.h[e].indexOf(h)){this.cachedAudioBuffers.h[e]=b;break}}}this.__assetLoaded(a)},loadAudioBuffer_onError:function(a,b){null!=b&&""!=b?Ua.warn('Could not load "'+a+'": '+J.string(b),{fileName:"lime/utils/AssetLibrary.hx",lineNumber:865,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"}):Ua.warn('Could not load "'+a+'"',{fileName:"lime/utils/AssetLibrary.hx",lineNumber:869,className:"lime.utils.AssetLibrary",
methodName:"loadAudioBuffer_onError"});this.loadAudioBuffer_onComplete(a,new Pa)},loadBytes_onComplete:function(a,b){this.cachedBytes.h[a]=b;this.__assetLoaded(a)},loadFont_onComplete:function(a,b){this.cachedFonts.h[a]=b;this.__assetLoaded(a)},loadImage_onComplete:function(a,b){this.cachedImages.h[a]=b;this.__assetLoaded(a)},loadText_onComplete:function(a,b){this.cachedText.h[a]=b;this.__assetLoaded(a)},load_onError:function(a,b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+
J.string(b)):this.promise.error('Error loading asset "'+a+'"')},load_onProgress:function(a,b,c){if(0<b){var f=this.sizes.h[a];0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*f)):b>f&&(b=f);Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h,a)?(f=this.bytesLoadedCache.h[a],b!=f&&(this.bytesLoaded+=b-f)):this.bytesLoaded+=b;this.bytesLoadedCache.h[a]=b;this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:nc};var Eb=function(){this.assets=[];this.libraryArgs=[];this.version=2};l["lime.utils.AssetManifest"]=
Eb;Eb.__name__="lime.utils.AssetManifest";Eb.fromBytes=function(a,b){return null!=a?Eb.parse(a.getString(0,a.length),b):null};Eb.loadFromFile=function(a,b){a=Eb.__resolvePath(a);b=Eb.__resolveRootPath(b,a);return null==a?null:Oc.loadFromFile(a).then(function(a){return Ja.withValue(Eb.fromBytes(a,b))})};Eb.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new Eb;Object.prototype.hasOwnProperty.call(a,"name")&&(c.name=a.name);Object.prototype.hasOwnProperty.call(a,"libraryType")&&
(c.libraryType=a.libraryType);Object.prototype.hasOwnProperty.call(a,"libraryArgs")&&(c.libraryArgs=a.libraryArgs);if(Object.prototype.hasOwnProperty.call(a,"assets")){var f=a.assets;Object.prototype.hasOwnProperty.call(a,"version")&&2>=a.version?c.assets=Jb.run(f):c.assets=f}Object.prototype.hasOwnProperty.call(a,"rootPath")&&(c.rootPath=a.rootPath);null!=b&&""!=b&&(c.rootPath=null==c.rootPath||""==c.rootPath?b:b+"/"+c.rootPath);return c};Eb.__resolvePath=function(a){if(null==a)return null;var b=
a.indexOf("?");var c=-1<b?F.substr(a,0,b):a;for(c=ya.replace(c,"\\","/");ya.endsWith(c,"/");)c=F.substr(c,0,c.length-1);return ya.endsWith(c,".bundle")?-1<b?c+"/library.json"+F.substr(a,b,null):c+"/library.json":a};Eb.__resolveRootPath=function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?F.substr(b,0,a):b;for(a=ya.replace(a,"\\","/");ya.endsWith(a,"/");){if("/"==a)return a;a=F.substr(a,0,a.length-1)}return ya.endsWith(a,".bundle")?a:Dc.directory(a)};Eb.prototype={__class__:Eb};var Z=function(){};
l["lime.utils.Assets"]=Z;Z.__name__="lime.utils.Assets";Z.getAsset=function(a,b,c){if(c&&Z.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var f=Z.cache.font.h[a];if(null!=f)return f;break;case "IMAGE":f=Z.cache.image.h[a];if(Z.isValidImage(f))return f;break;case "MUSIC":case "SOUND":f=Z.cache.audio.h[a];if(Z.isValidAudio(f))return f;break;case "TEMPLATE":throw D.thrown("Not sure how to get template: "+a);default:return null}var d=a.indexOf(":");f=a.substring(0,d);d=a.substring(d+
1);var g=Z.getLibrary(f);if(null!=g)if(g.exists(d,b)){if(g.isLocal(d,b))return f=g.getAsset(d,b),c&&Z.cache.enabled&&Z.cache.set(a,b,f),f;Ua.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"lime/utils/Assets.hx",lineNumber:133,className:"lime.utils.Assets",methodName:"getAsset"})}else Ua.error("There is no "+b+' asset with an ID of "'+a+'"',{fileName:"lime/utils/Assets.hx",lineNumber:138,className:"lime.utils.Assets",methodName:"getAsset"});else Ua.error(Z.__libraryNotFound(f),
{fileName:"lime/utils/Assets.hx",lineNumber:143,className:"lime.utils.Assets",methodName:"getAsset"});return null};Z.getBytes=function(a){return Z.getAsset(a,"BINARY",!1)};Z.getLibrary=function(a){if(null==a||""==a)a="default";return Z.libraries.h[a]};Z.isLocal=function(a,b,c){null==c&&(c=!0);if(c&&Z.cache.enabled&&Z.cache.exists(a,b))return!0;var f=a.indexOf(":");c=a.substring(0,f);a=a.substring(f+1);c=Z.getLibrary(c);return null!=c?c.isLocal(a,b):!1};Z.isValidAudio=function(a){return null!=a};Z.isValidImage=
function(a){return null!=a?null!=a.buffer:!1};Z.loadLibrary=function(a){var b=new Nb,c=Z.getLibrary(a);if(null!=c)return c.load();c=a;var f=null;if(Object.prototype.hasOwnProperty.call(Z.bundlePaths.h,a))mc.loadFromFile(Z.bundlePaths.h[a]).onComplete(function(c){null==c?b.error('Cannot load bundle for library "'+a+'"'):(c=nc.fromBundle(c),null==c?b.error('Cannot open library "'+a+'"'):(Z.libraries.h[a]=c,c.onChange.add((h=Z.onChange,u(h,h.dispatch))),b.completeWith(c.load())))}).onError(function(c){b.error('There is no asset library with an ID of "'+
a+'"')});else Object.prototype.hasOwnProperty.call(Z.libraryPaths.h,a)?(c=Z.libraryPaths.h[a],f=Dc.directory(c)):(ya.endsWith(c,".bundle")?(f=c,c+="/library.json"):f=Dc.directory(c),c=Z.__cacheBreak(c)),Eb.loadFromFile(c,f).onComplete(function(c){null==c?b.error('Cannot parse asset manifest for library "'+a+'"'):(c=nc.fromManifest(c),null==c?b.error('Cannot open library "'+a+'"'):(Z.libraries.h[a]=c,c.onChange.add((h=Z.onChange,u(h,h.dispatch))),b.completeWith(c.load())))}).onError(function(c){b.error('There is no asset library with an ID of "'+
a+'"')});return b.future};Z.registerLibrary=function(a,b){if(Object.prototype.hasOwnProperty.call(Z.libraries.h,a)){if(Z.libraries.h[a]==b)return;Z.unloadLibrary(a)}null!=b&&b.onChange.add(Z.library_onChange);Z.libraries.h[a]=b};Z.unloadLibrary=function(a){if(null==a||""==a)a="default";var b=Z.libraries.h[a];null!=b&&(Z.cache.clear(a+":"),b.onChange.remove(Z.library_onChange),b.unload());b=Z.libraries;Object.prototype.hasOwnProperty.call(b.h,a)&&delete b.h[a]};Z.__cacheBreak=function(a){0<Z.cache.version&&
(a=-1<a.indexOf("?")?a+("&"+Z.cache.version):a+("?"+Z.cache.version));return a};Z.__libraryNotFound=function(a){if(null==a||""==a)a="default";return null==ha.current||null==ha.current.__preloader||ha.current.__preloader.complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};Z.library_onChange=function(){Z.cache.clear();Z.onChange.dispatch()};var Oc={_new:function(a,b){return new Ia(b)},decompress:function(a,b){switch(b._hx_index){case 0:return vf.decompress(a);
case 1:return wf.decompress(a);case 2:return xf.decompress(a);case 3:return yf.decompress(a)}},fromBytes:function(a){return null==a?null:Oc._new(a.length,a.b.bufferValue)},fromFile:function(a){return null},loadFromFile:function(a){return(new ee).load(a)},ofString:function(a){a=Ia.ofString(a);return Oc._new(a.length,a.b.bufferValue)}},fe=z["lime.utils.CompressionAlgorithm"]={__ename__:!0,__constructs__:null,DEFLATE:{_hx_name:"DEFLATE",_hx_index:0,__enum__:"lime.utils.CompressionAlgorithm",toString:e},
GZIP:{_hx_name:"GZIP",_hx_index:1,__enum__:"lime.utils.CompressionAlgorithm",toString:e},LZMA:{_hx_name:"LZMA",_hx_index:2,__enum__:"lime.utils.CompressionAlgorithm",toString:e},ZLIB:{_hx_name:"ZLIB",_hx_index:3,__enum__:"lime.utils.CompressionAlgorithm",toString:e}};fe.__constructs__=[fe.DEFLATE,fe.GZIP,fe.LZMA,fe.ZLIB];var Ua=function(){};l["lime.utils.Log"]=Ua;Ua.__name__="lime.utils.Log";Ua.error=function(a,b){if(1<=Ua.level){a="["+b.className+"] ERROR: "+J.string(a);if(Ua.throwErrors)throw D.thrown(a);
console.error(a)}};Ua.verbose=function(a,b){5<=Ua.level&&(a="["+b.className+"] "+J.string(a),console.log(a))};Ua.warn=function(a,b){2<=Ua.level&&console.warn("["+b.className+"] WARNING: "+J.string(a))};var te=function(){this.bytesTotalCache=new aa;this.bytesLoadedCache2=new aa;this.bytesLoadedCache=new Bb;this.onProgress=new Yd;this.onComplete=new Ab;this.bytesTotal=this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(u(this,this.update))};l["lime.utils.Preloader"]=te;te.__name__=
"lime.utils.Preloader";te.prototype={addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var f=c[b];++b;this.bytesTotal+=f.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=this.libraries;b<c.length;)f=[c[b]],++b,Ua.verbose("Preloading asset library",{fileName:"lime/utils/Preloader.hx",lineNumber:132,className:"lime.utils.Preloader",
methodName:"load"}),f[0].load().onProgress(function(b){return function(c,d){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+c:a.bytesLoaded+(c-a.bytesLoadedCache.h[b[0].__id__]);a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(f)).onComplete(function(b){return function(c){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+b[0].bytesTotal:a.bytesLoaded+(b[0].bytesTotal-a.bytesLoadedCache.h[b[0].__id__]);
a.loadedAssetLibrary()}}(f)).onError(function(){return function(a){Ua.error(a,{fileName:"lime/utils/Preloader.hx",lineNumber:168,className:"lime.utils.Preloader",methodName:"load"})}}());b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?Ua.verbose("Loaded asset library: "+
a+" ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:195,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"}):Ua.verbose("Loaded asset library ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:199,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||this.simulateProgress||!this.preloadComplete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){},updateProgress:function(){var a=
this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=!0;for(var b=0,c=this.libraryNames;b<c.length;){var f=[c[b]];++b;Ua.verbose("Preloading asset library: "+f[0],{fileName:"lime/utils/Preloader.hx",lineNumber:236,className:"lime.utils.Preloader",methodName:"updateProgress"});Z.loadLibrary(f[0]).onProgress(function(b){return function(c,d){0<d&&(Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h,
b[0])||(a.bytesTotalCache.h[b[0]]=d,a.bytesTotal+=d-200),c>d&&(c=d),Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h,b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.h[b[0]]:a.bytesLoaded+=c,a.bytesLoadedCache2.h[b[0]]=c,a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal))}}(f)).onComplete(function(b){return function(c){c=200;Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h,b[0])&&(c=a.bytesTotalCache.h[b[0]]);Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h,
b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.h[b[0]]:a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(f)).onError(function(){return function(a){Ua.error(a,{fileName:"lime/utils/Preloader.hx",lineNumber:290,className:"lime.utils.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,Ua.verbose("Preload complete",{fileName:"lime/utils/Preloader.hx",lineNumber:301,className:"lime.utils.Preloader",
methodName:"updateProgress"})),this.start())},__class__:te};var Ge=function(a,b){this.drawNeedsUpdate=!1;this.totalTicksPassed=this.elapsedMsSinceLastTick=0;this.isUpdating=!1;this.window=a;this.config=null!=b?b:{framesPerSecond:60,drawOnlyWhenRequested:!1};this.setTickDuration(Math.floor(1E3/this.config.framesPerSecond));this.loop=new ge;this.loop.onInit(this)};l["ob.gum.Gum"]=Ge;Ge.__name__="ob.gum.Gum";Ge.prototype={setTickDuration:function(a){this.tickDurationMs=a},toggleUpdate:function(a){this.isUpdating=
null!=a?a:!this.isUpdating},changeLoop:function(a){this.loop=a;this.loop.onInit(this)},onUpdate:function(a){this.isUpdating&&(this.loop.onUpdate(a),this.elapsedMsSinceLastTick+=a,this.elapsedMsSinceLastTick>=this.tickDurationMs&&(this.elapsedMsSinceLastTick=0,this.totalTicksPassed++,this.drawNeedsUpdate=this.loop.onTick(a)),!this.config.drawOnlyWhenRequested||this.drawNeedsUpdate)&&(this.loop.onDraw(a),this.drawNeedsUpdate=!1)},onKeyDown:function(a,b){this.loop.onKeyDown(a,b)},onKeyUp:function(a,
b){this.loop.onKeyUp(a,b)},onMouseMove:function(a,b){this.loop.onMouseMove(a,b)},onMouseDown:function(a,b,c){this.loop.onMouseDown(a,b,c)},onMouseUp:function(a,b,c){this.loop.onMouseUp(a,b,c)},onMouseScroll:function(a,b,c){this.loop.onMouseScroll(a,b,c)},onWindowResize:function(a,b){this.loop.onWindowResize(a,b)},__class__:Ge};var ge=function(){};l["ob.gum.LoadingLoop"]=ge;ge.__name__="ob.gum.LoadingLoop";ge.__interfaces__=[E];ge.prototype={onTick:function(a){return!1},onInit:function(a){this.gum=
a;ka.trace("LoadingLoop onInit",{fileName:"ob/gum/Core.hx",lineNumber:136,className:"ob.gum.LoadingLoop",methodName:"onInit"})},onUpdate:function(a){},onDraw:function(a){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onMouseMove:function(a,b){},onMouseDown:function(a,b,c){},onMouseUp:function(a,b,c){},onMouseScroll:function(a,b,c){},onWindowResize:function(a,b){},__class__:ge};var we=function(a,b){this.texture=a;this.display=b};l["ob.gum.backends.FrameBuffer"]=we;we.__name__="ob.gum.backends.FrameBuffer";
we.prototype={__class__:we};var He=function(a){this.imageCache=[];this.fontCache=[];this.paths=a};l["ob.gum.backends.Assets"]=He;He.__name__="ob.gum.backends.Assets";He.prototype={Preload:function(a){ka.trace("begin loading "+J.string(this.paths),{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:141,className:"ob.gum.backends.Assets",methodName:"Preload"});this.onReady=a;this.loadFonts()},loadFonts:function(a){null==a&&(a=0);var b=this;if(a>this.paths.fonts.length-1)this.loadImages();else{var c=
this.paths.fonts[a];ka.trace("loading font index "+a+" "+c,{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:153,className:"ob.gum.backends.Assets",methodName:"loadFonts"});(new mf(c)).load(function(c){b.fontCache.push(c);a+=1;b.loadFonts(a)})}},loadImages:function(){var a,b=this;ka.trace("load images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:163,className:"ob.gum.backends.Assets",methodName:"loadImages"});var c=!1;if(0>=this.paths.images.length)ka.trace("asset loading finished",{fileName:"ob/gum/backends/PeoteView.hx",
lineNumber:166,className:"ob.gum.backends.Assets",methodName:"loadImages"}),this.onReady();else{ka.trace("loading "+this.paths.images.length+" images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:169,className:"ob.gum.backends.Assets",methodName:"loadImages"});var f=this.paths.images,d=c,g=function(a,c){ka.trace(c,{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:172,className:"ob.gum.backends.Assets",methodName:"loadImages"});ka.trace("starting without images",{fileName:"ob/gum/backends/PeoteView.hx",
lineNumber:173,className:"ob.gum.backends.Assets",methodName:"loadImages"});b.onReady()},e=function(a){b.imageCache=a;ka.trace("loaded "+b.imageCache.length+" images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:177,className:"ob.gum.backends.Assets",methodName:"loadImages"});ka.trace("asset loading finished",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:178,className:"ob.gum.backends.Assets",methodName:"loadImages"});b.onReady()};null==d&&(d=!1);var k=[],h=f.length;var n=0;for(a=f.length;n<
a;){var r=[n++];var p=[f[r[0]]];c=d;var t=null==g?null:function(a){return function(b){g(a[0],b)}}(r);r=null==e?null:function(a){return function(b){k[a[0]]=b;0==--h&&e(k)}}(r);null==c&&(c=!1);""!=Db.corsServer&&(new ba("^https?://","")).match(p[0])&&(p[0]="//"+Db.corsServer+"/"+p[0]);var l=$a.loadFromFile(p[0]);c&&(ka.trace('Start loading image "'+p[0]+'"',{fileName:"utils/Loader.hx",lineNumber:28,className:"utils.Loader",methodName:"image"}),l.onProgress(function(a){return function(b,c){Db.onProgressDebug(b,
c,a[0])}}(p)),l.onError(Db.onErrorDebug),l.onComplete(function(a){return function(b){Db.onCompleteDebug(a[0])}}(p)));if(null!=t)l.onError(t);if(null!=r)l.onComplete(r)}}},__class__:He};var Ee=function(){};l["peote.text.FontConfig"]=Ee;Ee.__name__="peote.text.FontConfig";Ee.prototype={__class__:Ee};var od=function(a){this.uniformFloats=[];this.uniformFloatsVertex=this.uniformFloatsFragment=null;this.hasFragmentInjection=this.ready=!1;this.fragmentFloatPrecision=null;this.formulaHasChanged=!1;this.formula=
new aa;this.colorFormula="";this.used_by_ColorFormula=this.usedID_by_ColorFormula=0;this.textureID_Defaults=[];this.customTextureIdentifiers=[];this.activeUnits=[];this.activeTextures=[];this.textureLayers=new eb;this.textureListPicking=new he(new Bb);this.textureList=new he(new Bb);this.glShaderConfig={isPICKING:!1,isES3:!1,isINSTANCED:!1,isUBO:!1,IN:"attribute",VARIN:"varying",VAROUT:"varying",hasTEXTURES:!1,hasTEXTURE_FUNCTIONS:!1,hasFRAGMENT_INJECTION:!1,FRAGMENT_PROGRAM_UNIFORMS:"",FRAGMENT_CALC_LAYER:"",
TEXTURES:[],TEXTURE_DEFAULTS:[],isDISCARD:!0,DISCARD:"0.0",isPIXELSNAPPING:!1,PIXELDIVISOR:"1.0",VERTEX_FLOAT_PRECISION:null,VERTEX_INT_PRECISION:null,VERTEX_SAMPLER_PRECISION:null,FRAGMENT_FLOAT_PRECISION:null,FRAGMENT_INT_PRECISION:null,FRAGMENT_SAMPLER_PRECISION:null,VERTEX_INJECTION:"",FRAGMENT_INJECTION:"",SIZE_FORMULA:null,POS_FORMULA:null,ROTZ_FORMULA:null,PIVOT_FORMULA:null,FORMULA_VARYINGS:{},FORMULA_CONSTANTS:{},FRAGMENT_EXTENSIONS:[]};this.gl=this.glProgram=this.glProgramPicking=this.glVertexShader=
this.glFragmentShader=this.glVertexShaderPicking=this.glFragmentShaderPicking=null;this.displays=[];this.autoUpdateTextures=this.isVisible=!0;this.clearMask=!1;this.mask=0;this.colorEnabled=!0;this.buffer=a;this.alphaEnabled=a.hasAlpha();this.zIndexEnabled=a.hasZindex();this.colorIdentifiers=a.getColorIdentifiers();this.customIdentifiers=a.getCustomIdentifiers();this.customVaryings=a.getCustomVaryings();this.textureIdentifiers=a.getTextureIdentifiers();this.defaultColorFormula=a.getDefaultColorFormula();
this.defaultFormulaVars=a.getDefaultFormulaVars();var b=a.getFormulas().h;b=Object.keys(b);for(var c=b.length,f=0;f<c;){var d=b[f++],g=this.formula,e=a.getFormulas().h[d];g.h[d]=e}try{Ic.resolveFormulaCyclic(a.getFormulas())}catch(k){throw na.lastError=k,a=D.caught(k).unwrap(),D.thrown('Error: cyclic reference of "'+J.string(a.errVar)+'" inside @formula "'+J.string(a.formula)+'" for "'+J.string(a.errKey)+'"');}Ic.resolveFormulaVars(a.getFormulas(),a.getAttributes());this.parseColorFormula()};l["peote.view.Program"]=
od;od.__name__="peote.view.Program";od.prototype={addToDisplay:function(a,b,c){null==c&&(c=!1);if(0>this.displays.indexOf(a)){this.displays.push(a);var f=a.gl;if(null!=f&&f!=this.gl){for(var d=0,g=this.displays;d<g.length;){var e=g[d];++d;if(null!=e.gl&&e.gl!=f)throw D.thrown("Error, program can not used inside different gl-contexts");}null!=this.gl&&(this.gl.deleteShader(this.glVertexShader),this.gl.deleteShader(this.glFragmentShader),this.gl.deleteProgram(this.glProgram),this.buffer.hasPicking()&&
(this.gl.deleteShader(this.glVertexShaderPicking),this.gl.deleteShader(this.glFragmentShaderPicking),this.gl.deleteProgram(this.glProgramPicking)));this.gl=f;V.isES3&&(this.glShaderConfig.isES3=!0,this.glShaderConfig.IN="in",this.glShaderConfig.VARIN="in",this.glShaderConfig.VAROUT="out");V.isUBO&&(this.glShaderConfig.isUBO=!0);V.isINSTANCED&&(this.glShaderConfig.isINSTANCED=!0);this.glShaderConfig.FRAGMENT_EXTENSIONS=[];null!=this.gl.getExtension("OES_standard_derivatives")&&this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"GL_OES_standard_derivatives"});
null!=this.gl.getExtension("EXT_color_buffer_float")?this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"EXT_color_buffer_float"}):null!=this.gl.getExtension("OES_texture_float")&&this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"OES_texture_float"});this.buffer.setNewGLContext(this.gl);this.createProg();this.buffer.hasPicking()&&this.createProg(!0);d=0;for(g=this.activeTextures;d<g.length;){var k=g[d];++d;f=this.gl;if(null!=f&&f!=k.gl){e=0;for(var h=k.programs;e<h.length;){var n=h[e];
++e;if(null!=n.gl&&n.gl!=f)throw D.thrown("Error, texture can not used inside different gl-contexts");}h=0;for(n=k.displays;h<n.length;)if(e=n[h],++h,null!=e.gl&&e.gl!=f)throw D.thrown("Error, texture can not used inside different gl-contexts");null!=k.gl&&(k.gl.deleteTexture(k.glTexture),k.glTexture=null,0==k.displays.length&&null!=k.framebuffer&&(k.gl.deleteFramebuffer(k.framebuffer),k.framebuffer=null,null!=k.glDepthBuffer&&k.gl.deleteRenderbuffer(k.glDepthBuffer),k.glDepthBuffer=null));k.gl=f;
if(k.width>k.gl.getParameter(k.gl.MAX_TEXTURE_SIZE)||k.height>k.gl.getParameter(k.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");k.glTexture=hc.createEmptyTexture(k.gl,k.width,k.height,k.colorChannels,k.createMipmaps,k.magFilter,k.minFilter,k.useFloat);if(0<k.displays.length&&null==k.framebuffer){k.glDepthBuffer=k.gl.createRenderbuffer();f=k.gl;e=k.glTexture;h=k.glDepthBuffer;n=k.width;var r=k.height,p=f.createFramebuffer();f.bindRenderbuffer(f.RENDERBUFFER,
h);sa.clearGlErrorQueue(f);f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT24,n,r);sa.getLastGlError(f)==f.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,n,r));f.bindFramebuffer(f.FRAMEBUFFER,p);f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,h);f.framebufferTexture2D(f.FRAMEBUFFER,
f.COLOR_ATTACHMENT0,f.TEXTURE_2D,e,0);if(f.checkFramebufferStatus(f.FRAMEBUFFER)!=f.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");f.bindFramebuffer(f.FRAMEBUFFER,null);f.bindRenderbuffer(f.RENDERBUFFER,null);k.framebuffer=p;k.updated=!0}for(f=k.images.keys();f.hasNext();)e=f.next(),k.bufferImage(e,k.images.h[e.__id__])}}}}a.programList.add(this,b,c)},createProg:function(a){null==a&&(a=!1);this.glShaderConfig.isPICKING=a;if(null!=this.fragmentFloatPrecision)this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=
this.fragmentFloatPrecision;else if(this.buffer.needFragmentPrecision()&&23>wb.FragmentFloat.medium){var b=wb.FragmentFloat;this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=0<b.high?"highp":0<b.medium?"mediump":0<b.low?"lowp":null}else b=wb.FragmentFloat,this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=0<b.medium?"mediump":0<b.low?"lowp":null;this.parseAndResolveFormulas();var c=this.gl,f=this.gl.VERTEX_SHADER,d=this.buffer.getVertexShader(),g=this.glShaderConfig;d=new Ma(d);var e=sa.rStartspaces,k=sa.rEmptylines;
g=d.execute(g).replace(k.r,"\n").replace(e.r,"");d=c.createShader(f);c.shaderSource(d,g);c.compileShader(d);if(0==c.getShaderParameter(d,c.COMPILE_STATUS))throw D.thrown("ERROR compiling "+(f==c.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+J.string(c.getShaderInfoLog(d)));b=d;c=this.gl;f=this.gl.FRAGMENT_SHADER;d=this.buffer.getFragmentShader();g=this.glShaderConfig;d=new Ma(d);e=sa.rStartspaces;k=sa.rEmptylines;g=d.execute(g).replace(k.r,"\n").replace(e.r,"");d=c.createShader(f);c.shaderSource(d,
g);c.compileShader(d);if(0==c.getShaderParameter(d,c.COMPILE_STATUS))throw D.thrown("ERROR compiling "+(f==c.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+J.string(c.getShaderInfoLog(d)));f=d;g=this.gl.createProgram();this.gl.attachShader(g,b);this.gl.attachShader(g,f);this.buffer.bindAttribLocations(this.gl,g);c=this.gl;c.linkProgram(g);if(0==c.getProgramParameter(g,c.LINK_STATUS))throw D.thrown(J.string(c.getProgramInfoLog(g))+"VALIDATE_STATUS: "+J.string(c.getProgramParameter(g,c.VALIDATE_STATUS))+
"ERROR: "+J.string(c.getError()));!a&&V.isUBO?(c=this.gl.getUniformBlockIndex(g,"uboView"),c!=this.gl.INVALID_INDEX&&this.gl.uniformBlockBinding(g,c,0),c=this.gl.getUniformBlockIndex(g,"uboDisplay"),c!=this.gl.INVALID_INDEX&&this.gl.uniformBlockBinding(g,c,1)):a?(this.uRESOLUTION_PICK=this.gl.getUniformLocation(g,"uResolution"),this.uZOOM_PICK=this.gl.getUniformLocation(g,"uZoom"),this.uOFFSET_PICK=this.gl.getUniformLocation(g,"uOffset")):(this.uRESOLUTION=this.gl.getUniformLocation(g,"uResolution"),
this.uZOOM=this.gl.getUniformLocation(g,"uZoom"),this.uOFFSET=this.gl.getUniformLocation(g,"uOffset"));if(a)for(this.uTIME_PICK=this.gl.getUniformLocation(g,"uTime"),this.uniformFloatPickLocations=[],c=0,d=this.uniformFloats;c<d.length;)e=d[c],++c,this.uniformFloatPickLocations.push(this.gl.getUniformLocation(g,e.name));else for(this.uTIME=this.gl.getUniformLocation(g,"uTime"),this.uniformFloatLocations=[],c=0,d=this.uniformFloats;c<d.length;)e=d[c],++c,this.uniformFloatLocations.push(this.gl.getUniformLocation(g,
e.name));if(a){this.textureListPicking.clear();c=0;for(d=this.activeTextures.length;c<d;)a=c++,this.textureListPicking.add(new ie(this.activeUnits[a],this.activeTextures[a],this.gl.getUniformLocation(g,"uTexture"+a)),null,!1);this.glProgramPicking=g;this.glVertexShaderPicking=b;this.glFragmentShaderPicking=f}else{this.textureList.clear();c=0;for(d=this.activeTextures.length;c<d;)a=c++,this.textureList.add(new ie(this.activeUnits[a],this.activeTextures[a],this.gl.getUniformLocation(g,"uTexture"+a)),
null,!1);this.glProgram=g;this.glVertexShader=b;this.glFragmentShader=f}this.ready=!0},parseColorFormula:function(){var a="";if(""!=this.colorFormula)a=this.colorFormula;else if(""!=this.defaultColorFormula)a=this.defaultColorFormula;else{for(var b=this.colorIdentifiers.slice(),c=[],f=0,d=this.textureIdentifiers.length;f<d;){var g=f++;this.textureLayers.h.hasOwnProperty(g)&&c.push(this.textureIdentifiers[g])}f=0;for(d=this.customTextureIdentifiers.length;f<d;)g=f++,this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+
g)&&c.push(this.customTextureIdentifiers[g]);if(0==b.length+c.length){var e=-16776961;c=""+J.string((e>>24&255)/255);var k=""+J.string((e>>16&255)/255),h=""+J.string((e>>8&255)/255);e=""+J.string((e&255)/255);a="vec4("+(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=k.indexOf(".")||-1!=k.indexOf("e-")?k:k+".0")+", "+((-1!=h.indexOf(".")||-1!=h.indexOf("e-")?h:h+".0")+", "+(-1!=e.indexOf(".")||-1!=e.indexOf("e-")?e:e+".0")+")")}else{0<c.length&&(a=c.shift(),0<b.length&&(a=""+b.shift()+
" * "+a));for(f=0;f<c.length;)k=c[f],++f,0<b.length&&(k=""+b.shift()+" * "+k+" "),a="mix( "+a+", "+k+", ("+k+").a )";for(;0<b.length;)a+=(""!=a?"*":"")+b.shift(),0<b.length&&(a="("+a+" + "+b.shift()+")")}}f=0;for(d=this.colorIdentifiers.length;f<d;)g=f++,b=new ba("(^|.*?[^\\w.])"+this.colorIdentifiers[g]+"\\b.*?","g"),b.match(a)&&(a=a.replace(b.r,"$1c"+g));f=0;for(d=this.customIdentifiers.length;f<d;)if(g=f++,b=new ba("(^|.*?[^\\w.])"+this.customIdentifiers[g]+"\\b.*?","g"),b.match(a))if(null!=this.customVaryings[g])a=
a.replace(b.r,"$1"+this.customVaryings[g]);else throw D.thrown("Error while parsing ColorFormula: custom identifier "+this.customIdentifiers[g]+" need @varying to access in fragmentshader");this.textureID_Defaults=[];f=this.usedID_by_ColorFormula=this.used_by_ColorFormula=0;for(d=this.textureIdentifiers.length;f<d;)g=f++,b=new ba("(^|.*?[^\\w.])"+this.textureIdentifiers[g]+"\\b.*?","g"),b.match(a)&&(this.textureLayers.h.hasOwnProperty(g)&&(a=a.replace(b.r,"$1t"+g)),this.used_by_ColorFormula|=1<<g),
b=new ba("(^|.*?[^\\w.])"+(this.textureIdentifiers[g]+"_ID\\b.*?"),"g"),b.match(a)&&(a=a.replace(b.r,"$1"+g),this.usedID_by_ColorFormula|=1<<g,this.textureLayers.h.hasOwnProperty(g)||(e=this.defaultFormulaVars.h[this.textureIdentifiers[g]],c=""+J.string((e>>24&255)/255),k=""+J.string((e>>16&255)/255),h=""+J.string((e>>8&255)/255),e=""+J.string((e&255)/255),this.textureID_Defaults.push({layer:g,value:"vec4("+(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=k.indexOf(".")||-1!=k.indexOf("e-")?
k:k+".0")+", "+((-1!=h.indexOf(".")||-1!=h.indexOf("e-")?h:h+".0")+", "+(-1!=e.indexOf(".")||-1!=e.indexOf("e-")?e:e+".0")+")")})));f=0;for(d=this.customTextureIdentifiers.length;f<d;)g=f++,b=new ba("(^|.*?[^\\w.])"+this.customTextureIdentifiers[g]+"\\b.*?","g"),b.match(a)&&(this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+g)&&(a=a.replace(b.r,"$1t"+(this.textureIdentifiers.length+g))),this.used_by_ColorFormula|=1<<this.textureIdentifiers.length+g),b=new ba("(^|.*?[^\\w.])"+(this.customTextureIdentifiers[g]+
"_ID\\b.*?"),"g"),b.match(a)&&(a=a.replace(b.r,"$1"+(this.textureIdentifiers.length+g)),this.usedID_by_ColorFormula|=1<<this.textureIdentifiers.length+g,this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+g)||(e=this.defaultFormulaVars.h[this.textureIdentifiers[this.textureIdentifiers.length+g]],c=""+J.string((e>>24&255)/255),k=""+J.string((e>>16&255)/255),h=""+J.string((e>>8&255)/255),e=""+J.string((e&255)/255),this.textureID_Defaults.push({layer:this.textureIdentifiers.length+g,value:"vec4("+
(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=k.indexOf(".")||-1!=k.indexOf("e-")?k:k+".0")+", "+((-1!=h.indexOf(".")||-1!=h.indexOf("e-")?h:h+".0")+", "+(-1!=e.indexOf(".")||-1!=e.indexOf("e-")?e:e+".0")+")")})));f=Object.keys(this.defaultFormulaVars.h);d=f.length;for(g=0;g<d;)c=f[g++],b=new ba("(^|.*?[^\\w.])"+c+"\\b.*?","g"),b.match(a)&&(e=this.defaultFormulaVars.h[c],c=""+J.string((e>>24&255)/255),k=""+J.string((e>>16&255)/255),h=""+J.string((e>>8&255)/255),e=""+J.string((e&255)/
255),a=a.replace(b.r,"$1vec4("+((-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=k.indexOf(".")||-1!=k.indexOf("e-")?k:k+".0")+", "+((-1!=h.indexOf(".")||-1!=h.indexOf("e-")?h:h+".0")+", "+(-1!=e.indexOf(".")||-1!=e.indexOf("e-")?e:e+".0")+")"))));this.glShaderConfig.FRAGMENT_CALC_LAYER=a},setColorFormula:function(a,b,c){null==a&&(a="");this.colorFormula=a;if(null!=b){a=Object.keys(b.h);for(var f=a.length,d=0;d<f;){var g=a[d++];if(!(new ba("^([a-zA-z_]+\\d*)+$","g")).match(g))throw D.thrown('Error: "'+
g+'" is not an identifier, please use only letters/numbers or "_" (starting with a letter)');this.defaultFormulaVars.h[g]=b.h[g]}}null!=c?c&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},injectIntoVertexShader:function(a,b,c,f){null==b&&(b=!1);null==a&&(a="");this.uniformFloatsVertex=c;b=(b&&!this.buffer.hasTime()?"uniform float uTime;":"")+this.generateUniformFloatsGLSL(c);this.glShaderConfig.VERTEX_INJECTION=b+a;this.accumulateUniformsFloat();null!=f?f&&this.updateTextures():
this.autoUpdateTextures&&this.updateTextures()},injectIntoFragmentShader:function(a,b,c,f){null==b&&(b=!1);null==a&&(a="");this.hasFragmentInjection=""==a?!1:!0;this.uniformFloatsFragment=c;b=(b?"uniform float uTime;":"")+this.generateUniformFloatsGLSL(c);this.glShaderConfig.FRAGMENT_INJECTION=b+a;this.accumulateUniformsFloat();null!=f?f&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},generateUniformFloatsGLSL:function(a){var b="";if(null!=a)for(var c=0;c<a.length;){var f=a[c];
++c;b+="uniform float "+f.name+";"}return b},accumulateUniformsFloat:function(){if(null==this.uniformFloatsVertex)null!=this.uniformFloatsFragment&&(this.uniformFloats=this.uniformFloatsFragment);else if(null==this.uniformFloatsFragment)this.uniformFloats=this.uniformFloatsVertex;else{this.uniformFloats=this.uniformFloatsVertex;for(var a=0,b=this.uniformFloatsFragment;a<b.length;){var c=b[a];++a;0>this.uniformFloats.indexOf(c)&&this.uniformFloats.push(c)}}},parseAndResolveFormulas:function(){var a=
this;if(this.formulaHasChanged){for(var b=new aa,c=Object.keys(this.formula.h),f=c.length,d=0;d<f;){var g=c[d++];b.h[g]=this.formula.h[g]}var e=b;try{Ic.resolveFormulaCyclic(e)}catch(k){throw na.lastError=k,b=D.caught(k).unwrap(),D.thrown('Error: cyclic reference of "'+J.string(b.errVar)+'" inside formula "'+J.string(b.formula)+'" for "'+J.string(b.errKey)+'"');}Ic.resolveFormulaVars(e,this.buffer.getAttributes());b=function(b,c,d,f){var g=a.buffer.getFormulaNames().h[b];null==g&&(g="");var k=a.buffer.getFormulaNames().h[c];
null==k&&(k="");var h=e.h[g],m=e.h[k];return h!=a.buffer.getFormulas().h[g]||m!=a.buffer.getFormulas().h[k]?(null==h&&(h=a.buffer.getAttributes().h[g]),null==h&&(h=d),null==m&&(m=a.buffer.getAttributes().h[k]),null==m&&(m=f),"rotation"==b&&"0.0"!=h&&(h="("+h+")/180.0*"+Math.PI),"zIndex"==c&&"0.0"!=m&&(b=""+J.string(a.buffer.getMaxZindex()),m="clamp( "+m+"/"+(-1!=b.indexOf(".")||-1!=b.indexOf("e-")?b:b+".0")+", -1.0, 1.0)"),"vec2("+h+", "+m+")"):null};this.glShaderConfig.SIZE_FORMULA=b("sizeX","sizeY",
"100.0","100.0");this.glShaderConfig.POS_FORMULA=b("posX","posY","0.0","0.0");this.glShaderConfig.ROTZ_FORMULA=b("rotation","zIndex","0.0","0.0");this.glShaderConfig.PIVOT_FORMULA=b("pivotX","pivotY","0.0","0.0");b=0;for(c=this.buffer.getFormulaVaryings();b<c.length;)f=c[b],++b,d=e.h[f],d!=this.buffer.getFormulas().h[f]?(null==d&&(d=this.buffer.getAttributes().h[f]),this.glShaderConfig.FORMULA_VARYINGS[f]=d,ka.trace(" -- replacing Formula "+f+" => "+d,{fileName:"peote/view/Program.hx",lineNumber:591,
className:"peote.view.Program",methodName:"parseAndResolveFormulas"})):this.glShaderConfig.FORMULA_VARYINGS[f]=null;b=0;for(c=this.buffer.getFormulaConstants();b<c.length;)f=c[b],++b,d=e.h[f],null!=d&&d!=this.buffer.getAttributes().h[f]?(this.glShaderConfig.FORMULA_CONSTANTS[f]=d,ka.trace(" -- replacing Formula "+f+" => "+d,{fileName:"peote/view/Program.hx",lineNumber:601,className:"peote.view.Program",methodName:"parseAndResolveFormulas"})):this.glShaderConfig.FORMULA_CONSTANTS[f]=null}},getTextureIndexByIdentifier:function(a,
b){null==b&&(b=!0);var c=this.textureIdentifiers.indexOf(a);if(0>c&&(c=this.customTextureIdentifiers.indexOf(a),0>c&&b)){if(!(new ba("^([a-zA-z_]+\\d*)+$","g")).match(a))throw D.thrown('Error: "'+a+'" is not an identifier, please use only letters/numbers or "_" (starting with a letter)');c=this.textureIdentifiers.length+this.customTextureIdentifiers.length;this.customTextureIdentifiers.push(a)}return c},validatePrecision:function(a){if(null!=a)if(0>["low","medium","high"].indexOf(a.toLowerCase())){if(0>
["lowp","mediump","highp"].indexOf(a.toLowerCase()))throw D.thrown("Error, no valid precision format. Use 'low', 'medium' or 'high' (or leave it null for default)");}else a+="p";return a},setFragmentFloatPrecision:function(a,b){a=this.validatePrecision(a);var c=wb.FragmentFloat;this.fragmentFloatPrecision=null==a?null:0<c.high&&"highp"==a?"highp":0<c.medium&&("highp"==a||"mediump"==a)?"mediump":0<c.low?"lowp":null;null!=b?b&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},discardAtAlpha:function(a,
b){null==a?this.glShaderConfig.isDISCARD=!1:(this.glShaderConfig.isDISCARD=!0,a=""+J.string(a),this.glShaderConfig.DISCARD=-1!=a.indexOf(".")||-1!=a.indexOf("e-")?a:a+".0");null!=b?b&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},addTexture:function(a,b,c){b=this.getTextureIndexByIdentifier(b);if(null==a)throw D.thrown("Error, texture is null.");var f=this.textureLayers.h[b];if(null!=f){if(0<=f.indexOf(a))throw D.thrown("Error, textureLayer already contains this texture.");
f.push(a);this.textureLayers.h[b]=f}else this.textureLayers.h[b]=[a];null!=c?c&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},updateTextures:function(){for(var a=[],b=this.textureLayers.keys();b.hasNext();)for(var c=b.next(),f=0,d=this.textureLayers.h[c];f<d.length;)c=d[f],++f,0>a.indexOf(c)&&a.push(c);for(var g=this.activeTextures.length;0<g--;)if(0>a.indexOf(this.activeTextures[g])){if(!F.remove(this.activeTextures[g].programs,this))throw D.thrown("Error, this texture is not used by program anymore");
this.activeTextures.splice(g,1);this.activeUnits.splice(g,1)}for(f=0;f<a.length;)if(c=a[f],++f,0>this.activeTextures.indexOf(c)){this.activeTextures.push(c);for(d=0;0<=this.activeUnits.indexOf(d);)++d;this.activeUnits.push(d);if(0<=c.programs.indexOf(this))throw D.thrown("Error, texture is already used by program");b=this.gl;if(null!=b&&b!=c.gl){d=0;for(g=c.programs;d<g.length;){var e=g[d];++d;if(null!=e.gl&&e.gl!=b)throw D.thrown("Error, texture can not used inside different gl-contexts");}d=0;for(g=
c.displays;d<g.length;)if(e=g[d],++d,null!=e.gl&&e.gl!=b)throw D.thrown("Error, texture can not used inside different gl-contexts");null!=c.gl&&(c.gl.deleteTexture(c.glTexture),c.glTexture=null,0==c.displays.length&&null!=c.framebuffer&&(c.gl.deleteFramebuffer(c.framebuffer),c.framebuffer=null,null!=c.glDepthBuffer&&c.gl.deleteRenderbuffer(c.glDepthBuffer),c.glDepthBuffer=null));c.gl=b;if(c.width>c.gl.getParameter(c.gl.MAX_TEXTURE_SIZE)||c.height>c.gl.getParameter(c.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");
c.glTexture=hc.createEmptyTexture(c.gl,c.width,c.height,c.colorChannels,c.createMipmaps,c.magFilter,c.minFilter,c.useFloat);if(0<c.displays.length&&null==c.framebuffer){c.glDepthBuffer=c.gl.createRenderbuffer();d=c.gl;b=c.glTexture;g=c.glDepthBuffer;e=c.width;var k=c.height,h=d.createFramebuffer();d.bindRenderbuffer(d.RENDERBUFFER,g);sa.clearGlErrorQueue(d);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT24,e,k);sa.getLastGlError(d)==d.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",
{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,e,k));d.bindFramebuffer(d.FRAMEBUFFER,h);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,g);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,b,0);if(d.checkFramebufferStatus(d.FRAMEBUFFER)!=d.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");d.bindFramebuffer(d.FRAMEBUFFER,
null);d.bindRenderbuffer(d.RENDERBUFFER,null);c.framebuffer=h;c.updated=!0}for(d=c.images.keys();d.hasNext();)b=d.next(),c.bufferImage(b,c.images.h[b.__id__])}c.programs.push(this)}this.parseColorFormula();this.glShaderConfig.hasFRAGMENT_INJECTION=this.hasFragmentInjection;this.glShaderConfig.FRAGMENT_PROGRAM_UNIFORMS="";this.glShaderConfig.TEXTURES=[];if(0==this.activeTextures.length)this.glShaderConfig.hasTEXTURES=!1;else{this.glShaderConfig.hasTEXTURES=!0;f=0;for(d=this.activeTextures.length;f<
d;)g=f++,this.glShaderConfig.FRAGMENT_PROGRAM_UNIFORMS+="uniform sampler2D uTexture"+g+";";for(b=this.textureLayers.keys();b.hasNext();){c=b.next();a=[];e=this.textureLayers.h[c];f=0;for(d=e.length;f<d;){g=f++;k=""+J.string(e[g].slotWidth/e[g].width);h=""+J.string(e[g].slotHeight/e[g].height);var r=""+J.string(e[g].slotsX*e[g].slotWidth/e[g].width),t=""+J.string(e[g].slotsY*e[g].slotHeight/e[g].height);a.push({UNIT_VALUE:g+1+".0",TEXTURE:"uTexture"+this.activeTextures.indexOf(e[g]),SLOTS_X:e[g].slotsX+
".0",SLOTS_Y:e[g].slotsY+".0",SLOT_WIDTH:-1!=k.indexOf(".")||-1!=k.indexOf("e-")?k:k+".0",SLOT_HEIGHT:-1!=h.indexOf(".")||-1!=h.indexOf("e-")?h:h+".0",SLOTS_WIDTH:-1!=r.indexOf(".")||-1!=r.indexOf("e-")?r:r+".0",SLOTS_HEIGHT:-1!=t.indexOf(".")||-1!=t.indexOf("e-")?t:t+".0",TILES_X:e[g].tilesX+".0",TILES_Y:e[g].tilesY+".0",TEXTURE_WIDTH:e[g].width+".0",TEXTURE_HEIGHT:e[g].height+".0",FIRST:0==g,LAST:g==e.length-1})}this.glShaderConfig.TEXTURES.push({LAYER:c,UNITS:a,USED:0<(this.used_by_ColorFormula&
1<<c),USED_ID:0<(this.usedID_by_ColorFormula&1<<c)})}}this.glShaderConfig.TEXTURE_DEFAULTS=[];f=0;for(d=this.textureID_Defaults;f<d.length;)a=d[f],++f,this.glShaderConfig.TEXTURE_DEFAULTS.push({LAYER:a.layer,DEFAULT_VALUE:a.value});this.glShaderConfig.hasTEXTURE_FUNCTIONS=0==this.usedID_by_ColorFormula&&0==this.textureID_Defaults.length?!1:!0;null!=this.gl&&(this.ready=!1,this.gl.deleteShader(this.glVertexShader),this.gl.deleteShader(this.glFragmentShader),this.gl.deleteProgram(this.glProgram),this.buffer.hasPicking()&&
(this.gl.deleteShader(this.glVertexShaderPicking),this.gl.deleteShader(this.glFragmentShaderPicking),this.gl.deleteProgram(this.glProgramPicking)),this.createProg(),this.buffer.hasPicking()&&this.createProg(!0))},__class__:od};var mf=function(a,b,c,f){null==f&&(f=16384);null==c&&(c=!0);this.rHexToDec=new ba('("\\s*)?(0x[0-9a-f]+)(\\s*")?',"gi");this.rComments=new ba("//.*?$","gm");this.rParsePathConfig=new ba("^(.*?)([^/]+)$","");this.kerning=!1;if(this.rParsePathConfig.match(a))this.path=this.rParsePathConfig.matched(1),
this.jsonFilename=this.rParsePathConfig.matched(2);else throw D.thrown("Can't load font, error in path to jsonfile: \""+a+'"');this.ranges=b;this.kerning=c;this.maxTextureSize=f};l["peote.text.Font__ob_gum_backends_PeoteView_FontStyle"]=mf;mf.__name__="peote.text.Font__ob_gum_backends_PeoteView_FontStyle";mf.prototype={load:function(a,b,c){null==c&&(c=!1);var f=this,d=c,g=function(d){d=d.replace(f.rComments.r,"");d=f.rHexToDec.map(d,function(a){return J.string(J.parseInt(a.matched(2)))});var g=new jb;
f.config=g.fromJson(d,f.path+f.jsonFilename);d=0;for(g=g.errors;d<g.length;){var e=g[d];++d;switch(e._hx_index){case 0:var k=e.variable;var h=e.expected;k=e.pos;break;case 1:k=e.pos;break;case 2:k=e.pos;break;case 3:k=e.pos;break;case 4:k=e.pos;break;case 5:k=e.pos;break;case 6:k=e.pos}ka.trace(k.lines[0].number,{fileName:"peote/text/Font.hx",lineNumber:246,className:"peote.text.Font__ob_gum_backends_PeoteView_FontStyle",methodName:"load"});null!=k&&ka.trace(uf.convertError(e),{fileName:k.file,lineNumber:k.lines[0].number,
className:"",methodName:""})}if(f.config.packed)throw d='Error, metadata of FontStyle class has to be "@packed" for "'+f.path+f.jsonFilename+'" and "packed":true',ka.trace(d,{fileName:f.path+f.jsonFilename,lineNumber:0,className:"",methodName:""}),D.thrown(d);f.kerning&&null!=f.config.kerning&&(f.kerning=f.config.kerning);if(null==f.ranges&&1<f.config.ranges.length)throw d='Error, set FontStyle to @multiSlot and/or @multiTexture or define a single range while Font creation or inside "'+f.path+f.jsonFilename+
'"',ka.trace(d,{fileName:f.path+f.jsonFilename,lineNumber:0,className:"",methodName:""}),D.thrown(d);e=[];d=0;for(g=f.config.ranges;d<g.length;){var m=g[d];++d;var r=m.range.min,n=m.range.max;if(null!=f.ranges)for(k=0,h=f.ranges;k<h.length;){var t=h[k];++k;if(t.min>=r&&t.min<=n||t.max>=r&&t.max<=n){e.push(m);break}}else e.push(m);if(1==e.length)break}if(0==e.length)throw d='Error, can not found any ranges inside font-config "'+f.path+f.jsonFilename+'" that fit '+J.string(f.ranges),ka.trace(d,{fileName:f.path+
f.jsonFilename,lineNumber:0,className:"",methodName:""}),D.thrown(d);f.config.ranges=e;f.init(a,b,c)};null==d&&(d=!1);var e=this.path+this.jsonFilename,k=null==g?null:g,h=null==g?null:function(a){g(a.toString())};null==d&&(d=!1);""!=Db.corsServer&&(new ba("^https?://","")).match(e)&&(e="//"+Db.corsServer+"/"+e);var r=Oc.loadFromFile(e);d&&(ka.trace('Start loading bytes "'+e+'"',{fileName:"utils/Loader.hx",lineNumber:81,className:"utils.Loader",methodName:"bytes"}),r.onProgress(function(a,b){Db.onProgressDebug(a,
b,e)}),r.onError(Db.onErrorDebug),r.onComplete(function(a){Db.onCompleteDebug(e)}));if(null!=k)r.onError(k);if(null!=h)r.onComplete(h)},init:function(a,b,c){for(var f=0,d=0,g=0,e=this.config.ranges;g<e.length;){var k=e[g];++g;k.slot.width>f&&(f=k.slot.width);k.slot.height>d&&(d=k.slot.height)}this.textureCache=new cd(f,d,this.config.ranges.length,4,!1,1,1,null,this.maxTextureSize);this.loadImages(null,a,b,c)},loadImages:function(a,b,c,f){var d=this,g=this.config.ranges;a=Array(g.length);for(var e=
0,k=g.length;e<k;){var h=e++;a[h]=d.path+g[h].image}g=f;var r=function(a,b,d){null!=c&&c(b,d)},t=function(a,b){if(null!=d.config.ranges[a].tiles){var c=d.config.ranges[a].tiles.x;var f=d.config.ranges[a].tiles.y}else if(null!=d.config.tiles)c=d.config.tiles.x,f=d.config.tiles.y;else throw b='Error, can not found tiles inside font-config "'+d.path+d.jsonFilename+'"',ka.trace(b,{fileName:d.path+d.jsonFilename,lineNumber:0,className:"",methodName:""}),D.thrown(b);if(null!=d.config.ranges[a].line){var g=
d.config.ranges[a].line.height/b.height*f;var e=d.config.ranges[a].line.base/b.height*f}else null!=d.config.line?(g=d.config.line.height/b.height*f,e=d.config.line.base/b.height*f):e=g=1;a=d.config.ranges[a].range;d.textureCache.setImage(b,0,c,f);d.rangeMapping={min:a.min,max:a.max,height:g,base:e}},p=function(a){b(d)};null==g&&(g=!1);var l=a.length;e=0;for(k=a.length;e<k;){h=[e++];var C=[a[h[0]]];f=g;var z=null==r?null:function(a){return function(b,c){null!=r&&r(a[0],b,c)}}(h);h=null==p?null:function(a){return function(c){null!=
t&&t(a[0],c);0==--l&&b(d)}}(h);null==f&&(f=!1);""!=Db.corsServer&&(new ba("^https?://","")).match(C[0])&&(C[0]="//"+Db.corsServer+"/"+C[0]);var w=$a.loadFromFile(C[0]);f&&(ka.trace('Start loading image "'+C[0]+'"',{fileName:"utils/Loader.hx",lineNumber:28,className:"utils.Loader",methodName:"image"}),w.onProgress(function(a){return function(b,c){Db.onProgressDebug(b,c,a[0])}}(C)),w.onError(Db.onErrorDebug),w.onComplete(function(a){return function(b){Db.onCompleteDebug(a[0])}}(C)));if(null!=z)w.onProgress(z);
if(null!=h)w.onComplete(h)}},__class__:mf};var Mf=function(){};l["peote.text.Gl3FontData"]=Mf;Mf.__name__="peote.text.Gl3FontData";var Fe=function(a,b){this.min=a;this.max=b};l["peote.text.Range"]=Fe;Fe.__name__="peote.text.Range";Fe.prototype={__class__:Fe};var bd=function(){};l["peote.view.BufferInterface"]=bd;bd.__name__="peote.view.BufferInterface";bd.__isInterface__=!0;bd.prototype={__class__:bd};var je=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=
0;this._gl=this._glInstanceBuffer=this._glVAO=null;if(0>=a)throw D.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);V.isINSTANCED?(null==va.instanceBytes&&(va.instanceBytes=new Wb(new ArrayBuffer(12)),va.instanceBytes.b[0]=1,va.instanceBytes.b[1]=1,va.instanceBytes.b[2]=1,va.instanceBytes.b[3]=1,va.instanceBytes.b[4]=0,va.instanceBytes.b[5]=1,va.instanceBytes.b[6]=1,va.instanceBytes.b[7]=
0,va.instanceBytes.b[8]=0,va.instanceBytes.b[9]=0,va.instanceBytes.b[10]=0,va.instanceBytes.b[11]=0),this._elemBuffSize=36):this._elemBuffSize=240;this._bytes=new Wb(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,0)};l["peote.view.Buffer_Shape"]=je;je.__name__="peote.view.Buffer_Shape";je.__interfaces__=[bd];je.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),V.isINSTANCED&&
this._gl.deleteBuffer(this._glInstanceBuffer),V.isVAO&&this._gl.deleteVertexArray(this._glVAO));this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,0);this._gl.bufferData(this._gl.ARRAY_BUFFER,b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);V.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=va.instanceBytes,
b=new Uint8Array(b.b.bufferValue,0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null));V.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(a=this._gl,b=this._glBuffer,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,36,0),a.vertexAttribDivisor(5,
1),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,1,a.FLOAT,!1,36,4),a.vertexAttribDivisor(4,1),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,36,8),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,2,a.FLOAT,!1,36,16),a.vertexAttribDivisor(3,1),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,2,a.FLOAT,!1,36,24),a.vertexAttribDivisor(6,1),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,36,32),a.vertexAttribDivisor(2,1)):
(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,40,0),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,1,a.FLOAT,!1,40,4),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,40,8),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,2,a.FLOAT,!1,40,16),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,2,a.FLOAT,!1,40,24),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,40,32),a.enableVertexAttribArray(0),
a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,40,36)),this._gl.bindVertexArray(null))}},update:function(){for(var a=0,b=this._maxElements;a<b;){var c=a++;if(V.isINSTANCED){c=this._elements[c];var f=this._bytes;f.b_Int32[c.bytePos>>2]=c.color;f.b_UFloat32[c.bytePos+4>>2]=c.rotation/180*Math.PI;f.b_UFloat32[c.bytePos+8>>2]=c.x;f.b_UFloat32[c.bytePos+12>>2]=c.y;f.b_UFloat32[c.bytePos+16>>2]=c.px_offset;f.b_UFloat32[c.bytePos+20>>2]=c.py_offset;f.b_UFloat32[c.bytePos+24>>2]=c.sides;f.b_UFloat32[c.bytePos+
28>>2]=c.shape;f.b_Uint16[c.bytePos+32>>1]=c.w&65535;f.b_Uint16[c.bytePos+34>>1]=c.h&65535}else c=this._elements[c],f=this._bytes,f.b_Int32[c.bytePos>>2]=c.color,f.b_UFloat32[c.bytePos+4>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+8>>2]=c.x,f.b_UFloat32[c.bytePos+12>>2]=c.y,f.b_UFloat32[c.bytePos+16>>2]=c.px_offset,f.b_UFloat32[c.bytePos+20>>2]=c.py_offset,f.b_UFloat32[c.bytePos+24>>2]=c.sides,f.b_UFloat32[c.bytePos+28>>2]=c.shape,f.b_Uint16[c.bytePos+32>>1]=c.w&65535,f.b_Uint16[c.bytePos+34>>
1]=c.h&65535,f.b[c.bytePos+36]=1,f.b[c.bytePos+37]=1,f.b_Int32[c.bytePos+40>>2]=c.color,f.b_UFloat32[c.bytePos+44>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+48>>2]=c.x,f.b_UFloat32[c.bytePos+52>>2]=c.y,f.b_UFloat32[c.bytePos+56>>2]=c.px_offset,f.b_UFloat32[c.bytePos+60>>2]=c.py_offset,f.b_UFloat32[c.bytePos+64>>2]=c.sides,f.b_UFloat32[c.bytePos+68>>2]=c.shape,f.b_Uint16[c.bytePos+72>>1]=c.w&65535,f.b_Uint16[c.bytePos+74>>1]=c.h&65535,f.b[c.bytePos+76]=1,f.b[c.bytePos+77]=1,f.b_Int32[c.bytePos+
80>>2]=c.color,f.b_UFloat32[c.bytePos+84>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+88>>2]=c.x,f.b_UFloat32[c.bytePos+92>>2]=c.y,f.b_UFloat32[c.bytePos+96>>2]=c.px_offset,f.b_UFloat32[c.bytePos+100>>2]=c.py_offset,f.b_UFloat32[c.bytePos+104>>2]=c.sides,f.b_UFloat32[c.bytePos+108>>2]=c.shape,f.b_Uint16[c.bytePos+112>>1]=c.w&65535,f.b_Uint16[c.bytePos+114>>1]=c.h&65535,f.b[c.bytePos+116]=0,f.b[c.bytePos+117]=1,f.b_Int32[c.bytePos+120>>2]=c.color,f.b_UFloat32[c.bytePos+124>>2]=c.rotation/180*
Math.PI,f.b_UFloat32[c.bytePos+128>>2]=c.x,f.b_UFloat32[c.bytePos+132>>2]=c.y,f.b_UFloat32[c.bytePos+136>>2]=c.px_offset,f.b_UFloat32[c.bytePos+140>>2]=c.py_offset,f.b_UFloat32[c.bytePos+144>>2]=c.sides,f.b_UFloat32[c.bytePos+148>>2]=c.shape,f.b_Uint16[c.bytePos+152>>1]=c.w&65535,f.b_Uint16[c.bytePos+154>>1]=c.h&65535,f.b[c.bytePos+156]=1,f.b[c.bytePos+157]=0,f.b_Int32[c.bytePos+160>>2]=c.color,f.b_UFloat32[c.bytePos+164>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+168>>2]=c.x,f.b_UFloat32[c.bytePos+
172>>2]=c.y,f.b_UFloat32[c.bytePos+176>>2]=c.px_offset,f.b_UFloat32[c.bytePos+180>>2]=c.py_offset,f.b_UFloat32[c.bytePos+184>>2]=c.sides,f.b_UFloat32[c.bytePos+188>>2]=c.shape,f.b_Uint16[c.bytePos+192>>1]=c.w&65535,f.b_Uint16[c.bytePos+194>>1]=c.h&65535,f.b[c.bytePos+196]=0,f.b[c.bytePos+197]=0,f.b_Int32[c.bytePos+200>>2]=c.color,f.b_UFloat32[c.bytePos+204>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+208>>2]=c.x,f.b_UFloat32[c.bytePos+212>>2]=c.y,f.b_UFloat32[c.bytePos+216>>2]=c.px_offset,f.b_UFloat32[c.bytePos+
220>>2]=c.py_offset,f.b_UFloat32[c.bytePos+224>>2]=c.sides,f.b_UFloat32[c.bytePos+228>>2]=c.shape,f.b_Uint16[c.bytePos+232>>1]=c.w&65535,f.b_Uint16[c.bytePos+234>>1]=c.h&65535,f.b[c.bytePos+236]=0,f.b[c.bytePos+237]=0}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);f=this._bytes;a=new Uint8Array(f.b.bufferValue,0);this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,a);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},updateElement:function(a){if(V.isINSTANCED){var b=this._bytes;b.b_Int32[a.bytePos>>
2]=a.color;b.b_UFloat32[a.bytePos+4>>2]=a.rotation/180*Math.PI;b.b_UFloat32[a.bytePos+8>>2]=a.x;b.b_UFloat32[a.bytePos+12>>2]=a.y;b.b_UFloat32[a.bytePos+16>>2]=a.px_offset;b.b_UFloat32[a.bytePos+20>>2]=a.py_offset;b.b_UFloat32[a.bytePos+24>>2]=a.sides;b.b_UFloat32[a.bytePos+28>>2]=a.shape;b.b_Uint16[a.bytePos+32>>1]=a.w&65535;b.b_Uint16[a.bytePos+34>>1]=a.h&65535}else b=this._bytes,b.b_Int32[a.bytePos>>2]=a.color,b.b_UFloat32[a.bytePos+4>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+8>>2]=a.x,
b.b_UFloat32[a.bytePos+12>>2]=a.y,b.b_UFloat32[a.bytePos+16>>2]=a.px_offset,b.b_UFloat32[a.bytePos+20>>2]=a.py_offset,b.b_UFloat32[a.bytePos+24>>2]=a.sides,b.b_UFloat32[a.bytePos+28>>2]=a.shape,b.b_Uint16[a.bytePos+32>>1]=a.w&65535,b.b_Uint16[a.bytePos+34>>1]=a.h&65535,b.b[a.bytePos+36]=1,b.b[a.bytePos+37]=1,b.b_Int32[a.bytePos+40>>2]=a.color,b.b_UFloat32[a.bytePos+44>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+48>>2]=a.x,b.b_UFloat32[a.bytePos+52>>2]=a.y,b.b_UFloat32[a.bytePos+56>>2]=a.px_offset,
b.b_UFloat32[a.bytePos+60>>2]=a.py_offset,b.b_UFloat32[a.bytePos+64>>2]=a.sides,b.b_UFloat32[a.bytePos+68>>2]=a.shape,b.b_Uint16[a.bytePos+72>>1]=a.w&65535,b.b_Uint16[a.bytePos+74>>1]=a.h&65535,b.b[a.bytePos+76]=1,b.b[a.bytePos+77]=1,b.b_Int32[a.bytePos+80>>2]=a.color,b.b_UFloat32[a.bytePos+84>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+88>>2]=a.x,b.b_UFloat32[a.bytePos+92>>2]=a.y,b.b_UFloat32[a.bytePos+96>>2]=a.px_offset,b.b_UFloat32[a.bytePos+100>>2]=a.py_offset,b.b_UFloat32[a.bytePos+104>>
2]=a.sides,b.b_UFloat32[a.bytePos+108>>2]=a.shape,b.b_Uint16[a.bytePos+112>>1]=a.w&65535,b.b_Uint16[a.bytePos+114>>1]=a.h&65535,b.b[a.bytePos+116]=0,b.b[a.bytePos+117]=1,b.b_Int32[a.bytePos+120>>2]=a.color,b.b_UFloat32[a.bytePos+124>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+128>>2]=a.x,b.b_UFloat32[a.bytePos+132>>2]=a.y,b.b_UFloat32[a.bytePos+136>>2]=a.px_offset,b.b_UFloat32[a.bytePos+140>>2]=a.py_offset,b.b_UFloat32[a.bytePos+144>>2]=a.sides,b.b_UFloat32[a.bytePos+148>>2]=a.shape,b.b_Uint16[a.bytePos+
152>>1]=a.w&65535,b.b_Uint16[a.bytePos+154>>1]=a.h&65535,b.b[a.bytePos+156]=1,b.b[a.bytePos+157]=0,b.b_Int32[a.bytePos+160>>2]=a.color,b.b_UFloat32[a.bytePos+164>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+168>>2]=a.x,b.b_UFloat32[a.bytePos+172>>2]=a.y,b.b_UFloat32[a.bytePos+176>>2]=a.px_offset,b.b_UFloat32[a.bytePos+180>>2]=a.py_offset,b.b_UFloat32[a.bytePos+184>>2]=a.sides,b.b_UFloat32[a.bytePos+188>>2]=a.shape,b.b_Uint16[a.bytePos+192>>1]=a.w&65535,b.b_Uint16[a.bytePos+194>>1]=a.h&65535,
b.b[a.bytePos+196]=0,b.b[a.bytePos+197]=0,b.b_Int32[a.bytePos+200>>2]=a.color,b.b_UFloat32[a.bytePos+204>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+208>>2]=a.x,b.b_UFloat32[a.bytePos+212>>2]=a.y,b.b_UFloat32[a.bytePos+216>>2]=a.px_offset,b.b_UFloat32[a.bytePos+220>>2]=a.py_offset,b.b_UFloat32[a.bytePos+224>>2]=a.sides,b.b_UFloat32[a.bytePos+228>>2]=a.shape,b.b_Uint16[a.bytePos+232>>1]=a.w&65535,b.b_Uint16[a.bytePos+234>>1]=a.h&65535,b.b[a.bytePos+236]=0,b.b[a.bytePos+237]=0;if(-1==a.bytePos)throw D.thrown("Error, Element is not added to Buffer");
null!=this._gl&&(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.bufferSubData(b.ARRAY_BUFFER,a.bytePos,a.bufferPointer),b.bindBuffer(b.ARRAY_BUFFER,null))},addElement:function(a){if(-1==a.bytePos){if(this._maxElements==this._elements.length){if(0==this._growSize)throw D.thrown("Error: Can't add new Element. Buffer is full and automatic growing Buffersize is disabled.");var b=this._maxElements+this._growSize,c=new Wb(new ArrayBuffer(this._elemBuffSize*b));c.blit(0,this._bytes,0,this._elemBuffSize*
this._maxElements);this._bytes=c;var f=Array(b);b=f;c=0;for(var d=this._maxElements;c<d;){var g=c++,e=this._elements[g];f=this._bytes;var k=e.bytePos,h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);e.bufferPointer=f;b[g]=e}this._elements=b;null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),this._glBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer),f=this._bytes,f=new Uint8Array(f.b.bufferValue,
0),this._gl.bufferData(this._gl.ARRAY_BUFFER,f,this._gl.STREAM_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),V.isVAO&&(this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,36,0),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(4),
b.vertexAttribPointer(4,1,b.FLOAT,!1,36,4),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,36,8),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,36,16),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,36,24),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,36,32),b.vertexAttribDivisor(2,1)):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,
this._glBuffer),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,40,0),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,40,4),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,40,8),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,40,16),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,40,24),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,40,32),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,
2,b.UNSIGNED_BYTE,!1,40,36)),this._gl.bindVertexArray(null)))}a.bytePos=this._maxElements*this._elemBuffSize;f=this._bytes;k=a.bytePos;h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);a.bufferPointer=f;this._elements[this._maxElements++]=a;this.updateElement(a)}else throw D.thrown("Error: Element is already inside a Buffer");},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t::IN:: float aRotZ;\n\t::IN:: vec2 aPivot;\n\t\n\t::IN:: vec4 aColorStart0;\n\t\n\t::IN:: vec2 aFloat0;\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t::if isES3::flat ::end::::VAROUT:: vec4 vColor0;\n\t::if isES3::flat ::end::::VAROUT:: vec2 vSize; ::if isES3::flat ::end:: ::VAROUT:: vec2 vPack0;\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;vSize = size;\n\t\tvec2 pivot = ::if PIVOT_FORMULA::::PIVOT_FORMULA::::else::vec2((aSize.x) * 0.5 + (aPivot.x), (aSize.y) * 0.5 + (aPivot.y))::end::;\t\t\n\t\tvec2 rotZ = ::if ROTZ_FORMULA::::ROTZ_FORMULA::::else::vec2( aRotZ, 0.0 )::end::;\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::aPos::end::;\npos = pos + (aPosition * size - pivot) * mat2( vec2(cos(rotZ.x), -sin(rotZ.x)), vec2(sin(rotZ.x), cos(rotZ.x)) );\n\t\tvColor0 = aColorStart0.wzyx; \n\n\t\tvPack0.x = ::if FORMULA_VARYINGS.sides::::FORMULA_VARYINGS.sides::::else::aFloat0.x::end::;vPack0.y = ::if FORMULA_VARYINGS.shape::::FORMULA_VARYINGS.shape::::else::aFloat0.y::end::;\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\t\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- 0.0,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t::if isES3::flat ::end::::VARIN:: vec4 vColor0; \n\t::if isES3::flat ::end::::VARIN:: vec2 vSize; ::if isES3::flat ::end:: ::VARIN:: vec2 vPack0;\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\tvec4 c0 = vColor0; \n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return[]},getColorIdentifiers:function(){return["color"]},getCustomIdentifiers:function(){return["sides","shape"]},getCustomVaryings:function(){return["vPack0.x","vPack0.y"]},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return va.DEFAULT_FORMULA_VARS},getFormulas:function(){return va.FORMULAS},getAttributes:function(){return va.ATTRIBUTES},getFormulaNames:function(){return va.FORMULA_NAMES},getFormulaVaryings:function(){return""==va.FORMULA_VARYINGS?
[]:va.FORMULA_VARYINGS.split(",")},getFormulaConstants:function(){return""==va.FORMULA_CONSTANTS?[]:va.FORMULA_CONSTANTS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!0},hasZindex:function(){return!1},hasPicking:function(){return!1},hasTime:function(){return!1},needFragmentPrecision:function(){return!1},bindAttribLocations:function(a,b){a.bindAttribLocation(b,5,"aColorStart0");a.bindAttribLocation(b,4,"aRotZ");a.bindAttribLocation(b,1,"aPos");a.bindAttribLocation(b,
2,"aSize");a.bindAttribLocation(b,3,"aPivot");a.bindAttribLocation(b,6,"aFloat0");a.bindAttribLocation(b,0,"aPosition")},render:function(a,b,c){a=this._maxElements;V.isINSTANCED?(V.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,36,0),b.vertexAttribDivisor(5,
1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,36,4),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,36,8),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,36,16),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,36,24),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,36,32),b.vertexAttribDivisor(2,1)),
this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,0,6,a)):(V.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,40,0),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,40,4),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,40,8),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,40,16),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,
2,b.FLOAT,!1,40,24),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,40,32),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,40,36)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,6*a));V.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(5),b.disableVertexAttribArray(4),b.disableVertexAttribArray(1),b.disableVertexAttribArray(2),b.disableVertexAttribArray(3),b.disableVertexAttribArray(6));this._gl.bindBuffer(this._gl.ARRAY_BUFFER,
null)},__class__:je};var ke=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=0;this._gl=this._glInstanceBuffer=this._glVAO=null;if(0>=a)throw D.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);V.isINSTANCED?(null==wa.instanceBytes&&(wa.instanceBytes=new Wb(new ArrayBuffer(12)),wa.instanceBytes.b[0]=1,wa.instanceBytes.b[1]=
1,wa.instanceBytes.b[2]=1,wa.instanceBytes.b[3]=1,wa.instanceBytes.b[4]=0,wa.instanceBytes.b[5]=1,wa.instanceBytes.b[6]=1,wa.instanceBytes.b[7]=0,wa.instanceBytes.b[8]=0,wa.instanceBytes.b[9]=0,wa.instanceBytes.b[10]=0,wa.instanceBytes.b[11]=0),this._elemBuffSize=60):this._elemBuffSize=384;this._bytes=new Wb(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,0)};l["peote.view.Buffer_Sprite"]=ke;ke.__name__="peote.view.Buffer_Sprite";ke.__interfaces__=
[bd];ke.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),V.isINSTANCED&&this._gl.deleteBuffer(this._glInstanceBuffer),V.isVAO&&this._gl.deleteVertexArray(this._glVAO));this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,0);this._gl.bufferData(this._gl.ARRAY_BUFFER,b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,
null);V.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=wa.instanceBytes,b=new Uint8Array(b.b.bufferValue,0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null));V.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(a=this._gl,b=this._glBuffer,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,
2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,60,0),a.vertexAttribDivisor(5,1),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,1,a.FLOAT,!1,60,4),a.vertexAttribDivisor(4,1),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,60,8),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,2,a.FLOAT,!1,60,16),a.vertexAttribDivisor(3,1),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,
4,a.FLOAT,!1,60,24),a.vertexAttribDivisor(6,1),a.enableVertexAttribArray(7),a.vertexAttribPointer(7,3,a.FLOAT,!1,60,40),a.vertexAttribDivisor(7,1),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,60,52),a.vertexAttribDivisor(2,1),a.enableVertexAttribArray(8),a.vertexAttribPointer(8,2,a.SHORT,!1,60,56),a.vertexAttribDivisor(8,1)):(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,64,0),a.enableVertexAttribArray(4),
a.vertexAttribPointer(4,1,a.FLOAT,!1,64,4),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,64,8),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,2,a.FLOAT,!1,64,16),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,4,a.FLOAT,!1,64,24),a.enableVertexAttribArray(7),a.vertexAttribPointer(7,3,a.FLOAT,!1,64,40),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,64,52),a.enableVertexAttribArray(8),a.vertexAttribPointer(8,2,a.SHORT,!1,64,56),a.enableVertexAttribArray(0),
a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,64,60)),this._gl.bindVertexArray(null))}},update:function(){for(var a=0,b=this._maxElements;a<b;){var c=a++;if(V.isINSTANCED){c=this._elements[c];var f=this._bytes;f.b_Int32[c.bytePos>>2]=c.c;f.b_UFloat32[c.bytePos+4>>2]=c.rotation/180*Math.PI;f.b_UFloat32[c.bytePos+8>>2]=c.x;f.b_UFloat32[c.bytePos+12>>2]=c.y;f.b_UFloat32[c.bytePos+16>>2]=c.px_offset;f.b_UFloat32[c.bytePos+20>>2]=c.py_offset;f.b_UFloat32[c.bytePos+24>>2]=c.shakeAtTime;f.b_UFloat32[c.bytePos+
28>>2]=c.shakeFrequencyY;f.b_UFloat32[c.bytePos+32>>2]=c.shakeFrequencyX;f.b_UFloat32[c.bytePos+36>>2]=c.shakeDistanceY;f.b_UFloat32[c.bytePos+40>>2]=c.shakeDistanceX;f.b_UFloat32[c.bytePos+44>>2]=c.shakeDurationX;f.b_UFloat32[c.bytePos+48>>2]=c.shakeDurationY;f.b_Uint16[c.bytePos+52>>1]=c.w&65535;f.b_Uint16[c.bytePos+54>>1]=c.h&65535;f.b_Uint16[c.bytePos+56>>1]=c.slot&65535;f.b_Uint16[c.bytePos+58>>1]=c.tile&65535}else c=this._elements[c],f=this._bytes,f.b_Int32[c.bytePos>>2]=c.c,f.b_UFloat32[c.bytePos+
4>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+8>>2]=c.x,f.b_UFloat32[c.bytePos+12>>2]=c.y,f.b_UFloat32[c.bytePos+16>>2]=c.px_offset,f.b_UFloat32[c.bytePos+20>>2]=c.py_offset,f.b_UFloat32[c.bytePos+24>>2]=c.shakeAtTime,f.b_UFloat32[c.bytePos+28>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+32>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+36>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+40>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+44>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+48>>2]=c.shakeDurationY,
f.b_Uint16[c.bytePos+52>>1]=c.w&65535,f.b_Uint16[c.bytePos+54>>1]=c.h&65535,f.b_Uint16[c.bytePos+56>>1]=c.slot&65535,f.b_Uint16[c.bytePos+58>>1]=c.tile&65535,f.b[c.bytePos+60]=1,f.b[c.bytePos+61]=1,f.b_Int32[c.bytePos+64>>2]=c.c,f.b_UFloat32[c.bytePos+68>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+72>>2]=c.x,f.b_UFloat32[c.bytePos+76>>2]=c.y,f.b_UFloat32[c.bytePos+80>>2]=c.px_offset,f.b_UFloat32[c.bytePos+84>>2]=c.py_offset,f.b_UFloat32[c.bytePos+88>>2]=c.shakeAtTime,f.b_UFloat32[c.bytePos+
92>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+96>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+100>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+104>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+108>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+112>>2]=c.shakeDurationY,f.b_Uint16[c.bytePos+116>>1]=c.w&65535,f.b_Uint16[c.bytePos+118>>1]=c.h&65535,f.b_Uint16[c.bytePos+120>>1]=c.slot&65535,f.b_Uint16[c.bytePos+122>>1]=c.tile&65535,f.b[c.bytePos+124]=1,f.b[c.bytePos+125]=1,f.b_Int32[c.bytePos+128>>2]=c.c,
f.b_UFloat32[c.bytePos+132>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+136>>2]=c.x,f.b_UFloat32[c.bytePos+140>>2]=c.y,f.b_UFloat32[c.bytePos+144>>2]=c.px_offset,f.b_UFloat32[c.bytePos+148>>2]=c.py_offset,f.b_UFloat32[c.bytePos+152>>2]=c.shakeAtTime,f.b_UFloat32[c.bytePos+156>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+160>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+164>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+168>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+172>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+
176>>2]=c.shakeDurationY,f.b_Uint16[c.bytePos+180>>1]=c.w&65535,f.b_Uint16[c.bytePos+182>>1]=c.h&65535,f.b_Uint16[c.bytePos+184>>1]=c.slot&65535,f.b_Uint16[c.bytePos+186>>1]=c.tile&65535,f.b[c.bytePos+188]=0,f.b[c.bytePos+189]=1,f.b_Int32[c.bytePos+192>>2]=c.c,f.b_UFloat32[c.bytePos+196>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+200>>2]=c.x,f.b_UFloat32[c.bytePos+204>>2]=c.y,f.b_UFloat32[c.bytePos+208>>2]=c.px_offset,f.b_UFloat32[c.bytePos+212>>2]=c.py_offset,f.b_UFloat32[c.bytePos+216>>2]=
c.shakeAtTime,f.b_UFloat32[c.bytePos+220>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+224>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+228>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+232>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+236>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+240>>2]=c.shakeDurationY,f.b_Uint16[c.bytePos+244>>1]=c.w&65535,f.b_Uint16[c.bytePos+246>>1]=c.h&65535,f.b_Uint16[c.bytePos+248>>1]=c.slot&65535,f.b_Uint16[c.bytePos+250>>1]=c.tile&65535,f.b[c.bytePos+252]=1,f.b[c.bytePos+
253]=0,f.b_Int32[c.bytePos+256>>2]=c.c,f.b_UFloat32[c.bytePos+260>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+264>>2]=c.x,f.b_UFloat32[c.bytePos+268>>2]=c.y,f.b_UFloat32[c.bytePos+272>>2]=c.px_offset,f.b_UFloat32[c.bytePos+276>>2]=c.py_offset,f.b_UFloat32[c.bytePos+280>>2]=c.shakeAtTime,f.b_UFloat32[c.bytePos+284>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+288>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+292>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+296>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+
300>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+304>>2]=c.shakeDurationY,f.b_Uint16[c.bytePos+308>>1]=c.w&65535,f.b_Uint16[c.bytePos+310>>1]=c.h&65535,f.b_Uint16[c.bytePos+312>>1]=c.slot&65535,f.b_Uint16[c.bytePos+314>>1]=c.tile&65535,f.b[c.bytePos+316]=0,f.b[c.bytePos+317]=0,f.b_Int32[c.bytePos+320>>2]=c.c,f.b_UFloat32[c.bytePos+324>>2]=c.rotation/180*Math.PI,f.b_UFloat32[c.bytePos+328>>2]=c.x,f.b_UFloat32[c.bytePos+332>>2]=c.y,f.b_UFloat32[c.bytePos+336>>2]=c.px_offset,f.b_UFloat32[c.bytePos+340>>
2]=c.py_offset,f.b_UFloat32[c.bytePos+344>>2]=c.shakeAtTime,f.b_UFloat32[c.bytePos+348>>2]=c.shakeFrequencyY,f.b_UFloat32[c.bytePos+352>>2]=c.shakeFrequencyX,f.b_UFloat32[c.bytePos+356>>2]=c.shakeDistanceY,f.b_UFloat32[c.bytePos+360>>2]=c.shakeDistanceX,f.b_UFloat32[c.bytePos+364>>2]=c.shakeDurationX,f.b_UFloat32[c.bytePos+368>>2]=c.shakeDurationY,f.b_Uint16[c.bytePos+372>>1]=c.w&65535,f.b_Uint16[c.bytePos+374>>1]=c.h&65535,f.b_Uint16[c.bytePos+376>>1]=c.slot&65535,f.b_Uint16[c.bytePos+378>>1]=c.tile&
65535,f.b[c.bytePos+380]=0,f.b[c.bytePos+381]=0}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);f=this._bytes;a=new Uint8Array(f.b.bufferValue,0);this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,a);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},updateElement:function(a){if(V.isINSTANCED){var b=this._bytes;b.b_Int32[a.bytePos>>2]=a.c;b.b_UFloat32[a.bytePos+4>>2]=a.rotation/180*Math.PI;b.b_UFloat32[a.bytePos+8>>2]=a.x;b.b_UFloat32[a.bytePos+12>>2]=a.y;b.b_UFloat32[a.bytePos+16>>2]=a.px_offset;
b.b_UFloat32[a.bytePos+20>>2]=a.py_offset;b.b_UFloat32[a.bytePos+24>>2]=a.shakeAtTime;b.b_UFloat32[a.bytePos+28>>2]=a.shakeFrequencyY;b.b_UFloat32[a.bytePos+32>>2]=a.shakeFrequencyX;b.b_UFloat32[a.bytePos+36>>2]=a.shakeDistanceY;b.b_UFloat32[a.bytePos+40>>2]=a.shakeDistanceX;b.b_UFloat32[a.bytePos+44>>2]=a.shakeDurationX;b.b_UFloat32[a.bytePos+48>>2]=a.shakeDurationY;b.b_Uint16[a.bytePos+52>>1]=a.w&65535;b.b_Uint16[a.bytePos+54>>1]=a.h&65535;b.b_Uint16[a.bytePos+56>>1]=a.slot&65535;b.b_Uint16[a.bytePos+
58>>1]=a.tile&65535}else b=this._bytes,b.b_Int32[a.bytePos>>2]=a.c,b.b_UFloat32[a.bytePos+4>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+8>>2]=a.x,b.b_UFloat32[a.bytePos+12>>2]=a.y,b.b_UFloat32[a.bytePos+16>>2]=a.px_offset,b.b_UFloat32[a.bytePos+20>>2]=a.py_offset,b.b_UFloat32[a.bytePos+24>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+28>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+32>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+36>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+40>>2]=a.shakeDistanceX,
b.b_UFloat32[a.bytePos+44>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+48>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+52>>1]=a.w&65535,b.b_Uint16[a.bytePos+54>>1]=a.h&65535,b.b_Uint16[a.bytePos+56>>1]=a.slot&65535,b.b_Uint16[a.bytePos+58>>1]=a.tile&65535,b.b[a.bytePos+60]=1,b.b[a.bytePos+61]=1,b.b_Int32[a.bytePos+64>>2]=a.c,b.b_UFloat32[a.bytePos+68>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+72>>2]=a.x,b.b_UFloat32[a.bytePos+76>>2]=a.y,b.b_UFloat32[a.bytePos+80>>2]=a.px_offset,b.b_UFloat32[a.bytePos+
84>>2]=a.py_offset,b.b_UFloat32[a.bytePos+88>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+92>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+96>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+100>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+104>>2]=a.shakeDistanceX,b.b_UFloat32[a.bytePos+108>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+112>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+116>>1]=a.w&65535,b.b_Uint16[a.bytePos+118>>1]=a.h&65535,b.b_Uint16[a.bytePos+120>>1]=a.slot&65535,b.b_Uint16[a.bytePos+122>>1]=a.tile&
65535,b.b[a.bytePos+124]=1,b.b[a.bytePos+125]=1,b.b_Int32[a.bytePos+128>>2]=a.c,b.b_UFloat32[a.bytePos+132>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+136>>2]=a.x,b.b_UFloat32[a.bytePos+140>>2]=a.y,b.b_UFloat32[a.bytePos+144>>2]=a.px_offset,b.b_UFloat32[a.bytePos+148>>2]=a.py_offset,b.b_UFloat32[a.bytePos+152>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+156>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+160>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+164>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+
168>>2]=a.shakeDistanceX,b.b_UFloat32[a.bytePos+172>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+176>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+180>>1]=a.w&65535,b.b_Uint16[a.bytePos+182>>1]=a.h&65535,b.b_Uint16[a.bytePos+184>>1]=a.slot&65535,b.b_Uint16[a.bytePos+186>>1]=a.tile&65535,b.b[a.bytePos+188]=0,b.b[a.bytePos+189]=1,b.b_Int32[a.bytePos+192>>2]=a.c,b.b_UFloat32[a.bytePos+196>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+200>>2]=a.x,b.b_UFloat32[a.bytePos+204>>2]=a.y,b.b_UFloat32[a.bytePos+
208>>2]=a.px_offset,b.b_UFloat32[a.bytePos+212>>2]=a.py_offset,b.b_UFloat32[a.bytePos+216>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+220>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+224>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+228>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+232>>2]=a.shakeDistanceX,b.b_UFloat32[a.bytePos+236>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+240>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+244>>1]=a.w&65535,b.b_Uint16[a.bytePos+246>>1]=a.h&65535,b.b_Uint16[a.bytePos+248>>
1]=a.slot&65535,b.b_Uint16[a.bytePos+250>>1]=a.tile&65535,b.b[a.bytePos+252]=1,b.b[a.bytePos+253]=0,b.b_Int32[a.bytePos+256>>2]=a.c,b.b_UFloat32[a.bytePos+260>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+264>>2]=a.x,b.b_UFloat32[a.bytePos+268>>2]=a.y,b.b_UFloat32[a.bytePos+272>>2]=a.px_offset,b.b_UFloat32[a.bytePos+276>>2]=a.py_offset,b.b_UFloat32[a.bytePos+280>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+284>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+288>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+
292>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+296>>2]=a.shakeDistanceX,b.b_UFloat32[a.bytePos+300>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+304>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+308>>1]=a.w&65535,b.b_Uint16[a.bytePos+310>>1]=a.h&65535,b.b_Uint16[a.bytePos+312>>1]=a.slot&65535,b.b_Uint16[a.bytePos+314>>1]=a.tile&65535,b.b[a.bytePos+316]=0,b.b[a.bytePos+317]=0,b.b_Int32[a.bytePos+320>>2]=a.c,b.b_UFloat32[a.bytePos+324>>2]=a.rotation/180*Math.PI,b.b_UFloat32[a.bytePos+328>>2]=a.x,b.b_UFloat32[a.bytePos+
332>>2]=a.y,b.b_UFloat32[a.bytePos+336>>2]=a.px_offset,b.b_UFloat32[a.bytePos+340>>2]=a.py_offset,b.b_UFloat32[a.bytePos+344>>2]=a.shakeAtTime,b.b_UFloat32[a.bytePos+348>>2]=a.shakeFrequencyY,b.b_UFloat32[a.bytePos+352>>2]=a.shakeFrequencyX,b.b_UFloat32[a.bytePos+356>>2]=a.shakeDistanceY,b.b_UFloat32[a.bytePos+360>>2]=a.shakeDistanceX,b.b_UFloat32[a.bytePos+364>>2]=a.shakeDurationX,b.b_UFloat32[a.bytePos+368>>2]=a.shakeDurationY,b.b_Uint16[a.bytePos+372>>1]=a.w&65535,b.b_Uint16[a.bytePos+374>>1]=
a.h&65535,b.b_Uint16[a.bytePos+376>>1]=a.slot&65535,b.b_Uint16[a.bytePos+378>>1]=a.tile&65535,b.b[a.bytePos+380]=0,b.b[a.bytePos+381]=0;if(-1==a.bytePos)throw D.thrown("Error, Element is not added to Buffer");null!=this._gl&&(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.bufferSubData(b.ARRAY_BUFFER,a.bytePos,a.bufferPointer),b.bindBuffer(b.ARRAY_BUFFER,null))},addElement:function(a){if(-1==a.bytePos){if(this._maxElements==this._elements.length){if(0==this._growSize)throw D.thrown("Error: Can't add new Element. Buffer is full and automatic growing Buffersize is disabled.");
var b=this._maxElements+this._growSize,c=new Wb(new ArrayBuffer(this._elemBuffSize*b));c.blit(0,this._bytes,0,this._elemBuffSize*this._maxElements);this._bytes=c;var f=Array(b);b=f;c=0;for(var d=this._maxElements;c<d;){var g=c++,e=this._elements[g];f=this._bytes;var k=e.bytePos,h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);e.bufferPointer=f;b[g]=e}this._elements=b;null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),
this._glBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer),f=this._bytes,f=new Uint8Array(f.b.bufferValue,0),this._gl.bufferData(this._gl.ARRAY_BUFFER,f,this._gl.STREAM_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),V.isVAO&&(this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,
c),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,60,0),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,60,4),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,60,8),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,60,16),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,4,b.FLOAT,!1,60,24),b.vertexAttribDivisor(6,
1),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,3,b.FLOAT,!1,60,40),b.vertexAttribDivisor(7,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,60,52),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(8),b.vertexAttribPointer(8,2,b.SHORT,!1,60,56),b.vertexAttribDivisor(8,1)):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,64,0),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,
!1,64,4),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,64,8),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,64,16),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,4,b.FLOAT,!1,64,24),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,3,b.FLOAT,!1,64,40),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,64,52),b.enableVertexAttribArray(8),b.vertexAttribPointer(8,2,b.SHORT,!1,64,56),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,
b.UNSIGNED_BYTE,!1,64,60)),this._gl.bindVertexArray(null)))}a.bytePos=this._maxElements*this._elemBuffSize;f=this._bytes;k=a.bytePos;h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);a.bufferPointer=f;this._elements[this._maxElements++]=a;this.updateElement(a)}else throw D.thrown("Error: Element is already inside a Buffer");},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t::IN:: float aRotZ;\n\t::IN:: vec2 aPivot;\n\t\n\t::IN:: vec4 aColorStart0;\n\t\n\t::IN:: vec4 aFloat0;::IN:: vec3 aFloat1;::IN:: vec2 aShort0;\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t::if isES3::flat ::end::::VAROUT:: vec4 vColor0;\n\t\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t::if isES3::flat ::end:: ::VAROUT:: vec2 vTexPack0;\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;\n\t\tvec2 pivot = ::if PIVOT_FORMULA::::PIVOT_FORMULA::::else::vec2((aSize.x) * 0.5 + (aPivot.x), (aSize.y) * 0.5 + (aPivot.y))::end::;\t\t\n\t\tvec2 rotZ = ::if ROTZ_FORMULA::::ROTZ_FORMULA::::else::vec2( aRotZ, 0.0 )::end::;\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::vec2((aPos.x) + shake((aFloat0.x), (aFloat0.z), (aFloat1.x), (aFloat1.y)), (aPos.y) + shake((aFloat0.x), (aFloat0.y), (aFloat0.w), (aFloat1.z)))::end::;\npos = pos + (aPosition * size - pivot) * mat2( vec2(cos(rotZ.x), -sin(rotZ.x)), vec2(sin(rotZ.x), cos(rotZ.x)) );\n\t\tvColor0 = aColorStart0.wzyx; \n\n\t\t\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\tvTexPack0.x = ::if FORMULA_VARYINGS.slot::::FORMULA_VARYINGS.slot::::else::aShort0.x::end::;vTexPack0.y = ::if FORMULA_VARYINGS.tile::::FORMULA_VARYINGS.tile::::else::aShort0.y::end::;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- 0.0,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t::if isES3::flat ::end::::VARIN:: vec4 vColor0; \n\t\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t::if isES3::flat ::end:: ::VARIN:: vec2 vTexPack0;\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER == 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOT_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0.x, ::SLOTS_X::)) * ::SLOT_WIDTH:: + floor(mod(vTexPack0.y, ::TILES_X::)) * ::SLOT_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOT_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0.x)/::SLOTS_X::) * ::SLOT_HEIGHT:: + floor(floor(vTexPack0.y) / ::TILES_X::) * ::SLOT_HEIGHT:: / ::TILES_Y::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t\t::if (LAYER >= 1)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0.y, ::TILES_X::)) * ::SLOTS_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOTS_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0.y) / ::TILES_X::) * ::SLOTS_HEIGHT:: / ::TILES_Y::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER == 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t\t::if (LAYER >= 1)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\tvec4 c0 = vColor0; \n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER == 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOT_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0.x, ::SLOTS_X::)) * ::SLOT_WIDTH:: + floor(mod(vTexPack0.y, ::TILES_X::)) * ::SLOT_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOT_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0.x)/::SLOTS_X::) * ::SLOT_HEIGHT:: + floor(floor(vTexPack0.y) / ::TILES_X::) * ::SLOT_HEIGHT:: / ::TILES_Y::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 1)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0.y, ::TILES_X::)) * ::SLOTS_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOTS_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0.y) / ::TILES_X::) * ::SLOTS_HEIGHT:: / ::TILES_Y::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return["base"]},getColorIdentifiers:function(){return["c"]},getCustomIdentifiers:function(){return"shakeAtTime shakeFrequencyY shakeFrequencyX shakeDistanceY shakeDistanceX shakeDurationX shakeDurationY".split(" ")},getCustomVaryings:function(){return"null null null null null null null".split(" ")},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return wa.DEFAULT_FORMULA_VARS},getFormulas:function(){return wa.FORMULAS},getAttributes:function(){return wa.ATTRIBUTES},
getFormulaNames:function(){return wa.FORMULA_NAMES},getFormulaVaryings:function(){return""==wa.FORMULA_VARYINGS?[]:wa.FORMULA_VARYINGS.split(",")},getFormulaConstants:function(){return""==wa.FORMULA_CONSTANTS?[]:wa.FORMULA_CONSTANTS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!0},hasZindex:function(){return!1},hasPicking:function(){return!1},hasTime:function(){return!1},needFragmentPrecision:function(){return!0},bindAttribLocations:function(a,b){a.bindAttribLocation(b,
5,"aColorStart0");a.bindAttribLocation(b,4,"aRotZ");a.bindAttribLocation(b,1,"aPos");a.bindAttribLocation(b,2,"aSize");a.bindAttribLocation(b,3,"aPivot");a.bindAttribLocation(b,6,"aFloat0");a.bindAttribLocation(b,7,"aFloat1");a.bindAttribLocation(b,8,"aShort0");a.bindAttribLocation(b,0,"aPosition")},render:function(a,b,c){a=this._maxElements;V.isINSTANCED?(V.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),
b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,60,0),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,60,4),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,60,8),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,60,16),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(6),
b.vertexAttribPointer(6,4,b.FLOAT,!1,60,24),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,3,b.FLOAT,!1,60,40),b.vertexAttribDivisor(7,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,60,52),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(8),b.vertexAttribPointer(8,2,b.SHORT,!1,60,56),b.vertexAttribDivisor(8,1)),this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,0,6,a)):(V.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,
this._glBuffer),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,64,0),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,64,4),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,64,8),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,64,16),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,4,b.FLOAT,!1,64,24),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,3,b.FLOAT,!1,64,40),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,
2,b.SHORT,!1,64,52),b.enableVertexAttribArray(8),b.vertexAttribPointer(8,2,b.SHORT,!1,64,56),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,64,60)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,6*a));V.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(5),b.disableVertexAttribArray(4),b.disableVertexAttribArray(1),b.disableVertexAttribArray(2),b.disableVertexAttribArray(3),b.disableVertexAttribArray(6),b.disableVertexAttribArray(7),
b.disableVertexAttribArray(8));this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},__class__:ke};var le=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=0;this._gl=this._glInstanceBuffer=this._glVAO=null;if(0>=a)throw D.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);V.isINSTANCED?(null==Ca.instanceBytes&&(Ca.instanceBytes=
new Wb(new ArrayBuffer(12)),Ca.instanceBytes.b[0]=1,Ca.instanceBytes.b[1]=1,Ca.instanceBytes.b[2]=1,Ca.instanceBytes.b[3]=1,Ca.instanceBytes.b[4]=0,Ca.instanceBytes.b[5]=1,Ca.instanceBytes.b[6]=1,Ca.instanceBytes.b[7]=0,Ca.instanceBytes.b[8]=0,Ca.instanceBytes.b[9]=0,Ca.instanceBytes.b[10]=0,Ca.instanceBytes.b[11]=0),this._elemBuffSize=8):this._elemBuffSize=72;this._bytes=new Wb(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,0)};l["peote.view.Buffer_ViewElement"]=
le;le.__name__="peote.view.Buffer_ViewElement";le.__interfaces__=[bd];le.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),V.isINSTANCED&&this._gl.deleteBuffer(this._glInstanceBuffer),V.isVAO&&this._gl.deleteVertexArray(this._glVAO));this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,0);this._gl.bufferData(this._gl.ARRAY_BUFFER,
b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);V.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=Ca.instanceBytes,b=new Uint8Array(b.b.bufferValue,0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null));V.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(a=this._gl,b=this._glBuffer,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),
a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.SHORT,!1,8,0),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,8,4),a.vertexAttribDivisor(2,1)):(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.SHORT,!1,12,0),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,
12,4),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,12,8)),this._gl.bindVertexArray(null))}},update:function(){for(var a=0,b=this._maxElements;a<b;){var c=a++;if(V.isINSTANCED){c=this._elements[c];var f=this._bytes;f.b_Uint16[c.bytePos>>1]=c.x&65535;f.b_Uint16[c.bytePos+2>>1]=c.y&65535;f.b_Uint16[c.bytePos+4>>1]=c.w&65535;f.b_Uint16[c.bytePos+6>>1]=c.h&65535}else c=this._elements[c],f=this._bytes,f.b_Uint16[c.bytePos>>1]=c.x&65535,f.b_Uint16[c.bytePos+2>>1]=c.y&65535,f.b_Uint16[c.bytePos+
4>>1]=c.w&65535,f.b_Uint16[c.bytePos+6>>1]=c.h&65535,f.b[c.bytePos+8]=1,f.b[c.bytePos+9]=1,f.b_Uint16[c.bytePos+12>>1]=c.x&65535,f.b_Uint16[c.bytePos+14>>1]=c.y&65535,f.b_Uint16[c.bytePos+16>>1]=c.w&65535,f.b_Uint16[c.bytePos+18>>1]=c.h&65535,f.b[c.bytePos+20]=1,f.b[c.bytePos+21]=1,f.b_Uint16[c.bytePos+24>>1]=c.x&65535,f.b_Uint16[c.bytePos+26>>1]=c.y&65535,f.b_Uint16[c.bytePos+28>>1]=c.w&65535,f.b_Uint16[c.bytePos+30>>1]=c.h&65535,f.b[c.bytePos+32]=0,f.b[c.bytePos+33]=1,f.b_Uint16[c.bytePos+36>>1]=
c.x&65535,f.b_Uint16[c.bytePos+38>>1]=c.y&65535,f.b_Uint16[c.bytePos+40>>1]=c.w&65535,f.b_Uint16[c.bytePos+42>>1]=c.h&65535,f.b[c.bytePos+44]=1,f.b[c.bytePos+45]=0,f.b_Uint16[c.bytePos+48>>1]=c.x&65535,f.b_Uint16[c.bytePos+50>>1]=c.y&65535,f.b_Uint16[c.bytePos+52>>1]=c.w&65535,f.b_Uint16[c.bytePos+54>>1]=c.h&65535,f.b[c.bytePos+56]=0,f.b[c.bytePos+57]=0,f.b_Uint16[c.bytePos+60>>1]=c.x&65535,f.b_Uint16[c.bytePos+62>>1]=c.y&65535,f.b_Uint16[c.bytePos+64>>1]=c.w&65535,f.b_Uint16[c.bytePos+66>>1]=c.h&
65535,f.b[c.bytePos+68]=0,f.b[c.bytePos+69]=0}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);f=this._bytes;a=new Uint8Array(f.b.bufferValue,0);this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,a);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},updateElement:function(a){if(V.isINSTANCED){var b=this._bytes;b.b_Uint16[a.bytePos>>1]=a.x&65535;b.b_Uint16[a.bytePos+2>>1]=a.y&65535;b.b_Uint16[a.bytePos+4>>1]=a.w&65535;b.b_Uint16[a.bytePos+6>>1]=a.h&65535}else b=this._bytes,b.b_Uint16[a.bytePos>>
1]=a.x&65535,b.b_Uint16[a.bytePos+2>>1]=a.y&65535,b.b_Uint16[a.bytePos+4>>1]=a.w&65535,b.b_Uint16[a.bytePos+6>>1]=a.h&65535,b.b[a.bytePos+8]=1,b.b[a.bytePos+9]=1,b.b_Uint16[a.bytePos+12>>1]=a.x&65535,b.b_Uint16[a.bytePos+14>>1]=a.y&65535,b.b_Uint16[a.bytePos+16>>1]=a.w&65535,b.b_Uint16[a.bytePos+18>>1]=a.h&65535,b.b[a.bytePos+20]=1,b.b[a.bytePos+21]=1,b.b_Uint16[a.bytePos+24>>1]=a.x&65535,b.b_Uint16[a.bytePos+26>>1]=a.y&65535,b.b_Uint16[a.bytePos+28>>1]=a.w&65535,b.b_Uint16[a.bytePos+30>>1]=a.h&65535,
b.b[a.bytePos+32]=0,b.b[a.bytePos+33]=1,b.b_Uint16[a.bytePos+36>>1]=a.x&65535,b.b_Uint16[a.bytePos+38>>1]=a.y&65535,b.b_Uint16[a.bytePos+40>>1]=a.w&65535,b.b_Uint16[a.bytePos+42>>1]=a.h&65535,b.b[a.bytePos+44]=1,b.b[a.bytePos+45]=0,b.b_Uint16[a.bytePos+48>>1]=a.x&65535,b.b_Uint16[a.bytePos+50>>1]=a.y&65535,b.b_Uint16[a.bytePos+52>>1]=a.w&65535,b.b_Uint16[a.bytePos+54>>1]=a.h&65535,b.b[a.bytePos+56]=0,b.b[a.bytePos+57]=0,b.b_Uint16[a.bytePos+60>>1]=a.x&65535,b.b_Uint16[a.bytePos+62>>1]=a.y&65535,b.b_Uint16[a.bytePos+
64>>1]=a.w&65535,b.b_Uint16[a.bytePos+66>>1]=a.h&65535,b.b[a.bytePos+68]=0,b.b[a.bytePos+69]=0;if(-1==a.bytePos)throw D.thrown("Error, Element is not added to Buffer");null!=this._gl&&(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.bufferSubData(b.ARRAY_BUFFER,a.bytePos,a.bufferPointer),b.bindBuffer(b.ARRAY_BUFFER,null))},addElement:function(a){if(-1==a.bytePos){if(this._maxElements==this._elements.length){if(0==this._growSize)throw D.thrown("Error: Can't add new Element. Buffer is full and automatic growing Buffersize is disabled.");
var b=this._maxElements+this._growSize,c=new Wb(new ArrayBuffer(this._elemBuffSize*b));c.blit(0,this._bytes,0,this._elemBuffSize*this._maxElements);this._bytes=c;var f=Array(b);b=f;c=0;for(var d=this._maxElements;c<d;){var g=c++,e=this._elements[g];f=this._bytes;var k=e.bytePos,h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);e.bufferPointer=f;b[g]=e}this._elements=b;null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),
this._glBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer),f=this._bytes,f=new Uint8Array(f.b.bufferValue,0),this._gl.bufferData(this._gl.ARRAY_BUFFER,f,this._gl.STREAM_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),V.isVAO&&(this._gl.bindVertexArray(this._glVAO),V.isINSTANCED?(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,
c),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,8,0),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,8,4),b.vertexAttribDivisor(2,1)):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,12,0),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,12,4),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,12,8)),this._gl.bindVertexArray(null)))}a.bytePos=
this._maxElements*this._elemBuffSize;f=this._bytes;k=a.bytePos;h=this._elemBuffSize;null==h&&(h=0);null==k&&(k=0);f=0<h?new Uint8Array(f.b.bufferValue,k,h):new Uint8Array(f.b.bufferValue,k);a.bufferPointer=f;this._elements[this._maxElements++]=a;this.updateElement(a)}else throw D.thrown("Error: Element is already inside a Buffer");},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t\n\t\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;\n\t\t\t\t\n\t\t\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::aPos::end::;\npos = pos + aPosition * size;\n\t\t\n\n\t\t\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\t\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- 0.0,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t\n\t\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\t\n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return[]},getColorIdentifiers:function(){return[]},getCustomIdentifiers:function(){return[]},getCustomVaryings:function(){return[]},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return Ca.DEFAULT_FORMULA_VARS},getFormulas:function(){return Ca.FORMULAS},getAttributes:function(){return Ca.ATTRIBUTES},getFormulaNames:function(){return Ca.FORMULA_NAMES},getFormulaVaryings:function(){return""==Ca.FORMULA_VARYINGS?[]:Ca.FORMULA_VARYINGS.split(",")},
getFormulaConstants:function(){return""==Ca.FORMULA_CONSTANTS?[]:Ca.FORMULA_CONSTANTS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!1},hasZindex:function(){return!1},hasPicking:function(){return!1},hasTime:function(){return!1},needFragmentPrecision:function(){return!1},bindAttribLocations:function(a,b){a.bindAttribLocation(b,1,"aPos");a.bindAttribLocation(b,2,"aSize");a.bindAttribLocation(b,0,"aPosition")},render:function(a,b,c){a=this._maxElements;V.isINSTANCED?(V.isVAO?
this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,8,0),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,8,4),b.vertexAttribDivisor(2,1)),this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,0,6,a)):(V.isVAO?this._gl.bindVertexArray(this._glVAO):
(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,12,0),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,12,4),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,12,8)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,6*a));V.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(1),b.disableVertexAttribArray(2));this._gl.bindBuffer(this._gl.ARRAY_BUFFER,
null)},__class__:le};var zd=function(a,b,c,f,d){null==d&&(d=0);this.renderFramebufferSkipFrames=this.renderFramebufferFrame=0;this._renderFramebufferEnabled=!1;this.renderFramebufferEnabled=!0;this.framebufferTextureSlot=0;this.peoteView=this.gl=this.fbTexture=null;this.alpha=1;this.red=this.green=this.blue=0;this.backgroundAlpha=this.backgroundDepth=this.backgroundEnabled=!1;this.isVisible=!0;this.xz=this.yz=this.zoom=this.xZoom=this.yZoom=1;this.width=this.height=this.x=this.y=this.xOffset=this.yOffset=
0;if(V.isUBO){var g=this.uniformBuffer,e=this.gl;null!=e&&(g.uniformBytes.b_UFloat32[0]=a+this.xOffset,e.bindBuffer(e.UNIFORM_BUFFER,g.uniformBuffer),e.bufferSubData(e.UNIFORM_BUFFER,0,g.xOffestBufferPointer),e.bindBuffer(e.UNIFORM_BUFFER,null))}this.x=a;V.isUBO&&(g=this.uniformBuffer,e=this.gl,null!=e&&(g.uniformBytes.b_UFloat32[1]=b+this.yOffset,e.bindBuffer(e.UNIFORM_BUFFER,g.uniformBuffer),e.bufferSubData(e.UNIFORM_BUFFER,4,g.yOffestBufferPointer),e.bindBuffer(e.UNIFORM_BUFFER,null)));this.y=
b;this.width=c;this.height=f;this.red=(d>>24&255)/255;this.green=(d>>16&255)/255;this.blue=(d>>8&255)/255;this.alpha=(d&255)/255;this.backgroundEnabled=0<this.alpha;this.backgroundAlpha=1>this.alpha;this.programList=new nf(new Bb);V.isUBO&&(this.uniformBuffer=new me,this.uniformBufferFB=new me,this.uniformBufferViewFB=new ne)};l["peote.view.Display"]=zd;zd.__name__="peote.view.Display";zd.prototype={addToPeoteView:function(a,b,c){null==c&&(c=!1);this.peoteView!=a&&(this.peoteView=a,this.setNewGLContext(a.gl));
a.displayList.add(this,b,c)},removeFromPeoteView:function(a){if(this.peoteView!=a)throw D.thrown("Error, display is not inside peoteView");a.framebufferDisplayList.has(this)||(this.peoteView=null);a.displayList.remove(this)},addToPeoteViewFramebuffer:function(a,b,c){null==c&&(c=!1);this.peoteView!=a&&(this.peoteView=a,this.setNewGLContext(a.gl));a.framebufferDisplayList.add(this,b,c)},setNewGLContext:function(a){if(null!=a&&a!=this.gl){null!=this.gl&&V.isUBO&&(this.uniformBuffer.deleteGLBuffer(this.gl),
this.uniformBufferFB.deleteGLBuffer(this.gl),this.uniformBufferViewFB.deleteGLBuffer(this.gl));this.gl=a;V.isUBO&&(this.uniformBuffer.createGLBuffer(this.gl,this.x+this.xOffset,this.y+this.yOffset,this.xz,this.yz),this.uniformBufferFB.createGLBuffer(this.gl,this.xOffset,this.yOffset-this.height,this.xz,this.yz),this.uniformBufferViewFB.createGLBuffer(this.gl,this.width,-this.height,0,0,1,1));for(var b=this.programList.first;null!=b;){var c=b.value;b=b.next;if(null!=a&&a!=c.gl){for(var f=0,d=c.displays;f<
d.length;){var g=d[f];++f;if(null!=g.gl&&g.gl!=a)throw D.thrown("Error, program can not used inside different gl-contexts");}null!=c.gl&&(c.gl.deleteShader(c.glVertexShader),c.gl.deleteShader(c.glFragmentShader),c.gl.deleteProgram(c.glProgram),c.buffer.hasPicking()&&(c.gl.deleteShader(c.glVertexShaderPicking),c.gl.deleteShader(c.glFragmentShaderPicking),c.gl.deleteProgram(c.glProgramPicking)));c.gl=a;V.isES3&&(c.glShaderConfig.isES3=!0,c.glShaderConfig.IN="in",c.glShaderConfig.VARIN="in",c.glShaderConfig.VAROUT=
"out");V.isUBO&&(c.glShaderConfig.isUBO=!0);V.isINSTANCED&&(c.glShaderConfig.isINSTANCED=!0);c.glShaderConfig.FRAGMENT_EXTENSIONS=[];null!=c.gl.getExtension("OES_standard_derivatives")&&c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"GL_OES_standard_derivatives"});null!=c.gl.getExtension("EXT_color_buffer_float")?c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"EXT_color_buffer_float"}):null!=c.gl.getExtension("OES_texture_float")&&c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"OES_texture_float"});
c.buffer.setNewGLContext(c.gl);c.createProg();c.buffer.hasPicking()&&c.createProg(!0);f=0;for(d=c.activeTextures;f<d.length;){g=d[f];++f;var e=c.gl;if(null!=e&&e!=g.gl){for(var k=0,h=g.programs;k<h.length;){var r=h[k];++k;if(null!=r.gl&&r.gl!=e)throw D.thrown("Error, texture can not used inside different gl-contexts");}r=0;for(k=g.displays;r<k.length;)if(h=k[r],++r,null!=h.gl&&h.gl!=e)throw D.thrown("Error, texture can not used inside different gl-contexts");null!=g.gl&&(g.gl.deleteTexture(g.glTexture),
g.glTexture=null,0==g.displays.length&&null!=g.framebuffer&&(g.gl.deleteFramebuffer(g.framebuffer),g.framebuffer=null,null!=g.glDepthBuffer&&g.gl.deleteRenderbuffer(g.glDepthBuffer),g.glDepthBuffer=null));g.gl=e;if(g.width>g.gl.getParameter(g.gl.MAX_TEXTURE_SIZE)||g.height>g.gl.getParameter(g.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");g.glTexture=hc.createEmptyTexture(g.gl,g.width,g.height,g.colorChannels,g.createMipmaps,g.magFilter,g.minFilter,
g.useFloat);if(0<g.displays.length&&null==g.framebuffer){g.glDepthBuffer=g.gl.createRenderbuffer();e=g.gl;r=g.glTexture;k=g.glDepthBuffer;h=g.width;var t=g.height,p=e.createFramebuffer();e.bindRenderbuffer(e.RENDERBUFFER,k);sa.clearGlErrorQueue(e);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT24,h,t);sa.getLastGlError(e)==e.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),
e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,h,t));e.bindFramebuffer(e.FRAMEBUFFER,p);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,k);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);if(e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);g.framebuffer=p;g.updated=!0}for(e=g.images.keys();e.hasNext();)r=
e.next(),g.bufferImage(r,g.images.h[r.__id__])}}}}if(null!=this.fbTexture&&(b=this.fbTexture,null!=a&&a!=b.gl)){f=0;for(d=b.programs;f<d.length;)if(r=d[f],++f,null!=r.gl&&r.gl!=a)throw D.thrown("Error, texture can not used inside different gl-contexts");f=0;for(d=b.displays;f<d.length;)if(g=d[f],++f,null!=g.gl&&g.gl!=a)throw D.thrown("Error, texture can not used inside different gl-contexts");null!=b.gl&&(b.gl.deleteTexture(b.glTexture),b.glTexture=null,0==b.displays.length&&null!=b.framebuffer&&
(b.gl.deleteFramebuffer(b.framebuffer),b.framebuffer=null,null!=b.glDepthBuffer&&b.gl.deleteRenderbuffer(b.glDepthBuffer),b.glDepthBuffer=null));b.gl=a;if(b.width>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE)||b.height>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");b.glTexture=hc.createEmptyTexture(b.gl,b.width,b.height,b.colorChannels,b.createMipmaps,b.magFilter,b.minFilter,b.useFloat);if(0<b.displays.length&&null==b.framebuffer){b.glDepthBuffer=
b.gl.createRenderbuffer();e=b.gl;r=b.glTexture;k=b.glDepthBuffer;h=b.width;t=b.height;p=e.createFramebuffer();e.bindRenderbuffer(e.RENDERBUFFER,k);sa.clearGlErrorQueue(e);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT24,h,t);sa.getLastGlError(e)==e.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,
h,t));e.bindFramebuffer(e.FRAMEBUFFER,p);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,k);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);if(e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);b.framebuffer=p;b.updated=!0}for(e=b.images.keys();e.hasNext();)r=e.next(),b.bufferImage(r,b.images.h[r.__id__])}}},
addProgram:function(a,b,c){null==c&&(c=!1);a.addToDisplay(this,b,c)},setFramebuffer:function(a,b,c){if(this.fbTexture==a)throw D.thrown("Error, texture is already in use as Framebuffer for Display");if(b>=a.imageSlots)throw D.thrown("Error, maximum texture slot of framebufferTexture is"+(a.imageSlots-1));if(null==c){if(null==this.gl)throw D.thrown("Error, if the display is not added it needs the gl-context of a peoteView to set a framebuffer texture");}else this.peoteView!=c&&(this.peoteView=c,this.setNewGLContext(c.gl));
null!=b&&(this.framebufferTextureSlot=b);if(null!=this.fbTexture){b=this.fbTexture;if(!F.remove(b.displays,this))throw D.thrown("Error, this texture (Framebuffer) is not used by display anymore");0==b.displays.length&&null!=b.framebuffer&&(b.gl.deleteFramebuffer(b.framebuffer),b.framebuffer=null,null!=b.glDepthBuffer&&b.gl.deleteRenderbuffer(b.glDepthBuffer),b.glDepthBuffer=null)}b=this.fbTexture=a;if(0<=b.displays.indexOf(this))throw D.thrown("Error, texture is already used by display");a=this.gl;
if(null!=a&&a!=b.gl){c=0;for(var f=b.programs;c<f.length;){var d=f[c];++c;if(null!=d.gl&&d.gl!=a)throw D.thrown("Error, texture can not used inside different gl-contexts");}c=0;for(f=b.displays;c<f.length;)if(d=f[c],++c,null!=d.gl&&d.gl!=a)throw D.thrown("Error, texture can not used inside different gl-contexts");null!=b.gl&&(b.gl.deleteTexture(b.glTexture),b.glTexture=null,0==b.displays.length&&null!=b.framebuffer&&(b.gl.deleteFramebuffer(b.framebuffer),b.framebuffer=null,null!=b.glDepthBuffer&&
b.gl.deleteRenderbuffer(b.glDepthBuffer),b.glDepthBuffer=null));b.gl=a;if(b.width>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE)||b.height>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");b.glTexture=hc.createEmptyTexture(b.gl,b.width,b.height,b.colorChannels,b.createMipmaps,b.magFilter,b.minFilter,b.useFloat);if(0<b.displays.length&&null==b.framebuffer){b.glDepthBuffer=b.gl.createRenderbuffer();c=b.gl;a=b.glTexture;f=b.glDepthBuffer;d=b.width;
var g=b.height,e=c.createFramebuffer();c.bindRenderbuffer(c.RENDERBUFFER,f);sa.clearGlErrorQueue(c);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT24,d,g);sa.getLastGlError(c)==c.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,d,g));c.bindFramebuffer(c.FRAMEBUFFER,e);c.framebufferRenderbuffer(c.FRAMEBUFFER,
c.DEPTH_ATTACHMENT,c.RENDERBUFFER,f);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0);if(c.checkFramebufferStatus(c.FRAMEBUFFER)!=c.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");c.bindFramebuffer(c.FRAMEBUFFER,null);c.bindRenderbuffer(c.RENDERBUFFER,null);b.framebuffer=e;b.updated=!0}for(a=b.images.keys();a.hasNext();)c=a.next(),b.bufferImage(c,b.images.h[c.__id__])}b.displays.push(this);if(null!=b.gl&&0<b.displays.length&&null==b.framebuffer){b.glDepthBuffer=
b.gl.createRenderbuffer();c=b.gl;a=b.glTexture;f=b.glDepthBuffer;d=b.width;g=b.height;e=c.createFramebuffer();c.bindRenderbuffer(c.RENDERBUFFER,f);sa.clearGlErrorQueue(c);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT24,d,g);sa.getLastGlError(c)==c.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
d,g));c.bindFramebuffer(c.FRAMEBUFFER,e);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,f);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0);if(c.checkFramebufferStatus(c.FRAMEBUFFER)!=c.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");c.bindFramebuffer(c.FRAMEBUFFER,null);c.bindRenderbuffer(c.RENDERBUFFER,null);b.framebuffer=e;b.updated=!0}this.renderFramebufferEnabled&&(this._renderFramebufferEnabled=!0)},__class__:zd};var Wf=
{fromRenderContext:function(a){if(null!=a.webgl2)return ka.trace("WEBGL2 detected.",{fileName:"peote/view/PeoteGL.hx",lineNumber:86,className:"peote.view._PeoteGL.PeoteGL_Impl_",methodName:"fromRenderContext"}),V.isUBO=!0,V.isINSTANCED=!0,V.isVAO=!0,V.isES3=!0,a.webgl2;if(null!=a.webgl)return ka.trace("WEBGL1 detected.",{fileName:"peote/view/PeoteGL.hx",lineNumber:91,className:"peote.view._PeoteGL.PeoteGL_Impl_",methodName:"fromRenderContext"}),a.webgl;window.alert("Error: missing webgl context");
return null}},V=function(){};l["peote.view.Version"]=V;V.__name__="peote.view.Version";var wb=function(){};l["peote.view.Precision"]=wb;wb.__name__="peote.view.Precision";var ve=function(a,b,c){null==c&&(c=!0);null==b&&(b=255);this.speed=1;this.startTime=this.stopTime=0;this.isRun=!1;this.xOffset=this.yOffset=0;this.xz=this.yz=1;this.maskState=0;this.glStateAlpha=this.glStateDepth=!1;this.colorState=!0;this.alpha=1;this.red=this.green=this.blue=0;this.gl=Wf.fromRenderContext(a.context);this.width=
a.__width;this.height=a.__height;this.red=(b>>24&255)/255;this.green=(b>>16&255)/255;this.blue=(b>>8&255)/255;this.alpha=(b&255)/255;V.isUBO&&(this.uniformBuffer=new ne,this.uniformBuffer.createGLBuffer(this.gl,this.width,this.height,this.xOffset,this.yOffset,this.xz,this.yz));this.maxTextureImageUnits=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);this.glStateTexture=b=Array(this.maxTextureImageUnits);b=this.gl;var f=b.VERTEX_SHADER,d=wb.VertexFloat,g=b.getShaderPrecisionFormat(f,b.HIGH_FLOAT);
null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);f=b.VERTEX_SHADER;d=wb.VertexInt;g=b.getShaderPrecisionFormat(f,b.HIGH_FLOAT);null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);f=b.VERTEX_SHADER;d=wb.VertexSampler;g=b.getShaderPrecisionFormat(f,
b.HIGH_FLOAT);null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);f=b.FRAGMENT_SHADER;d=wb.FragmentFloat;g=b.getShaderPrecisionFormat(f,b.HIGH_FLOAT);null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);f=b.FRAGMENT_SHADER;d=wb.FragmentInt;g=
b.getShaderPrecisionFormat(f,b.HIGH_FLOAT);null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);f=b.FRAGMENT_SHADER;d=wb.FragmentSampler;g=b.getShaderPrecisionFormat(f,b.HIGH_FLOAT);null!=g&&(d.high=g.precision);g=b.getShaderPrecisionFormat(f,b.MEDIUM_FLOAT);null!=g&&(d.medium=g.precision);g=b.getShaderPrecisionFormat(f,b.LOW_FLOAT);null!=g&&(d.low=g.precision);V.isINSTANCED?
(this.pickInt32=b=new Int32Array(4),this.pickTexture=hc.createPickingTexture(this.gl,!0)):(this.pickUInt8=b=new Uint8Array(4),this.pickTexture=hc.createPickingTexture(this.gl));this.pickDepthBuffer=this.gl.createRenderbuffer();b=this.gl;f=this.pickTexture;d=this.pickDepthBuffer;g=b.createFramebuffer();b.bindRenderbuffer(b.RENDERBUFFER,d);sa.clearGlErrorQueue(b);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT24,1,1);sa.getLastGlError(b)==b.INVALID_ENUM&&(ka.trace("switching to DEPTH_COMPONENT16 for framebuffer",
{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,1,1));b.bindFramebuffer(b.FRAMEBUFFER,g);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,d);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0);if(b.checkFramebufferStatus(b.FRAMEBUFFER)!=b.FRAMEBUFFER_COMPLETE)throw D.thrown("Error: Framebuffer not complete!");b.bindFramebuffer(b.FRAMEBUFFER,
null);b.bindRenderbuffer(b.RENDERBUFFER,null);this.pickFB=g;this.background=new of(this.gl);this.displayList=new oe(new Bb);this.framebufferDisplayList=new oe(new Bb);c&&(a.onRender.add(u(this,this.render)),a.onResize.add(u(this,this.resize)))};l["peote.view.PeoteView"]=ve;ve.__name__="peote.view.PeoteView";ve.prototype={isTextureStateChange:function(a,b){return b.updated?(b.updated=!1,this.glStateTexture=Array(this.maxTextureImageUnits),this.glStateTexture[a]=b.glTexture,!0):this.glStateTexture[a]!=
b.glTexture?(this.glStateTexture[a]=b.glTexture,!0):!1},start:function(){if(!this.isRun){var a=this.stopTime;this.startTime=this.stopTime=(new Date).getTime()/1E3-a;this.isRun=!0}},addDisplay:function(a,b,c){null==c&&(c=!1);a.addToPeoteView(this,b,c)},removeDisplay:function(a){a.removeFromPeoteView(this)},addFramebufferDisplay:function(a,b,c){null==c&&(c=!1);a.addToPeoteViewFramebuffer(this,b,c)},resize:function(a,b){this.width=a;this.height=b;if(V.isUBO){var c=this.uniformBuffer,f=this.gl;c.uniformBytes.b_UFloat32[0]=
a;c.uniformBytes.b_UFloat32[1]=b;f.bindBuffer(f.UNIFORM_BUFFER,c.uniformBuffer);f.bufferSubData(f.UNIFORM_BUFFER,0,c.resolutionBufferPointer);f.bindBuffer(f.UNIFORM_BUFFER,null)}},renderToTexture:function(a,b){if(null!=a.fbTexture){b=null!=b?b:a.framebufferTextureSlot;null==b&&(b=a.framebufferTextureSlot);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.fbTexture.framebuffer);this.gl.viewport(b%a.fbTexture.slotsX*a.fbTexture.slotWidth,a.fbTexture.slotHeight*Math.floor(b/a.fbTexture.slotsX),a.fbTexture.slotWidth,
a.fbTexture.slotHeight);this.gl.scissor(b%a.fbTexture.slotsX*a.fbTexture.slotWidth,a.fbTexture.slotHeight*Math.floor(b/a.fbTexture.slotsX),a.fbTexture.slotWidth,a.fbTexture.slotHeight);this.gl.enable(this.gl.SCISSOR_TEST);this.gl.clearColor(0,0,0,0);a.fbTexture.clearOnRenderInto?this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT):this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT);this.gl.stencilMask(255);this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);
this.gl.depthFunc(this.gl.LEQUAL);if(a.backgroundEnabled){1!=this.colorState&&(this.colorState=!0,this.gl.colorMask(!0,!0,!0,!0));var c=a.backgroundAlpha;c&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));0!=this.maskState&&(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=0);this.background.render(a.red,a.green,a.blue,a.alpha)}for(a.programListItem=a.programList.first;null!=a.programListItem;){b=
a.programListItem.value;b.gl.useProgram(b.glProgram);for(b.textureListItem=b.textureList.first;null!=b.textureListItem;)this.isTextureStateChange(b.textureListItem.value.unit,b.textureListItem.value.texture)&&(b.gl.activeTexture(b.gl.TEXTURE0+b.textureListItem.value.unit),b.gl.bindTexture(b.gl.TEXTURE_2D,b.textureListItem.value.texture.glTexture)),b.gl.uniform1i(b.textureListItem.value.uniformLoc,b.textureListItem.value.unit),b.textureListItem=b.textureListItem.next;V.isUBO?(b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,
0,a.uniformBufferViewFB.uniformBuffer),b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,1,a.uniformBufferFB.uniformBuffer)):(b.gl.uniform2f(b.uRESOLUTION,a.width,-a.height),b.gl.uniform2f(b.uZOOM,a.xz,a.yz),b.gl.uniform2f(b.uOFFSET,(a.xOffset+this.xOffset)/a.xz,(a.yOffset+this.yOffset-a.height)/a.yz));b.gl.uniform1f(b.uTIME,(this.isRun?(new Date).getTime()/1E3-this.startTime:this.stopTime)*this.speed);c=0;for(var f=b.uniformFloats.length;c<f;){var d=c++;b.gl.uniform1f(b.uniformFloatLocations[d],b.uniformFloats[d].value)}c=
b.colorEnabled;c!=this.colorState&&(this.colorState=c,this.gl.colorMask(c,c,c,c));(c=b.zIndexEnabled)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST));(c=b.alphaEnabled)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));c=b.mask;f=b.clearMask;c!=this.maskState&&(0==c?(this.gl.disable(this.gl.STENCIL_TEST),
this.maskState=c):2==c?(f&&this.gl.clear(this.gl.STENCIL_BUFFER_BIT),0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilFunc(this.gl.ALWAYS,1,255),this.gl.stencilOp(this.gl.REPLACE,this.gl.REPLACE,this.gl.REPLACE),this.maskState=c):(0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,1,255)),this.maskState=c);b.buffer.render(this,a,b);b.gl.useProgram(null);a.programListItem=a.programListItem.next}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,
null);a.fbTexture.createMipmaps&&(this.gl.bindTexture(this.gl.TEXTURE_2D,a.fbTexture.glTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a.fbTexture.updated=!0)}},render:function(a){for(this.displayListItem=this.framebufferDisplayList.first;null!=this.displayListItem;){if(this.displayListItem.value._renderFramebufferEnabled)if(this.displayListItem.value.renderFramebufferFrame==this.displayListItem.value.renderFramebufferSkipFrames){var b=this.displayListItem.value;
a=null;null==a&&(a=b.framebufferTextureSlot);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b.fbTexture.framebuffer);this.gl.viewport(a%b.fbTexture.slotsX*b.fbTexture.slotWidth,b.fbTexture.slotHeight*Math.floor(a/b.fbTexture.slotsX),b.fbTexture.slotWidth,b.fbTexture.slotHeight);this.gl.scissor(a%b.fbTexture.slotsX*b.fbTexture.slotWidth,b.fbTexture.slotHeight*Math.floor(a/b.fbTexture.slotsX),b.fbTexture.slotWidth,b.fbTexture.slotHeight);this.gl.enable(this.gl.SCISSOR_TEST);this.gl.clearColor(0,0,0,0);
b.fbTexture.clearOnRenderInto?this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT):this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT);this.gl.stencilMask(255);this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.depthFunc(this.gl.LEQUAL);if(b.backgroundEnabled){1!=this.colorState&&(this.colorState=!0,this.gl.colorMask(!0,!0,!0,!0));var c=b.backgroundAlpha;c&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):
!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));0!=this.maskState&&(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=this.maskState=0);this.background.render(b.red,b.green,b.blue,b.alpha)}for(b.programListItem=b.programList.first;null!=b.programListItem;){a=b.programListItem.value;a.gl.useProgram(a.glProgram);for(a.textureListItem=a.textureList.first;null!=a.textureListItem;)this.isTextureStateChange(a.textureListItem.value.unit,a.textureListItem.value.texture)&&(a.gl.activeTexture(a.gl.TEXTURE0+
a.textureListItem.value.unit),a.gl.bindTexture(a.gl.TEXTURE_2D,a.textureListItem.value.texture.glTexture)),a.gl.uniform1i(a.textureListItem.value.uniformLoc,a.textureListItem.value.unit),a.textureListItem=a.textureListItem.next;V.isUBO?(a.gl.bindBufferBase(a.gl.UNIFORM_BUFFER,0,b.uniformBufferViewFB.uniformBuffer),a.gl.bindBufferBase(a.gl.UNIFORM_BUFFER,1,b.uniformBufferFB.uniformBuffer)):(a.gl.uniform2f(a.uRESOLUTION,b.width,-b.height),a.gl.uniform2f(a.uZOOM,b.xz,b.yz),a.gl.uniform2f(a.uOFFSET,(b.xOffset+
this.xOffset)/b.xz,(b.yOffset+this.yOffset-b.height)/b.yz));a.gl.uniform1f(a.uTIME,(this.isRun?(new Date).getTime()/1E3-this.startTime:this.stopTime)*this.speed);c=0;for(var f=a.uniformFloats.length;c<f;){var d=c++;a.gl.uniform1f(a.uniformFloatLocations[d],a.uniformFloats[d].value)}c=a.colorEnabled;c!=this.colorState&&(this.colorState=c,this.gl.colorMask(c,c,c,c));(c=a.zIndexEnabled)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=
!1,this.gl.disable(this.gl.DEPTH_TEST));(c=a.alphaEnabled)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));c=a.mask;f=a.clearMask;c!=this.maskState&&(0==c?(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=c):2==c?(f&&this.gl.clear(this.gl.STENCIL_BUFFER_BIT),0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilFunc(this.gl.ALWAYS,1,255),this.gl.stencilOp(this.gl.REPLACE,this.gl.REPLACE,
this.gl.REPLACE),this.maskState=c):(0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,1,255)),this.maskState=c);a.buffer.render(this,b,a);a.gl.useProgram(null);b.programListItem=b.programListItem.next}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);b.fbTexture.createMipmaps&&(this.gl.bindTexture(this.gl.TEXTURE_2D,b.fbTexture.glTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,
null),b.fbTexture.updated=!0);this.displayListItem.value.renderFramebufferFrame=0}else this.displayListItem.value.renderFramebufferFrame++;this.displayListItem=this.displayListItem.next}b=this.width;c=this.height;this.gl.viewport(0,0,b,c);this.gl.scissor(0,0,b,c);this.gl.enable(this.gl.SCISSOR_TEST);this.gl.clearColor(this.red,this.green,this.blue,this.alpha);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT);this.gl.stencilMask(255);this.gl.blendFunc(this.gl.SRC_ALPHA,
this.gl.ONE_MINUS_SRC_ALPHA);this.gl.depthFunc(this.gl.LEQUAL);for(this.displayListItem=this.displayList.first;null!=this.displayListItem;){a=this.displayListItem.value;if(a.isVisible){b=this.width;c=this.height;var g=this.xz,e=this.yz;f=Math.floor((a.x+this.xOffset)*g);d=Math.floor((a.y+this.yOffset)*e);g=Math.floor(a.width*g);e=Math.floor(a.height*e);0>f&&(g+=f);f=Math.max(0,Math.min(b,f))|0;g=Math.max(0,Math.min(b-f,g))|0;0>d&&(e+=d);d=Math.max(0,Math.min(c,d))|0;e=Math.max(0,Math.min(c-d,e))|
0;this.gl.scissor(f,c-e-d,g,e);a.backgroundEnabled&&(1!=this.colorState&&(this.colorState=!0,this.gl.colorMask(!0,!0,!0,!0)),(c=a.backgroundDepth)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST)),(c=a.backgroundAlpha)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND)),0!=this.maskState&&(this.gl.disable(this.gl.STENCIL_TEST),
this.maskState=this.maskState=0),this.background.render(a.red,a.green,a.blue,a.alpha));for(a.programListItem=a.programList.first;null!=a.programListItem;){b=a.programListItem.value;if(b.isVisible){b.gl.useProgram(b.glProgram);for(b.textureListItem=b.textureList.first;null!=b.textureListItem;)this.isTextureStateChange(b.textureListItem.value.unit,b.textureListItem.value.texture)&&(b.gl.activeTexture(b.gl.TEXTURE0+b.textureListItem.value.unit),b.gl.bindTexture(b.gl.TEXTURE_2D,b.textureListItem.value.texture.glTexture)),
b.gl.uniform1i(b.textureListItem.value.uniformLoc,b.textureListItem.value.unit),b.textureListItem=b.textureListItem.next;V.isUBO?(b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,0,this.uniformBuffer.uniformBuffer),b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,1,a.uniformBuffer.uniformBuffer)):(b.gl.uniform2f(b.uRESOLUTION,this.width,this.height),b.gl.uniform2f(b.uZOOM,this.xz*a.xz,this.yz*a.yz),b.gl.uniform2f(b.uOFFSET,(a.x+a.xOffset+this.xOffset)/a.xz,(a.y+a.yOffset+this.yOffset)/a.yz));b.gl.uniform1f(b.uTIME,
(this.isRun?(new Date).getTime()/1E3-this.startTime:this.stopTime)*this.speed);c=0;for(f=b.uniformFloats.length;c<f;)d=c++,b.gl.uniform1f(b.uniformFloatLocations[d],b.uniformFloats[d].value);c=b.colorEnabled;c!=this.colorState&&(this.colorState=c,this.gl.colorMask(c,c,c,c));(c=b.zIndexEnabled)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST));(c=b.alphaEnabled)&&!this.glStateAlpha?(this.glStateAlpha=
!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));c=b.mask;f=b.clearMask;c!=this.maskState&&(0==c?(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=c):2==c?(f&&this.gl.clear(this.gl.STENCIL_BUFFER_BIT),0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilFunc(this.gl.ALWAYS,1,255),this.gl.stencilOp(this.gl.REPLACE,this.gl.REPLACE,this.gl.REPLACE),this.maskState=c):(0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),
this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,1,255)),this.maskState=c);b.buffer.render(this,a,b);b.gl.useProgram(null)}a.programListItem=a.programListItem.next}}this.displayListItem=this.displayListItem.next}},__class__:ve};var ie=function(a,b,c){this.unit=a;this.texture=b;this.uniformLoc=c};l["peote.view.ActiveTexture"]=ie;ie.__name__="peote.view.ActiveTexture";ie.prototype={__class__:ie};var cd=function(a,b,c,f,d,g,e,k,h){null==h&&(h=16384);null==k&&
(k=!1);null==e&&(e=0);null==g&&(g=0);null==d&&(d=!1);null==f&&(f=4);null==c&&(c=1);this.displays=[];this.programs=[];this.useFloat=this.updated=!1;this.magFilter=this.minFilter=0;this.createMipmaps=!1;this.images=new Bb;this.imageSlots=this.freeSlots=this.slotsX=this.slotsY=this.tilesX=this.tilesY=1;this.width=this.height=0;this.colorChannels=4;this.clearOnRenderInto=!0;this.gl=this.glTexture=this.framebuffer=this.glDepthBuffer=null;this.slotWidth=a;this.slotHeight=b;this.imageSlots=this.freeSlots=
c;this.colorChannels=f;this.createMipmaps=d;this.magFilter=e;this.minFilter=g;this.useFloat=k;a=hc.optimalTextureSize(c,a,b,h);this.width=a.width;this.height=a.height;this.slotsX=a.slotsX;this.slotsY=a.slotsY};l["peote.view.Texture"]=cd;cd.__name__="peote.view.Texture";cd.prototype={setImage:function(a,b,c,f){null==b&&(b=0);if(null!=this.images.h.__keys__[a.__id__])throw D.thrown("Error, image is already inside texture inside slot "+this.images.h[a.__id__].imageSlot);null!=c&&(this.tilesX=c);null!=
f&&(this.tilesY=f);this.images.set(a,{imageSlot:b});this.freeSlots--;if(null!=this.gl){if(null==this.glTexture){if(this.width>this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)||this.height>this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE))throw D.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");this.glTexture=hc.createEmptyTexture(this.gl,this.width,this.height,this.colorChannels,this.createMipmaps,this.magFilter,this.minFilter,this.useFloat)}this.bufferImage(a,{imageSlot:b})}},bufferImage:function(a,
b){var c=this.gl,f=b.imageSlot%this.slotsX*this.slotWidth;b=this.slotHeight*Math.floor(b.imageSlot/this.slotsX);var d=a.width,g=a.height,e=this.createMipmaps,k=this.useFloat;null==k&&(k=!1);null==e&&(e=!1);c.bindTexture(c.TEXTURE_2D,this.glTexture);if(k){k=d*g*4;k=null!=k?new Float32Array(k):null;for(var h=0,r=d*g*4;h<r;){var t=h++;k[t]=Hf.toFloat(a.get_data()[t])/Hf.toFloat(255)}c.texSubImage2D(c.TEXTURE_2D,0,f,b,d,g,c.RGBA,c.FLOAT,k)}else c.texSubImage2D(c.TEXTURE_2D,0,f,b,d,g,c.RGBA,c.UNSIGNED_BYTE,
a.get_data());e&&c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null);this.updated=!0},__class__:cd};var me=function(){var a=this.uniformBytes=new Wb(new ArrayBuffer(32)),b=0;null==b&&(b=0);this.xOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=4;null==b&&(b=0);this.yOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=8;null==b&&(b=0);this.xZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=12;null==b&&(b=0);
this.yZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b)};l["peote.view.UniformBufferDisplay"]=me;me.__name__="peote.view.UniformBufferDisplay";me.prototype={createGLBuffer:function(a,b,c,f,d){this.uniformBuffer=a.createBuffer();this.uniformBytes.b_UFloat32[0]=b;this.uniformBytes.b_UFloat32[1]=c;this.uniformBytes.b_UFloat32[2]=f;this.uniformBytes.b_UFloat32[3]=d;a.bindBuffer(a.UNIFORM_BUFFER,this.uniformBuffer);b=new Uint8Array(this.uniformBytes.b.bufferValue,0);a.bufferData(a.UNIFORM_BUFFER,b,
a.STATIC_DRAW);a.bindBuffer(a.UNIFORM_BUFFER,null)},deleteGLBuffer:function(a){a.deleteBuffer(this.uniformBuffer)},__class__:me};var ne=function(){var a=this.uniformBytes=new Wb(new ArrayBuffer(48)),b=0;null==b&&(b=0);this.resolutionBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=8;null==b&&(b=0);this.xOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=12;null==b&&(b=0);this.yOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;
b=16;null==b&&(b=0);this.xZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=20;null==b&&(b=0);this.yZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b)};l["peote.view.UniformBufferView"]=ne;ne.__name__="peote.view.UniformBufferView";ne.prototype={createGLBuffer:function(a,b,c,f,d,g,e){this.uniformBuffer=a.createBuffer();this.uniformBytes.b_UFloat32[0]=b;this.uniformBytes.b_UFloat32[1]=c;this.uniformBytes.b_UFloat32[2]=f;this.uniformBytes.b_UFloat32[3]=d;this.uniformBytes.b_UFloat32[4]=
g;this.uniformBytes.b_UFloat32[5]=e;a.bindBuffer(a.UNIFORM_BUFFER,this.uniformBuffer);b=new Uint8Array(this.uniformBytes.b.bufferValue,0);a.bufferData(a.UNIFORM_BUFFER,b,a.STATIC_DRAW);a.bindBuffer(a.UNIFORM_BUFFER,null)},deleteGLBuffer:function(a){a.deleteBuffer(this.uniformBuffer)},__class__:ne};var Bf=function(a,b){this.name=a;this.value=b};l["peote.view.UniformFloat"]=Bf;Bf.__name__="peote.view.UniformFloat";Bf.prototype={__class__:Bf};var of=function(a){this.gl=a;this.createBuffer();this.createProgram()};
l["peote.view.utils.Background"]=of;of.__name__="peote.view.utils.Background";of.prototype={createBuffer:function(){var a=new Wb(new ArrayBuffer(32));a.b_UFloat32[0]=1;a.b_UFloat32[1]=1;a.b_UFloat32[2]=0;a.b_UFloat32[3]=1;a.b_UFloat32[4]=1;a.b_UFloat32[5]=0;a.b_UFloat32[6]=0;a.b_UFloat32[7]=0;this.buffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer);a=new Uint8Array(a.b.bufferValue,0);this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
null)},createProgram:function(){var a="",b=wb.VertexFloat;null!=(0<b.low?"lowp":null)?a="precision lowp float;":(b=wb.VertexFloat,null!=(0<b.medium?"mediump":0<b.low?"lowp":null)&&(a="precision mediump float;"));b=this.gl;var c=this.gl.VERTEX_SHADER,f=b.createShader(c);b.shaderSource(f,a+"\t\n\t\t\tattribute vec2 aPosition;\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tgl_Position = mat4 (\n\t\t\t\t\tvec4(2.0, 0.0, 0.0, 0.0),\n\t\t\t\t\tvec4(0.0, -2.0, 0.0, 0.0),\n\t\t\t\t\tvec4(0.0, 0.0, -1.0, 0.0),\n\t\t\t\t\tvec4(-1.0, 1.0, 0.0, 1.0)\n\t\t\t\t) * vec4 (aPosition, -1.0 ,1.0);\n\t\t\t}\n\t\t");
b.compileShader(f);if(0==b.getShaderParameter(f,b.COMPILE_STATUS))throw D.thrown("ERROR compiling "+(c==b.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+J.string(b.getShaderInfoLog(f)));var d=f;b=wb.FragmentFloat;null!=(0<b.low?"lowp":null)?a="precision lowp float;":(b=wb.FragmentFloat,null!=(0<b.medium?"mediump":0<b.low?"lowp":null)&&(a="precision mediump float;"));b=this.gl;c=this.gl.FRAGMENT_SHADER;f=b.createShader(c);b.shaderSource(f,a+"\n\t\t\tuniform vec4 uRGBA;\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tgl_FragColor = uRGBA;\n\t\t\t\t\n\t\t\t\t// TODO: Fix for old FF\n\t\t\t\tgl_FragColor.w = clamp(uRGBA.w, 0.003, 1.0);\n\t\t\t}\n\t\t");
b.compileShader(f);if(0==b.getShaderParameter(f,b.COMPILE_STATUS))throw D.thrown("ERROR compiling "+(c==b.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+J.string(b.getShaderInfoLog(f)));a=f;this.glProgram=this.gl.createProgram();this.gl.attachShader(this.glProgram,d);this.gl.attachShader(this.glProgram,a);this.gl.deleteShader(d);this.gl.deleteShader(a);this.gl.bindAttribLocation(this.glProgram,0,"aPosition");b=this.gl;d=this.glProgram;b.linkProgram(d);if(0==b.getProgramParameter(d,b.LINK_STATUS))throw D.thrown(J.string(b.getProgramInfoLog(d))+
"VALIDATE_STATUS: "+J.string(b.getProgramParameter(d,b.VALIDATE_STATUS))+"ERROR: "+J.string(b.getError()));this.uRGBA=this.gl.getUniformLocation(this.glProgram,"uRGBA")},render:function(a,b,c,f){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer);this.gl.enableVertexAttribArray(0);this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,8,0);this.gl.useProgram(this.glProgram);this.gl.uniform4f(this.uRGBA,a,b,c,f);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.disableVertexAttribArray(0);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
null)},__class__:of};var Wb=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b;this.b_UFloat32=new Float32Array(a);this.b_Int32=new Int32Array(a);this.b_Uint16=new Uint16Array(a)};l["peote.view.utils.BufferBytes"]=Wb;Wb.__name__="peote.view.utils.BufferBytes";Wb.prototype={blit:function(a,b,c,f){0==c&&f==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+f),a)},fill:function(a,b,c){for(var f=0;f<b;)f++,this.b[a++]=c},__class__:Wb};
var sa=function(){};l["peote.view.utils.GLTool"]=sa;sa.__name__="peote.view.utils.GLTool";sa.clearGlErrorQueue=function(a){for(;a.getError()!=a.NO_ERROR;);};sa.getLastGlError=function(a){var b=a.getError();b!=a.NO_ERROR&&(b==a.INVALID_ENUM?ka.trace("(GL-Error: INVALID_ENUM)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:22,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==a.INVALID_VALUE?ka.trace("(GL-Error: INVALID_VALUE)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:23,
className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==a.INVALID_OPERATION?ka.trace("(GL-Error: INVALID_OPERATION)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:24,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==a.OUT_OF_MEMORY?ka.trace("(GL-Error: OUT_OF_MEMORY)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:25,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):ka.trace("GL-Error: "+b,{fileName:"peote/view/utils/GLTool.hx",lineNumber:26,
className:"peote.view.utils.GLTool",methodName:"getLastGlError"}));return b};var Jc=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=this);null!=c&&(c.prev=this)};l["peote.view.utils.RenderListItem_peote_view_ActiveTexture"]=Jc;Jc.__name__="peote.view.utils.RenderListItem_peote_view_ActiveTexture";Jc.prototype={__class__:Jc};var Kc=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=this);null!=c&&(c.prev=this)};l["peote.view.utils.RenderListItem_peote_view_Display"]=
Kc;Kc.__name__="peote.view.utils.RenderListItem_peote_view_Display";Kc.prototype={__class__:Kc};var Pc=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=this);null!=c&&(c.prev=this)};l["peote.view.utils.RenderListItem_peote_view_Program"]=Pc;Pc.__name__="peote.view.utils.RenderListItem_peote_view_Program";Pc.prototype={__class__:Pc};var he=function(a){this.first=this.last=null;this.itemMap=a};l["peote.view.utils.RenderList_peote_view_ActiveTexture"]=he;he.__name__="peote.view.utils.RenderList_peote_view_ActiveTexture";
he.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=this.last=new Jc(a,null,null);else if(null==b)b=this.first=new Jc(a,null,this.first);else if(c=this.itemMap.get(b),null!=c)b=new Jc(a,c.prev,c),c==this.first&&(this.first=b);else throw D.thrown("Error on add: "+J.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new Jc(a,null,null);else if(null==b)b=this.last=new Jc(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new Jc(a,c,c.next),c==this.last&&
(this.last=b);else throw D.thrown("Error on add: "+J.string(b)+" is not in list.");c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=c.prev));this.itemMap.set(a,b)},clear:function(){for(;null!=this.first;){null!=this.last.value&&this.itemMap.remove(this.last.value);var a=this.last;a==this.first&&(this.first=a.next);a==this.last&&(this.last=a.prev);null!=a.prev&&(a.prev.next=a.next);null!=
a.next&&(a.next.prev=a.prev)}},__class__:he};var oe=function(a){this.first=this.last=null;this.itemMap=a};l["peote.view.utils.RenderList_peote_view_Display"]=oe;oe.__name__="peote.view.utils.RenderList_peote_view_Display";oe.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=this.last=new Kc(a,null,null);else if(null==b)b=this.first=new Kc(a,null,this.first);else if(c=this.itemMap.get(b),null!=c)b=new Kc(a,c.prev,c),c==this.first&&(this.first=b);else throw D.thrown("Error on add: "+
J.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new Kc(a,null,null);else if(null==b)b=this.last=new Kc(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new Kc(a,c,c.next),c==this.last&&(this.last=b);else throw D.thrown("Error on add: "+J.string(b)+" is not in list.");c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=c.prev));this.itemMap.set(a,b)},
remove:function(a){var b=this.itemMap.get(a);if(null!=b)this.itemMap.remove(a),b==this.first&&(this.first=b.next),b==this.last&&(this.last=b.prev),null!=b.prev&&(b.prev.next=b.next),null!=b.next&&(b.next.prev=b.prev);else throw D.thrown("Error on remove: "+J.string(a)+" is not in list.");},has:function(a){return this.itemMap.exists(a)},__class__:oe};var nf=function(a){this.first=this.last=null;this.itemMap=a};l["peote.view.utils.RenderList_peote_view_Program"]=nf;nf.__name__="peote.view.utils.RenderList_peote_view_Program";
nf.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=this.last=new Pc(a,null,null);else if(null==b)b=this.first=new Pc(a,null,this.first);else if(c=this.itemMap.get(b),null!=c)b=new Pc(a,c.prev,c),c==this.first&&(this.first=b);else throw D.thrown("Error on add: "+J.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new Pc(a,null,null);else if(null==b)b=this.last=new Pc(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new Pc(a,c,c.next),c==this.last&&
(this.last=b);else throw D.thrown("Error on add: "+J.string(b)+" is not in list.");c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=c.prev));this.itemMap.set(a,b)},__class__:nf};var hc=function(){};l["peote.view.utils.TexUtils"]=hc;hc.__name__="peote.view.utils.TexUtils";hc.createEmptyTexture=function(a,b,c,f,d,g,e,k){null==k&&(k=!1);null==e&&(e=0);null==g&&(g=0);null==d&&(d=!1);f=a.createTexture();
a.bindTexture(a.TEXTURE_2D,f);sa.clearGlErrorQueue(a);if(k){k=a.TEXTURE_2D;var h=a.RGBA32F,m=a.RGBA,r=a.FLOAT,p=0;0==p?a.texImage2D(k,0,h,b,c,0,m,r,null):a.texImage2D(k,0,h,b,c,0,m,r,p);sa.getLastGlError(a)==a.INVALID_VALUE&&(ka.trace("switching to RGBA16F for float precision texture creation",{fileName:"peote/view/utils/TexUtils.hx",lineNumber:25,className:"peote.view.utils.TexUtils",methodName:"createEmptyTexture"}),k=a.TEXTURE_2D,h=a.RGBA16F,m=a.RGBA,r=a.FLOAT,p=0,0==p?a.texImage2D(k,0,h,b,c,0,
m,r,null):a.texImage2D(k,0,h,b,c,0,m,r,p),sa.getLastGlError(a)==a.INVALID_VALUE&&(ka.trace("switching to RGBA for float precision texture creation",{fileName:"peote/view/utils/TexUtils.hx",lineNumber:28,className:"peote.view.utils.TexUtils",methodName:"createEmptyTexture"}),k=a.TEXTURE_2D,m=h=a.RGBA,r=a.FLOAT,p=0,0==p?a.texImage2D(k,0,h,b,c,0,m,r,null):a.texImage2D(k,0,h,b,c,0,m,r,p)))}else k=a.TEXTURE_2D,m=h=a.RGBA,r=a.UNSIGNED_BYTE,p=0,0==p?a.texImage2D(k,0,h,b,c,0,m,r,null):a.texImage2D(k,0,h,
b,c,0,m,r,p);if(sa.getLastGlError(a)==a.OUT_OF_MEMORY)throw D.thrown("OUT OF GPU MEMORY while texture creation");1==g?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(d)switch(e){case 1:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);break;case 2:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_NEAREST);break;case 3:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_LINEAR);
break;default:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST)}else 1==e?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);d&&a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null);return f};hc.createPickingTexture=function(a,b){null==b&&(b=!1);var c=a.createTexture();
a.bindTexture(a.TEXTURE_2D,c);if(b){b=a.TEXTURE_2D;var f=a.RGBA32I,d=a.RGBA_INTEGER,g=a.INT,e=0}else b=a.TEXTURE_2D,d=f=a.RGBA,g=a.UNSIGNED_BYTE,e=0;0==e?a.texImage2D(b,0,f,1,1,0,d,g,null):a.texImage2D(b,0,f,1,1,0,d,g,e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);
return c};hc.optimalTextureSize=function(a,b,c,f,d,g){null==d&&(d=!0);g=Math.ceil(Math.log(f)/Math.log(2));for(var e=Math.ceil(Math.log(a*b*c)/Math.log(2)),k,h=1,r=e-1,t=Math.floor(Math.abs(h-r)),p=(1<<g)*(1<<g),l=!1,C=Math.floor(Math.min(g,e)),z;1<<C>=b;){for(z=Math.floor(Math.min(g,e-C+1));1<<z>=c&&!(Math.floor((1<<C)/b)*Math.floor((1<<z)/c)<a);){k=(1<<C)*(1<<z)-a*b*c;if(0>k)break;k<=p&&(k==p?Math.abs(C-z)<t&&(t=Math.floor(Math.abs(C-z)),h=C,r=z,l=!0):(h=C,r=z,p=k,l=!0));--z}--C}if(l)h=1<<h,r=1<<
r;else{if(d)throw D.thrown("Error: max texture-size ("+f+") is to small for "+a+" images ("+b+" x "+c+")");if(b>f||c>f)throw D.thrown("Error: max texture-size ("+f+") is to small for image ("+b+" x "+c+")");h=r=f}return{width:h,height:r,slotsX:h/b|0,slotsY:r/c|0,imageSlots:(h/b|0)*(r/c|0)}};var Ic=function(){};l["peote.view.utils.Util"]=Ic;Ic.__name__="peote.view.utils.Util";Ic.resolveFormulaCyclic=function(a){for(var b=[],c=a.h,f=Object.keys(c),d=f.length,g=0;g<d;)if(c=f[g++],c=Ic.resolveFormulaKey(c,
a,b),null!=c.errKey)throw D.thrown(c);c=a.h;b=Object.keys(c);f=b.length;for(d=0;d<f;)c=b[d++],g=a.h[c].replace(/___:::___/g,""),a.h[c]=g};Ic.resolveFormulaKey=function(a,b,c,f){null==f&&(f=[a]);null==c&&(c=[]);var d=b.h[a];if(0<=c.indexOf(a))return{formula:d,errKey:null,errVar:null};for(var g=Object.keys(b.h),e=g.length,k=0;k<e;){var h=g[k++];if(h!=a){var r=new ba("(^|.*?[^\\w.])"+h+"\\b.*?","g");if(r.match(d)){if(0<=f.indexOf(h))return{formula:d,errKey:a,errVar:h};h=Ic.resolveFormulaKey(h,b,c,f.concat([h]));
if(null!=h.errKey)return h;d=d.replace(r.r,"$1(___:::___"+h.formula+"___:::___)")}}}b.h[a]=d;c.push(a);return{formula:d,errKey:null,errVar:null}};Ic.resolveFormulaVars=function(a,b){for(var c=a.h,f=Object.keys(c),d=f.length,g=0;g<d;){var e=f[g++],k=a.h[e];c=b.h;c=Object.keys(c);for(var h=c.length,r=0;r<h;){var t=c[r++],p=new ba("(^|.*?[^\\w.])"+t+"\\b.*?","g");p.match(k)&&(k=k.replace(p.r,"$1("+b.h[t]+")"))}a.h[e]=k}};var Sc=function(){};l["tyke.IHaveGraphicsBuffer"]=Sc;Sc.__name__="tyke.IHaveGraphicsBuffer";
Sc.__isInterface__=!0;Sc.prototype={__class__:Sc,__properties__:{get_program:"get_program"}};var ed=z["tyke.Geometry"]={__ename__:!0,__constructs__:null,RECT:{_hx_name:"RECT",_hx_index:0,__enum__:"tyke.Geometry",toString:e},CIRCLE:{_hx_name:"CIRCLE",_hx_index:1,__enum__:"tyke.Geometry",toString:e},POLYGON:(h=function(a){return{_hx_index:2,numSides:a,__enum__:"tyke.Geometry",toString:e}},h._hx_name="POLYGON",h.__params__=["numSides"],h)};ed.__constructs__=[ed.RECT,ed.CIRCLE,ed.POLYGON];var pf=function(a){this.frameBuffer=
a;this.buffers=[]};l["tyke.Layer"]=pf;pf.__name__="tyke.Layer";pf.prototype={updateGraphicsBuffers:function(){for(var a=0,b=this.buffers;a<b.length;){var c=b[a];++a;c.updateGraphicsBuffers()}},registerGraphicsBuffer:function(a){this.buffers.push(a)},addProgramToFrameBuffer:function(a){this.frameBuffer.display.addProgram(a)},__class__:pf};var va=function(a,b,c,f,d,g,e){null==e&&(e=-1);null==g&&(g=3);null==b&&(b=0);null==a&&(a=0);this.bytePos=-1;this.shape=0;this.sides=3;this.x=this.y=0;this.color=
-1430585089;this.w=this.h=100;this.px_offset=this.py_offset=this.rotation=0;this.x=a;this.y=b;this.w=c;this.h=f;this.shape=d;this.color=e;this.sides=g};l["tyke.Shape"]=va;va.__name__="tyke.Shape";va.prototype={setPosition:function(a,b){this.x=a;this.y=b},__class__:va};var pe=function(a){null==a&&(a=256);this.buffer=new je(a,a,!0);this._program=new od(this.buffer);this._program.setFragmentFloatPrecision("high");this._program.discardAtAlpha(null);this._program.injectIntoFragmentShader(va.InjectFragment,
!1);this._program.setColorFormula(va.ColorFormula)};l["tyke.ShapeRenderer"]=pe;pe.__name__="tyke.ShapeRenderer";pe.__interfaces__=[Sc];pe.prototype={get_program:function(){return this._program},makeShape:function(a,b,c,f,d,e){null==e&&(e=-855703297);switch(d._hx_index){case 0:var g=0;break;case 1:g=1;break;default:g=2}switch(d._hx_index){case 1:d=1;break;case 2:d=d.numSides;break;default:d=4}d=new va(a|0,b|0,c,f,g,d,e);this.buffer.addElement(d);return d},updateGraphicsBuffers:function(){this.buffer.update()},
__class__:pe,__properties__:{get_program:"get_program"}};var wa=function(a,b,c,f,d,e,h){null==h&&(h=!0);null==e&&(e=-1);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.bytePos=-1;this.x=this.y=0;this.shakeDurationY=.9;this.shakeDurationX=1.2;this.shakeDistanceY=this.shakeDistanceX=3;this.shakeFrequencyY=this.shakeFrequencyX=6;this.shakeAtTime=-100;this.tile=0;this.c=-1430585089;this.slot=0;this.w=this.h=100;this.px_offset=this.py_offset=this.rotation=0;this.x=a;this.y=b;this.w=c;this.h=f;this.width=
this.w;this.height=this.h;this.c=e;this.tile=d;this.set_visible(h)};l["tyke.Sprite"]=wa;wa.__name__="tyke.Sprite";wa.prototype={flipX:function(a){this.isFlippedX=a;this.w=this.width*(this.isFlippedX?-1:1)},set_visible:function(a){this.c=this.c&-256|(a?255:0);return a},move:function(a,b){this.x=a;this.y=b;null!=this.debugElement&&(this.debugElement.x=a,this.debugElement.y=b)},__class__:wa,__properties__:{set_visible:"set_visible"}};var qe=function(a,b,c){null==c&&(c=256);this.spriteSheet=new cd(a.width,
a.height);this.spriteSheet.tilesX=a.width/b|0;this.spriteSheet.tilesY=a.height/b|0;this.spriteSheet.setImage(a,0);this.buffer=new ke(c,c,!0);this._program=new od(this.buffer);this._program.setFragmentFloatPrecision("high");this._program.discardAtAlpha(null);this._program.injectIntoVertexShader(wa.InjectVertex,!0);this._program.injectIntoFragmentShader(wa.InjectFragment,!1);this._program.addTexture(this.spriteSheet,"base")};l["tyke.SpriteRenderer"]=qe;qe.__name__="tyke.SpriteRenderer";qe.__interfaces__=
[Sc];qe.prototype={get_program:function(){return this._program},makeSprite:function(a,b,c,f,d,e){null==e&&(e=!0);a=new wa(a,b,c,c,f,null,e);this.buffer.addElement(a);return a},updateGraphicsBuffers:function(){this.buffer.update()},__class__:qe,__properties__:{get_program:"get_program"}};var xe=function(a){this.sortOrder=[];this.bindings=new eb;for(var b=0;b<a.length;){var c=a[b];++b;this._bind(c)}};l["tyke.KeyPresses_tyke_PhysicalStageLoop"]=xe;xe.__name__="tyke.KeyPresses_tyke_PhysicalStageLoop";
xe.prototype={handle:function(a,b){this.lastHandled=a;this.bindings.exists(a)&&this.bindings.get(a).handle(b)},_bind:function(a){this.sortOrder.push(a.code);this.bindings.set(a.code,a)},__class__:xe};var rf=function(){};l["tyke.LevelLoader"]=rf;rf.__name__="tyke.LevelLoader";rf.renderLayer=function(a,b){for(var c=0,f=a.cHei;c<f;)for(var d=c++,e=0,h=a.cWid;e<h;){var k=e++;a.tiles.h.hasOwnProperty(k+d*a.cWid)&&b(0<=k&&k<a.cWid&&0<=d&&d<a.cHei&&a.tiles.h.hasOwnProperty(k+d*a.cWid)?a.tiles.h[k+d*a.cWid]:
[],k,d)}};var ze=function(){};l["tyke.MapLoader"]=ze;ze.__name__="tyke.MapLoader";ze.bodiesFromIntGrid=function(a){for(var b=[],c=0,f=a.cHei;c<f;)for(var d=c++,e=0,h=a.cWid;e<h;){var k=e++;k=0<=k&&k<a.cWid&&0<=d&&d<a.cHei&&a.intGrid.h.hasOwnProperty(k+d*a.cWid)?a.intGrid.h[k+d*a.cWid]:0;b.push(0==k?0:1)}c=a.gridSize;return tf.generate(b,c,c,a.cWid,a.cHei,-c,-c)};var pd=function(a,b,c){null==c&&(c=!1);this.countDown=this.duration=a;this.onComplete=b;this.restartWhenComplete=c};l["tyke.CountDownInt"]=
pd;pd.__name__="tyke.CountDownInt";pd.prototype={update:function(a){this.countDown-=a;0>=this.countDown&&(this.onComplete(),this.restartWhenComplete&&(this.countDown=this.duration))},changeDuration:function(a){this.duration=a;this.onComplete();this.countDown=a},restart:function(){this.countDown=this.duration},__class__:pd};var ye=function(a,b){this.layers=new aa;this.display=a;this.coreLoop=b;this.buffer=new le(1);this.program=new od(this.buffer);this.program.setFragmentFloatPrecision("high");this.program.alphaEnabled=
!0;this.program.discardAtAlpha(null);a.addProgram(this.program);this.view=new Ca(0,0,a.width,a.height);this.buffer.addElement(this.view);this.globalFrameBuffer=this.makeFrameBuffer("globalFramebuffer",!1)};l["tyke.Stage"]=ye;ye.__name__="tyke.Stage";ye.prototype={globalFilter:function(a,b){this.program.injectIntoFragmentShader(b,!0);this.program.setColorFormula(a)},chainFrameBuffer:function(a,b){this.program.addTexture(a.texture,b,!0)},makeFrameBuffer:function(a,b){b=this.coreLoop.getFrameBufferDisplay(this.display.x,
this.display.y,this.display.width,this.display.height,b);this.chainFrameBuffer(b,a);return b},createLayer:function(a,b,c){null==c&&(c=!0);b=c?this.globalFrameBuffer:this.makeFrameBuffer(a,b);b=new pf(b);return this.layers.h[a]=b},initGraphicsBuffer:function(a,b,c,f){c=this.createLayer(a,c,!f);c.registerGraphicsBuffer(b);c.addProgramToFrameBuffer(b.get_program());this.layers.h[a]=c},createShapeRenderLayer:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);var f=new pe;this.initGraphicsBuffer(a,f,b,c);
return f},createSpriteRendererLayer:function(a,b,c,f,d){null==d&&(d=!1);null==f&&(f=!1);b=new qe(b,c);this.initGraphicsBuffer(a,b,f,d);return b},updateGraphicsBuffers:function(){for(var a=this.layers.h,b=Object.keys(a),c=b.length,f=0;f<c;)a[b[f++]].updateGraphicsBuffers()},setScroll:function(a,b){this.view.x=a;this.view.y=b;this.buffer.update()},getLayer:function(a){return this.layers.h[a]},__class__:ye};var Ca=function(a,b,c,f){null==b&&(b=0);null==a&&(a=0);this.bytePos=-1;this.w=this.h=100;this.x=
this.y=0;this.x=a;this.y=b;this.w=c;this.h=f};l["tyke.ViewElement"]=Ca;Ca.__name__="tyke.ViewElement";Ca.prototype={__class__:Ca};var qf=function(a,b,c){this.tileIndexes=a;this.speed=b;this.isLooped=c};l["tyke.AnimationConfig"]=qf;qf.__name__="tyke.AnimationConfig";qf.prototype={__class__:qf};var Be=function(a,b,c,f){null==c&&(c=0);this.spriteSheetColumns=a;this.frameCollections=null==b?new eb:b;this.spriteSheetColumns=a;this.frameIndex=c;this.onAdvance=f};l["tyke.Animation"]=Be;Be.__name__="tyke.Animation";
Be.prototype={defineFrames:function(a,b,c,f,d,e){null==e&&(e=1);null==d&&(d=!0);var g=b*this.spriteSheetColumns+c;b=[];c=g;for(f=g+f;c<f;)g=c++,b.push(g);d=new qf(b,e,d);this.frameCollections.h[a]=d},advance:function(){if(this.frameCollections.h.hasOwnProperty(this.currentAnimation)){if(null!=this.onAdvance)this.onAdvance(this);this.frameCollections.h[this.currentAnimation].isLooped&&(this.frameIndex<this.frameCollections.h[this.currentAnimation].tileIndexes.length&&this.frameIndex++,this.frameIndex%=
this.frameCollections.h[this.currentAnimation].tileIndexes.length)}},setAnimation:function(a,b){this.currentAnimation=a;this.frameIndex=0},currentTile:function(){return this.frameCollections.h[this.currentAnimation].tileIndexes[this.frameIndex]},__class__:Be};var Ae=function(a){this.body=new gb({shape:{width:1,height:1},kinematic:!0,mass:1,x:0,y:0});this.body.on_move=a};l["tyke.Camera"]=Ae;Ae.__name__="tyke.Camera";Ae.prototype={__class__:Ae};var Db=function(){};l["utils.Loader"]=Db;Db.__name__="utils.Loader";
Db.onProgressDebug=function(a,b,c){ka.trace("...loading "+a+"/"+b+' of "'+c+'"',{fileName:"utils/Loader.hx",lineNumber:11,className:"utils.Loader",methodName:"onProgressDebug"})};Db.onErrorDebug=function(a){ka.trace("Error - "+a,{fileName:"utils/Loader.hx",lineNumber:15,className:"utils.Loader",methodName:"onErrorDebug"})};Db.onCompleteDebug=function(a){ka.trace('Loading complete "'+a+'"',{fileName:"utils/Loader.hx",lineNumber:19,className:"utils.Loader",methodName:"onCompleteDebug"})};var Hb=z["utils._MultipassTemplate.TemplateExpr"]=
{__ename__:!0,__constructs__:null,OpVar:(h=function(a){return{_hx_index:0,v:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpVar",h.__params__=["v"],h),OpExpr:(h=function(a){return{_hx_index:1,expr:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpExpr",h.__params__=["expr"],h),OpIf:(h=function(a,b,c){return{_hx_index:2,expr:a,eif:b,eelse:c,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpIf",h.__params__=["expr",
"eif","eelse"],h),OpStr:(h=function(a){return{_hx_index:3,str:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpStr",h.__params__=["str"],h),OpBlock:(h=function(a){return{_hx_index:4,l:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpBlock",h.__params__=["l"],h),OpForeach:(h=function(a,b){return{_hx_index:5,expr:a,loop:b,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpForeach",h.__params__=["expr","loop"],h),OpMacro:(h=
function(a,b){return{_hx_index:6,name:a,params:b,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:e}},h._hx_name="OpMacro",h.__params__=["name","params"],h)};Hb.__constructs__=[Hb.OpVar,Hb.OpExpr,Hb.OpIf,Hb.OpStr,Hb.OpBlock,Hb.OpForeach,Hb.OpMacro];var Ma=function(a){a=this.parseTokens(a);this.expr=this.parseBlock(a);if(!a.isEmpty())throw D.thrown("Unexpected '"+J.string(a.first().s)+"'");};l["utils.MultipassTemplate"]=Ma;Ma.__name__="utils.MultipassTemplate";Ma.prototype={execute:function(a,
b){this.macros=null==b?{}:b;this.context=a;this.stack=new Ub;this.buf=new gd;this.run(this.expr);return this.buf.b},resolve:function(a){if("__current__"==a)return this.context;var b=ma.getProperty(this.context,a);if(null!=b||Object.prototype.hasOwnProperty.call(this.context,a))return b;for(var c=this.stack.h;null!=c;){b=c.item;c=c.next;var f=b;b=ma.getProperty(f,a);if(null!=b||Object.prototype.hasOwnProperty.call(f,a))return b}if(!Object.prototype.hasOwnProperty.call(Ma.globals,a))throw D.thrown(a);
return ma.field(Ma.globals,a)},parseTokens:function(a){for(var b=new Ub;Ma.splitter.match(a);){var c=Ma.splitter.matchedPos();0<c.pos&&b.add({p:F.substr(a,0,c.pos),s:!0,l:null});if(58==F.cca(a,c.pos))b.add({p:F.substr(a,c.pos+2,c.len-4),s:!1,l:null}),a=Ma.splitter.matchedRight();else{c=c.pos+c.len;for(var f=1,d=[],e="";;){var h=F.cca(a,c);++c;if(40==h)++f;else if(41==h){if(--f,0>=f)break}else if(null==h)throw D.thrown("Unclosed macro parenthesis");44==h&&1==f?(d.push(e),e=""):e+=String.fromCodePoint(h)}d.push(e);
b.add({p:Ma.splitter.matched(2),s:!1,l:d});a=F.substr(a,c,a.length-c)}}0<a.length&&b.add({p:a,s:!0,l:null});return b},parseBlock:function(a){for(var b=new Ub;;){var c=a.first();if(null==c)break;if(!c.s&&("end"==c.p||"else"==c.p||"elseif "==F.substr(c.p,0,7)))break;b.add(this.parse(a))}return 1==b.length?b.first():Hb.OpBlock(b)},parse:function(a){var b=a.pop(),c=b.p;if(b.s)return Hb.OpStr(c);if(null!=b.l){a=new Ub;var f=0;for(b=b.l;f<b.length;){var d=b[f];++f;a.add(this.parseBlock(this.parseTokens(d)))}return Hb.OpMacro(c,
a)}if("if "==F.substr(c,0,3)){c=F.substr(c,3,c.length-3);f=null;try{f=this.parseExpr(c)}catch(g){na.lastError=g;b=D.caught(g).unwrap();if("string"==typeof b)throw ka.trace(b,{fileName:"utils/MultipassTemplate.hx",lineNumber:211,className:"utils.MultipassTemplate",methodName:"parse"}),D.thrown(b);throw g;}c=this.parseBlock(a);b=a.first();if(null==b)throw D.thrown("Unclosed 'if'");if("end"==b.p)a.pop(),d=null;else if("else"==b.p){if(a.pop(),d=this.parseBlock(a),b=a.pop(),null==b||"end"!=b.p)throw D.thrown("Unclosed 'else'");
}else b.p=F.substr(b.p,4,b.p.length-4),d=this.parse(a);return Hb.OpIf(f,c,d)}if("foreach "==F.substr(c,0,8)){c=F.substr(c,8,c.length-8);f=this.parseExpr(c);c=this.parseBlock(a);b=a.pop();if(null==b||"end"!=b.p)throw D.thrown("Unclosed 'foreach'");return Hb.OpForeach(f,c)}return Ma.expr_splitter.match(c)?Hb.OpExpr(this.parseExpr(c)):Hb.OpVar(c)},parseExpr:function(a){for(var b=new Ub,c=a;Ma.expr_splitter.match(a);){var f=Ma.expr_splitter.matchedPos();0!=f.pos&&b.add({p:F.substr(a,0,f.pos),s:!0});a=
Ma.expr_splitter.matched(0);b.add({p:a,s:0<=a.indexOf('"')});a=Ma.expr_splitter.matchedRight()}0!=a.length&&b.add({p:a,s:!0});try{var d=this.makeExpr(b);if(!b.isEmpty())throw D.thrown(b.first().p);}catch(g){na.lastError=g;b=D.caught(g).unwrap();if("string"==typeof b)throw D.thrown("Unexpected '"+b+"' in "+c);throw g;}return function(){try{return d()}catch(m){na.lastError=m;var a=D.caught(m).unwrap();throw D.thrown({v:a,expr:c});}}},makeConst:function(a){Ma.expr_trim.match(a);a=Ma.expr_trim.matched(1);
if(34==F.cca(a,0)){var b=F.substr(a,1,a.length-2);return function(){return b}}if(Ma.expr_int.match(a)){var c=J.parseInt(a);return function(){return c}}if(Ma.expr_float.match(a)){var f=parseFloat(a);return function(){return f}}var d=this;return function(){return d.resolve(a)}},makePath:function(a,b){var c=b.first();if(null==c||"."!=c.p)return a;b.pop();c=b.pop();if(null==c||!c.s)throw D.thrown(c.p);var f=c.p;Ma.expr_trim.match(f);f=Ma.expr_trim.matched(1);return this.makePath(function(){return ma.field(a(),
f)},b)},makeExpr:function(a){return this.makePath(this.makeExpr2(a),a)},makeExpr2:function(a){var b=a.pop();if(null==b)throw D.thrown("<eof>");if(b.s)return this.makeConst(b.p);switch(b.p){case "!":var c=this.makeExpr(a);return function(){var a=c();return null!=a?0==a:!0};case "(":var f=this.makeExpr(a);b=a.pop();if(null==b||b.s)throw D.thrown(b);if(")"==b.p)return f;var d=this.makeExpr(a);a=a.pop();if(null==a||")"!=a.p)throw D.thrown(a);switch(b.p){case "!=":return function(){return f()!=d()};case "&&":return function(){return f()&&
d()};case "*":return function(){return f()*d()};case "+":return function(){return f()+d()};case "-":return function(){return f()-d()};case "/":return function(){return f()/d()};case "<":return function(){return f()<d()};case "<=":return function(){return f()<=d()};case "==":return function(){return f()==d()};case ">":return function(){return f()>d()};case ">=":return function(){return f()>=d()};case "||":return function(){return f()||d()};default:throw D.thrown("Unknown operation "+b.p);}case "-":var e=
this.makeExpr(a);return function(){return-e()}}throw D.thrown(b.p);},run:function(a){switch(a._hx_index){case 0:var b=a.v;try{var c=this.buf,f=J.string(this.resolve(b));c.b+=J.string(f)}catch(n){na.lastError=n,this.buf.b+=J.string("::"+b+"::")}break;case 1:var d=a.expr;try{c=this.buf,f=J.string(d()),c.b+=J.string(f)}catch(n){na.lastError=n,b=D.caught(n).unwrap(),this.buf.b+=J.string("::("+J.string(b.expr)+")::")}break;case 2:d=a.expr;f=a.eif;c=a.eelse;try{b=d(),null==b||0==b?null!=c&&this.run(c):
this.run(f)}catch(n){na.lastError=n,b=D.caught(n).unwrap(),this.buf.b+=J.string("::if "+J.string(b.expr)+"::"),this.run(f),null!=c&&(this.buf.b+="::else::",this.run(c)),this.buf.b+="::end::"}break;case 3:b=a.str;this.buf.b+=null==b?"null":""+b;break;case 4:for(a=a.l.h;null!=a;){var e=a.item;a=a.next;d=e;this.run(d)}break;case 5:d=a.expr;c=a.loop;try{b=d();try{f=y(b);if(null==f.hasNext)throw D.thrown(null);b=f}catch(n){na.lastError=n;try{if(null==b.hasNext)throw D.thrown(null);}catch(Nf){throw D.thrown("Cannot iter on "+
J.string(b));}}for(this.stack.push(this.context);b.hasNext();)this.context=b.next(),this.run(c);this.context=this.stack.pop()}catch(n){na.lastError=n,b=D.caught(n).unwrap(),this.buf.b+=J.string("::foreach "+J.string(b.v)+"::"),this.run(c),this.buf.b+="::end::"}break;case 6:d=a.name;a=a.params;b=ma.field(this.macros,d);var h=[],k=this.buf;h.push(u(this,this.resolve));for(a=a.h;null!=a;)e=a.item,a=a.next,0==e._hx_index?(e=e.v,h.push(this.resolve(e))):(this.buf=new gd,this.run(e),h.push(this.buf.b));
this.buf=k;try{c=this.buf,f=J.string(b.apply(this.macros,h)),c.b+=J.string(f)}catch(n){na.lastError=n;a=D.caught(n).unwrap();try{var r=h.join(",")}catch(Nf){r="???"}b="Macro call "+d+"("+r+") failed ("+J.string(a)+")";throw D.thrown(b);}}},__class__:Ma};v.$haxeUID|=0;"undefined"!=typeof performance&&"function"==typeof performance.now&&(F.now=performance.now.bind(performance));l.Math=Math;null==String.fromCodePoint&&(String.fromCodePoint=function(a){return 65536>a?String.fromCharCode(a):String.fromCharCode((a>>
10)+55232)+String.fromCharCode((a&1023)+56320)});String.prototype.__class__=l.String=String;String.__name__="String";l.Array=Array;Array.__name__="Array";Date.prototype.__class__=l.Date=Date;Date.__name__="Date";var Sf={},Qf={},Rf=Number,Pf=Boolean,Tf={},Uf={};uc.content=[];Bb.count=0;pa.__toStr={}.toString;var Gf=new Uint32Array(256);ub.__alpha16=Gf;for(var Qc=0;256>Qc;){var yd=Qc++;ub.__alpha16[yd]=Math.ceil(257.00392156862745*yd)}Gf=new Uint8Array(511);ub.__clamp=Gf;for(Qc=0;255>Qc;)yd=Qc++,ub.__clamp[yd]=
yd;for(Qc=255;511>Qc;)yd=Qc++,ub.__clamp[yd]=255;Ua.level=3;"undefined"==typeof console&&(console={});null==console.log&&(console.log=function(){});W.DebugAlphaLevel=0;$b.__meta__={obj:{indexes:["test","jump"]}};ec.WIN_NETWORK_DRIVE_REG=new ba("^\\\\\\\\([a-z0-9-]+)\\\\(.*)","i");ec.SLASH_MODE=Ie.Preserve;yb.UNIQ_ID=0;yb.ROOTS=[];yb.RESIZE_REQUESTED=!0;gb.default_mass=-1;gb.minimum_mass=1E-4;gb.ids=0;ab.qr=[];ab.sqr=[];da.cached_listeners=new wd;da.cached_collisions=[];da.cached_body=new gb({mass:1});
Qb.pool=new Fd(Qb);pc.global=new pc(null,null,null,null,null);jc.pool=new Gd(jc);Ac.pool=new Hd(Ac);ac.pool=new Id(ac);zb.pool=new Jd(zb);qc.pool=new Kd(qc);oa.pool=new Ld(oa);Tb.pool=new Md(Tb);lb.pool=new Nd(lb);Ya.pool=new Od(Ya);xa.norm=new A(0,0);xa.closest=new A(0,0);Jb.DEFAULT_RESOLVER=new Qd;Jb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Cc.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Cc.BYTES=Ia.ofString(Cc.CHARS);Kb.LEN_EXTRA_BITS_TBL=
[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];Kb.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];Kb.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];Kb.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];Kb.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];sc.keyCodeName=function(a){a=
new eb;a.h[0]="UNKNOWN";a.h[8]="BACKSPACE";a.h[9]="TAB";a.h[13]="RETURN";a.h[27]="ESCAPE";a.h[32]="SPACE";a.h[33]="EXCLAMATION";a.h[34]="QUOTE";a.h[35]="HASH";a.h[36]="DOLLAR";a.h[37]="PERCENT";a.h[38]="AMPERSAND";a.h[39]="SINGLE_QUOTE";a.h[40]="LEFT_PARENTHESIS";a.h[41]="RIGHT_PARENTHESIS";a.h[42]="ASTERISK";a.h[43]="PLUS";a.h[44]="COMMA";a.h[45]="MINUS";a.h[46]="PERIOD";a.h[47]="SLASH";a.h[48]="NUMBER_0";a.h[49]="NUMBER_1";a.h[50]="NUMBER_2";a.h[51]="NUMBER_3";a.h[52]="NUMBER_4";a.h[53]="NUMBER_5";
a.h[54]="NUMBER_6";a.h[55]="NUMBER_7";a.h[56]="NUMBER_8";a.h[57]="NUMBER_9";a.h[58]="COLON";a.h[59]="SEMICOLON";a.h[60]="LESS_THAN";a.h[61]="EQUALS";a.h[62]="GREATER_THAN";a.h[63]="QUESTION";a.h[64]="AT";a.h[91]="LEFT_BRACKET";a.h[92]="BACKSLASH";a.h[93]="RIGHT_BRACKET";a.h[94]="CARET";a.h[95]="UNDERSCORE";a.h[96]="GRAVE";a.h[97]="A";a.h[98]="B";a.h[99]="C";a.h[100]="D";a.h[101]="E";a.h[102]="F";a.h[103]="G";a.h[104]="H";a.h[105]="I";a.h[106]="J";a.h[107]="K";a.h[108]="L";a.h[109]="M";a.h[110]="N";
a.h[111]="O";a.h[112]="P";a.h[113]="Q";a.h[114]="R";a.h[115]="S";a.h[116]="T";a.h[117]="U";a.h[118]="V";a.h[119]="W";a.h[120]="X";a.h[121]="Y";a.h[122]="Z";a.h[127]="DELETE";a.h[1073741881]="CAPS_LOCK";a.h[1073741882]="F1";a.h[1073741883]="F2";a.h[1073741884]="F3";a.h[1073741885]="F4";a.h[1073741886]="F5";a.h[1073741887]="F6";a.h[1073741888]="F7";a.h[1073741889]="F8";a.h[1073741890]="F9";a.h[1073741891]="F10";a.h[1073741892]="F11";a.h[1073741893]="F12";a.h[1073741894]="PRINT_SCREEN";a.h[1073741895]=
"SCROLL_LOCK";a.h[1073741896]="PAUSE";a.h[1073741897]="INSERT";a.h[1073741898]="HOME";a.h[1073741899]="PAGE_UP";a.h[1073741901]="END";a.h[1073741902]="PAGE_DOWN";a.h[1073741903]="RIGHT";a.h[1073741904]="LEFT";a.h[1073741905]="DOWN";a.h[1073741906]="UP";a.h[1073741907]="NUM_LOCK";a.h[1073741908]="NUMPAD_DIVIDE";a.h[1073741909]="NUMPAD_MULTIPLY";a.h[1073741910]="NUMPAD_MINUS";a.h[1073741911]="NUMPAD_PLUS";a.h[1073741912]="NUMPAD_ENTER";a.h[1073741913]="NUMPAD_1";a.h[1073741914]="NUMPAD_2";a.h[1073741915]=
"NUMPAD_3";a.h[1073741916]="NUMPAD_4";a.h[1073741917]="NUMPAD_5";a.h[1073741918]="NUMPAD_6";a.h[1073741919]="NUMPAD_7";a.h[1073741920]="NUMPAD_8";a.h[1073741921]="NUMPAD_9";a.h[1073741922]="NUMPAD_0";a.h[1073741923]="NUMPAD_PERIOD";a.h[1073741925]="APPLICATION";a.h[1073741926]="POWER";a.h[1073741927]="NUMPAD_EQUALS";a.h[1073741928]="F13";a.h[1073741929]="F14";a.h[1073741930]="F15";a.h[1073741931]="F16";a.h[1073741932]="F17";a.h[1073741933]="F18";a.h[1073741934]="F19";a.h[1073741935]="F20";a.h[1073741936]=
"F21";a.h[1073741937]="F22";a.h[1073741938]="F23";a.h[1073741939]="F24";a.h[1073741940]="EXECUTE";a.h[1073741941]="HELP";a.h[1073741942]="MENU";a.h[1073741943]="SELECT";a.h[1073741944]="STOP";a.h[1073741945]="AGAIN";a.h[1073741946]="UNDO";a.h[1073741947]="CUT";a.h[1073741948]="COPY";a.h[1073741949]="PASTE";a.h[1073741950]="FIND";a.h[1073741951]="MUTE";a.h[1073741952]="VOLUME_UP";a.h[1073741953]="VOLUME_DOWN";a.h[1073741957]="NUMPAD_COMMA";a.h[1073741977]="ALT_ERASE";a.h[1073741978]="SYSTEM_REQUEST";
a.h[1073741979]="CANCEL";a.h[1073741980]="CLEAR";a.h[1073741981]="PRIOR";a.h[1073741982]="RETURN2";a.h[1073741983]="SEPARATOR";a.h[1073741984]="OUT";a.h[1073741985]="OPER";a.h[1073741986]="CLEAR_AGAIN";a.h[1073741987]="CRSEL";a.h[1073741988]="EXSEL";a.h[1073742E3]="NUMPAD_00";a.h[1073742001]="NUMPAD_000";a.h[1073742002]="THOUSAND_SEPARATOR";a.h[1073742003]="DECIMAL_SEPARATOR";a.h[1073742004]="CURRENCY_UNIT";a.h[1073742005]="CURRENCY_SUBUNIT";a.h[1073742006]="NUMPAD_LEFT_PARENTHESIS";a.h[1073742007]=
"NUMPAD_RIGHT_PARENTHESIS";a.h[1073742008]="NUMPAD_LEFT_BRACE";a.h[1073742009]="NUMPAD_RIGHT_BRACE";a.h[1073742010]="NUMPAD_TAB";a.h[1073742011]="NUMPAD_BACKSPACE";a.h[1073742012]="NUMPAD_A";a.h[1073742013]="NUMPAD_B";a.h[1073742014]="NUMPAD_C";a.h[1073742015]="NUMPAD_D";a.h[1073742016]="NUMPAD_E";a.h[1073742017]="NUMPAD_F";a.h[1073742018]="NUMPAD_XOR";a.h[1073742019]="NUMPAD_POWER";a.h[1073742020]="NUMPAD_PERCENT";a.h[1073742021]="NUMPAD_LESS_THAN";a.h[1073742022]="NUMPAD_GREATER_THAN";a.h[1073742023]=
"NUMPAD_AMPERSAND";a.h[1073742024]="NUMPAD_DOUBLE_AMPERSAND";a.h[1073742025]="NUMPAD_VERTICAL_BAR";a.h[1073742026]="NUMPAD_DOUBLE_VERTICAL_BAR";a.h[1073742027]="NUMPAD_COLON";a.h[1073742028]="NUMPAD_HASH";a.h[1073742029]="NUMPAD_SPACE";a.h[1073742030]="NUMPAD_AT";a.h[1073742031]="NUMPAD_EXCLAMATION";a.h[1073742032]="NUMPAD_MEM_STORE";a.h[1073742033]="NUMPAD_MEM_RECALL";a.h[1073742034]="NUMPAD_MEM_CLEAR";a.h[1073742035]="NUMPAD_MEM_ADD";a.h[1073742036]="NUMPAD_MEM_SUBTRACT";a.h[1073742037]="NUMPAD_MEM_MULTIPLY";
a.h[1073742038]="NUMPAD_MEM_DIVIDE";a.h[1073742039]="NUMPAD_PLUS_MINUS";a.h[1073742040]="NUMPAD_CLEAR";a.h[1073742041]="NUMPAD_CLEAR_ENTRY";a.h[1073742042]="NUMPAD_BINARY";a.h[1073742043]="NUMPAD_OCTAL";a.h[1073742044]="NUMPAD_DECIMAL";a.h[1073742045]="NUMPAD_HEXADECIMAL";a.h[1073742048]="LEFT_CTRL";a.h[1073742049]="LEFT_SHIFT";a.h[1073742050]="LEFT_ALT";a.h[1073742051]="LEFT_META";a.h[1073742052]="RIGHT_CTRL";a.h[1073742053]="RIGHT_SHIFT";a.h[1073742054]="RIGHT_ALT";a.h[1073742055]="RIGHT_META";
a.h[1073742081]="MODE";a.h[1073742082]="AUDIO_NEXT";a.h[1073742083]="AUDIO_PREVIOUS";a.h[1073742084]="AUDIO_STOP";a.h[1073742085]="AUDIO_PLAY";a.h[1073742086]="AUDIO_MUTE";a.h[1073742087]="MEDIA_SELECT";a.h[1073742088]="WWW";a.h[1073742089]="MAIL";a.h[1073742090]="CALCULATOR";a.h[1073742091]="COMPUTER";a.h[1073742092]="APP_CONTROL_SEARCH";a.h[1073742093]="APP_CONTROL_HOME";a.h[1073742094]="APP_CONTROL_BACK";a.h[1073742095]="APP_CONTROL_FORWARD";a.h[1073742096]="APP_CONTROL_STOP";a.h[1073742097]="APP_CONTROL_REFRESH";
a.h[1073742098]="APP_CONTROL_BOOKMARKS";a.h[1073742099]="BRIGHTNESS_DOWN";a.h[1073742100]="BRIGHTNESS_UP";a.h[1073742101]="DISPLAY_SWITCH";a.h[1073742102]="BACKLIGHT_TOGGLE";a.h[1073742103]="BACKLIGHT_DOWN";a.h[1073742104]="BACKLIGHT_UP";a.h[1073742105]="EJECT";a.h[1073742106]="SLEEP";return a}(this);sc.gamepadButtonName=function(a){a=new eb;a.h[0]="A";a.h[1]="B";a.h[2]="X";a.h[3]="Y";a.h[4]="BACK";a.h[5]="GUIDE";a.h[6]="START";a.h[7]="LEFT_STICK";a.h[8]="RIGHT_STICK";a.h[9]="LEFT_SHOULDER";a.h[10]=
"RIGHT_SHOULDER";a.h[11]="DPAD_UP";a.h[12]="DPAD_DOWN";a.h[13]="DPAD_LEFT";a.h[14]="DPAD_RIGHT";return a}(this);R.activeRequests=0;R.requestLimit=17;R.requestQueue=new Ub;Wc.windowID=0;gc.DICTIONARY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");gc.EXTENDED_DICTIONARY=function(a){a=[];for(var b=0,c=gc.DICTIONARY;b<c.length;){var f=c[b];++b;for(var d=0,e=gc.DICTIONARY;d<e.length;){var h=e[d];++d;a.push(f+h)}}return a}(this);Zb.sensorByID=new eb;Zb.sensors=[];ib.devices=
new eb;ib.onConnect=new gf;bb.devices=new eb;bb.onConnect=new hf;xb.onCancel=new Gc;xb.onEnd=new Gc;xb.onMove=new Gc;xb.onStart=new Gc;Z.cache=new lf;Z.onChange=new Ab;Z.bundlePaths=new aa;Z.libraries=new aa;Z.libraryPaths=new aa;Ua.throwErrors=!0;V.isES3=!1;V.isUBO=!1;V.isINSTANCED=!1;V.isVAO=!1;wb.VertexFloat={high:0,medium:0,low:0};wb.VertexInt={high:0,medium:0,low:0};wb.VertexSampler={high:0,medium:0,low:0};wb.FragmentFloat={high:0,medium:0,low:0};wb.FragmentInt={high:0,medium:0,low:0};wb.FragmentSampler=
{high:0,medium:0,low:0};sa.rEmptylines=new ba("([ \t]*\r?\n)+","g");sa.rStartspaces=new ba("^([ \t]*\r?\n)+","g");va.__meta__={fields:{px_offset:{pivotX:null,formula:["w * 0.5 + px_offset"]},py_offset:{pivotY:null,formula:["h * 0.5 + py_offset"]},rotation:{rotation:null},w:{sizeX:null,varying:null},h:{sizeY:null,varying:null},color:{color:null},x:{posX:null,set:["Position"]},y:{posY:null,set:["Position"]},sides:{custom:null,varying:null},shape:{custom:null,varying:null}}};va.InjectFragment="\n    #define PI 3.14159265359\n    #define TWO_PI 6.28318530718\n    \n    // from the book of shaders https://thebookofshaders.com/07/\n\t// only triangle is correct at the moment\n\t// todo ! calculate r for n sided polygons\n\t// or use vertices data from echo shape\n    vec4 polygon(vec4 c, float sides){\n        // Remap the coord for\n        vec2 coord = vTexCoord;\n        coord.y = (1.0 - coord.y);\n\n        // Remap the space to -1. to 1.\n        vec2 st = coord * 2.0-1.0;\n\n        // Angle and radius from the current pixel\n        float r = TWO_PI/sides;\n        float a = atan(st.x,st.y) + PI;\n\n        // Shaping function that modulate the distance\n        float d = cos(floor(.5+a/r)*r-a)*length(st);\n        float A = 1.0-smoothstep(.5,.51,d) == 1.0 ? c.a : 0.0;\n        return vec4(c.rgb, A);\n    }\n\n    // // https://github.com/ayamflow/glsl-2d-primitives/blob/master/polygon.glsl\n    // vec4 polygon(vec4 c, float sides){\n    //     vec2 st = vTexCoord * 2.0 - 1.0;\n    //     st.y  = (1.0 - st.y);\n    //     float angle = atan(st.x,st.y) + PI;\n    //     float slice = TWO_PI / sides;\n    //     // float radius = 0.4;\n    //     float radius = 0.5;//1.0;//0.7;//sides / 10.0;\n    //     // float x = vSize.x; \n    //     // float radius = 1.0 / cos(x) * (180.0 / sides);\n    //     float s = step(radius, cos(floor(0.5 + angle / slice ) * slice - angle) * length(st));\n    //     float A = 1.0 - s == 1.0 ? c.a : 0.0;\n    //     return vec4(c.rgb, A);\n    // }\n\n    float circle(vec2 st, float radius)\n    {\n        vec2 dist = st-vec2(0.5);\n        return 1.-smoothstep(radius-(radius*0.01),\n                             radius+(radius*0.01),\n                             dot(dist,dist)*4.0\n                            );\n    }\n\n    vec4 compose(vec4 c, float shapeType, float numSides){\n        // return vec4(0.8,0.8,0.8,1.0);\n        if(shapeType <= 0.0 ){\n            return c;\n        }\n        // circle\n        if(shapeType == 1.0){\n            float a = circle(vTexCoord, 1.0) == 1.0 ? c.a : 0.0;\n\t\t\treturn vec4(c.rgb, a);\n        }\n        // polygon\n        return polygon(c, numSides);\n    }\n    ";
va.ColorFormula="compose(color, shape, sides)";va.FORMULAS=function(a){a=new aa;a.h.py_offset="h * 0.5 + py_offset";a.h.px_offset="w * 0.5 + px_offset";return a}(this);va.ATTRIBUTES=function(a){a=new aa;a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.wStart="aSize.x";a.h.wEnd="aSize.x";a.h.w="aSize.x";a.h.sidesStart="aFloat0.x";a.h.sidesEnd="aFloat0.x";a.h.sides="aFloat0.x";a.h.shapeStart="aFloat0.y";a.h.shapeEnd="aFloat0.y";a.h.shape=
"aFloat0.y";a.h.rotationStart="aRotZ";a.h.rotationEnd="aRotZ";a.h.rotation="aRotZ";a.h.py_offsetStart="aPivot.y";a.h.py_offsetEnd="aPivot.y";a.h.py_offset="aPivot.y";a.h.px_offsetStart="aPivot.x";a.h.px_offsetEnd="aPivot.x";a.h.px_offset="aPivot.x";a.h.hStart="aSize.y";a.h.hEnd="aSize.y";a.h.h="aSize.y";return a}(this);va.FORMULA_NAMES=function(a){a=new aa;a.h.sizeX="w";a.h.sizeY="h";a.h.posX="x";a.h.posY="y";a.h.rotation="rotation";a.h.pivotX="px_offset";a.h.pivotY="py_offset";return a}(this);va.FORMULA_VARYINGS=
"sides,shape";va.FORMULA_CONSTANTS="";va.DEFAULT_FORMULA_VARS=new aa;wa.__meta__={fields:{px_offset:{pivotX:null,formula:["w * 0.5 + px_offset"]},py_offset:{pivotY:null,formula:["h * 0.5 + py_offset"]},rotation:{rotation:null},w:{sizeX:null},h:{sizeY:null},slot:{texSlot:["base"]},c:{color:null},tile:{texTile:null},shakeAtTime:{custom:null},shakeFrequencyY:{custom:null},shakeFrequencyX:{custom:null},shakeDistanceY:{custom:null},shakeDistanceX:{custom:null},shakeDurationX:{custom:null},shakeDurationY:{custom:null},
x:{posX:null,set:["Position"],formula:["x + shake(shakeAtTime, shakeFrequencyX, shakeDistanceX, shakeDurationX)"]},y:{posY:null,set:["Position"],formula:["y + shake(shakeAtTime, shakeFrequencyY, shakeDistanceY, shakeDurationY)"]}}};wa.InjectVertex="\n\t#define TWO_PI 6.28318530718\n\tfloat shake( float atTime, float freq, float size, float duration )\n\t{\n\t\tfloat t = max(0.0, uTime - atTime);\t\t\t\t\n\t\tt = (clamp(t, 0.0, duration) / duration);\t\t\t\n\t\t// return 1.0 - size + size * sin(freq * TWO_PI * t) * (t+0.5)*t*t*(t-1.0)*(t-1.0)*15.5;\n\t\treturn size * sin(freq * TWO_PI * t) * (t+0.5)*t*t*(t-1.0)*(t-1.0)*15.5;\n\t}\n\t";
wa.InjectFragment="";wa.FORMULAS=function(a){a=new aa;a.h.y="y + shake(shakeAtTime, shakeFrequencyY, shakeDistanceY, shakeDurationY)";a.h.x="x + shake(shakeAtTime, shakeFrequencyX, shakeDistanceX, shakeDurationX)";a.h.py_offset="h * 0.5 + py_offset";a.h.px_offset="w * 0.5 + px_offset";return a}(this);wa.ATTRIBUTES=function(a){a=new aa;a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.wStart="aSize.x";a.h.wEnd="aSize.x";a.h.w="aSize.x";a.h.tileStart=
"aShort0.y";a.h.tileEnd="aShort0.y";a.h.tile="aShort0.y";a.h.slotStart="aShort0.x";a.h.slotEnd="aShort0.x";a.h.slot="aShort0.x";a.h.shakeFrequencyYStart="aFloat0.y";a.h.shakeFrequencyYEnd="aFloat0.y";a.h.shakeFrequencyY="aFloat0.y";a.h.shakeFrequencyXStart="aFloat0.z";a.h.shakeFrequencyXEnd="aFloat0.z";a.h.shakeFrequencyX="aFloat0.z";a.h.shakeDurationYStart="aFloat1.z";a.h.shakeDurationYEnd="aFloat1.z";a.h.shakeDurationY="aFloat1.z";a.h.shakeDurationXStart="aFloat1.y";a.h.shakeDurationXEnd="aFloat1.y";
a.h.shakeDurationX="aFloat1.y";a.h.shakeDistanceYStart="aFloat0.w";a.h.shakeDistanceYEnd="aFloat0.w";a.h.shakeDistanceY="aFloat0.w";a.h.shakeDistanceXStart="aFloat1.x";a.h.shakeDistanceXEnd="aFloat1.x";a.h.shakeDistanceX="aFloat1.x";a.h.shakeAtTimeStart="aFloat0.x";a.h.shakeAtTimeEnd="aFloat0.x";a.h.shakeAtTime="aFloat0.x";a.h.rotationStart="aRotZ";a.h.rotationEnd="aRotZ";a.h.rotation="aRotZ";a.h.py_offsetStart="aPivot.y";a.h.py_offsetEnd="aPivot.y";a.h.py_offset="aPivot.y";a.h.px_offsetStart="aPivot.x";
a.h.px_offsetEnd="aPivot.x";a.h.px_offset="aPivot.x";a.h.hStart="aSize.y";a.h.hEnd="aSize.y";a.h.h="aSize.y";return a}(this);wa.FORMULA_NAMES=function(a){a=new aa;a.h.sizeX="w";a.h.sizeY="h";a.h.posX="x";a.h.posY="y";a.h.rotation="rotation";a.h.pivotX="px_offset";a.h.pivotY="py_offset";return a}(this);wa.FORMULA_VARYINGS="slot,tile";wa.FORMULA_CONSTANTS="";wa.DEFAULT_FORMULA_VARS=new aa;Ca.__meta__={fields:{x:{posX:null},y:{posY:null},w:{sizeX:null},h:{sizeY:null}}};Ca.FORMULAS=new aa;Ca.ATTRIBUTES=
function(a){a=new aa;a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.wStart="aSize.x";a.h.wEnd="aSize.x";a.h.w="aSize.x";a.h.hStart="aSize.y";a.h.hEnd="aSize.y";a.h.h="aSize.y";return a}(this);Ca.FORMULA_NAMES=function(a){a=new aa;a.h.sizeX="w";a.h.sizeY="h";a.h.posX="x";a.h.posY="y";return a}(this);Ca.FORMULA_VARYINGS="";Ca.FORMULA_CONSTANTS="";Ca.DEFAULT_FORMULA_VARS=new aa;Db.corsServer="";Ma.splitter=new ba('(::[A-Za-z0-9_ ()&|!+=/><*."-]+::|\\$\\$([A-Za-z0-9_-]+)\\()',
"");Ma.expr_splitter=new ba('(\\(|\\)|[ \r\n\t]*"[^"]*"[ \r\n\t]*|[!+=/><*.&|-]+)',"");Ma.expr_trim=new ba("^[ ]*([^ ]+)[ ]*$","");Ma.expr_int=new ba("^[0-9]+$","");Ma.expr_float=new ba("^([+-]?)(?=\\d|,\\d)\\d*(,\\d*)?([Ee]([+-]?\\d+))?$","");Ma.globals={};B.main()})("undefined"!=typeof q?q:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof y?y:"undefined"!=typeof self?self:this)};L.lime.embed=function(v){var y={},B=L.lime.$scripts[v];
if(!B)throw Error('Cannot find project name "'+v+'"');B(y,q);for(var E in y)L[E]=L[E]||y[E];(B=y.lime||window.lime)&&B.embed&&this!=B.embed&&B.embed.apply(B,arguments);return y};"function"==typeof define&&define.amd&&(define([],function(){return L.lime}),define.__amd=define.amd,define.amd=null)})("undefined"!=typeof exports?exports:"function"==typeof define&&define.amd?{}:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?
global:"undefined"!=typeof self?self:this);
!function(){var L=function(){this.init()};L.prototype={init:function(){var e=this||q;return e._counter=1E3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var z=this||q;if(e=parseFloat(e),z.ctx||l(),void 0!==e&&0<=e&&1>=
e){if(z._volume=e,z._muted)return z;z.usingWebAudio&&z.masterGain.gain.setValueAtTime(e,q.ctx.currentTime);for(var h=0;h<z._howls.length;h++)if(!z._howls[h]._webAudio)for(var u=z._howls[h]._getSoundIds(),x=0;x<u.length;x++){var P=z._howls[h]._soundById(u[x]);P&&P._node&&(P._node.volume=P._volume*e)}return z}return z._volume},mute:function(e){var z=this||q;z.ctx||l();z._muted=e;z.usingWebAudio&&z.masterGain.gain.setValueAtTime(e?0:z._volume,q.ctx.currentTime);for(var h=0;h<z._howls.length;h++)if(!z._howls[h]._webAudio)for(var u=
z._howls[h]._getSoundIds(),x=0;x<u.length;x++){var P=z._howls[h]._soundById(u[x]);P&&P._node&&(P._node.muted=!!e||P._muted)}return z},unload:function(){for(var e=this||q,z=e._howls.length-1;0<=z;z--)e._howls[z].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||q)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||q;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=
typeof Audio)try{var l=new Audio;void 0===l.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(h){e.noAudio=!0}else e.noAudio=!0;try{l=new Audio,l.muted&&(e.noAudio=!0)}catch(h){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||q,l=null;try{l="undefined"!=typeof Audio?new Audio:null}catch(fa){return e}if(!l||"function"!=typeof l.canPlayType)return e;var h=l.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g);u=u&&33>
parseInt(u[0].split("/")[1],10);return e._codecs={mp3:!(u||!h&&!l.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!h,opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!l.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!l.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||
l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!l.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(l.canPlayType("audio/x-flac;")||l.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=
this||q,l=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(e._navigator&&e._navigator.userAgent);if(!e._audioUnlocked&&e.ctx&&l){e._audioUnlocked=!1;e.autoUnlock=!1;e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload());e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var h=function(l){for(l=0;l<e.html5PoolSize;l++){var z=new Audio;z._unlocked=!0;e._releaseHtml5Audio(z)}for(l=0;l<e._howls.length;l++)if(!e._howls[l]._webAudio){z=e._howls[l]._getSoundIds();
for(var q=0;q<z.length;q++){var u=e._howls[l]._soundById(z[q]);u&&u._node&&!u._node._unlocked&&(u._node._unlocked=!0,u._node.load())}}e._autoResume();var x=e.ctx.createBufferSource();x.buffer=e._scratchBuffer;x.connect(e.ctx.destination);void 0===x.start?x.noteOn(0):x.start(0);"function"==typeof e.ctx.resume&&e.ctx.resume();x.onended=function(){x.disconnect(0);e._audioUnlocked=!0;document.removeEventListener("touchstart",h,!0);document.removeEventListener("touchend",h,!0);document.removeEventListener("click",
h,!0);for(var l=0;l<e._howls.length;l++)e._howls[l]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),e}},_obtainHtml5Audio:function(){var e=this||q;if(e._html5AudioPool.length)return e._html5AudioPool.pop();e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),
new Audio},_releaseHtml5Audio:function(e){var l=this||q;return e._unlocked&&l._html5AudioPool.push(e),l},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&q.usingWebAudio){for(var l=0;l<e._howls.length;l++)if(e._howls[l]._webAudio)for(var h=0;h<e._howls[l]._sounds.length;h++)if(!e._howls[l]._sounds[h]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",
e.ctx.suspend().then(function(){e.state="suspended";e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3E4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&q.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var l=0;l<e._howls.length;l++)e._howls[l]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=
null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var q=new L,v=function(e){if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");this.init(e)};v.prototype={init:function(e){var z=this;return q.ctx||l(),z._autoplay=e.autoplay||!1,z._format="string"!=typeof e.format?e.format:[e.format],z._html5=e.html5||!1,z._muted=e.mute||!1,z._loop=e.loop||!1,z._pool=e.pool||5,z._preload="boolean"!=typeof e.preload||e.preload,z._rate=e.rate||
1,z._sprite=e.sprite||{},z._src="string"!=typeof e.src?e.src:[e.src],z._volume=void 0!==e.volume?e.volume:1,z._xhrWithCredentials=e.xhrWithCredentials||!1,z._duration=0,z._state="unloaded",z._sounds=[],z._endTimers={},z._queue=[],z._playLock=!1,z._onend=e.onend?[{fn:e.onend}]:[],z._onfade=e.onfade?[{fn:e.onfade}]:[],z._onload=e.onload?[{fn:e.onload}]:[],z._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],z._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],z._onpause=e.onpause?[{fn:e.onpause}]:[],
z._onplay=e.onplay?[{fn:e.onplay}]:[],z._onstop=e.onstop?[{fn:e.onstop}]:[],z._onmute=e.onmute?[{fn:e.onmute}]:[],z._onvolume=e.onvolume?[{fn:e.onvolume}]:[],z._onrate=e.onrate?[{fn:e.onrate}]:[],z._onseek=e.onseek?[{fn:e.onseek}]:[],z._onunlock=e.onunlock?[{fn:e.onunlock}]:[],z._onresume=[],z._webAudio=q.usingWebAudio&&!z._html5,void 0!==q.ctx&&q.ctx&&q.autoUnlock&&q._unlockAudio(),q._howls.push(z),z._autoplay&&z._queue.push({event:"play",action:function(){z.play()}}),z._preload&&z.load(),z},load:function(){var e=
null;if(q.noAudio)return void this._emit("loaderror",null,"No audio support.");"string"==typeof this._src&&(this._src=[this._src]);for(var l=0;l<this._src.length;l++){var h;if(this._format&&this._format[l])var u=this._format[l];else{if("string"!=typeof(h=this._src[l])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(u=/^data:audio\/([^;,]+);/i.exec(h))||(u=/\.([^.]+)$/.exec(h.split("?",1)[0]));u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),
u&&q.codecs(u)){e=this._src[l];break}}return e?(this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new y(this),this._webAudio&&E(this),this):void this._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,l){var h=this,z=null;if("number"==typeof e)z=e,e=null;else{if("string"==typeof e&&"loaded"===h._state&&!h._sprite[e])return null;if(void 0===e&&(e="__default",!h._playLock)){for(var u=
0,x=0;x<h._sounds.length;x++)h._sounds[x]._paused&&!h._sounds[x]._ended&&(u++,z=h._sounds[x]._id);1===u?e=null:z=null}}var v=z?h._soundById(z):h._inactiveSound();if(!v)return null;if(z&&!e&&(e=v._sprite||"__default"),"loaded"!==h._state){v._sprite=e;v._ended=!1;var B=v._id;return h._queue.push({event:"play",action:function(){h.play(B)}}),B}if(z&&!v._paused)return l||h._loadQueue("play"),v._id;h._webAudio&&q._autoResume();var y=Math.max(0,0<v._seek?v._seek:h._sprite[e][0]/1E3),E=Math.max(0,(h._sprite[e][0]+
h._sprite[e][1])/1E3-y),N=1E3*E/Math.abs(v._rate),L=h._sprite[e][0]/1E3,la=(h._sprite[e][0]+h._sprite[e][1])/1E3,Ka=!(!v._loop&&!h._sprite[e][2]);v._sprite=e;v._ended=!1;var I=function(){v._paused=!1;v._seek=y;v._start=L;v._stop=la;v._loop=Ka};if(y>=la)return void h._ended(v);var W=v._node;if(h._webAudio)z=function(){h._playLock=!1;I();h._refreshBuffer(v);W.gain.setValueAtTime(v._muted||h._muted?0:v._volume,q.ctx.currentTime);v._playStart=q.ctx.currentTime;void 0===W.bufferSource.start?v._loop?W.bufferSource.noteGrainOn(0,
y,86400):W.bufferSource.noteGrainOn(0,y,E):v._loop?W.bufferSource.start(0,y,86400):W.bufferSource.start(0,y,E);N!==1/0&&(h._endTimers[v._id]=setTimeout(h._ended.bind(h,v),N));l||setTimeout(function(){h._emit("play",v._id);h._loadQueue()},0)},"running"===q.state?z():(h._playLock=!0,h.once("resume",z),h._clearTimer(v._id));else{var ba=function(){W.currentTime=y;W.muted=v._muted||h._muted||q._muted||W.muted;W.volume=v._volume*q.volume();W.playbackRate=v._rate;try{var z=W.play();if(z&&"undefined"!=typeof Promise&&
(z instanceof Promise||"function"==typeof z.then)?(h._playLock=!0,I(),z.then(function(){h._playLock=!1;W._unlocked=!0;l||(h._emit("play",v._id),h._loadQueue())}).catch(function(){h._playLock=!1;h._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");v._ended=!0;v._paused=!0})):l||(h._playLock=!1,I(),h._emit("play",v._id),h._loadQueue()),W.playbackRate=v._rate,W.paused)return void h._emit("playerror",
v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||v._loop?h._endTimers[v._id]=setTimeout(h._ended.bind(h,v),N):(h._endTimers[v._id]=function(){h._ended(v);W.removeEventListener("ended",h._endTimers[v._id],!1)},W.addEventListener("ended",h._endTimers[v._id],!1))}catch(jb){h._emit("playerror",v._id,jb)}};z=window&&window.ejecta||!W.readyState&&q._navigator.isCocoonJS;if(3<=W.readyState||
z)ba();else{h._playLock=!0;var F=function(){ba();W.removeEventListener(q._canPlayEvent,F,!1)};W.addEventListener(q._canPlayEvent,F,!1);h._clearTimer(v._id)}}return v._id},pause:function(e,l){var h=this;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(e)}}),h;for(var z=h._getSoundIds(e),q=0;q<z.length;q++){h._clearTimer(z[q]);var u=h._soundById(z[q]);if(u&&!u._paused&&(u._seek=h.seek(z[q]),u._rateSeek=0,u._paused=!0,h._stopFade(z[q]),u._node))if(h._webAudio){if(!u._node.bufferSource)continue;
void 0===u._node.bufferSource.stop?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0);h._cleanBuffer(u._node)}else isNaN(u._node.duration)&&u._node.duration!==1/0||u._node.pause();l||h._emit("pause",u?u._id:null)}return h},stop:function(e,l){var h=this;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(e)}}),h;for(var z=h._getSoundIds(e),q=0;q<z.length;q++){h._clearTimer(z[q]);var u=h._soundById(z[q]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=
!0,u._ended=!0,h._stopFade(z[q]),u._node&&(h._webAudio?u._node.bufferSource&&(void 0===u._node.bufferSource.stop?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),h._cleanBuffer(u._node)):isNaN(u._node.duration)&&u._node.duration!==1/0||(u._node.currentTime=u._start||0,u._node.pause())),l||h._emit("stop",u._id))}return h},mute:function(e,l){var h=this;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(e,l)}}),h;if(void 0===l){if("boolean"!=typeof e)return h._muted;
h._muted=e}for(var z=h._getSoundIds(l),u=0;u<z.length;u++){var v=h._soundById(z[u]);v&&(v._muted=e,v._interval&&h._stopFade(v._id),h._webAudio&&v._node?v._node.gain.setValueAtTime(e?0:v._volume,q.ctx.currentTime):v._node&&(v._node.muted=!!q._muted||e),h._emit("mute",v._id))}return h},volume:function(){var e,l,h=this,u=arguments;if(0===u.length)return h._volume;1===u.length||2===u.length&&void 0===u[1]?0<=h._getSoundIds().indexOf(u[0])?l=parseInt(u[0],10):e=parseFloat(u[0]):2<=u.length&&(e=parseFloat(u[0]),
l=parseInt(u[1],10));var v;if(!(void 0!==e&&0<=e&&1>=e))return v=l?h._soundById(l):h._sounds[0],v?v._volume:0;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,u)}}),h;void 0===l&&(h._volume=e);l=h._getSoundIds(l);for(var x=0;x<l.length;x++)(v=h._soundById(l[x]))&&(v._volume=e,u[2]||h._stopFade(l[x]),h._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(e,q.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=e*q.volume()),h._emit("volume",
v._id));return h},fade:function(e,l,h,u){var z=this;if("loaded"!==z._state||z._playLock)return z._queue.push({event:"fade",action:function(){z.fade(e,l,h,u)}}),z;e=parseFloat(e);l=parseFloat(l);h=parseFloat(h);z.volume(e,u);for(var v=z._getSoundIds(u),x=0;x<v.length;x++){var y=z._soundById(v[x]);if(y){if(u||z._stopFade(v[x]),z._webAudio&&!y._muted){var B=q.ctx.currentTime,U=B+h/1E3;y._volume=e;y._node.gain.setValueAtTime(e,B);y._node.gain.linearRampToValueAtTime(l,U)}z._startFadeInterval(y,e,l,h,
v[x],void 0===u)}}return z},_startFadeInterval:function(e,l,h,q,u,v){var z=this,x=l,y=h-l;u=Math.abs(y/.01);u=Math.max(4,0<u?q/u:q);var B=Date.now();e._fadeTo=h;e._interval=setInterval(function(){var u=(Date.now()-B)/q;B=Date.now();x+=y*u;x=Math.max(0,x);x=Math.min(1,x);x=Math.round(100*x)/100;z._webAudio?e._volume=x:z.volume(x,e._id,!0);v&&(z._volume=x);(h<l&&x<=h||h>l&&x>=h)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,z.volume(h,e._id),z._emit("fade",e._id))},u)},_stopFade:function(e){var l=
this._soundById(e);return l&&l._interval&&(this._webAudio&&l._node.gain.cancelScheduledValues(q.ctx.currentTime),clearInterval(l._interval),l._interval=null,this.volume(l._fadeTo,e),l._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,l,h,q=arguments;if(0===q.length)return this._loop;if(1===q.length){if("boolean"!=typeof q[0])return!!(h=this._soundById(parseInt(q[0],10)))&&h._loop;this._loop=e=q[0]}else 2===q.length&&(e=q[0],l=parseInt(q[1],10));l=this._getSoundIds(l);for(q=0;q<l.length;q++)(h=
this._soundById(l[q]))&&(h._loop=e,this._webAudio&&h._node&&h._node.bufferSource&&(h._node.bufferSource.loop=e,e&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop)));return this},rate:function(){var e,l,h=this,u=arguments;0===u.length?l=h._sounds[0]._id:1===u.length?0<=h._getSoundIds().indexOf(u[0])?l=parseInt(u[0],10):e=parseFloat(u[0]):2===u.length&&(e=parseFloat(u[0]),l=parseInt(u[1],10));var v;if("number"!=typeof e)return v=h._soundById(l),v?v._rate:h._rate;if("loaded"!==
h._state||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,u)}}),h;void 0===l&&(h._rate=e);l=h._getSoundIds(l);for(var x=0;x<l.length;x++)if(v=h._soundById(l[x])){h.playing(l[x])&&(v._rateSeek=h.seek(l[x]),v._playStart=h._webAudio?q.ctx.currentTime:v._playStart);v._rate=e;h._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(e,q.ctx.currentTime):v._node&&(v._node.playbackRate=e);var y=h.seek(l[x]);y=1E3*((h._sprite[v._sprite][0]+
h._sprite[v._sprite][1])/1E3-y)/Math.abs(v._rate);!h._endTimers[l[x]]&&v._paused||(h._clearTimer(l[x]),h._endTimers[l[x]]=setTimeout(h._ended.bind(h,v),y));h._emit("rate",v._id)}return h},seek:function(){var e,l,h=this,u=arguments;0===u.length?l=h._sounds[0]._id:1===u.length?0<=h._getSoundIds().indexOf(u[0])?l=parseInt(u[0],10):h._sounds.length&&(l=h._sounds[0]._id,e=parseFloat(u[0])):2===u.length&&(e=parseFloat(u[0]),l=parseInt(u[1],10));if(void 0===l)return h;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"seek",
action:function(){h.seek.apply(h,u)}}),h;var v=h._soundById(l);if(v){if(!("number"==typeof e&&0<=e))return h._webAudio?(e=h.playing(l)?q.ctx.currentTime-v._playStart:0,v._seek+((v._rateSeek?v._rateSeek-v._seek:0)+e*Math.abs(v._rate))):v._node.currentTime;var x=h.playing(l);x&&h.pause(l,!0);v._seek=e;v._ended=!1;h._clearTimer(l);h._webAudio||!v._node||isNaN(v._node.duration)||(v._node.currentTime=e);var y=function(){h._emit("seek",l);x&&h.play(l,!0)};if(x&&!h._webAudio){var B=function(){h._playLock?
setTimeout(B,0):y()};setTimeout(B,0)}else y()}return h},playing:function(e){if("number"==typeof e)return e=this._soundById(e),!!e&&!e._paused;for(e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(e){var l=this._duration;e=this._soundById(e);return e&&(l=this._sprite[e._sprite][1]/1E3),l},state:function(){return this._state},unload:function(){for(var e=this._sounds,l=0;l<e.length;l++)(e[l]._paused||this.stop(e[l]._id),this._webAudio)||(/MSIE |Trident\//.test(q._navigator&&
q._navigator.userAgent)||(e[l]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[l]._node.removeEventListener("error",e[l]._errorFn,!1),e[l]._node.removeEventListener(q._canPlayEvent,e[l]._loadFn,!1),q._releaseHtml5Audio(e[l]._node)),delete e[l]._node,this._clearTimer(e[l]._id);l=q._howls.indexOf(this);0<=l&&q._howls.splice(l,1);e=!0;for(l=0;l<q._howls.length;l++)if(q._howls[l]._src===this._src||0<=this._src.indexOf(q._howls[l]._src)){e=!1;break}return B&&
e&&delete B[this._src],q.noAudio=!1,this._state="unloaded",this._sounds=[],null},on:function(e,l,h,u){e=this["_on"+e];return"function"==typeof l&&e.push(u?{id:h,fn:l,once:u}:{id:h,fn:l}),this},off:function(e,l,h){var u=this["_on"+e];if("number"==typeof l&&(h=l,l=null),l||h)for(e=0;e<u.length;e++){var q=h===u[e].id;if(l===u[e].fn&&q||!l&&q){u.splice(e,1);break}}else if(e)this["_on"+e]=[];else for(l=Object.keys(this),e=0;e<l.length;e++)0===l[e].indexOf("_on")&&Array.isArray(this[l[e]])&&(this[l[e]]=
[]);return this},once:function(e,l,h){return this.on(e,l,h,1),this},_emit:function(e,l,h){for(var u=this["_on"+e],q=u.length-1;0<=q;q--)u[q].id&&u[q].id!==l&&"load"!==e||(setTimeout(function(e){e.call(this,l,h)}.bind(this,u[q].fn),0),u[q].once&&this.off(e,u[q].fn,u[q].id));return this._loadQueue(e),this},_loadQueue:function(e){if(0<this._queue.length){var l=this._queue[0];l.event===e&&(this._queue.shift(),this._loadQueue());e||l.action()}return this},_ended:function(e){var l=e._sprite;if(!this._webAudio&&
e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;l=!(!e._loop&&!this._sprite[l][2]);if(this._emit("end",e._id),!this._webAudio&&l&&this.stop(e._id,!0).play(e._id),this._webAudio&&l){this._emit("play",e._id);e._seek=e._start||0;e._rateSeek=0;e._playStart=q.ctx.currentTime;var h=1E3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),h)}return this._webAudio&&!l&&(e._paused=!0,e._ended=
!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),q._autoSuspend()),this._webAudio||l||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var l=this._soundById(e);l&&l._node&&l._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var l=0;l<this._sounds.length;l++)if(e===this._sounds[l]._id)return this._sounds[l];
return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new y(this)},_drain:function(){var e=this._pool,l=0,h;if(!(this._sounds.length<e)){for(h=0;h<this._sounds.length;h++)this._sounds[h]._ended&&l++;for(h=this._sounds.length-1;0<=h&&!(l<=e);h--)this._sounds[h]._ended&&(this._webAudio&&this._sounds[h]._node&&this._sounds[h]._node.disconnect(0),this._sounds.splice(h,1),l--)}},_getSoundIds:function(e){if(void 0===
e){e=[];for(var l=0;l<this._sounds.length;l++)e.push(this._sounds[l]._id);return e}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=q.ctx.createBufferSource(),e._node.bufferSource.buffer=B[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,q.ctx.currentTime),
this},_cleanBuffer:function(e){var l=q._navigator&&0<=q._navigator.vendor.indexOf("Apple");if(q._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),l))try{e.bufferSource.buffer=q._scratchBuffer}catch(h){}return e.bufferSource=null,this}};var y=function(e){this._parent=e;this.init()};y.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,
this._sprite="__default",this._id=++q._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,l=q._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===q.ctx.createGain?q.ctx.createGainNode():q.ctx.createGain(),this._node.gain.setValueAtTime(l,q.ctx.currentTime),this._node.paused=!0,this._node.connect(q.masterGain)):(this._node=q._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",
this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(q._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=l*q.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++q._counter,this},_errorListener:function(){this._parent._emit("loaderror",
this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1E3*e._duration]});"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue());this._node.removeEventListener(q._canPlayEvent,this._loadFn,!1)}};var B={},E=function(e){var l=e._src;if(B[l])return e._duration=B[l].duration,void u(e);
if(/^data:[^;]+;base64,/.test(l)){for(var h=atob(l.split(",")[1]),q=new Uint8Array(h.length),v=0;v<h.length;++v)q[v]=h.charCodeAt(v);N(q.buffer,e)}else{var y=new XMLHttpRequest;y.open("GET",l,!0);y.withCredentials=e._xhrWithCredentials;y.responseType="arraybuffer";y.onload=function(){var h=(y.status+"")[0];if("0"!==h&&"2"!==h&&"3"!==h)return void e._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");N(y.response,e)};y.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=
!1,e._sounds=[],delete B[l],e.load())};x(y)}},x=function(e){try{e.send()}catch(z){e.onerror()}},N=function(e,l){var h=function(){l._emit("loaderror",null,"Decoding audio data failed.")},z=function(e){e&&0<l._sounds.length?(B[l._src]=e,u(l,e)):h()};"undefined"!=typeof Promise&&1===q.ctx.decodeAudioData.length?q.ctx.decodeAudioData(e).then(z).catch(h):q.ctx.decodeAudioData(e,z,h)},u=function(e,l){l&&!e._duration&&(e._duration=l.duration);0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1E3*
e._duration]});"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){if(q.usingWebAudio){try{"undefined"!=typeof AudioContext?q.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?q.ctx=new webkitAudioContext:q.usingWebAudio=!1}catch(h){q.usingWebAudio=!1}q.ctx||(q.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(q._navigator&&q._navigator.platform),l=q._navigator&&q._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);l=l?parseInt(l[1],10):null;e&&l&&9>l&&(e=
/safari/.test(q._navigator&&q._navigator.userAgent.toLowerCase()),(q._navigator&&q._navigator.standalone&&!e||q._navigator&&!q._navigator.standalone&&!e)&&(q.usingWebAudio=!1));q.usingWebAudio&&(q.masterGain=void 0===q.ctx.createGain?q.ctx.createGainNode():q.ctx.createGain(),q.masterGain.gain.setValueAtTime(q._muted?0:1,q.ctx.currentTime),q.masterGain.connect(q.ctx.destination));q._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:q,Howl:v}});"undefined"!=typeof exports&&
(exports.Howler=q,exports.Howl=v);"undefined"!=typeof window?(window.HowlerGlobal=L,window.Howler=q,window.Howl=v,window.Sound=y):"undefined"!=typeof global&&(global.HowlerGlobal=L,global.Howler=q,global.Howl=v,global.Sound=y)}();
!function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(q){if(!this.ctx||!this.ctx.listener)return this;for(var v=this._howls.length-1;0<=v;v--)this._howls[v].stereo(q);return this};HowlerGlobal.prototype.pos=function(q,v,y){return this.ctx&&this.ctx.listener?(v="number"!=typeof v?this._pos[1]:v,y="number"!=typeof y?this._pos[2]:y,"number"!=typeof q?this._pos:(this._pos=[q,v,y],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],
Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this};HowlerGlobal.prototype.orientation=function(q,v,y,B,E,x){if(!this.ctx||!this.ctx.listener)return this;var N=this._orientation;return v="number"!=typeof v?N[1]:v,y="number"!=typeof y?N[2]:y,B="number"!=typeof B?N[3]:B,E="number"!=
typeof E?N[4]:E,x="number"!=typeof x?N[5]:x,"number"!=typeof q?N:(this._orientation=[q,v,y,B,E,x],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(q,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(v,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(y,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(q,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(v,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(y,
Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(q,v,y,B,E,x),this)};Howl.prototype.init=function(q){return function(v){return this._orientation=v.orientation||[1,0,0],this._stereo=v.stereo||null,this._pos=v.pos||null,this._pannerAttr={coneInnerAngle:void 0!==v.coneInnerAngle?v.coneInnerAngle:360,coneOuterAngle:void 0!==v.coneOuterAngle?v.coneOuterAngle:360,coneOuterGain:void 0!==v.coneOuterGain?v.coneOuterGain:0,distanceModel:void 0!==v.distanceModel?v.distanceModel:"inverse",maxDistance:void 0!==
v.maxDistance?v.maxDistance:1E4,panningModel:void 0!==v.panningModel?v.panningModel:"HRTF",refDistance:void 0!==v.refDistance?v.refDistance:1,rolloffFactor:void 0!==v.rolloffFactor?v.rolloffFactor:1},this._onstereo=v.onstereo?[{fn:v.onstereo}]:[],this._onpos=v.onpos?[{fn:v.onpos}]:[],this._onorientation=v.onorientation?[{fn:v.onorientation}]:[],q.call(this,v)}}(Howl.prototype.init);Howl.prototype.stereo=function(q,v){var y=this;if(!y._webAudio)return y;if("loaded"!==y._state)return y._queue.push({event:"stereo",
action:function(){y.stereo(q,v)}}),y;var B=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===v){if("number"!=typeof q)return y._stereo;y._stereo=q;y._pos=[q,0,0]}for(var E=y._getSoundIds(v),x=0;x<E.length;x++){var N=y._soundById(E[x]);if(N){if("number"!=typeof q)return N._stereo;N._stereo=q;N._pos=[q,0,0];N._node&&(N._pannerAttr.panningModel="equalpower",N._panner&&N._panner.pan||L(N,B),"spatial"===B?void 0!==N._panner.positionX?(N._panner.positionX.setValueAtTime(q,Howler.ctx.currentTime),
N._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),N._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):N._panner.setPosition(q,0,0):N._panner.pan.setValueAtTime(q,Howler.ctx.currentTime));y._emit("stereo",N._id)}}return y};Howl.prototype.pos=function(q,v,y,B){var E=this;if(!E._webAudio)return E;if("loaded"!==E._state)return E._queue.push({event:"pos",action:function(){E.pos(q,v,y,B)}}),E;if(v="number"!=typeof v?0:v,y="number"!=typeof y?-.5:y,void 0===B){if("number"!=typeof q)return E._pos;
E._pos=[q,v,y]}for(var x=E._getSoundIds(B),N=0;N<x.length;N++){var u=E._soundById(x[N]);if(u){if("number"!=typeof q)return u._pos;u._pos=[q,v,y];u._node&&(u._panner&&!u._panner.pan||L(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(q,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(v,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(y,Howler.ctx.currentTime)):u._panner.setPosition(q,v,y));E._emit("pos",u._id)}}return E};Howl.prototype.orientation=function(q,
v,y,B){var E=this;if(!E._webAudio)return E;if("loaded"!==E._state)return E._queue.push({event:"orientation",action:function(){E.orientation(q,v,y,B)}}),E;if(v="number"!=typeof v?E._orientation[1]:v,y="number"!=typeof y?E._orientation[2]:y,void 0===B){if("number"!=typeof q)return E._orientation;E._orientation=[q,v,y]}for(var x=E._getSoundIds(B),N=0;N<x.length;N++){var u=E._soundById(x[N]);if(u){if("number"!=typeof q)return u._orientation;u._orientation=[q,v,y];u._node&&(u._panner||(u._pos||(u._pos=
E._pos||[0,0,-.5]),L(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(q,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(v,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(y,Howler.ctx.currentTime)):u._panner.setOrientation(q,v,y));E._emit("orientation",u._id)}}return E};Howl.prototype.pannerAttr=function(){var q,v,y=arguments;if(!this._webAudio)return this;if(0===y.length)return this._pannerAttr;if(1===y.length){if("object"!=typeof y[0])return v=
this._soundById(parseInt(y[0],10)),v?v._pannerAttr:this._pannerAttr;var B=y[0];void 0===q&&(B.pannerAttr||(B.pannerAttr={coneInnerAngle:B.coneInnerAngle,coneOuterAngle:B.coneOuterAngle,coneOuterGain:B.coneOuterGain,distanceModel:B.distanceModel,maxDistance:B.maxDistance,refDistance:B.refDistance,rolloffFactor:B.rolloffFactor,panningModel:B.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==B.pannerAttr.coneInnerAngle?B.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==B.pannerAttr.coneOuterAngle?
B.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==B.pannerAttr.coneOuterGain?B.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==B.pannerAttr.distanceModel?B.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==B.pannerAttr.maxDistance?B.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==B.pannerAttr.refDistance?B.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==B.pannerAttr.rolloffFactor?B.pannerAttr.rolloffFactor:this._rolloffFactor,
panningModel:void 0!==B.pannerAttr.panningModel?B.pannerAttr.panningModel:this._panningModel})}else 2===y.length&&(B=y[0],q=parseInt(y[1],10));q=this._getSoundIds(q);for(y=0;y<q.length;y++)if(v=this._soundById(q[y])){var E=v._pannerAttr;E={coneInnerAngle:void 0!==B.coneInnerAngle?B.coneInnerAngle:E.coneInnerAngle,coneOuterAngle:void 0!==B.coneOuterAngle?B.coneOuterAngle:E.coneOuterAngle,coneOuterGain:void 0!==B.coneOuterGain?B.coneOuterGain:E.coneOuterGain,distanceModel:void 0!==B.distanceModel?B.distanceModel:
E.distanceModel,maxDistance:void 0!==B.maxDistance?B.maxDistance:E.maxDistance,refDistance:void 0!==B.refDistance?B.refDistance:E.refDistance,rolloffFactor:void 0!==B.rolloffFactor?B.rolloffFactor:E.rolloffFactor,panningModel:void 0!==B.panningModel?B.panningModel:E.panningModel};var x=v._panner;x?(x.coneInnerAngle=E.coneInnerAngle,x.coneOuterAngle=E.coneOuterAngle,x.coneOuterGain=E.coneOuterGain,x.distanceModel=E.distanceModel,x.maxDistance=E.maxDistance,x.refDistance=E.refDistance,x.rolloffFactor=
E.rolloffFactor,x.panningModel=E.panningModel):(v._pos||(v._pos=this._pos||[0,0,-.5]),L(v,"spatial"))}return this};Sound.prototype.init=function(q){return function(){var v=this._parent;this._orientation=v._orientation;this._stereo=v._stereo;this._pos=v._pos;this._pannerAttr=v._pannerAttr;q.call(this);this._stereo?v.stereo(this._stereo):this._pos&&v.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init);Sound.prototype.reset=function(q){return function(){var v=this._parent;return this._orientation=
v._orientation,this._stereo=v._stereo,this._pos=v._pos,this._pannerAttr=v._pannerAttr,this._stereo?v.stereo(this._stereo):this._pos?v.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,v._refreshBuffer(this)),q.call(this)}}(Sound.prototype.reset);var L=function(q,v){"spatial"===(v||"spatial")?(q._panner=Howler.ctx.createPanner(),q._panner.coneInnerAngle=q._pannerAttr.coneInnerAngle,q._panner.coneOuterAngle=q._pannerAttr.coneOuterAngle,
q._panner.coneOuterGain=q._pannerAttr.coneOuterGain,q._panner.distanceModel=q._pannerAttr.distanceModel,q._panner.maxDistance=q._pannerAttr.maxDistance,q._panner.refDistance=q._pannerAttr.refDistance,q._panner.rolloffFactor=q._pannerAttr.rolloffFactor,q._panner.panningModel=q._pannerAttr.panningModel,void 0!==q._panner.positionX?(q._panner.positionX.setValueAtTime(q._pos[0],Howler.ctx.currentTime),q._panner.positionY.setValueAtTime(q._pos[1],Howler.ctx.currentTime),q._panner.positionZ.setValueAtTime(q._pos[2],
Howler.ctx.currentTime)):q._panner.setPosition(q._pos[0],q._pos[1],q._pos[2]),void 0!==q._panner.orientationX?(q._panner.orientationX.setValueAtTime(q._orientation[0],Howler.ctx.currentTime),q._panner.orientationY.setValueAtTime(q._orientation[1],Howler.ctx.currentTime),q._panner.orientationZ.setValueAtTime(q._orientation[2],Howler.ctx.currentTime)):q._panner.setOrientation(q._orientation[0],q._orientation[1],q._orientation[2])):(q._panner=Howler.ctx.createStereoPanner(),q._panner.pan.setValueAtTime(q._stereo,
Howler.ctx.currentTime));q._panner.connect(q._node);q._paused||q._parent.pause(q._id,!0).play(q._id,!0)}}();
!function(L){"object"==typeof exports&&"undefined"!=typeof module?module.exports=L():"function"==typeof define&&define.amd?define([],L):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=L()}(function(){return function B(q,v,y){function E(u,l){if(!v[u]){if(!q[u]){var e="function"==typeof require&&require;if(!l&&e)return e(u,!0);if(x)return x(u,!0);l=Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l;}l=v[u]={exports:{}};
q[u][0].call(l.exports,function(e){var h=q[u][1][e];return E(h?h:e)},l,l.exports,B,q,v,y)}return v[u].exports}for(var x="function"==typeof require&&require,N=0;N<y.length;N++)E(y[N]);return E}({1:[function(q,v,y){function B(q){if(!(this instanceof B))return new B(q);q=this.options=N.assign({level:U,method:P,chunkSize:16384,windowBits:15,memLevel:8,strategy:fa,to:""},q||{});q.raw&&0<q.windowBits?q.windowBits=-q.windowBits:q.gzip&&0<q.windowBits&&16>q.windowBits&&(q.windowBits+=16);this.err=0;this.msg=
"";this.ended=!1;this.chunks=[];this.strm=new e;this.strm.avail_out=0;var v=x.deflateInit2(this.strm,q.level,q.method,q.windowBits,q.memLevel,q.strategy);if(v!==h)throw Error(l[v]);if(q.header&&x.deflateSetHeader(this.strm,q.header),q.dictionary){var y;if(y="string"==typeof q.dictionary?u.string2buf(q.dictionary):"[object ArrayBuffer]"===z.call(q.dictionary)?new Uint8Array(q.dictionary):q.dictionary,v=x.deflateSetDictionary(this.strm,y),v!==h)throw Error(l[v]);this._dict_set=!0}}function E(e,h){h=
new B(h);if(h.push(e,!0),h.err)throw h.msg;return h.result}var x=q("./zlib/deflate"),N=q("./utils/common"),u=q("./utils/strings"),l=q("./zlib/messages"),e=q("./zlib/zstream"),z=Object.prototype.toString,h=0,U=-1,fa=0,P=8;B.prototype.push=function(e,l){var q,v=this.strm,y=this.options.chunkSize;if(this.ended)return!1;l=l===~~l?l:!0===l?4:0;"string"==typeof e?v.input=u.string2buf(e):"[object ArrayBuffer]"===z.call(e)?v.input=new Uint8Array(e):v.input=e;v.next_in=0;v.avail_in=v.input.length;do{if(0===
v.avail_out&&(v.output=new N.Buf8(y),v.next_out=0,v.avail_out=y),q=x.deflate(v,l),1!==q&&q!==h)return this.onEnd(q),this.ended=!0,!1;0!==v.avail_out&&(0!==v.avail_in||4!==l&&2!==l)||("string"===this.options.to?this.onData(u.buf2binstring(N.shrinkBuf(v.output,v.next_out))):this.onData(N.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||0===v.avail_out)&&1!==q);return 4===l?(q=x.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===h):2!==l||(this.onEnd(h),v.avail_out=0,!0)};B.prototype.onData=
function(e){this.chunks.push(e)};B.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=N.flattenChunks(this.chunks));this.chunks=[];this.err=e;this.msg=this.strm.msg};y.Deflate=B;y.deflate=E;y.deflateRaw=function(e,h){return h=h||{},h.raw=!0,E(e,h)};y.gzip=function(e,h){return h=h||{},h.gzip=!0,E(e,h)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(q,v,y){function B(q){if(!(this instanceof
B))return new B(q);var u=this.options=N.assign({chunkSize:16384,windowBits:0,to:""},q||{});u.raw&&0<=u.windowBits&&16>u.windowBits&&(u.windowBits=-u.windowBits,0===u.windowBits&&(u.windowBits=-15));!(0<=u.windowBits&&16>u.windowBits)||q&&q.windowBits||(u.windowBits+=32);15<u.windowBits&&48>u.windowBits&&0===(15&u.windowBits)&&(u.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new z;this.strm.avail_out=0;q=x.inflateInit2(this.strm,u.windowBits);if(q!==l.Z_OK)throw Error(e[q]);
this.header=new h;x.inflateGetHeader(this.strm,this.header)}function E(e,h){h=new B(h);if(h.push(e,!0),h.err)throw h.msg;return h.result}var x=q("./zlib/inflate"),N=q("./utils/common"),u=q("./utils/strings"),l=q("./zlib/constants"),e=q("./zlib/messages"),z=q("./zlib/zstream"),h=q("./zlib/gzheader"),U=Object.prototype.toString;B.prototype.push=function(e,h){var q,v,z,y,B,E=this.strm,P=this.options.chunkSize,fa=this.options.dictionary,I=!1;if(this.ended)return!1;h=h===~~h?h:!0===h?l.Z_FINISH:l.Z_NO_FLUSH;
"string"==typeof e?E.input=u.binstring2buf(e):"[object ArrayBuffer]"===U.call(e)?E.input=new Uint8Array(e):E.input=e;E.next_in=0;E.avail_in=E.input.length;do{if(0===E.avail_out&&(E.output=new N.Buf8(P),E.next_out=0,E.avail_out=P),q=x.inflate(E,l.Z_NO_FLUSH),q===l.Z_NEED_DICT&&fa&&(B="string"==typeof fa?u.string2buf(fa):"[object ArrayBuffer]"===U.call(fa)?new Uint8Array(fa):fa,q=x.inflateSetDictionary(this.strm,B)),q===l.Z_BUF_ERROR&&!0===I&&(q=l.Z_OK,I=!1),q!==l.Z_STREAM_END&&q!==l.Z_OK)return this.onEnd(q),
this.ended=!0,!1;E.next_out&&(0!==E.avail_out&&q!==l.Z_STREAM_END&&(0!==E.avail_in||h!==l.Z_FINISH&&h!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(v=u.utf8border(E.output,E.next_out),z=E.next_out-v,y=u.buf2string(E.output,v),E.next_out=z,E.avail_out=P-z,z&&N.arraySet(E.output,E.output,v,z,0),this.onData(y)):this.onData(N.shrinkBuf(E.output,E.next_out))));0===E.avail_in&&0===E.avail_out&&(I=!0)}while((0<E.avail_in||0===E.avail_out)&&q!==l.Z_STREAM_END);return q===l.Z_STREAM_END&&(h=l.Z_FINISH),
h===l.Z_FINISH?(q=x.inflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===l.Z_OK):h!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),E.avail_out=0,!0)};B.prototype.onData=function(e){this.chunks.push(e)};B.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=N.flattenChunks(this.chunks));this.chunks=[];this.err=e;this.msg=this.strm.msg};y.Inflate=B;y.inflate=E;y.inflateRaw=function(e,h){return h=h||{},h.raw=!0,E(e,h)};y.ungzip=E},{"./utils/common":3,
"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(q,v,y){q="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;y.assign=function(q){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var u=v.shift();if(u){if("object"!=typeof u)throw new TypeError(u+"must be non-object");for(var l in u)u.hasOwnProperty(l)&&(q[l]=u[l])}}return q};y.shrinkBuf=function(q,v){return q.length===
v?q:q.subarray?q.subarray(0,v):(q.length=v,q)};var B={arraySet:function(q,v,u,l,e){if(v.subarray&&q.subarray)return void q.set(v.subarray(u,u+l),e);for(var z=0;z<l;z++)q[e+z]=v[u+z]},flattenChunks:function(q){var v,u;var l=u=0;for(v=q.length;l<v;l++)u+=q[l].length;var e=new Uint8Array(u);l=u=0;for(v=q.length;l<v;l++){var z=q[l];e.set(z,u);u+=z.length}return e}},E={arraySet:function(q,v,u,l,e){for(var z=0;z<l;z++)q[e+z]=v[u+z]},flattenChunks:function(q){return[].concat.apply([],q)}};y.setTyped=function(q){q?
(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,B)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,E))};y.setTyped(q)},{}],4:[function(q,v,y){function B(l,e){if(65537>e&&(l.subarray&&N||!l.subarray&&x))return String.fromCharCode.apply(null,E.shrinkBuf(l,e));for(var q="",h=0;h<e;h++)q+=String.fromCharCode(l[h]);return q}var E=q("./common"),x=!0,N=!0;try{String.fromCharCode.apply(null,[0])}catch(l){x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){N=!1}var u=
new E.Buf8(256);for(q=0;256>q;q++)u[q]=252<=q?6:248<=q?5:240<=q?4:224<=q?3:192<=q?2:1;u[254]=u[254]=1;y.string2buf=function(l){var e,q,h,u=l.length,v=0;for(q=0;q<u;q++){var x=l.charCodeAt(q);55296===(64512&x)&&q+1<u&&(e=l.charCodeAt(q+1),56320===(64512&e)&&(x=65536+(x-55296<<10)+(e-56320),q++));v+=128>x?1:2048>x?2:65536>x?3:4}var y=new E.Buf8(v);for(q=h=0;h<v;q++)x=l.charCodeAt(q),55296===(64512&x)&&q+1<u&&(e=l.charCodeAt(q+1),56320===(64512&e)&&(x=65536+(x-55296<<10)+(e-56320),q++)),128>x?y[h++]=
x:2048>x?(y[h++]=192|x>>>6,y[h++]=128|63&x):65536>x?(y[h++]=224|x>>>12,y[h++]=128|x>>>6&63,y[h++]=128|63&x):(y[h++]=240|x>>>18,y[h++]=128|x>>>12&63,y[h++]=128|x>>>6&63,y[h++]=128|63&x);return y};y.buf2binstring=function(l){return B(l,l.length)};y.binstring2buf=function(l){for(var e=new E.Buf8(l.length),q=0,h=e.length;q<h;q++)e[q]=l.charCodeAt(q);return e};y.buf2string=function(l,e){var q,h,v,x=e||l.length,y=Array(2*x);for(e=q=0;e<x;)if(h=l[e++],128>h)y[q++]=h;else if(v=u[h],4<v)y[q++]=65533,e+=v-
1;else{for(h&=2===v?31:3===v?15:7;1<v&&e<x;)h=h<<6|63&l[e++],v--;1<v?y[q++]=65533:65536>h?y[q++]=h:(h-=65536,y[q++]=55296|h>>10&1023,y[q++]=56320|1023&h)}return B(y,q)};y.utf8border=function(l,e){var q;e=e||l.length;e>l.length&&(e=l.length);for(q=e-1;0<=q&&128===(192&l[q]);)q--;return 0>q?e:0===q?e:q+u[l[q]]>e?q:e}},{"./common":3}],5:[function(q,v,y){v.exports=function(q,v,x,y){var u=65535&q|0;q=q>>>16&65535|0;for(var l;0!==x;){l=2E3<x?2E3:x;x-=l;do u=u+v[y++]|0,q=q+u|0;while(--l);u%=65521;q%=65521}return u|
q<<16|0}},{}],6:[function(q,v,y){v.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(q,v,y){var B=function(){for(var q,v=[],y=0;256>y;y++){q=y;
for(var u=0;8>u;u++)q=1&q?3988292384^q>>>1:q>>>1;v[y]=q}return v}();v.exports=function(q,v,y,u){y=u+y;for(q^=-1;u<y;u++)q=q>>>8^B[255&(q^v[u])];return q^-1}},{}],8:[function(q,v,y){function B(e,h){return e.msg=Ka[h],h}function E(e){for(var h=e.length;0<=--h;)e[h]=0}function x(e){var h=e.state,r=h.pending;r>e.avail_out&&(r=e.avail_out);0!==r&&(ea.arraySet(e.output,h.pending_buf,h.pending_out,r,e.next_out),e.next_out+=r,h.pending_out+=r,e.total_out+=r,e.avail_out-=r,h.pending-=r,0===h.pending&&(h.pending_out=
0))}function N(e,h){ra._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,h);e.block_start=e.strstart;x(e.strm)}function u(e,h){e.pending_buf[e.pending++]=h}function l(e,h){e.pending_buf[e.pending++]=h>>>8&255;e.pending_buf[e.pending++]=255&h}function e(e,h){var r,l,q=e.max_chain_length,u=e.strstart,w=e.prev_length,v=e.nice_match,z=e.strstart>e.w_size-Q?e.strstart-(e.w_size-Q):0,x=e.window,y=e.w_mask,I=e.prev,B=e.strstart+ia,F=x[u+w-1],H=x[u+w];e.prev_length>=e.good_match&&
(q>>=2);v>e.lookahead&&(v=e.lookahead);do if(r=h,x[r+w]===H&&x[r+w-1]===F&&x[r]===x[u]&&x[++r]===x[u+1]){u+=2;for(r++;x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&x[++u]===x[++r]&&u<B;);if(l=ia-(B-u),u=B-ia,l>w){if(e.match_start=h,w=l,l>=v)break;F=x[u+w-1];H=x[u+w]}}while((h=I[h&y])>z&&0!==--q);return w<=e.lookahead?w:e.lookahead}function z(e){var h,r,l=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-
Q)){ea.arraySet(e.window,e.window,l,l,0);e.match_start-=l;e.strstart-=l;e.block_start-=l;var q=h=e.hash_size;do{var u=e.head[--q];e.head[q]=u>=l?u-l:0}while(--h);q=h=l;do u=e.prev[--q],e.prev[q]=u>=l?u-l:0;while(--h);r+=l}if(0===e.strm.avail_in)break;q=e.strm;u=e.window;var w=e.strstart+e.lookahead,v=q.avail_in;if(h=(v>r&&(v=r),0===v?0:(q.avail_in-=v,ea.arraySet(u,q.input,q.next_in,v,w),1===q.state.wrap?q.adler=Y(q.adler,u,v,w):2===q.state.wrap&&(q.adler=la(q.adler,u,v,w)),q.next_in+=v,q.total_in+=
v,v)),e.lookahead+=h,e.lookahead+e.insert>=ca)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+ca-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<ca)););}while(e.lookahead<Q&&0!==e.strm.avail_in)}function h(h,l){for(var r,t;;){if(h.lookahead<Q){if(z(h),h.lookahead<Q&&l===I)return G;if(0===h.lookahead)break}if(r=0,h.lookahead>=ca&&(h.ins_h=
(h.ins_h<<h.hash_shift^h.window[h.strstart+ca-1])&h.hash_mask,r=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),0!==r&&h.strstart-r<=h.w_size-Q&&(h.match_length=e(h,r)),h.match_length>=ca)if(t=ra._tr_tally(h,h.strstart-h.match_start,h.match_length-ca),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=ca){h.match_length--;do h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ca-1])&h.hash_mask,r=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],
h.head[h.ins_h]=h.strstart;while(0!==--h.match_length);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else t=ra._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(t&&(N(h,!1),0===h.strm.avail_out))return G}return h.insert=h.strstart<ca-1?h.strstart:ca-1,l===W?(N(h,!0),0===h.strm.avail_out?qa:Ha):h.last_lit&&(N(h,!1),0===h.strm.avail_out)?G:Da}function U(h,l){for(var r,t,q;;){if(h.lookahead<
Q){if(z(h),h.lookahead<Q&&l===I)return G;if(0===h.lookahead)break}if(r=0,h.lookahead>=ca&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ca-1])&h.hash_mask,r=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=ca-1,0!==r&&h.prev_length<h.max_lazy_match&&h.strstart-r<=h.w_size-Q&&(h.match_length=e(h,r),5>=h.match_length&&(h.strategy===jb||h.match_length===ca&&4096<h.strstart-h.match_start)&&(h.match_length=
ca-1)),h.prev_length>=ca&&h.match_length<=h.prev_length){q=h.strstart+h.lookahead-ca;t=ra._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-ca);h.lookahead-=h.prev_length-1;h.prev_length-=2;do++h.strstart<=q&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ca-1])&h.hash_mask,r=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(0!==--h.prev_length);if(h.match_available=0,h.match_length=ca-1,h.strstart++,t&&(N(h,!1),0===h.strm.avail_out))return G}else if(h.match_available){if(t=
ra._tr_tally(h,0,h.window[h.strstart-1]),t&&N(h,!1),h.strstart++,h.lookahead--,0===h.strm.avail_out)return G}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(ra._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<ca-1?h.strstart:ca-1,l===W?(N(h,!0),0===h.strm.avail_out?qa:Ha):h.last_lit&&(N(h,!1),0===h.strm.avail_out)?G:Da}function fa(e,h,l,t,q){this.good_length=e;this.max_lazy=h;this.nice_length=l;this.max_chain=t;this.func=q}function P(){this.strm=
null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=kb;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=
this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new ea.Buf16(2*Aa);this.dyn_dtree=new ea.Buf16(2*(2*Pb+1));this.bl_tree=new ea.Buf16(2*(2*w+1));E(this.dyn_ltree);E(this.dyn_dtree);E(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new ea.Buf16(Va+1);this.heap=new ea.Buf16(2*Wa+1);E(this.heap);this.heap_max=this.heap_len=0;this.depth=new ea.Buf16(2*Wa+1);E(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=
this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function ha(e){var h;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=mb,h=e.state,h.pending=0,h.pending_out=0,0>h.wrap&&(h.wrap=-h.wrap),h.status=h.wrap?T:K,e.adler=2===h.wrap?0:1,h.last_flush=I,ra._tr_init(h),ba):B(e,F)}function Ga(e){var h=ha(e);h===ba&&(e=e.state,e.window_size=2*e.w_size,E(e.head),e.max_lazy_match=S[e.level].max_lazy,e.good_match=S[e.level].good_length,e.nice_match=S[e.level].nice_length,e.max_chain_length=S[e.level].max_chain,
e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ca-1,e.match_available=0,e.ins_h=0);return h}function nb(e,h,l,t,q,u){if(!e)return F;var r=1;if(h===H&&(h=6),0>t?(r=0,t=-t):15<t&&(r=2,t-=16),1>q||q>Oa||l!==kb||8>t||15<t||0>h||9<h||0>u||u>Na)return B(e,F);8===t&&(t=9);var C=new P;return e.state=C,C.strm=e,C.wrap=r,C.gzhead=null,C.w_bits=t,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=q+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+
ca-1)/ca),C.window=new ea.Buf8(2*C.w_size),C.head=new ea.Buf16(C.hash_size),C.prev=new ea.Buf16(C.w_size),C.lit_bufsize=1<<q+6,C.pending_buf_size=4*C.lit_bufsize,C.pending_buf=new ea.Buf8(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=h,C.strategy=u,C.method=l,Ga(e)}var ea=q("../utils/common"),ra=q("./trees"),Y=q("./adler32"),la=q("./crc32"),Ka=q("./messages"),I=0,W=4,ba=0,F=-2,H=-1,jb=1,Na=4,mb=2,kb=8,Oa=9,Wa=286,Pb=30,w=19,Aa=2*Wa+1,Va=15,ca=3,ia=258,Q=ia+ca+1,T=42,
K=113,G=1,Da=2,qa=3,Ha=4;var S=[new fa(0,0,0,0,function(e,h){var l=65535;for(l>e.pending_buf_size-5&&(l=e.pending_buf_size-5);;){if(1>=e.lookahead){if(z(e),0===e.lookahead&&h===I)return G;if(0===e.lookahead)break}e.strstart+=e.lookahead;e.lookahead=0;var r=e.block_start+l;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,N(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-Q&&(N(e,!1),0===e.strm.avail_out))return G}return e.insert=0,h===W?(N(e,!0),0===e.strm.avail_out?
qa:Ha):(e.strstart>e.block_start&&N(e,!1),G)}),new fa(4,4,8,4,h),new fa(4,5,16,8,h),new fa(4,6,32,32,h),new fa(4,4,16,16,U),new fa(8,16,32,32,U),new fa(8,16,128,128,U),new fa(8,32,128,256,U),new fa(32,128,258,1024,U),new fa(32,258,258,4096,U)];y.deflateInit=function(e,h){return nb(e,h,kb,15,8,0)};y.deflateInit2=nb;y.deflateReset=Ga;y.deflateResetKeep=ha;y.deflateSetHeader=function(e,h){return e&&e.state?2!==e.state.wrap?F:(e.state.gzhead=h,ba):F};y.deflate=function(e,h){var r,t;if(!e||!e.state||5<
h||0>h)return e?B(e,F):F;if(t=e.state,!e.output||!e.input&&0!==e.avail_in||666===t.status&&h!==W)return B(e,0===e.avail_out?-5:F);if(t.strm=e,r=t.last_flush,t.last_flush=h,t.status===T)if(2===t.wrap)e.adler=0,u(t,31),u(t,139),u(t,8),t.gzhead?(u(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),u(t,255&t.gzhead.time),u(t,t.gzhead.time>>8&255),u(t,t.gzhead.time>>16&255),u(t,t.gzhead.time>>24&255),u(t,9===t.level?2:2<=t.strategy||2>t.level?4:
0),u(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(u(t,255&t.gzhead.extra.length),u(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=la(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69):(u(t,0),u(t,0),u(t,0),u(t,0),u(t,0),u(t,9===t.level?2:2<=t.strategy||2>t.level?4:0),u(t,3),t.status=K);else{var q=kb+(t.w_bits-8<<4)<<8;q|=(2<=t.strategy||2>t.level?0:6>t.level?1:6===t.level?2:3)<<6;0!==t.strstart&&(q|=32);t.status=K;l(t,q+(31-q%31));0!==t.strstart&&(l(t,e.adler>>>16),
l(t,65535&e.adler));e.adler=1}if(69===t.status)if(t.gzhead.extra){for(q=t.pending;t.gzindex<(65535&t.gzhead.extra.length)&&(t.pending!==t.pending_buf_size||(t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q)),x(e),q=t.pending,t.pending!==t.pending_buf_size));)u(t,255&t.gzhead.extra[t.gzindex]),t.gzindex++;t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q));t.gzindex===t.gzhead.extra.length&&(t.gzindex=0,t.status=73)}else t.status=73;if(73===t.status)if(t.gzhead.name){q=
t.pending;do{if(t.pending===t.pending_buf_size&&(t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q)),x(e),q=t.pending,t.pending===t.pending_buf_size)){var w=1;break}w=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0;u(t,w)}while(0!==w);t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q));0===w&&(t.gzindex=0,t.status=91)}else t.status=91;if(91===t.status)if(t.gzhead.comment){q=t.pending;do{if(t.pending===t.pending_buf_size&&
(t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q)),x(e),q=t.pending,t.pending===t.pending_buf_size)){w=1;break}w=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0;u(t,w)}while(0!==w);t.gzhead.hcrc&&t.pending>q&&(e.adler=la(e.adler,t.pending_buf,t.pending-q,q));0===w&&(t.status=103)}else t.status=103;if(103===t.status&&(t.gzhead.hcrc?(t.pending+2>t.pending_buf_size&&x(e),t.pending+2<=t.pending_buf_size&&(u(t,255&e.adler),u(t,e.adler>>8&255),
e.adler=0,t.status=K)):t.status=K),0!==t.pending){if(x(e),0===e.avail_out)return t.last_flush=-1,ba}else if(0===e.avail_in&&(h<<1)-(4<h?9:0)<=(r<<1)-(4<r?9:0)&&h!==W)return B(e,-5);if(666===t.status&&0!==e.avail_in)return B(e,-5);if(0!==e.avail_in||0!==t.lookahead||h!==I&&666!==t.status){if(2===t.strategy)a:{for(var v;;){if(0===t.lookahead&&(z(t),0===t.lookahead)){if(h===I){var y=G;break a}break}if(t.match_length=0,v=ra._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,v&&(N(t,!1),0===
t.strm.avail_out)){y=G;break a}}y=(t.insert=0,h===W?(N(t,!0),0===t.strm.avail_out?qa:Ha):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?G:Da)}else if(3===t.strategy)a:{var H,U;for(v=t.window;;){if(t.lookahead<=ia){if(z(t),t.lookahead<=ia&&h===I){y=G;break a}if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ca&&0<t.strstart&&(U=t.strstart-1,H=v[U],H===v[++U]&&H===v[++U]&&H===v[++U])){for(r=t.strstart+ia;H===v[++U]&&H===v[++U]&&H===v[++U]&&H===v[++U]&&H===v[++U]&&H===v[++U]&&H===v[++U]&&H===v[++U]&&
U<r;);t.match_length=ia-(r-U);t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ca?(y=ra._tr_tally(t,1,t.match_length-ca),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(y=ra._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),y&&(N(t,!1),0===t.strm.avail_out)){y=G;break a}}y=(t.insert=0,h===W?(N(t,!0),0===t.strm.avail_out?qa:Ha):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?G:Da)}else y=S[t.level].func(t,h);if(y!==qa&&y!==Ha||(t.status=
666),y===G||y===qa)return 0===e.avail_out&&(t.last_flush=-1),ba;if(y===Da&&(1===h?ra._tr_align(t):5!==h&&(ra._tr_stored_block(t,0,0,!1),3===h&&(E(t.head),0===t.lookahead&&(t.strstart=0,t.block_start=0,t.insert=0))),x(e),0===e.avail_out))return t.last_flush=-1,ba}return h!==W?ba:0>=t.wrap?1:(2===t.wrap?(u(t,255&e.adler),u(t,e.adler>>8&255),u(t,e.adler>>16&255),u(t,e.adler>>24&255),u(t,255&e.total_in),u(t,e.total_in>>8&255),u(t,e.total_in>>16&255),u(t,e.total_in>>24&255)):(l(t,e.adler>>>16),l(t,65535&
e.adler)),x(e),0<t.wrap&&(t.wrap=-t.wrap),0!==t.pending?ba:1)};y.deflateEnd=function(e){var h;return e&&e.state?(h=e.state.status,h!==T&&69!==h&&73!==h&&91!==h&&103!==h&&h!==K&&666!==h?B(e,F):(e.state=null,h===K?B(e,-3):ba)):F};y.deflateSetDictionary=function(e,h){var l,t,r;var q=h.length;if(!e||!e.state||(l=e.state,t=l.wrap,2===t||1===t&&l.status!==T||l.lookahead))return F;1===t&&(e.adler=Y(e.adler,h,q,0));l.wrap=0;q>=l.w_size&&(0===t&&(E(l.head),l.strstart=0,l.block_start=0,l.insert=0),r=new ea.Buf8(l.w_size),
ea.arraySet(r,h,q-l.w_size,l.w_size,0),h=r,q=l.w_size);r=e.avail_in;var u=e.next_in;var w=e.input;e.avail_in=q;e.next_in=0;e.input=h;for(z(l);l.lookahead>=ca;){h=l.strstart;q=l.lookahead-(ca-1);do l.ins_h=(l.ins_h<<l.hash_shift^l.window[h+ca-1])&l.hash_mask,l.prev[h&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=h,h++;while(--q);l.strstart=h;l.lookahead=ca-1;z(l)}return l.strstart+=l.lookahead,l.block_start=l.strstart,l.insert=l.lookahead,l.lookahead=0,l.match_length=l.prev_length=ca-1,l.match_available=
0,e.next_in=u,e.input=w,e.avail_in=r,l.wrap=t,ba};y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(q,v,y){v.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(q,v,y){v.exports=function(q,v){var x,y,u;var l=q.state;var e=q.next_in;var z=q.input;var h=e+(q.avail_in-5);var B=q.next_out;var E=q.output;
v=B-(v-q.avail_out);var P=B+(q.avail_out-257);var ha=l.dmax;var Ga=l.wsize;var nb=l.whave;var ea=l.wnext;var ra=l.window;var Y=l.hold;var la=l.bits;var Ka=l.lencode;var I=l.distcode;var W=(1<<l.lenbits)-1;var ba=(1<<l.distbits)-1;a:do{15>la&&(Y+=z[e++]<<la,la+=8,Y+=z[e++]<<la,la+=8);var F=Ka[Y&W];b:for(;;){if(x=F>>>24,Y>>>=x,la-=x,x=F>>>16&255,0===x)E[B++]=65535&F;else{if(!(16&x)){if(0===(64&x)){F=Ka[(65535&F)+(Y&(1<<x)-1)];continue b}if(32&x){l.mode=12;break a}q.msg="invalid literal/length code";
l.mode=30;break a}var H=65535&F;(x&=15)&&(la<x&&(Y+=z[e++]<<la,la+=8),H+=Y&(1<<x)-1,Y>>>=x,la-=x);15>la&&(Y+=z[e++]<<la,la+=8,Y+=z[e++]<<la,la+=8);F=I[Y&ba];c:for(;;){if(x=F>>>24,Y>>>=x,la-=x,x=F>>>16&255,!(16&x)){if(0===(64&x)){F=I[(65535&F)+(Y&(1<<x)-1)];continue c}q.msg="invalid distance code";l.mode=30;break a}if(y=65535&F,x&=15,la<x&&(Y+=z[e++]<<la,la+=8,la<x&&(Y+=z[e++]<<la,la+=8)),y+=Y&(1<<x)-1,y>ha){q.msg="invalid distance too far back";l.mode=30;break a}if(Y>>>=x,la-=x,x=B-v,y>x){if(x=y-
x,x>nb&&l.sane){q.msg="invalid distance too far back";l.mode=30;break a}if(F=0,u=ra,0===ea){if(F+=Ga-x,x<H){H-=x;do E[B++]=ra[F++];while(--x);F=B-y;u=E}}else if(ea<x){if(F+=Ga+ea-x,x-=ea,x<H){H-=x;do E[B++]=ra[F++];while(--x);if(F=0,ea<H){x=ea;H-=x;do E[B++]=ra[F++];while(--x);F=B-y;u=E}}}else if(F+=ea-x,x<H){H-=x;do E[B++]=ra[F++];while(--x);F=B-y;u=E}for(;2<H;)E[B++]=u[F++],E[B++]=u[F++],E[B++]=u[F++],H-=3;H&&(E[B++]=u[F++],1<H&&(E[B++]=u[F++]))}else{F=B-y;do E[B++]=E[F++],E[B++]=E[F++],E[B++]=
E[F++],H-=3;while(2<H);H&&(E[B++]=E[F++],1<H&&(E[B++]=E[F++]))}break}}break}}while(e<h&&B<P);H=la>>3;e-=H;la-=H<<3;q.next_in=e;q.next_out=B;q.avail_in=e<h?5+(h-e):5-(e-h);q.avail_out=B<P?257+(P-B):257-(B-P);l.hold=Y&(1<<la)-1;l.bits=la}},{}],11:[function(q,v,y){function B(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function E(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=
0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new U.Buf16(320);this.work=new U.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function x(e){var h;return e&&e.state?(h=e.state,e.total_in=e.total_out=h.total=0,e.msg="",h.wrap&&(e.adler=1&h.wrap),h.mode=ra,h.last=0,h.havedict=0,h.dmax=32768,h.head=null,h.hold=0,h.bits=0,
h.lencode=h.lendyn=new U.Buf32(Y),h.distcode=h.distdyn=new U.Buf32(la),h.sane=1,h.back=-1,nb):ea}function N(e){var h;return e&&e.state?(h=e.state,h.wsize=0,h.whave=0,h.wnext=0,x(e)):ea}function u(e,h){var l,q;return e&&e.state?(q=e.state,0>h?(l=0,h=-h):(l=(h>>4)+1,48>h&&(h&=15)),h&&(8>h||15<h)?ea:(null!==q.window&&q.wbits!==h&&(q.window=null),q.wrap=l,q.wbits=h,N(e))):ea}function l(e,h){var l,q;return e?(q=new E,e.state=q,q.window=null,l=u(e,h),l!==nb&&(e.state=null),l):ea}function e(e,h,l,q){var u;
e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new U.Buf8(e.wsize)),q>=e.wsize?(U.arraySet(e.window,h,l-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(u=e.wsize-e.wnext,u>q&&(u=q),U.arraySet(e.window,h,l-q,u,e.wnext),q-=u,q?(U.arraySet(e.window,h,l-q,q,0),e.wnext=q,e.whave=e.wsize):(e.wnext+=u,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=u))),0}var z,h,U=q("../utils/common"),fa=q("./adler32"),P=q("./crc32"),ha=q("./inffast"),Ga=q("./inftrees"),nb=0,
ea=-2,ra=1,Y=852,la=592,Ka=!0;y.inflateReset=N;y.inflateReset2=u;y.inflateResetKeep=x;y.inflateInit=function(e){return l(e,15)};y.inflateInit2=l;y.inflate=function(l,q){var u,v,x,y,E,I,N,W=0,Y=new U.Buf8(4),la=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!l||!l.state||!l.output||!l.input&&0!==l.avail_in)return ea;var w=l.state;12===w.mode&&(w.mode=13);var Aa=l.next_out;var Va=l.output;var ca=l.avail_out;var ia=l.next_in;var Q=l.input;var T=l.avail_in;var K=w.hold;var G=w.bits;var Da=T;var qa=
ca;var Ha=nb;a:for(;;)switch(w.mode){case ra:if(0===w.wrap){w.mode=13;break}for(;16>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(2&w.wrap&&35615===K){w.check=0;Y[0]=255&K;Y[1]=K>>>8&255;w.check=P(w.check,Y,2,0);G=K=0;w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&K)<<8)+(K>>8))%31){l.msg="incorrect header check";w.mode=30;break}if(8!==(15&K)){l.msg="unknown compression method";w.mode=30;break}if(K>>>=4,G-=4,I=(15&K)+8,0===w.wbits)w.wbits=I;else if(I>w.wbits){l.msg="invalid window size";
w.mode=30;break}w.dmax=1<<I;l.adler=w.check=1;w.mode=512&K?10:12;G=K=0;break;case 2:for(;16>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(w.flags=K,8!==(255&w.flags)){l.msg="unknown compression method";w.mode=30;break}if(57344&w.flags){l.msg="unknown header flags set";w.mode=30;break}w.head&&(w.head.text=K>>8&1);512&w.flags&&(Y[0]=255&K,Y[1]=K>>>8&255,w.check=P(w.check,Y,2,0));G=K=0;w.mode=3;case 3:for(;32>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.head&&(w.head.time=K);512&w.flags&&(Y[0]=255&
K,Y[1]=K>>>8&255,Y[2]=K>>>16&255,Y[3]=K>>>24&255,w.check=P(w.check,Y,4,0));G=K=0;w.mode=4;case 4:for(;16>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.head&&(w.head.xflags=255&K,w.head.os=K>>8);512&w.flags&&(Y[0]=255&K,Y[1]=K>>>8&255,w.check=P(w.check,Y,2,0));G=K=0;w.mode=5;case 5:if(1024&w.flags){for(;16>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.length=K;w.head&&(w.head.extra_len=K);512&w.flags&&(Y[0]=255&K,Y[1]=K>>>8&255,w.check=P(w.check,Y,2,0));G=K=0}else w.head&&(w.head.extra=null);w.mode=
6;case 6:if(1024&w.flags&&(u=w.length,u>T&&(u=T),u&&(w.head&&(I=w.head.extra_len-w.length,w.head.extra||(w.head.extra=Array(w.head.extra_len)),U.arraySet(w.head.extra,Q,ia,u,I)),512&w.flags&&(w.check=P(w.check,Q,u,ia)),T-=u,ia+=u,w.length-=u),w.length))break a;w.length=0;w.mode=7;case 7:if(2048&w.flags){if(0===T)break a;u=0;do I=Q[ia+u++],w.head&&I&&65536>w.length&&(w.head.name+=String.fromCharCode(I));while(I&&u<T);if(512&w.flags&&(w.check=P(w.check,Q,u,ia)),T-=u,ia+=u,I)break a}else w.head&&(w.head.name=
null);w.length=0;w.mode=8;case 8:if(4096&w.flags){if(0===T)break a;u=0;do I=Q[ia+u++],w.head&&I&&65536>w.length&&(w.head.comment+=String.fromCharCode(I));while(I&&u<T);if(512&w.flags&&(w.check=P(w.check,Q,u,ia)),T-=u,ia+=u,I)break a}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;16>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(K!==(65535&w.check)){l.msg="header crc mismatch";w.mode=30;break}G=K=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);l.adler=w.check=0;w.mode=
12;break;case 10:for(;32>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}l.adler=w.check=B(K);G=K=0;w.mode=11;case 11:if(0===w.havedict)return l.next_out=Aa,l.avail_out=ca,l.next_in=ia,l.avail_in=T,w.hold=K,w.bits=G,2;l.adler=w.check=1;w.mode=12;case 12:if(5===q||6===q)break a;case 13:if(w.last){K>>>=7&G;G-=7&G;w.mode=27;break}for(;3>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}switch(w.last=1&K,K>>>=1,--G,3&K){case 0:w.mode=14;break;case 1:var S=w;if(Ka){z=new U.Buf32(512);h=new U.Buf32(32);for(x=0;144>
x;)S.lens[x++]=8;for(;256>x;)S.lens[x++]=9;for(;280>x;)S.lens[x++]=7;for(;288>x;)S.lens[x++]=8;Ga(1,S.lens,0,288,z,0,S.work,{bits:9});for(x=0;32>x;)S.lens[x++]=5;Ga(2,S.lens,0,32,h,0,S.work,{bits:5});Ka=!1}S.lencode=z;S.lenbits=9;S.distcode=h;S.distbits=5;if(w.mode=20,6===q){K>>>=2;G-=2;break a}break;case 2:w.mode=17;break;case 3:l.msg="invalid block type",w.mode=30}K>>>=2;G-=2;break;case 14:K>>>=7&G;for(G-=7&G;32>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if((65535&K)!==(K>>>16^65535)){l.msg="invalid stored block lengths";
w.mode=30;break}if(w.length=65535&K,K=0,G=0,w.mode=15,6===q)break a;case 15:w.mode=16;case 16:if(u=w.length){if(u>T&&(u=T),u>ca&&(u=ca),0===u)break a;U.arraySet(Va,Q,ia,u,Aa);T-=u;ia+=u;ca-=u;Aa+=u;w.length-=u;break}w.mode=12;break;case 17:for(;14>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(w.nlen=(31&K)+257,K>>>=5,G-=5,w.ndist=(31&K)+1,K>>>=5,G-=5,w.ncode=(15&K)+4,K>>>=4,G-=4,286<w.nlen||30<w.ndist){l.msg="too many length or distance symbols";w.mode=30;break}w.have=0;w.mode=18;case 18:for(;w.have<
w.ncode;){for(;3>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.lens[la[w.have++]]=7&K;K>>>=3;G-=3}for(;19>w.have;)w.lens[la[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,N={bits:w.lenbits},Ha=Ga(0,w.lens,0,19,w.lencode,0,w.work,N),w.lenbits=N.bits,Ha){l.msg="invalid code lengths set";w.mode=30;break}w.have=0;w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;W=w.lencode[K&(1<<w.lenbits)-1],y=W>>>24,S=65535&W,!(y<=G);){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(16>S)K>>>=y,G-=y,w.lens[w.have++]=
S;else{if(16===S){for(x=y+2;G<x;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(K>>>=y,G-=y,0===w.have){l.msg="invalid bit length repeat";w.mode=30;break}I=w.lens[w.have-1];u=3+(3&K);K>>>=2;G-=2}else if(17===S){for(x=y+3;G<x;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}K>>>=y;G-=y;I=0;u=3+(7&K);K>>>=3;G-=3}else{for(x=y+7;G<x;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}K>>>=y;G-=y;I=0;u=11+(127&K);K>>>=7;G-=7}if(w.have+u>w.nlen+w.ndist){l.msg="invalid bit length repeat";w.mode=30;break}for(;u--;)w.lens[w.have++]=
I}}if(30===w.mode)break;if(0===w.lens[256]){l.msg="invalid code -- missing end-of-block";w.mode=30;break}if(w.lenbits=9,N={bits:w.lenbits},Ha=Ga(1,w.lens,0,w.nlen,w.lencode,0,w.work,N),w.lenbits=N.bits,Ha){l.msg="invalid literal/lengths set";w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,N={bits:w.distbits},Ha=Ga(2,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,N),w.distbits=N.bits,Ha){l.msg="invalid distances set";w.mode=30;break}if(w.mode=20,6===q)break a;case 20:w.mode=21;case 21:if(6<=T&&258<=
ca){l.next_out=Aa;l.avail_out=ca;l.next_in=ia;l.avail_in=T;w.hold=K;w.bits=G;ha(l,qa);Aa=l.next_out;Va=l.output;ca=l.avail_out;ia=l.next_in;Q=l.input;T=l.avail_in;K=w.hold;G=w.bits;12===w.mode&&(w.back=-1);break}for(w.back=0;W=w.lencode[K&(1<<w.lenbits)-1],y=W>>>24,x=W>>>16&255,S=65535&W,!(y<=G);){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(x&&0===(240&x)){var r=y;var La=x;for(E=S;W=w.lencode[E+((K&(1<<r+La)-1)>>r)],y=W>>>24,x=W>>>16&255,S=65535&W,!(r+y<=G);){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=
8}K>>>=r;G-=r;w.back+=r}if(K>>>=y,G-=y,w.back+=y,w.length=S,0===x){w.mode=26;break}if(32&x){w.back=-1;w.mode=12;break}if(64&x){l.msg="invalid literal/length code";w.mode=30;break}w.extra=15&x;w.mode=22;case 22:if(w.extra){for(x=w.extra;G<x;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.length+=K&(1<<w.extra)-1;K>>>=w.extra;G-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=23;case 23:for(;W=w.distcode[K&(1<<w.distbits)-1],y=W>>>24,x=W>>>16&255,S=65535&W,!(y<=G);){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=
8}if(0===(240&x)){r=y;La=x;for(E=S;W=w.distcode[E+((K&(1<<r+La)-1)>>r)],y=W>>>24,x=W>>>16&255,S=65535&W,!(r+y<=G);){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}K>>>=r;G-=r;w.back+=r}if(K>>>=y,G-=y,w.back+=y,64&x){l.msg="invalid distance code";w.mode=30;break}w.offset=S;w.extra=15&x;w.mode=24;case 24:if(w.extra){for(x=w.extra;G<x;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}w.offset+=K&(1<<w.extra)-1;K>>>=w.extra;G-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){l.msg="invalid distance too far back";w.mode=
30;break}w.mode=25;case 25:if(0===ca)break a;if(u=qa-ca,w.offset>u){if(u=w.offset-u,u>w.whave&&w.sane){l.msg="invalid distance too far back";w.mode=30;break}u>w.wnext?(u-=w.wnext,v=w.wsize-u):v=w.wnext-u;u>w.length&&(u=w.length);x=w.window}else x=Va,v=Aa-w.offset,u=w.length;u>ca&&(u=ca);ca-=u;w.length-=u;do Va[Aa++]=x[v++];while(--u);0===w.length&&(w.mode=21);break;case 26:if(0===ca)break a;Va[Aa++]=w.length;ca--;w.mode=21;break;case 27:if(w.wrap){for(;32>G;){if(0===T)break a;T--;K|=Q[ia++]<<G;G+=
8}if(qa-=ca,l.total_out+=qa,w.total+=qa,qa&&(l.adler=w.check=w.flags?P(w.check,Va,qa,Aa-qa):fa(w.check,Va,qa,Aa-qa)),qa=ca,(w.flags?K:B(K))!==w.check){l.msg="incorrect data check";w.mode=30;break}G=K=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;32>G;){if(0===T)break a;T--;K+=Q[ia++]<<G;G+=8}if(K!==(4294967295&w.total)){l.msg="incorrect length check";w.mode=30;break}G=K=0}w.mode=29;case 29:Ha=1;break a;case 30:Ha=-3;break a;case 31:return-4;default:return ea}return l.next_out=Aa,l.avail_out=ca,l.next_in=
ia,l.avail_in=T,w.hold=K,w.bits=G,(w.wsize||qa!==l.avail_out&&30>w.mode&&(27>w.mode||4!==q))&&e(l,l.output,l.next_out,qa-l.avail_out)?(w.mode=31,-4):(Da-=l.avail_in,qa-=l.avail_out,l.total_in+=Da,l.total_out+=qa,w.total+=qa,w.wrap&&qa&&(l.adler=w.check=w.flags?P(w.check,Va,qa,l.next_out-qa):fa(w.check,Va,qa,l.next_out-qa)),l.data_type=w.bits+(w.last?64:0)+(12===w.mode?128:0)+(20===w.mode||15===w.mode?256:0),(0===Da&&0===qa||4===q)&&Ha===nb&&(Ha=-5),Ha)};y.inflateEnd=function(e){if(!e||!e.state)return ea;
var h=e.state;return h.window&&(h.window=null),e.state=null,nb};y.inflateGetHeader=function(e,h){var l;return e&&e.state?(l=e.state,0===(2&l.wrap)?ea:(l.head=h,h.done=!1,nb)):ea};y.inflateSetDictionary=function(h,l){var q,u,v=l.length;return h&&h.state?(q=h.state,0!==q.wrap&&11!==q.mode?ea:11===q.mode&&(u=1,u=fa(u,l,v,0),u!==q.check)?-3:e(h,l,v,v)?(q.mode=31,-4):(q.havedict=1,nb)):ea};y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,
"./inftrees":12}],12:[function(q,v,y){var B=q("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];v.exports=function(l,e,q,
h,v,y,P,ha){var z,U,ea,fa,Y,la,Ka=ha.bits,I,W,ba,F,H,jb=0,Na,mb=null,kb=0,Oa=new B.Buf16(16);var Wa=new B.Buf16(16);var Pb=null,w=0;for(I=0;15>=I;I++)Oa[I]=0;for(W=0;W<h;W++)Oa[e[q+W]]++;var Aa=Ka;for(ba=15;1<=ba&&0===Oa[ba];ba--);if(Aa>ba&&(Aa=ba),0===ba)return v[y++]=20971520,v[y++]=20971520,ha.bits=1,0;for(Ka=1;Ka<ba&&0===Oa[Ka];Ka++);Aa<Ka&&(Aa=Ka);for(I=z=1;15>=I;I++)if(z<<=1,z-=Oa[I],0>z)return-1;if(0<z&&(0===l||1!==ba))return-1;Wa[1]=0;for(I=1;15>I;I++)Wa[I+1]=Wa[I]+Oa[I];for(W=0;W<h;W++)0!==
e[q+W]&&(P[Wa[e[q+W]]++]=W);if(0===l?(mb=Pb=P,fa=19):1===l?(mb=E,kb-=257,Pb=x,w-=257,fa=256):(mb=N,Pb=u,fa=-1),Na=0,W=0,I=Ka,Wa=y,F=Aa,H=0,ea=-1,jb=1<<Aa,h=jb-1,1===l&&852<jb||2===l&&592<jb)return 1;for(var Va=0;;){Va++;var ca=I-H;P[W]<fa?(Y=0,la=P[W]):P[W]>fa?(Y=Pb[w+P[W]],la=mb[kb+P[W]]):(Y=96,la=0);z=1<<I-H;Ka=U=1<<F;do U-=z,v[Wa+(Na>>H)+U]=ca<<24|Y<<16|la|0;while(0!==U);for(z=1<<I-1;Na&z;)z>>=1;if(0!==z?(Na&=z-1,Na+=z):Na=0,W++,0===--Oa[I]){if(I===ba)break;I=e[q+P[W]]}if(I>Aa&&(Na&h)!==ea){0===
H&&(H=Aa);Wa+=Ka;F=I-H;for(z=1<<F;F+H<ba&&(z-=Oa[F+H],!(0>=z));)F++,z<<=1;if(jb+=1<<F,1===l&&852<jb||2===l&&592<jb)return 1;ea=Na&h;v[ea]=Aa<<24|F<<16|Wa-y|0}}return 0!==Na&&(v[Wa+Na]=I-H<<24|4194304),ha.bits=Aa,0}},{"../utils/common":3}],13:[function(q,v,y){v.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(q,v,y){function B(e){for(var h=e.length;0<=
--h;)e[h]=0}function E(e,h,l,q,r){this.static_tree=e;this.extra_bits=h;this.extra_base=l;this.elems=q;this.max_length=r;this.has_stree=e&&e.length}function x(e,h){this.dyn_tree=e;this.max_code=0;this.stat_desc=h}function N(e,h){e.pending_buf[e.pending++]=255&h;e.pending_buf[e.pending++]=h>>>8&255}function u(e,h,l){e.bi_valid>kb-l?(e.bi_buf|=h<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=h>>kb-e.bi_valid,e.bi_valid+=l-kb):(e.bi_buf|=h<<e.bi_valid&65535,e.bi_valid+=l)}function l(e,h,l){u(e,l[2*h],l[2*h+
1])}function e(e,h){var l=0;do l|=1&e,e>>>=1,l<<=1;while(0<--h);return l>>>1}function z(h,l,q){var r,t=Array(mb+1),u=0;for(r=1;r<=mb;r++)t[r]=u=u+q[r-1]<<1;for(q=0;q<=l;q++)r=h[2*q+1],0!==r&&(h[2*q]=e(t[r]++,r))}function h(e){var h;for(h=0;h<F;h++)e.dyn_ltree[2*h]=0;for(h=0;h<H;h++)e.dyn_dtree[2*h]=0;for(h=0;h<jb;h++)e.bl_tree[2*h]=0;e.dyn_ltree[2*Oa]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0}function U(e){8<e.bi_valid?N(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf);e.bi_buf=
0;e.bi_valid=0}function fa(e,h,l,q){var r=2*h,t=2*l;return e[r]<e[t]||e[r]===e[t]&&q[h]<=q[l]}function P(e,h,l){for(var q=e.heap[l],r=l<<1;r<=e.heap_len&&(r<e.heap_len&&fa(h,e.heap[r+1],e.heap[r],e.depth)&&r++,!fa(h,q,e.heap[r],e.depth));)e.heap[l]=e.heap[r],l=r,r<<=1;e.heap[l]=q}function ha(e,h,r){var q,t,w=0;if(0!==e.last_lit){do{var v=e.pending_buf[e.d_buf+2*w]<<8|e.pending_buf[e.d_buf+2*w+1];var C=e.pending_buf[e.l_buf+w];w++;0===v?l(e,C,h):(q=G[C],l(e,q+ba+1,h),t=Aa[q],0!==t&&(C-=Da[q],u(e,C,
t)),v--,q=256>v?K[v]:K[256+(v>>>7)],l(e,q,r),t=Va[q],0!==t&&(v-=qa[q],u(e,v,t)))}while(w<e.last_lit)}l(e,Oa,h)}function Ga(e,h){var l,q=h.dyn_tree;var r=h.stat_desc.static_tree;var t=h.stat_desc.has_stree,u=h.stat_desc.elems,v=-1;e.heap_len=0;e.heap_max=Na;for(l=0;l<u;l++)0!==q[2*l]?(e.heap[++e.heap_len]=v=l,e.depth[l]=0):q[2*l+1]=0;for(;2>e.heap_len;){var w=e.heap[++e.heap_len]=2>v?++v:0;q[2*w]=1;e.depth[w]=0;e.opt_len--;t&&(e.static_len-=r[2*w+1])}h.max_code=v;for(l=e.heap_len>>1;1<=l;l--)P(e,q,
l);w=u;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,q,1),r=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=r,q[2*w]=q[2*l]+q[2*r],e.depth[w]=(e.depth[l]>=e.depth[r]?e.depth[l]:e.depth[r])+1,q[2*l+1]=q[2*r+1]=w,e.heap[1]=w++,P(e,q,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1];var x,y;l=h.dyn_tree;w=h.max_code;u=h.stat_desc.static_tree;var C=h.stat_desc.has_stree,B=h.stat_desc.extra_bits,E=h.stat_desc.extra_base,F=h.stat_desc.max_length,G=0;for(t=0;t<=mb;t++)e.bl_count[t]=0;l[2*
e.heap[e.heap_max]+1]=0;for(h=e.heap_max+1;h<Na;h++)r=e.heap[h],t=l[2*l[2*r+1]+1]+1,t>F&&(t=F,G++),l[2*r+1]=t,r>w||(e.bl_count[t]++,x=0,r>=E&&(x=B[r-E]),y=l[2*r],e.opt_len+=y*(t+x),C&&(e.static_len+=y*(u[2*r+1]+x)));if(0!==G){do{for(t=F-1;0===e.bl_count[t];)t--;e.bl_count[t]--;e.bl_count[t+1]+=2;e.bl_count[F]--;G-=2}while(0<G);for(t=F;0!==t;t--)for(r=e.bl_count[t];0!==r;)x=e.heap[--h],x>w||(l[2*x+1]!==t&&(e.opt_len+=(t-l[2*x+1])*l[2*x],l[2*x+1]=t),r--)}z(q,v,e.bl_count)}function nb(e,h,l){var r,q=
-1,t=h[1],u=0,v=7,x=4;0===t&&(v=138,x=3);h[2*(l+1)+1]=65535;for(r=0;r<=l;r++){var y=t;t=h[2*(r+1)+1];++u<v&&y===t||(u<x?e.bl_tree[2*y]+=u:0!==y?(y!==q&&e.bl_tree[2*y]++,e.bl_tree[2*Wa]++):10>=u?e.bl_tree[2*Pb]++:e.bl_tree[2*w]++,u=0,q=y,0===t?(v=138,x=3):y===t?(v=6,x=3):(v=7,x=4))}}function ea(e,h,r){var q,t,v=-1,x=h[1],y=0,z=7,C=4;0===x&&(z=138,C=3);for(q=0;q<=r;q++)if(t=x,x=h[2*(q+1)+1],!(++y<z&&t===x)){if(y<C){do l(e,t,e.bl_tree);while(0!==--y)}else 0!==t?(t!==v&&(l(e,t,e.bl_tree),y--),l(e,Wa,
e.bl_tree),u(e,y-3,2)):10>=y?(l(e,Pb,e.bl_tree),u(e,y-3,3)):(l(e,w,e.bl_tree),u(e,y-11,7));y=0;v=t;0===x?(z=138,C=3):t===x?(z=6,C=3):(z=7,C=4)}}function ra(e){var h,l=4093624447;for(h=0;31>=h;h++,l>>>=1)if(1&l&&0!==e.dyn_ltree[2*h])return Ka;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return I;for(h=32;h<ba;h++)if(0!==e.dyn_ltree[2*h])return I;return Ka}function Y(e,h,l,r){u(e,(W<<1)+(r?1:0),3);U(e);N(e,l);N(e,~l);la.arraySet(e.pending_buf,e.window,h,l,e.pending);e.pending+=l}
var la=q("../utils/common"),Ka=0,I=1,W=0,ba=256,F=ba+1+29,H=30,jb=19,Na=2*F+1,mb=15,kb=16,Oa=256,Wa=16,Pb=17,w=18,Aa=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Va=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ca=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ia=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=Array(2*(F+2));B(Q);var T=Array(2*H);B(T);var K=Array(512);B(K);var G=Array(256);B(G);var Da=Array(29);B(Da);var qa=Array(H);B(qa);var Ha,S,r,La=!1;y._tr_init=
function(l){if(!La){var q,u,v,w=Array(mb+1);for(v=u=0;28>v;v++)for(Da[v]=u,q=0;q<1<<Aa[v];q++)G[u++]=v;G[u-1]=v;for(v=u=0;16>v;v++)for(qa[v]=u,q=0;q<1<<Va[v];q++)K[u++]=v;for(u>>=7;v<H;v++)for(qa[v]=u<<7,q=0;q<1<<Va[v]-7;q++)K[256+u++]=v;for(q=0;q<=mb;q++)w[q]=0;for(q=0;143>=q;)Q[2*q+1]=8,q++,w[8]++;for(;255>=q;)Q[2*q+1]=9,q++,w[9]++;for(;279>=q;)Q[2*q+1]=7,q++,w[7]++;for(;287>=q;)Q[2*q+1]=8,q++,w[8]++;z(Q,F+1,w);for(q=0;q<H;q++)T[2*q+1]=5,T[2*q]=e(q,5);Ha=new E(Q,Aa,ba+1,F,mb);S=new E(T,Va,0,H,mb);
r=new E([],ca,0,jb,7);La=!0}l.l_desc=new x(l.dyn_ltree,Ha);l.d_desc=new x(l.dyn_dtree,S);l.bl_desc=new x(l.bl_tree,r);l.bi_buf=0;l.bi_valid=0;h(l)};y._tr_stored_block=Y;y._tr_flush_block=function(e,l,q,r){var t=0;if(0<e.level){2===e.strm.data_type&&(e.strm.data_type=ra(e));Ga(e,e.l_desc);Ga(e,e.d_desc);nb(e,e.dyn_ltree,e.l_desc.max_code);nb(e,e.dyn_dtree,e.d_desc.max_code);Ga(e,e.bl_desc);for(t=jb-1;3<=t&&0===e.bl_tree[2*ia[t]+1];t--);t=(e.opt_len+=3*(t+1)+14,t);var v=e.opt_len+3+7>>>3;var w=e.static_len+
3+7>>>3;w<=v&&(v=w)}else v=w=q+5;if(q+4<=v&&-1!==l)Y(e,l,q,r);else if(4===e.strategy||w===v)u(e,2+(r?1:0),3),ha(e,Q,T);else{u(e,4+(r?1:0),3);l=e.l_desc.max_code+1;q=e.d_desc.max_code+1;t+=1;u(e,l-257,5);u(e,q-1,5);u(e,t-4,4);for(v=0;v<t;v++)u(e,e.bl_tree[2*ia[v]+1],3);ea(e,e.dyn_ltree,l-1);ea(e,e.dyn_dtree,q-1);ha(e,e.dyn_ltree,e.dyn_dtree)}h(e);r&&U(e)};y._tr_tally=function(e,h,l){return e.pending_buf[e.d_buf+2*e.last_lit]=h>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&h,e.pending_buf[e.l_buf+
e.last_lit]=255&l,e.last_lit++,0===h?e.dyn_ltree[2*l]++:(e.matches++,h--,e.dyn_ltree[2*(G[l]+ba+1)]++,e.dyn_dtree[2*(256>h?K[h]:K[256+(h>>>7)])]++),e.last_lit===e.lit_bufsize-1};y._tr_align=function(e){u(e,2,3);l(e,Oa,Q);16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(q,v,y){v.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;
this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(q,v,y){y=q("./lib/utils/common").assign;var B=q("./lib/deflate"),E=q("./lib/inflate");q=q("./lib/zlib/constants");var x={};y(x,B,E,q);v.exports=x},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
var saveAs=saveAs||function(L){if(!("undefined"===typeof L||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var q=L.document.createElementNS("http://www.w3.org/1999/xhtml","a"),v="download"in q,y=/constructor/i.test(L.HTMLElement)||L.safari,B=/CriOS\/[\d]+/.test(navigator.userAgent),E=function(e){(L.setImmediate||L.setTimeout)(function(){throw e;},0)},x=function(e){setTimeout(function(){"string"===typeof e?(L.URL||L.webkitURL||L).revokeObjectURL(e):e.remove()},4E4)},N=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?
new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(e,l,h){h||(e=N(e));var u=this,z="application/octet-stream"===e.type,P=function(){var e=["writestart","progress","write","writeend"];e=[].concat(e);for(var h=e.length;h--;){var l=u["on"+e[h]];if("function"===typeof l)try{l.call(u,u)}catch(ra){E(ra)}}};u.readyState=u.INIT;if(v){var ha=(L.URL||L.webkitURL||L).createObjectURL(e);setTimeout(function(){q.href=ha;q.download=l;var e=new MouseEvent("click");q.dispatchEvent(e);P();x(ha);u.readyState=
u.DONE})}else(function(){if((B||z&&y)&&L.FileReader){var h=new FileReader;h.onloadend=function(){var e=B?h.result:h.result.replace(/^data:[^;]*;/,"data:attachment/file;");L.open(e,"_blank")||(L.location.href=e);u.readyState=u.DONE;P()};h.readAsDataURL(e);u.readyState=u.INIT}else ha||(ha=(L.URL||L.webkitURL||L).createObjectURL(e)),z?L.location.href=ha:L.open(ha,"_blank")||(L.location.href=ha),u.readyState=u.DONE,P(),x(ha)})()},l=u.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(e,
l,h){l=l||e.name||"download";h||(e=N(e));return navigator.msSaveOrOpenBlob(e,l)};l.abort=function(){};l.readyState=l.INIT=0;l.WRITING=1;l.DONE=2;l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null;return function(e,l,h){return new u(e,l||e.name||"download",h)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});"function"==typeof define&&define.__amd&&(define.amd=define.__amd,delete define.__amd);
